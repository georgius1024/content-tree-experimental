import{d as _,E as D,r as k,y as m,A as l,C as f,I as B,u as b,D as y,F,K as I,z as d,S as C,B as x,o as w,e as R,b as $,G as N,H as A}from"./vue-vendor-DSdsonjH.js";import{J as M}from"./ui-BLgiSNLv.js";import{g as S}from"./index-fv_kvGrx.js";const T={class:"flex items-center gap-1 text-sm",role:"navigation","aria-label":"Breadcrumb"},V={class:"flex items-center gap-1"},z={class:"flex items-center gap-1"},E={class:"rounded px-1 py-0.5 hover:bg-gray-50 data-[drag-over=true]:bg-gray-100"},G={class:"text-sm text-gray-700"},L={key:0,class:"text-gray-400"},O=["onDragover","onDragleave","onDrop","data-drag-over"],P={class:"truncate max-w-40 inline-block align-middle"},H={key:0,class:"text-gray-400"},J=_({__name:"GeneralTreeBreadcrumb",props:{items:{},onRootClick:{type:Function},onBreadcrumbDrop:{type:Function},getChildrenCount:{type:Function}},setup(a){const p=a,{t:i}=D(),n=k(null),u=o=>{n.value=o},g=o=>{n.value===o&&(n.value=null)},v=o=>{const c=p.getChildrenCount(o.id);p.onBreadcrumbDrop({newParentId:o.id,newPosition:c}),n.value=null};return(o,c)=>(d(),m("nav",T,[l("ol",V,[l("li",z,[l("div",E,[l("button",{type:"button",class:"inline-flex items-center gap-1 align-middle rounded px-0.5 cursor-pointer hover:bg-gray-50","aria-label":"Root",onClick:c[0]||(c[0]=(...s)=>a.onRootClick&&a.onRootClick(...s))},[B(b(M),{size:16,class:"text-gray-500","aria-hidden":"true"}),l("span",G,y(b(i)("common.root")),1)])]),a.items.length>0?(d(),m("span",L,"/")):f("",!0)]),(d(!0),m(F,null,I(a.items,(s,t)=>(d(),m("li",{key:s.id,class:"flex items-center gap-1"},[l("div",{class:"rounded px-1 py-0 hover:bg-gray-50 data-[drag-over=true]:bg-gray-100 cursor-default",onDragover:C(r=>u(t),["prevent"]),onDragleave:r=>g(t),onDrop:C(r=>v(s),["prevent"]),"data-drag-over":n.value===t?"true":"false"},[x(o.$slots,"item",{item:s,index:t},()=>[l("span",P,y(s.name),1)])],40,O),t<a.items.length-1?(d(),m("span",H,"/")):f("",!0)]))),128))])]))}}),Q=_({__name:"TreeBreadcrumb",props:{forestId:{},path:{}},emits:["breadcrumb-drop","root-click"],setup(a,{emit:p}){const i=a,n=p,u=k([]),g=async()=>{u.value=await S(i.forestId)};w(()=>{g()}),R(()=>[i.forestId,i.path],()=>{g()});const v=$(()=>{const t=i.path.split("/").filter(Boolean).map(e=>Number(e)).filter(e=>Number.isFinite(e)),r=u.value.filter(e=>e.deletedAt===null),h=new Map(r.map(e=>[e.id,e]));return t.map(e=>h.get(e)).filter(e=>!!e)}),o=t=>u.value.filter(r=>r.deletedAt===null).filter(r=>(r.parentId??null)===t).length,c=()=>{n("root-click")},s=t=>{n("breadcrumb-drop",t)};return(t,r)=>(d(),N(J,{items:v.value,"on-root-click":c,"on-breadcrumb-drop":s,"get-children-count":o},{item:A(({item:h,index:e})=>[x(t.$slots,"item",{item:h,index:e})]),_:3},8,["items"]))}});export{Q as _};
