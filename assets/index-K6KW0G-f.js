(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function op(t){const e=Object.create(null);for(const n of t.split(","))e[n]=1;return n=>n in e}const lt={},Wo=[],br=()=>{},Ry=()=>!1,Bu=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),ip=t=>t.startsWith("onUpdate:"),Gt=Object.assign,lp=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},xw=Object.prototype.hasOwnProperty,et=(t,e)=>xw.call(t,e),Oe=Array.isArray,Uo=t=>Vu(t)==="[object Map]",Py=t=>Vu(t)==="[object Set]",Re=t=>typeof t=="function",xt=t=>typeof t=="string",Xr=t=>typeof t=="symbol",ft=t=>t!==null&&typeof t=="object",Dy=t=>(ft(t)||Re(t))&&Re(t.then)&&Re(t.catch),Ly=Object.prototype.toString,Vu=t=>Ly.call(t),kw=t=>Vu(t).slice(8,-1),Fy=t=>Vu(t)==="[object Object]",ap=t=>xt(t)&&t!=="NaN"&&t[0]!=="-"&&""+parseInt(t,10)===t,Vi=op(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Hu=t=>{const e=Object.create(null);return(n=>e[n]||(e[n]=t(n)))},ww=/-\w/g,Jn=Hu(t=>t.replace(ww,e=>e.slice(1).toUpperCase())),Ew=/\B([A-Z])/g,wo=Hu(t=>t.replace(Ew,"-$1").toLowerCase()),ju=Hu(t=>t.charAt(0).toUpperCase()+t.slice(1)),Mc=Hu(t=>t?`on${ju(t)}`:""),Es=(t,e)=>!Object.is(t,e),ba=(t,...e)=>{for(let n=0;n<t.length;n++)t[n](...e)},$y=(t,e,n,r=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:r,value:n})},up=t=>{const e=parseFloat(t);return isNaN(e)?t:e},Sw=t=>{const e=xt(t)?Number(t):NaN;return isNaN(e)?t:e};let Hh;const zu=()=>Hh||(Hh=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Wu(t){if(Oe(t)){const e={};for(let n=0;n<t.length;n++){const r=t[n],s=xt(r)?Aw(r):Wu(r);if(s)for(const o in s)e[o]=s[o]}return e}else if(xt(t)||ft(t))return t}const Cw=/;(?![^(]*\))/g,_w=/:([^]+)/,Tw=/\/\*[^]*?\*\//g;function Aw(t){const e={};return t.replace(Tw,"").split(Cw).forEach(n=>{if(n){const r=n.split(_w);r.length>1&&(e[r[0].trim()]=r[1].trim())}}),e}function Pe(t){let e="";if(xt(t))e=t;else if(Oe(t))for(let n=0;n<t.length;n++){const r=Pe(t[n]);r&&(e+=r+" ")}else if(ft(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}const Iw="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",Ow=op(Iw);function By(t){return!!t||t===""}const Vy=t=>!!(t&&t.__v_isRef===!0),re=t=>xt(t)?t:t==null?"":Oe(t)||ft(t)&&(t.toString===Ly||!Re(t.toString))?Vy(t)?re(t.value):JSON.stringify(t,Hy,2):String(t),Hy=(t,e)=>Vy(e)?Hy(t,e.value):Uo(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((n,[r,s],o)=>(n[Nc(r,o)+" =>"]=s,n),{})}:Py(e)?{[`Set(${e.size})`]:[...e.values()].map(n=>Nc(n))}:Xr(e)?Nc(e):ft(e)&&!Oe(e)&&!Fy(e)?String(e):e,Nc=(t,e="")=>{var n;return Xr(t)?`Symbol(${(n=t.description)!=null?n:e})`:t};let ln;class jy{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ln,!e&&ln&&(this.index=(ln.scopes||(ln.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].pause();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,n;if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].resume();for(e=0,n=this.effects.length;e<n;e++)this.effects[e].resume()}}run(e){if(this._active){const n=ln;try{return ln=this,e()}finally{ln=n}}}on(){++this._on===1&&(this.prevScope=ln,ln=this)}off(){this._on>0&&--this._on===0&&(ln=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function Mw(t){return new jy(t)}function Nw(){return ln}function Rw(t,e=!1){ln&&ln.cleanups.push(t)}let ct;const Rc=new WeakSet;class zy{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ln&&ln.active&&ln.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Rc.has(this)&&(Rc.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Uy(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jh(this),qy(this);const e=ct,n=or;ct=this,or=!0;try{return this.fn()}finally{Ky(this),ct=e,or=n,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)fp(e);this.deps=this.depsTail=void 0,jh(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Rc.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Bd(this)&&this.run()}get dirty(){return Bd(this)}}let Wy=0,Hi,ji;function Uy(t,e=!1){if(t.flags|=8,e){t.next=ji,ji=t;return}t.next=Hi,Hi=t}function cp(){Wy++}function dp(){if(--Wy>0)return;if(ji){let e=ji;for(ji=void 0;e;){const n=e.next;e.next=void 0,e.flags&=-9,e=n}}let t;for(;Hi;){let e=Hi;for(Hi=void 0;e;){const n=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(r){t||(t=r)}e=n}}if(t)throw t}function qy(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function Ky(t){let e,n=t.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),fp(r),Pw(r)):e=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}t.deps=e,t.depsTail=n}function Bd(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(Gy(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function Gy(t){if(t.flags&4&&!(t.flags&16)||(t.flags&=-17,t.globalVersion===ul)||(t.globalVersion=ul,!t.isSSR&&t.flags&128&&(!t.deps&&!t._dirty||!Bd(t))))return;t.flags|=2;const e=t.dep,n=ct,r=or;ct=t,or=!0;try{qy(t);const s=t.fn(t._value);(e.version===0||Es(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(s){throw e.version++,s}finally{ct=n,or=r,Ky(t),t.flags&=-3}}function fp(t,e=!1){const{dep:n,prevSub:r,nextSub:s}=t;if(r&&(r.nextSub=s,t.prevSub=void 0),s&&(s.prevSub=r,t.nextSub=void 0),n.subs===t&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let o=n.computed.deps;o;o=o.nextDep)fp(o,!0)}!e&&!--n.sc&&n.map&&n.map.delete(n.key)}function Pw(t){const{prevDep:e,nextDep:n}=t;e&&(e.nextDep=n,t.prevDep=void 0),n&&(n.prevDep=e,t.nextDep=void 0)}let or=!0;const Yy=[];function Kr(){Yy.push(or),or=!1}function Gr(){const t=Yy.pop();or=t===void 0?!0:t}function jh(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const n=ct;ct=void 0;try{e()}finally{ct=n}}}let ul=0,Dw=class{constructor(e,n){this.sub=e,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}};class Uu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ct||!or||ct===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==ct)n=this.activeLink=new Dw(ct,this),ct.deps?(n.prevDep=ct.depsTail,ct.depsTail.nextDep=n,ct.depsTail=n):ct.deps=ct.depsTail=n,Jy(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=ct.depsTail,n.nextDep=void 0,ct.depsTail.nextDep=n,ct.depsTail=n,ct.deps===n&&(ct.deps=r)}return n}trigger(e){this.version++,ul++,this.notify(e)}notify(e){cp();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{dp()}}}function Jy(t){if(t.dep.sc++,t.sub.flags&4){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let r=e.deps;r;r=r.nextDep)Jy(r)}const n=t.dep.subs;n!==t&&(t.prevSub=n,n&&(n.nextSub=t)),t.dep.subs=t}}const Vd=new WeakMap,co=Symbol(""),Hd=Symbol(""),cl=Symbol("");function un(t,e,n){if(or&&ct){let r=Vd.get(t);r||Vd.set(t,r=new Map);let s=r.get(n);s||(r.set(n,s=new Uu),s.map=r,s.key=n),s.track()}}function Br(t,e,n,r,s,o){const i=Vd.get(t);if(!i){ul++;return}const l=a=>{a&&a.trigger()};if(cp(),e==="clear")i.forEach(l);else{const a=Oe(t),u=a&&ap(n);if(a&&n==="length"){const c=Number(r);i.forEach((d,f)=>{(f==="length"||f===cl||!Xr(f)&&f>=c)&&l(d)})}else switch((n!==void 0||i.has(void 0))&&l(i.get(n)),u&&l(i.get(cl)),e){case"add":a?u&&l(i.get("length")):(l(i.get(co)),Uo(t)&&l(i.get(Hd)));break;case"delete":a||(l(i.get(co)),Uo(t)&&l(i.get(Hd)));break;case"set":Uo(t)&&l(i.get(co));break}}dp()}function Co(t){const e=He(t);return e===t?e:(un(e,"iterate",cl),Kn(t)?e:e.map(Zt))}function qu(t){return un(t=He(t),"iterate",cl),t}const Lw={__proto__:null,[Symbol.iterator](){return Pc(this,Symbol.iterator,Zt)},concat(...t){return Co(this).concat(...t.map(e=>Oe(e)?Co(e):e))},entries(){return Pc(this,"entries",t=>(t[1]=Zt(t[1]),t))},every(t,e){return Tr(this,"every",t,e,void 0,arguments)},filter(t,e){return Tr(this,"filter",t,e,n=>n.map(Zt),arguments)},find(t,e){return Tr(this,"find",t,e,Zt,arguments)},findIndex(t,e){return Tr(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Tr(this,"findLast",t,e,Zt,arguments)},findLastIndex(t,e){return Tr(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Tr(this,"forEach",t,e,void 0,arguments)},includes(...t){return Dc(this,"includes",t)},indexOf(...t){return Dc(this,"indexOf",t)},join(t){return Co(this).join(t)},lastIndexOf(...t){return Dc(this,"lastIndexOf",t)},map(t,e){return Tr(this,"map",t,e,void 0,arguments)},pop(){return wi(this,"pop")},push(...t){return wi(this,"push",t)},reduce(t,...e){return zh(this,"reduce",t,e)},reduceRight(t,...e){return zh(this,"reduceRight",t,e)},shift(){return wi(this,"shift")},some(t,e){return Tr(this,"some",t,e,void 0,arguments)},splice(...t){return wi(this,"splice",t)},toReversed(){return Co(this).toReversed()},toSorted(t){return Co(this).toSorted(t)},toSpliced(...t){return Co(this).toSpliced(...t)},unshift(...t){return wi(this,"unshift",t)},values(){return Pc(this,"values",Zt)}};function Pc(t,e,n){const r=qu(t),s=r[e]();return r!==t&&!Kn(t)&&(s._next=s.next,s.next=()=>{const o=s._next();return o.done||(o.value=n(o.value)),o}),s}const Fw=Array.prototype;function Tr(t,e,n,r,s,o){const i=qu(t),l=i!==t&&!Kn(t),a=i[e];if(a!==Fw[e]){const d=a.apply(t,o);return l?Zt(d):d}let u=n;i!==t&&(l?u=function(d,f){return n.call(this,Zt(d),f,t)}:n.length>2&&(u=function(d,f){return n.call(this,d,f,t)}));const c=a.call(i,u,r);return l&&s?s(c):c}function zh(t,e,n,r){const s=qu(t);let o=n;return s!==t&&(Kn(t)?n.length>3&&(o=function(i,l,a){return n.call(this,i,l,a,t)}):o=function(i,l,a){return n.call(this,i,Zt(l),a,t)}),s[e](o,...r)}function Dc(t,e,n){const r=He(t);un(r,"iterate",cl);const s=r[e](...n);return(s===-1||s===!1)&&mp(n[0])?(n[0]=He(n[0]),r[e](...n)):s}function wi(t,e,n=[]){Kr(),cp();const r=He(t)[e].apply(t,n);return dp(),Gr(),r}const $w=op("__proto__,__v_isRef,__isVue"),Xy=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>t!=="arguments"&&t!=="caller").map(t=>Symbol[t]).filter(Xr));function Bw(t){Xr(t)||(t=String(t));const e=He(this);return un(e,"has",t),e.hasOwnProperty(t)}class Qy{constructor(e=!1,n=!1){this._isReadonly=e,this._isShallow=n}get(e,n,r){if(n==="__v_skip")return e.__v_skip;const s=this._isReadonly,o=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return o;if(n==="__v_raw")return r===(s?o?Yw:nb:o?tb:eb).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(r)?e:void 0;const i=Oe(e);if(!s){let a;if(i&&(a=Lw[n]))return a;if(n==="hasOwnProperty")return Bw}const l=Reflect.get(e,n,rn(e)?e:r);if((Xr(n)?Xy.has(n):$w(n))||(s||un(e,"get",n),o))return l;if(rn(l)){const a=i&&ap(n)?l:l.value;return s&&ft(a)?zd(a):a}return ft(l)?s?zd(l):fi(l):l}}class Zy extends Qy{constructor(e=!1){super(!1,e)}set(e,n,r,s){let o=e[n];if(!this._isShallow){const a=Ns(o);if(!Kn(r)&&!Ns(r)&&(o=He(o),r=He(r)),!Oe(e)&&rn(o)&&!rn(r))return a||(o.value=r),!0}const i=Oe(e)&&ap(n)?Number(n)<e.length:et(e,n),l=Reflect.set(e,n,r,rn(e)?e:s);return e===He(s)&&(i?Es(r,o)&&Br(e,"set",n,r):Br(e,"add",n,r)),l}deleteProperty(e,n){const r=et(e,n);e[n];const s=Reflect.deleteProperty(e,n);return s&&r&&Br(e,"delete",n,void 0),s}has(e,n){const r=Reflect.has(e,n);return(!Xr(n)||!Xy.has(n))&&un(e,"has",n),r}ownKeys(e){return un(e,"iterate",Oe(e)?"length":co),Reflect.ownKeys(e)}}class Vw extends Qy{constructor(e=!1){super(!0,e)}set(e,n){return!0}deleteProperty(e,n){return!0}}const Hw=new Zy,jw=new Vw,zw=new Zy(!0);const jd=t=>t,Gl=t=>Reflect.getPrototypeOf(t);function Ww(t,e,n){return function(...r){const s=this.__v_raw,o=He(s),i=Uo(o),l=t==="entries"||t===Symbol.iterator&&i,a=t==="keys"&&i,u=s[t](...r),c=n?jd:e?Da:Zt;return!e&&un(o,"iterate",a?Hd:co),{next(){const{value:d,done:f}=u.next();return f?{value:d,done:f}:{value:l?[c(d[0]),c(d[1])]:c(d),done:f}},[Symbol.iterator](){return this}}}}function Yl(t){return function(...e){return t==="delete"?!1:t==="clear"?void 0:this}}function Uw(t,e){const n={get(s){const o=this.__v_raw,i=He(o),l=He(s);t||(Es(s,l)&&un(i,"get",s),un(i,"get",l));const{has:a}=Gl(i),u=e?jd:t?Da:Zt;if(a.call(i,s))return u(o.get(s));if(a.call(i,l))return u(o.get(l));o!==i&&o.get(s)},get size(){const s=this.__v_raw;return!t&&un(He(s),"iterate",co),s.size},has(s){const o=this.__v_raw,i=He(o),l=He(s);return t||(Es(s,l)&&un(i,"has",s),un(i,"has",l)),s===l?o.has(s):o.has(s)||o.has(l)},forEach(s,o){const i=this,l=i.__v_raw,a=He(l),u=e?jd:t?Da:Zt;return!t&&un(a,"iterate",co),l.forEach((c,d)=>s.call(o,u(c),u(d),i))}};return Gt(n,t?{add:Yl("add"),set:Yl("set"),delete:Yl("delete"),clear:Yl("clear")}:{add(s){!e&&!Kn(s)&&!Ns(s)&&(s=He(s));const o=He(this);return Gl(o).has.call(o,s)||(o.add(s),Br(o,"add",s,s)),this},set(s,o){!e&&!Kn(o)&&!Ns(o)&&(o=He(o));const i=He(this),{has:l,get:a}=Gl(i);let u=l.call(i,s);u||(s=He(s),u=l.call(i,s));const c=a.call(i,s);return i.set(s,o),u?Es(o,c)&&Br(i,"set",s,o):Br(i,"add",s,o),this},delete(s){const o=He(this),{has:i,get:l}=Gl(o);let a=i.call(o,s);a||(s=He(s),a=i.call(o,s)),l&&l.call(o,s);const u=o.delete(s);return a&&Br(o,"delete",s,void 0),u},clear(){const s=He(this),o=s.size!==0,i=s.clear();return o&&Br(s,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=Ww(s,t,e)}),n}function pp(t,e){const n=Uw(t,e);return(r,s,o)=>s==="__v_isReactive"?!t:s==="__v_isReadonly"?t:s==="__v_raw"?r:Reflect.get(et(n,s)&&s in r?n:r,s,o)}const qw={get:pp(!1,!1)},Kw={get:pp(!1,!0)},Gw={get:pp(!0,!1)};const eb=new WeakMap,tb=new WeakMap,nb=new WeakMap,Yw=new WeakMap;function Jw(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Xw(t){return t.__v_skip||!Object.isExtensible(t)?0:Jw(kw(t))}function fi(t){return Ns(t)?t:hp(t,!1,Hw,qw,eb)}function rb(t){return hp(t,!1,zw,Kw,tb)}function zd(t){return hp(t,!0,jw,Gw,nb)}function hp(t,e,n,r,s){if(!ft(t)||t.__v_raw&&!(e&&t.__v_isReactive))return t;const o=Xw(t);if(o===0)return t;const i=s.get(t);if(i)return i;const l=new Proxy(t,o===2?r:n);return s.set(t,l),l}function qo(t){return Ns(t)?qo(t.__v_raw):!!(t&&t.__v_isReactive)}function Ns(t){return!!(t&&t.__v_isReadonly)}function Kn(t){return!!(t&&t.__v_isShallow)}function mp(t){return t?!!t.__v_raw:!1}function He(t){const e=t&&t.__v_raw;return e?He(e):t}function sb(t){return!et(t,"__v_skip")&&Object.isExtensible(t)&&$y(t,"__v_skip",!0),t}const Zt=t=>ft(t)?fi(t):t,Da=t=>ft(t)?zd(t):t;function rn(t){return t?t.__v_isRef===!0:!1}function H(t){return ob(t,!1)}function pi(t){return ob(t,!0)}function ob(t,e){return rn(t)?t:new Qw(t,e)}class Qw{constructor(e,n){this.dep=new Uu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?e:He(e),this._value=n?e:Zt(e),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(e){const n=this._rawValue,r=this.__v_isShallow||Kn(e)||Ns(e);e=r?e:He(e),Es(e,n)&&(this._rawValue=e,this._value=r?e:Zt(e),this.dep.trigger())}}function Wh(t){t.dep&&t.dep.trigger()}function O(t){return rn(t)?t.value:t}const Zw={get:(t,e,n)=>e==="__v_raw"?t:O(Reflect.get(t,e,n)),set:(t,e,n,r)=>{const s=t[e];return rn(s)&&!rn(n)?(s.value=n,!0):Reflect.set(t,e,n,r)}};function ib(t){return qo(t)?t:new Proxy(t,Zw)}class eE{constructor(e){this.__v_isRef=!0,this._value=void 0;const n=this.dep=new Uu,{get:r,set:s}=e(n.track.bind(n),n.trigger.bind(n));this._get=r,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function tE(t){return new eE(t)}class nE{constructor(e,n,r){this.fn=e,this.setter=n,this._value=void 0,this.dep=new Uu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ul-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&ct!==this)return Uy(this,!0),!0}get value(){const e=this.dep.track();return Gy(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function rE(t,e,n=!1){let r,s;return Re(t)?r=t:(r=t.get,s=t.set),new nE(r,s,n)}const Jl={},La=new WeakMap;let eo;function sE(t,e=!1,n=eo){if(n){let r=La.get(n);r||La.set(n,r=[]),r.push(t)}}function oE(t,e,n=lt){const{immediate:r,deep:s,once:o,scheduler:i,augmentJob:l,call:a}=n,u=x=>s?x:Kn(x)||s===!1||s===0?Vr(x,1):Vr(x);let c,d,f,p,h=!1,m=!1;if(rn(t)?(d=()=>t.value,h=Kn(t)):qo(t)?(d=()=>u(t),h=!0):Oe(t)?(m=!0,h=t.some(x=>qo(x)||Kn(x)),d=()=>t.map(x=>{if(rn(x))return x.value;if(qo(x))return u(x);if(Re(x))return a?a(x,2):x()})):Re(t)?e?d=a?()=>a(t,2):t:d=()=>{if(f){Kr();try{f()}finally{Gr()}}const x=eo;eo=c;try{return a?a(t,3,[p]):t(p)}finally{eo=x}}:d=br,e&&s){const x=d,k=s===!0?1/0:s;d=()=>Vr(x(),k)}const g=Nw(),v=()=>{c.stop(),g&&g.active&&lp(g.effects,c)};if(o&&e){const x=e;e=(...k)=>{x(...k),v()}}let y=m?new Array(t.length).fill(Jl):Jl;const b=x=>{if(!(!(c.flags&1)||!c.dirty&&!x))if(e){const k=c.run();if(s||h||(m?k.some((S,T)=>Es(S,y[T])):Es(k,y))){f&&f();const S=eo;eo=c;try{const T=[k,y===Jl?void 0:m&&y[0]===Jl?[]:y,p];y=k,a?a(e,3,T):e(...T)}finally{eo=S}}}else c.run()};return l&&l(b),c=new zy(d),c.scheduler=i?()=>i(b,!1):b,p=x=>sE(x,!1,c),f=c.onStop=()=>{const x=La.get(c);if(x){if(a)a(x,4);else for(const k of x)k();La.delete(c)}},e?r?b(!0):y=c.run():i?i(b.bind(null,!0),!0):c.run(),v.pause=c.pause.bind(c),v.resume=c.resume.bind(c),v.stop=v,v}function Vr(t,e=1/0,n){if(e<=0||!ft(t)||t.__v_skip||(n=n||new Map,(n.get(t)||0)>=e))return t;if(n.set(t,e),e--,rn(t))Vr(t.value,e,n);else if(Oe(t))for(let r=0;r<t.length;r++)Vr(t[r],e,n);else if(Py(t)||Uo(t))t.forEach(r=>{Vr(r,e,n)});else if(Fy(t)){for(const r in t)Vr(t[r],e,n);for(const r of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,r)&&Vr(t[r],e,n)}return t}function Pl(t,e,n,r){try{return r?t(...r):t()}catch(s){Ku(s,e,n)}}function ir(t,e,n,r){if(Re(t)){const s=Pl(t,e,n,r);return s&&Dy(s)&&s.catch(o=>{Ku(o,e,n)}),s}if(Oe(t)){const s=[];for(let o=0;o<t.length;o++)s.push(ir(t[o],e,n,r));return s}}function Ku(t,e,n,r=!0){const s=e?e.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=e&&e.appContext.config||lt;if(e){let l=e.parent;const a=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const c=l.ec;if(c){for(let d=0;d<c.length;d++)if(c[d](t,a,u)===!1)return}l=l.parent}if(o){Kr(),Pl(o,null,10,[t,a,u]),Gr();return}}iE(t,n,s,r,i)}function iE(t,e,n,r=!0,s=!1){if(s)throw t;console.error(t)}const xn=[];let fr=-1;const Ko=[];let ls=null,Mo=0;const lb=Promise.resolve();let Fa=null;function bt(t){const e=Fa||lb;return t?e.then(this?t.bind(this):t):e}function lE(t){let e=fr+1,n=xn.length;for(;e<n;){const r=e+n>>>1,s=xn[r],o=dl(s);o<t||o===t&&s.flags&2?e=r+1:n=r}return e}function gp(t){if(!(t.flags&1)){const e=dl(t),n=xn[xn.length-1];!n||!(t.flags&2)&&e>=dl(n)?xn.push(t):xn.splice(lE(e),0,t),t.flags|=1,ab()}}function ab(){Fa||(Fa=lb.then(cb))}function aE(t){Oe(t)?Ko.push(...t):ls&&t.id===-1?ls.splice(Mo+1,0,t):t.flags&1||(Ko.push(t),t.flags|=1),ab()}function Uh(t,e,n=fr+1){for(;n<xn.length;n++){const r=xn[n];if(r&&r.flags&2){if(t&&r.id!==t.uid)continue;xn.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function ub(t){if(Ko.length){const e=[...new Set(Ko)].sort((n,r)=>dl(n)-dl(r));if(Ko.length=0,ls){ls.push(...e);return}for(ls=e,Mo=0;Mo<ls.length;Mo++){const n=ls[Mo];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}ls=null,Mo=0}}const dl=t=>t.id==null?t.flags&2?-1:1/0:t.id;function cb(t){try{for(fr=0;fr<xn.length;fr++){const e=xn[fr];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),Pl(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;fr<xn.length;fr++){const e=xn[fr];e&&(e.flags&=-2)}fr=-1,xn.length=0,ub(),Fa=null,(xn.length||Ko.length)&&cb()}}let nn=null,db=null;function $a(t){const e=nn;return nn=t,db=t&&t.type.__scopeId||null,e}function De(t,e=nn,n){if(!e||t._n)return t;const r=(...s)=>{r._d&&Ha(-1);const o=$a(e);let i;try{i=t(...s)}finally{$a(o),r._d&&Ha(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function Ss(t,e){if(nn===null)return t;const n=Xu(nn),r=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[o,i,l,a=lt]=e[s];o&&(Re(o)&&(o={mounted:o,updated:o}),o.deep&&Vr(i),r.push({dir:o,instance:n,value:i,oldValue:void 0,arg:l,modifiers:a}))}return t}function Ws(t,e,n,r){const s=t.dirs,o=e&&e.dirs;for(let i=0;i<s.length;i++){const l=s[i];o&&(l.oldValue=o[i].value);let a=l.dir[r];a&&(Kr(),ir(a,n,8,[t.el,l,t,e]),Gr())}}const fb=Symbol("_vte"),pb=t=>t.__isTeleport,zi=t=>t&&(t.disabled||t.disabled===""),qh=t=>t&&(t.defer||t.defer===""),Kh=t=>typeof SVGElement<"u"&&t instanceof SVGElement,Gh=t=>typeof MathMLElement=="function"&&t instanceof MathMLElement,Wd=(t,e)=>{const n=t&&t.to;return xt(n)?e?e(n):null:n},hb={name:"Teleport",__isTeleport:!0,process(t,e,n,r,s,o,i,l,a,u){const{mc:c,pc:d,pbc:f,o:{insert:p,querySelector:h,createText:m,createComment:g}}=u,v=zi(e.props);let{shapeFlag:y,children:b,dynamicChildren:x}=e;if(t==null){const k=e.el=m(""),S=e.anchor=m("");p(k,n,r),p(S,n,r);const T=(M,P)=>{y&16&&c(b,M,P,s,o,i,l,a)},A=()=>{const M=e.target=Wd(e.props,h),P=mb(M,e,m,p);M&&(i!=="svg"&&Kh(M)?i="svg":i!=="mathml"&&Gh(M)&&(i="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(M),v||(T(M,P),xa(e,!1)))};v&&(T(n,S),xa(e,!0)),qh(e.props)?(e.el.__isMounted=!1,yn(()=>{A(),delete e.el.__isMounted},o)):A()}else{if(qh(e.props)&&t.el.__isMounted===!1){yn(()=>{hb.process(t,e,n,r,s,o,i,l,a,u)},o);return}e.el=t.el,e.targetStart=t.targetStart;const k=e.anchor=t.anchor,S=e.target=t.target,T=e.targetAnchor=t.targetAnchor,A=zi(t.props),M=A?n:S,P=A?k:T;if(i==="svg"||Kh(S)?i="svg":(i==="mathml"||Gh(S))&&(i="mathml"),x?(f(t.dynamicChildren,x,M,s,o,i,l),bp(t,e,!0)):a||d(t,e,M,P,s,o,i,l,!1),v)A?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):Xl(e,n,k,u,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const z=e.target=Wd(e.props,h);z&&Xl(e,z,null,u,0)}else A&&Xl(e,S,T,u,1);xa(e,v)}},remove(t,e,n,{um:r,o:{remove:s}},o){const{shapeFlag:i,children:l,anchor:a,targetStart:u,targetAnchor:c,target:d,props:f}=t;if(d&&(s(u),s(c)),o&&s(a),i&16){const p=o||!zi(f);for(let h=0;h<l.length;h++){const m=l[h];r(m,e,n,p,!!m.dynamicChildren)}}},move:Xl,hydrate:uE};function Xl(t,e,n,{o:{insert:r},m:s},o=2){o===0&&r(t.targetAnchor,e,n);const{el:i,anchor:l,shapeFlag:a,children:u,props:c}=t,d=o===2;if(d&&r(i,e,n),(!d||zi(c))&&a&16)for(let f=0;f<u.length;f++)s(u[f],e,n,2);d&&r(l,e,n)}function uE(t,e,n,r,s,o,{o:{nextSibling:i,parentNode:l,querySelector:a,insert:u,createText:c}},d){function f(m,g,v,y){g.anchor=d(i(m),g,l(m),n,r,s,o),g.targetStart=v,g.targetAnchor=y}const p=e.target=Wd(e.props,a),h=zi(e.props);if(p){const m=p._lpa||p.firstChild;if(e.shapeFlag&16)if(h)f(t,e,m,m&&i(m));else{e.anchor=i(t);let g=m;for(;g;){if(g&&g.nodeType===8){if(g.data==="teleport start anchor")e.targetStart=g;else if(g.data==="teleport anchor"){e.targetAnchor=g,p._lpa=e.targetAnchor&&i(e.targetAnchor);break}}g=i(g)}e.targetAnchor||mb(p,e,c,u),d(m&&i(m),e,p,n,r,s,o)}xa(e,h)}else h&&e.shapeFlag&16&&f(t,e,t,i(t));return e.anchor&&i(e.anchor)}const cE=hb;function xa(t,e){const n=t.ctx;if(n&&n.ut){let r,s;for(e?(r=t.el,s=t.anchor):(r=t.targetStart,s=t.targetAnchor);r&&r!==s;)r.nodeType===1&&r.setAttribute("data-v-owner",n.uid),r=r.nextSibling;n.ut()}}function mb(t,e,n,r){const s=e.targetStart=n(""),o=e.targetAnchor=n("");return s[fb]=o,t&&(r(s,t),r(o,t)),o}const $r=Symbol("_leaveCb"),Ql=Symbol("_enterCb");function dE(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return qe(()=>{t.isMounted=!0}),hi(()=>{t.isUnmounting=!0}),t}const Vn=[Function,Array],gb={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:Vn,onEnter:Vn,onAfterEnter:Vn,onEnterCancelled:Vn,onBeforeLeave:Vn,onLeave:Vn,onAfterLeave:Vn,onLeaveCancelled:Vn,onBeforeAppear:Vn,onAppear:Vn,onAfterAppear:Vn,onAppearCancelled:Vn},vb=t=>{const e=t.subTree;return e.component?vb(e.component):e},fE={name:"BaseTransition",props:gb,setup(t,{slots:e}){const n=ar(),r=dE();return()=>{const s=e.default&&xb(e.default(),!0);if(!s||!s.length)return;const o=yb(s),i=He(t),{mode:l}=i;if(r.isLeaving)return Lc(o);const a=Yh(o);if(!a)return Lc(o);let u=Ud(a,i,r,n,d=>u=d);a.type!==cn&&fl(a,u);let c=n.subTree&&Yh(n.subTree);if(c&&c.type!==cn&&!no(c,a)&&vb(n).type!==cn){let d=Ud(c,i,r,n);if(fl(c,d),l==="out-in"&&a.type!==cn)return r.isLeaving=!0,d.afterLeave=()=>{r.isLeaving=!1,n.job.flags&8||n.update(),delete d.afterLeave,c=void 0},Lc(o);l==="in-out"&&a.type!==cn?d.delayLeave=(f,p,h)=>{const m=bb(r,c);m[String(c.key)]=c,f[$r]=()=>{p(),f[$r]=void 0,delete u.delayedLeave,c=void 0},u.delayedLeave=()=>{h(),delete u.delayedLeave,c=void 0}}:c=void 0}else c&&(c=void 0);return o}}};function yb(t){let e=t[0];if(t.length>1){for(const n of t)if(n.type!==cn){e=n;break}}return e}const pE=fE;function bb(t,e){const{leavingVNodes:n}=t;let r=n.get(e.type);return r||(r=Object.create(null),n.set(e.type,r)),r}function Ud(t,e,n,r,s){const{appear:o,mode:i,persisted:l=!1,onBeforeEnter:a,onEnter:u,onAfterEnter:c,onEnterCancelled:d,onBeforeLeave:f,onLeave:p,onAfterLeave:h,onLeaveCancelled:m,onBeforeAppear:g,onAppear:v,onAfterAppear:y,onAppearCancelled:b}=e,x=String(t.key),k=bb(n,t),S=(M,P)=>{M&&ir(M,r,9,P)},T=(M,P)=>{const z=P[1];S(M,P),Oe(M)?M.every(D=>D.length<=1)&&z():M.length<=1&&z()},A={mode:i,persisted:l,beforeEnter(M){let P=a;if(!n.isMounted)if(o)P=g||a;else return;M[$r]&&M[$r](!0);const z=k[x];z&&no(t,z)&&z.el[$r]&&z.el[$r](),S(P,[M])},enter(M){let P=u,z=c,D=d;if(!n.isMounted)if(o)P=v||u,z=y||c,D=b||d;else return;let W=!1;const ie=M[Ql]=ae=>{W||(W=!0,ae?S(D,[M]):S(z,[M]),A.delayedLeave&&A.delayedLeave(),M[Ql]=void 0)};P?T(P,[M,ie]):ie()},leave(M,P){const z=String(t.key);if(M[Ql]&&M[Ql](!0),n.isUnmounting)return P();S(f,[M]);let D=!1;const W=M[$r]=ie=>{D||(D=!0,P(),ie?S(m,[M]):S(h,[M]),M[$r]=void 0,k[z]===t&&delete k[z])};k[z]=t,p?T(p,[M,W]):W()},clone(M){const P=Ud(M,e,n,r,s);return s&&s(P),P}};return A}function Lc(t){if(Gu(t))return t=wr(t),t.children=null,t}function Yh(t){if(!Gu(t))return pb(t.type)&&t.children?yb(t.children):t;if(t.component)return t.component.subTree;const{shapeFlag:e,children:n}=t;if(n){if(e&16)return n[0];if(e&32&&Re(n.default))return n.default()}}function fl(t,e){t.shapeFlag&6&&t.component?(t.transition=e,fl(t.component.subTree,e)):t.shapeFlag&128?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function xb(t,e=!1,n){let r=[],s=0;for(let o=0;o<t.length;o++){let i=t[o];const l=n==null?i.key:String(n)+String(i.key!=null?i.key:o);i.type===Ye?(i.patchFlag&128&&s++,r=r.concat(xb(i.children,e,l))):(e||i.type!==cn)&&r.push(l!=null?wr(i,{key:l}):i)}if(s>1)for(let o=0;o<r.length;o++)r[o].patchFlag=-2;return r}function xe(t,e){return Re(t)?Gt({name:t.name},e,{setup:t}):t}function hE(){const t=ar();return t?(t.appContext.config.idPrefix||"v")+"-"+t.ids[0]+t.ids[1]++:""}function kb(t){t.ids=[t.ids[0]+t.ids[2]+++"-",0,0]}const Ba=new WeakMap;function Wi(t,e,n,r,s=!1){if(Oe(t)){t.forEach((h,m)=>Wi(h,e&&(Oe(e)?e[m]:e),n,r,s));return}if(Go(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&Wi(t,e,n,r.component.subTree);return}const o=r.shapeFlag&4?Xu(r.component):r.el,i=s?null:o,{i:l,r:a}=t,u=e&&e.r,c=l.refs===lt?l.refs={}:l.refs,d=l.setupState,f=He(d),p=d===lt?Ry:h=>et(f,h);if(u!=null&&u!==a){if(Jh(e),xt(u))c[u]=null,p(u)&&(d[u]=null);else if(rn(u)){u.value=null;const h=e;h.k&&(c[h.k]=null)}}if(Re(a))Pl(a,l,12,[i,c]);else{const h=xt(a),m=rn(a);if(h||m){const g=()=>{if(t.f){const v=h?p(a)?d[a]:c[a]:a.value;if(s)Oe(v)&&lp(v,o);else if(Oe(v))v.includes(o)||v.push(o);else if(h)c[a]=[o],p(a)&&(d[a]=c[a]);else{const y=[o];a.value=y,t.k&&(c[t.k]=y)}}else h?(c[a]=i,p(a)&&(d[a]=i)):m&&(a.value=i,t.k&&(c[t.k]=i))};if(i){const v=()=>{g(),Ba.delete(t)};v.id=-1,Ba.set(t,v),yn(v,n)}else Jh(t),g()}}}function Jh(t){const e=Ba.get(t);e&&(e.flags|=8,Ba.delete(t))}zu().requestIdleCallback;zu().cancelIdleCallback;const Go=t=>!!t.type.__asyncLoader,Gu=t=>t.type.__isKeepAlive;function mE(t,e){wb(t,"a",e)}function gE(t,e){wb(t,"da",e)}function wb(t,e,n=dn){const r=t.__wdc||(t.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return t()});if(Yu(e,r,n),n){let s=n.parent;for(;s&&s.parent;)Gu(s.parent.vnode)&&vE(r,e,n,s),s=s.parent}}function vE(t,e,n,r){const s=Yu(e,t,r,!0);zt(()=>{lp(r[e],s)},n)}function Yu(t,e,n=dn,r=!1){if(n){const s=n[t]||(n[t]=[]),o=e.__weh||(e.__weh=(...i)=>{Kr();const l=Ll(n),a=ir(e,n,t,i);return l(),Gr(),a});return r?s.unshift(o):s.push(o),o}}const Qr=t=>(e,n=dn)=>{(!ml||t==="sp")&&Yu(t,(...r)=>e(...r),n)},Eb=Qr("bm"),qe=Qr("m"),yE=Qr("bu"),bE=Qr("u"),hi=Qr("bum"),zt=Qr("um"),xE=Qr("sp"),kE=Qr("rtg"),wE=Qr("rtc");function EE(t,e=dn){Yu("ec",t,e)}const Sb="components";function Cb(t,e){return Tb(Sb,t,!0,e)||t}const _b=Symbol.for("v-ndc");function Xh(t){return xt(t)?Tb(Sb,t,!1)||t:t||_b}function Tb(t,e,n=!0,r=!1){const s=nn||dn;if(s){const o=s.type;{const l=cS(o,!1);if(l&&(l===e||l===Jn(e)||l===ju(Jn(e))))return o}const i=Qh(s[t]||o[t],e)||Qh(s.appContext[t],e);return!i&&r?o:i}}function Qh(t,e){return t&&(t[e]||t[Jn(e)]||t[ju(Jn(e))])}function Dn(t,e,n,r){let s;const o=n,i=Oe(t);if(i||xt(t)){const l=i&&qo(t);let a=!1,u=!1;l&&(a=!Kn(t),u=Ns(t),t=qu(t)),s=new Array(t.length);for(let c=0,d=t.length;c<d;c++)s[c]=e(a?u?Da(Zt(t[c])):Zt(t[c]):t[c],c,void 0,o)}else if(typeof t=="number"){s=new Array(t);for(let l=0;l<t;l++)s[l]=e(l+1,l,void 0,o)}else if(ft(t))if(t[Symbol.iterator])s=Array.from(t,(l,a)=>e(l,a,void 0,o));else{const l=Object.keys(t);s=new Array(l.length);for(let a=0,u=l.length;a<u;a++){const c=l[a];s[a]=e(t[c],c,a,o)}}else s=[];return s}function Yr(t,e,n={},r,s){if(nn.ce||nn.parent&&Go(nn.parent)&&nn.parent.ce){const u=Object.keys(n).length>0;return e!=="default"&&(n.name=e),J(),Ke(Ye,null,[se("slot",n,r&&r())],u?-2:64)}let o=t[e];o&&o._c&&(o._d=!1),J();const i=o&&Ab(o(n)),l=n.key||i&&i.key,a=Ke(Ye,{key:(l&&!Xr(l)?l:`_${e}`)+(!i&&r?"_fb":"")},i||(r?r():[]),i&&t._===1?64:-2);return!s&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),o&&o._c&&(o._d=!0),a}function Ab(t){return t.some(e=>hl(e)?!(e.type===cn||e.type===Ye&&!Ab(e.children)):!0)?t:null}const qd=t=>t?qb(t)?Xu(t):qd(t.parent):null,Ui=Gt(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qd(t.parent),$root:t=>qd(t.root),$host:t=>t.ce,$emit:t=>t.emit,$options:t=>Ob(t),$forceUpdate:t=>t.f||(t.f=()=>{gp(t.update)}),$nextTick:t=>t.n||(t.n=bt.bind(t.proxy)),$watch:t=>WE.bind(t)}),Fc=(t,e)=>t!==lt&&!t.__isScriptSetup&&et(t,e),SE={get({_:t},e){if(e==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:o,accessCache:i,type:l,appContext:a}=t;let u;if(e[0]!=="$"){const p=i[e];if(p!==void 0)switch(p){case 1:return r[e];case 2:return s[e];case 4:return n[e];case 3:return o[e]}else{if(Fc(r,e))return i[e]=1,r[e];if(s!==lt&&et(s,e))return i[e]=2,s[e];if((u=t.propsOptions[0])&&et(u,e))return i[e]=3,o[e];if(n!==lt&&et(n,e))return i[e]=4,n[e];Kd&&(i[e]=0)}}const c=Ui[e];let d,f;if(c)return e==="$attrs"&&un(t.attrs,"get",""),c(t);if((d=l.__cssModules)&&(d=d[e]))return d;if(n!==lt&&et(n,e))return i[e]=4,n[e];if(f=a.config.globalProperties,et(f,e))return f[e]},set({_:t},e,n){const{data:r,setupState:s,ctx:o}=t;return Fc(s,e)?(s[e]=n,!0):r!==lt&&et(r,e)?(r[e]=n,!0):et(t.props,e)||e[0]==="$"&&e.slice(1)in t?!1:(o[e]=n,!0)},has({_:{data:t,setupState:e,accessCache:n,ctx:r,appContext:s,propsOptions:o,type:i}},l){let a,u;return!!(n[l]||t!==lt&&l[0]!=="$"&&et(t,l)||Fc(e,l)||(a=o[0])&&et(a,l)||et(r,l)||et(Ui,l)||et(s.config.globalProperties,l)||(u=i.__cssModules)&&u[l])},defineProperty(t,e,n){return n.get!=null?t._.accessCache[e]=0:et(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zh(t){return Oe(t)?t.reduce((e,n)=>(e[n]=null,e),{}):t}let Kd=!0;function CE(t){const e=Ob(t),n=t.proxy,r=t.ctx;Kd=!1,e.beforeCreate&&em(e.beforeCreate,t,"bc");const{data:s,computed:o,methods:i,watch:l,provide:a,inject:u,created:c,beforeMount:d,mounted:f,beforeUpdate:p,updated:h,activated:m,deactivated:g,beforeDestroy:v,beforeUnmount:y,destroyed:b,unmounted:x,render:k,renderTracked:S,renderTriggered:T,errorCaptured:A,serverPrefetch:M,expose:P,inheritAttrs:z,components:D,directives:W,filters:ie}=e;if(u&&_E(u,r,null),i)for(const ve in i){const we=i[ve];Re(we)&&(r[ve]=we.bind(n))}if(s){const ve=s.call(n,n);ft(ve)&&(t.data=fi(ve))}if(Kd=!0,o)for(const ve in o){const we=o[ve],Qe=Re(we)?we.bind(n,n):Re(we.get)?we.get.bind(n,n):br,ut=!Re(we)&&Re(we.set)?we.set.bind(n):br,ke=L({get:Qe,set:ut});Object.defineProperty(r,ve,{enumerable:!0,configurable:!0,get:()=>ke.value,set:_e=>ke.value=_e})}if(l)for(const ve in l)Ib(l[ve],r,n,ve);if(a){const ve=Re(a)?a.call(n):a;Reflect.ownKeys(ve).forEach(we=>{Ht(we,ve[we])})}c&&em(c,t,"c");function de(ve,we){Oe(we)?we.forEach(Qe=>ve(Qe.bind(n))):we&&ve(we.bind(n))}if(de(Eb,d),de(qe,f),de(yE,p),de(bE,h),de(mE,m),de(gE,g),de(EE,A),de(wE,S),de(kE,T),de(hi,y),de(zt,x),de(xE,M),Oe(P))if(P.length){const ve=t.exposed||(t.exposed={});P.forEach(we=>{Object.defineProperty(ve,we,{get:()=>n[we],set:Qe=>n[we]=Qe,enumerable:!0})})}else t.exposed||(t.exposed={});k&&t.render===br&&(t.render=k),z!=null&&(t.inheritAttrs=z),D&&(t.components=D),W&&(t.directives=W),M&&kb(t)}function _E(t,e,n=br){Oe(t)&&(t=Gd(t));for(const r in t){const s=t[r];let o;ft(s)?"default"in s?o=tt(s.from||r,s.default,!0):o=tt(s.from||r):o=tt(s),rn(o)?Object.defineProperty(e,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):e[r]=o}}function em(t,e,n){ir(Oe(t)?t.map(r=>r.bind(e.proxy)):t.bind(e.proxy),e,n)}function Ib(t,e,n,r){let s=r.includes(".")?Hb(n,r):()=>n[r];if(xt(t)){const o=e[t];Re(o)&&je(s,o)}else if(Re(t))je(s,t.bind(n));else if(ft(t))if(Oe(t))t.forEach(o=>Ib(o,e,n,r));else{const o=Re(t.handler)?t.handler.bind(n):e[t.handler];Re(o)&&je(s,o,t)}}function Ob(t){const e=t.type,{mixins:n,extends:r}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:i}}=t.appContext,l=o.get(e);let a;return l?a=l:!s.length&&!n&&!r?a=e:(a={},s.length&&s.forEach(u=>Va(a,u,i,!0)),Va(a,e,i)),ft(e)&&o.set(e,a),a}function Va(t,e,n,r=!1){const{mixins:s,extends:o}=e;o&&Va(t,o,n,!0),s&&s.forEach(i=>Va(t,i,n,!0));for(const i in e)if(!(r&&i==="expose")){const l=TE[i]||n&&n[i];t[i]=l?l(t[i],e[i]):e[i]}return t}const TE={data:tm,props:nm,emits:nm,methods:Mi,computed:Mi,beforeCreate:mn,created:mn,beforeMount:mn,mounted:mn,beforeUpdate:mn,updated:mn,beforeDestroy:mn,beforeUnmount:mn,destroyed:mn,unmounted:mn,activated:mn,deactivated:mn,errorCaptured:mn,serverPrefetch:mn,components:Mi,directives:Mi,watch:IE,provide:tm,inject:AE};function tm(t,e){return e?t?function(){return Gt(Re(t)?t.call(this,this):t,Re(e)?e.call(this,this):e)}:e:t}function AE(t,e){return Mi(Gd(t),Gd(e))}function Gd(t){if(Oe(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function mn(t,e){return t?[...new Set([].concat(t,e))]:e}function Mi(t,e){return t?Gt(Object.create(null),t,e):e}function nm(t,e){return t?Oe(t)&&Oe(e)?[...new Set([...t,...e])]:Gt(Object.create(null),Zh(t),Zh(e??{})):e}function IE(t,e){if(!t)return e;if(!e)return t;const n=Gt(Object.create(null),t);for(const r in e)n[r]=mn(t[r],e[r]);return n}function Mb(){return{app:null,config:{isNativeTag:Ry,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let OE=0;function ME(t,e){return function(r,s=null){Re(r)||(r=Gt({},r)),s!=null&&!ft(s)&&(s=null);const o=Mb(),i=new WeakSet,l=[];let a=!1;const u=o.app={_uid:OE++,_component:r,_props:s,_container:null,_context:o,_instance:null,version:fS,get config(){return o.config},set config(c){},use(c,...d){return i.has(c)||(c&&Re(c.install)?(i.add(c),c.install(u,...d)):Re(c)&&(i.add(c),c(u,...d))),u},mixin(c){return o.mixins.includes(c)||o.mixins.push(c),u},component(c,d){return d?(o.components[c]=d,u):o.components[c]},directive(c,d){return d?(o.directives[c]=d,u):o.directives[c]},mount(c,d,f){if(!a){const p=u._ceVNode||se(r,s);return p.appContext=o,f===!0?f="svg":f===!1&&(f=void 0),t(p,c,f),a=!0,u._container=c,c.__vue_app__=u,Xu(p.component)}},onUnmount(c){l.push(c)},unmount(){a&&(ir(l,u._instance,16),t(null,u._container),delete u._container.__vue_app__)},provide(c,d){return o.provides[c]=d,u},runWithContext(c){const d=Yo;Yo=u;try{return c()}finally{Yo=d}}};return u}}let Yo=null;function Ht(t,e){if(dn){let n=dn.provides;const r=dn.parent&&dn.parent.provides;r===n&&(n=dn.provides=Object.create(r)),n[t]=e}}function tt(t,e,n=!1){const r=ar();if(r||Yo){let s=Yo?Yo._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&t in s)return s[t];if(arguments.length>1)return n&&Re(e)?e.call(r&&r.proxy):e}}const Nb={},Rb=()=>Object.create(Nb),Pb=t=>Object.getPrototypeOf(t)===Nb;function NE(t,e,n,r=!1){const s={},o=Rb();t.propsDefaults=Object.create(null),Db(t,e,s,o);for(const i in t.propsOptions[0])i in s||(s[i]=void 0);n?t.props=r?s:rb(s):t.type.props?t.props=s:t.props=o,t.attrs=o}function RE(t,e,n,r){const{props:s,attrs:o,vnode:{patchFlag:i}}=t,l=He(s),[a]=t.propsOptions;let u=!1;if((r||i>0)&&!(i&16)){if(i&8){const c=t.vnode.dynamicProps;for(let d=0;d<c.length;d++){let f=c[d];if(Ju(t.emitsOptions,f))continue;const p=e[f];if(a)if(et(o,f))p!==o[f]&&(o[f]=p,u=!0);else{const h=Jn(f);s[h]=Yd(a,l,h,p,t,!1)}else p!==o[f]&&(o[f]=p,u=!0)}}}else{Db(t,e,s,o)&&(u=!0);let c;for(const d in l)(!e||!et(e,d)&&((c=wo(d))===d||!et(e,c)))&&(a?n&&(n[d]!==void 0||n[c]!==void 0)&&(s[d]=Yd(a,l,d,void 0,t,!0)):delete s[d]);if(o!==l)for(const d in o)(!e||!et(e,d))&&(delete o[d],u=!0)}u&&Br(t.attrs,"set","")}function Db(t,e,n,r){const[s,o]=t.propsOptions;let i=!1,l;if(e)for(let a in e){if(Vi(a))continue;const u=e[a];let c;s&&et(s,c=Jn(a))?!o||!o.includes(c)?n[c]=u:(l||(l={}))[c]=u:Ju(t.emitsOptions,a)||(!(a in r)||u!==r[a])&&(r[a]=u,i=!0)}if(o){const a=He(n),u=l||lt;for(let c=0;c<o.length;c++){const d=o[c];n[d]=Yd(s,a,d,u[d],t,!et(u,d))}}return i}function Yd(t,e,n,r,s,o){const i=t[n];if(i!=null){const l=et(i,"default");if(l&&r===void 0){const a=i.default;if(i.type!==Function&&!i.skipFactory&&Re(a)){const{propsDefaults:u}=s;if(n in u)r=u[n];else{const c=Ll(s);r=u[n]=a.call(null,e),c()}}else r=a;s.ce&&s.ce._setProp(n,r)}i[0]&&(o&&!l?r=!1:i[1]&&(r===""||r===wo(n))&&(r=!0))}return r}const PE=new WeakMap;function Lb(t,e,n=!1){const r=n?PE:e.propsCache,s=r.get(t);if(s)return s;const o=t.props,i={},l=[];let a=!1;if(!Re(t)){const c=d=>{a=!0;const[f,p]=Lb(d,e,!0);Gt(i,f),p&&l.push(...p)};!n&&e.mixins.length&&e.mixins.forEach(c),t.extends&&c(t.extends),t.mixins&&t.mixins.forEach(c)}if(!o&&!a)return ft(t)&&r.set(t,Wo),Wo;if(Oe(o))for(let c=0;c<o.length;c++){const d=Jn(o[c]);rm(d)&&(i[d]=lt)}else if(o)for(const c in o){const d=Jn(c);if(rm(d)){const f=o[c],p=i[d]=Oe(f)||Re(f)?{type:f}:Gt({},f),h=p.type;let m=!1,g=!0;if(Oe(h))for(let v=0;v<h.length;++v){const y=h[v],b=Re(y)&&y.name;if(b==="Boolean"){m=!0;break}else b==="String"&&(g=!1)}else m=Re(h)&&h.name==="Boolean";p[0]=m,p[1]=g,(m||et(p,"default"))&&l.push(d)}}const u=[i,l];return ft(t)&&r.set(t,u),u}function rm(t){return t[0]!=="$"&&!Vi(t)}const vp=t=>t==="_"||t==="_ctx"||t==="$stable",yp=t=>Oe(t)?t.map(vr):[vr(t)],DE=(t,e,n)=>{if(e._n)return e;const r=De((...s)=>yp(e(...s)),n);return r._c=!1,r},Fb=(t,e,n)=>{const r=t._ctx;for(const s in t){if(vp(s))continue;const o=t[s];if(Re(o))e[s]=DE(s,o,r);else if(o!=null){const i=yp(o);e[s]=()=>i}}},$b=(t,e)=>{const n=yp(e);t.slots.default=()=>n},Bb=(t,e,n)=>{for(const r in e)(n||!vp(r))&&(t[r]=e[r])},LE=(t,e,n)=>{const r=t.slots=Rb();if(t.vnode.shapeFlag&32){const s=e._;s?(Bb(r,e,n),n&&$y(r,"_",s,!0)):Fb(e,r)}else e&&$b(t,e)},FE=(t,e,n)=>{const{vnode:r,slots:s}=t;let o=!0,i=lt;if(r.shapeFlag&32){const l=e._;l?n&&l===1?o=!1:Bb(s,e,n):(o=!e.$stable,Fb(e,s)),i=e}else e&&($b(t,e),i={default:1});if(o)for(const l in s)!vp(l)&&i[l]==null&&delete s[l]},yn=QE;function $E(t){return BE(t)}function BE(t,e){const n=zu();n.__VUE__=!0;const{insert:r,remove:s,patchProp:o,createElement:i,createText:l,createComment:a,setText:u,setElementText:c,parentNode:d,nextSibling:f,setScopeId:p=br,insertStaticContent:h}=t,m=(C,I,_,F=null,Y=null,U=null,ce=void 0,ue=null,w=!!I.dynamicChildren)=>{if(C===I)return;C&&!no(C,I)&&(F=R(C),_e(C,Y,U,!0),C=null),I.patchFlag===-2&&(w=!1,I.dynamicChildren=null);const{type:E,ref:B,shapeFlag:q}=I;switch(E){case Dl:g(C,I,_,F);break;case cn:v(C,I,_,F);break;case Bc:C==null&&y(I,_,F,ce);break;case Ye:D(C,I,_,F,Y,U,ce,ue,w);break;default:q&1?k(C,I,_,F,Y,U,ce,ue,w):q&6?W(C,I,_,F,Y,U,ce,ue,w):(q&64||q&128)&&E.process(C,I,_,F,Y,U,ce,ue,w,Q)}B!=null&&Y?Wi(B,C&&C.ref,U,I||C,!I):B==null&&C&&C.ref!=null&&Wi(C.ref,null,U,C,!0)},g=(C,I,_,F)=>{if(C==null)r(I.el=l(I.children),_,F);else{const Y=I.el=C.el;I.children!==C.children&&u(Y,I.children)}},v=(C,I,_,F)=>{C==null?r(I.el=a(I.children||""),_,F):I.el=C.el},y=(C,I,_,F)=>{[C.el,C.anchor]=h(C.children,I,_,F,C.el,C.anchor)},b=({el:C,anchor:I},_,F)=>{let Y;for(;C&&C!==I;)Y=f(C),r(C,_,F),C=Y;r(I,_,F)},x=({el:C,anchor:I})=>{let _;for(;C&&C!==I;)_=f(C),s(C),C=_;s(I)},k=(C,I,_,F,Y,U,ce,ue,w)=>{if(I.type==="svg"?ce="svg":I.type==="math"&&(ce="mathml"),C==null)S(I,_,F,Y,U,ce,ue,w);else{const E=C.el&&C.el._isVueCE?C.el:null;try{E&&E._beginPatch(),M(C,I,Y,U,ce,ue,w)}finally{E&&E._endPatch()}}},S=(C,I,_,F,Y,U,ce,ue)=>{let w,E;const{props:B,shapeFlag:q,transition:he,dirs:oe}=C;if(w=C.el=i(C.type,U,B&&B.is,B),q&8?c(w,C.children):q&16&&A(C.children,w,null,F,Y,$c(C,U),ce,ue),oe&&Ws(C,null,F,"created"),T(w,C,C.scopeId,ce,F),B){for(const G in B)G!=="value"&&!Vi(G)&&o(w,G,null,B[G],U,F);"value"in B&&o(w,"value",null,B.value,U),(E=B.onVnodeBeforeMount)&&dr(E,F,C)}oe&&Ws(C,null,F,"beforeMount");const $=VE(Y,he);$&&he.beforeEnter(w),r(w,I,_),((E=B&&B.onVnodeMounted)||$||oe)&&yn(()=>{E&&dr(E,F,C),$&&he.enter(w),oe&&Ws(C,null,F,"mounted")},Y)},T=(C,I,_,F,Y)=>{if(_&&p(C,_),F)for(let U=0;U<F.length;U++)p(C,F[U]);if(Y){let U=Y.subTree;if(I===U||zb(U.type)&&(U.ssContent===I||U.ssFallback===I)){const ce=Y.vnode;T(C,ce,ce.scopeId,ce.slotScopeIds,Y.parent)}}},A=(C,I,_,F,Y,U,ce,ue,w=0)=>{for(let E=w;E<C.length;E++){const B=C[E]=ue?as(C[E]):vr(C[E]);m(null,B,I,_,F,Y,U,ce,ue)}},M=(C,I,_,F,Y,U,ce)=>{const ue=I.el=C.el;let{patchFlag:w,dynamicChildren:E,dirs:B}=I;w|=C.patchFlag&16;const q=C.props||lt,he=I.props||lt;let oe;if(_&&Us(_,!1),(oe=he.onVnodeBeforeUpdate)&&dr(oe,_,I,C),B&&Ws(I,C,_,"beforeUpdate"),_&&Us(_,!0),(q.innerHTML&&he.innerHTML==null||q.textContent&&he.textContent==null)&&c(ue,""),E?P(C.dynamicChildren,E,ue,_,F,$c(I,Y),U):ce||we(C,I,ue,null,_,F,$c(I,Y),U,!1),w>0){if(w&16)z(ue,q,he,_,Y);else if(w&2&&q.class!==he.class&&o(ue,"class",null,he.class,Y),w&4&&o(ue,"style",q.style,he.style,Y),w&8){const $=I.dynamicProps;for(let G=0;G<$.length;G++){const Ee=$[G],We=q[Ee],vt=he[Ee];(vt!==We||Ee==="value")&&o(ue,Ee,We,vt,Y,_)}}w&1&&C.children!==I.children&&c(ue,I.children)}else!ce&&E==null&&z(ue,q,he,_,Y);((oe=he.onVnodeUpdated)||B)&&yn(()=>{oe&&dr(oe,_,I,C),B&&Ws(I,C,_,"updated")},F)},P=(C,I,_,F,Y,U,ce)=>{for(let ue=0;ue<I.length;ue++){const w=C[ue],E=I[ue],B=w.el&&(w.type===Ye||!no(w,E)||w.shapeFlag&198)?d(w.el):_;m(w,E,B,null,F,Y,U,ce,!0)}},z=(C,I,_,F,Y)=>{if(I!==_){if(I!==lt)for(const U in I)!Vi(U)&&!(U in _)&&o(C,U,I[U],null,Y,F);for(const U in _){if(Vi(U))continue;const ce=_[U],ue=I[U];ce!==ue&&U!=="value"&&o(C,U,ue,ce,Y,F)}"value"in _&&o(C,"value",I.value,_.value,Y)}},D=(C,I,_,F,Y,U,ce,ue,w)=>{const E=I.el=C?C.el:l(""),B=I.anchor=C?C.anchor:l("");let{patchFlag:q,dynamicChildren:he,slotScopeIds:oe}=I;oe&&(ue=ue?ue.concat(oe):oe),C==null?(r(E,_,F),r(B,_,F),A(I.children||[],_,B,Y,U,ce,ue,w)):q>0&&q&64&&he&&C.dynamicChildren?(P(C.dynamicChildren,he,_,Y,U,ce,ue),(I.key!=null||Y&&I===Y.subTree)&&bp(C,I,!0)):we(C,I,_,B,Y,U,ce,ue,w)},W=(C,I,_,F,Y,U,ce,ue,w)=>{I.slotScopeIds=ue,C==null?I.shapeFlag&512?Y.ctx.activate(I,_,F,ce,w):ie(I,_,F,Y,U,ce,w):ae(C,I,w)},ie=(C,I,_,F,Y,U,ce)=>{const ue=C.component=oS(C,F,Y);if(Gu(C)&&(ue.ctx.renderer=Q),iS(ue,!1,ce),ue.asyncDep){if(Y&&Y.registerDep(ue,de,ce),!C.el){const w=ue.subTree=se(cn);v(null,w,I,_),C.placeholder=w.el}}else de(ue,C,I,_,Y,U,ce)},ae=(C,I,_)=>{const F=I.component=C.component;if(JE(C,I,_))if(F.asyncDep&&!F.asyncResolved){ve(F,I,_);return}else F.next=I,F.update();else I.el=C.el,F.vnode=I},de=(C,I,_,F,Y,U,ce)=>{const ue=()=>{if(C.isMounted){let{next:q,bu:he,u:oe,parent:$,vnode:G}=C;{const Jt=Vb(C);if(Jt){q&&(q.el=G.el,ve(C,q,ce)),Jt.asyncDep.then(()=>{C.isUnmounted||ue()});return}}let Ee=q,We;Us(C,!1),q?(q.el=G.el,ve(C,q,ce)):q=G,he&&ba(he),(We=q.props&&q.props.onVnodeBeforeUpdate)&&dr(We,$,q,G),Us(C,!0);const vt=om(C),hn=C.subTree;C.subTree=vt,m(hn,vt,d(hn.el),R(hn),C,Y,U),q.el=vt.el,Ee===null&&XE(C,vt.el),oe&&yn(oe,Y),(We=q.props&&q.props.onVnodeUpdated)&&yn(()=>dr(We,$,q,G),Y)}else{let q;const{el:he,props:oe}=I,{bm:$,m:G,parent:Ee,root:We,type:vt}=C,hn=Go(I);Us(C,!1),$&&ba($),!hn&&(q=oe&&oe.onVnodeBeforeMount)&&dr(q,Ee,I),Us(C,!0);{We.ce&&We.ce._def.shadowRoot!==!1&&We.ce._injectChildStyle(vt);const Jt=C.subTree=om(C);m(null,Jt,_,F,C,Y,U),I.el=Jt.el}if(G&&yn(G,Y),!hn&&(q=oe&&oe.onVnodeMounted)){const Jt=I;yn(()=>dr(q,Ee,Jt),Y)}(I.shapeFlag&256||Ee&&Go(Ee.vnode)&&Ee.vnode.shapeFlag&256)&&C.a&&yn(C.a,Y),C.isMounted=!0,I=_=F=null}};C.scope.on();const w=C.effect=new zy(ue);C.scope.off();const E=C.update=w.run.bind(w),B=C.job=w.runIfDirty.bind(w);B.i=C,B.id=C.uid,w.scheduler=()=>gp(B),Us(C,!0),E()},ve=(C,I,_)=>{I.component=C;const F=C.vnode.props;C.vnode=I,C.next=null,RE(C,I.props,F,_),FE(C,I.children,_),Kr(),Uh(C),Gr()},we=(C,I,_,F,Y,U,ce,ue,w=!1)=>{const E=C&&C.children,B=C?C.shapeFlag:0,q=I.children,{patchFlag:he,shapeFlag:oe}=I;if(he>0){if(he&128){ut(E,q,_,F,Y,U,ce,ue,w);return}else if(he&256){Qe(E,q,_,F,Y,U,ce,ue,w);return}}oe&8?(B&16&&ee(E,Y,U),q!==E&&c(_,q)):B&16?oe&16?ut(E,q,_,F,Y,U,ce,ue,w):ee(E,Y,U,!0):(B&8&&c(_,""),oe&16&&A(q,_,F,Y,U,ce,ue,w))},Qe=(C,I,_,F,Y,U,ce,ue,w)=>{C=C||Wo,I=I||Wo;const E=C.length,B=I.length,q=Math.min(E,B);let he;for(he=0;he<q;he++){const oe=I[he]=w?as(I[he]):vr(I[he]);m(C[he],oe,_,null,Y,U,ce,ue,w)}E>B?ee(C,Y,U,!0,!1,q):A(I,_,F,Y,U,ce,ue,w,q)},ut=(C,I,_,F,Y,U,ce,ue,w)=>{let E=0;const B=I.length;let q=C.length-1,he=B-1;for(;E<=q&&E<=he;){const oe=C[E],$=I[E]=w?as(I[E]):vr(I[E]);if(no(oe,$))m(oe,$,_,null,Y,U,ce,ue,w);else break;E++}for(;E<=q&&E<=he;){const oe=C[q],$=I[he]=w?as(I[he]):vr(I[he]);if(no(oe,$))m(oe,$,_,null,Y,U,ce,ue,w);else break;q--,he--}if(E>q){if(E<=he){const oe=he+1,$=oe<B?I[oe].el:F;for(;E<=he;)m(null,I[E]=w?as(I[E]):vr(I[E]),_,$,Y,U,ce,ue,w),E++}}else if(E>he)for(;E<=q;)_e(C[E],Y,U,!0),E++;else{const oe=E,$=E,G=new Map;for(E=$;E<=he;E++){const On=I[E]=w?as(I[E]):vr(I[E]);On.key!=null&&G.set(On.key,E)}let Ee,We=0;const vt=he-$+1;let hn=!1,Jt=0;const zs=new Array(vt);for(E=0;E<vt;E++)zs[E]=0;for(E=oe;E<=q;E++){const On=C[E];if(We>=vt){_e(On,Y,U,!0);continue}let cr;if(On.key!=null)cr=G.get(On.key);else for(Ee=$;Ee<=he;Ee++)if(zs[Ee-$]===0&&no(On,I[Ee])){cr=Ee;break}cr===void 0?_e(On,Y,U,!0):(zs[cr-$]=E+1,cr>=Jt?Jt=cr:hn=!0,m(On,I[cr],_,null,Y,U,ce,ue,w),We++)}const Oc=hn?HE(zs):Wo;for(Ee=Oc.length-1,E=vt-1;E>=0;E--){const On=$+E,cr=I[On],Bh=I[On+1],Vh=On+1<B?Bh.el||Bh.placeholder:F;zs[E]===0?m(null,cr,_,Vh,Y,U,ce,ue,w):hn&&(Ee<0||E!==Oc[Ee]?ke(cr,_,Vh,2):Ee--)}}},ke=(C,I,_,F,Y=null)=>{const{el:U,type:ce,transition:ue,children:w,shapeFlag:E}=C;if(E&6){ke(C.component.subTree,I,_,F);return}if(E&128){C.suspense.move(I,_,F);return}if(E&64){ce.move(C,I,_,Q);return}if(ce===Ye){r(U,I,_);for(let q=0;q<w.length;q++)ke(w[q],I,_,F);r(C.anchor,I,_);return}if(ce===Bc){b(C,I,_);return}if(F!==2&&E&1&&ue)if(F===0)ue.beforeEnter(U),r(U,I,_),yn(()=>ue.enter(U),Y);else{const{leave:q,delayLeave:he,afterLeave:oe}=ue,$=()=>{C.ctx.isUnmounted?s(U):r(U,I,_)},G=()=>{U._isLeaving&&U[$r](!0),q(U,()=>{$(),oe&&oe()})};he?he(U,$,G):G()}else r(U,I,_)},_e=(C,I,_,F=!1,Y=!1)=>{const{type:U,props:ce,ref:ue,children:w,dynamicChildren:E,shapeFlag:B,patchFlag:q,dirs:he,cacheIndex:oe}=C;if(q===-2&&(Y=!1),ue!=null&&(Kr(),Wi(ue,null,_,C,!0),Gr()),oe!=null&&(I.renderCache[oe]=void 0),B&256){I.ctx.deactivate(C);return}const $=B&1&&he,G=!Go(C);let Ee;if(G&&(Ee=ce&&ce.onVnodeBeforeUnmount)&&dr(Ee,I,C),B&6)X(C.component,_,F);else{if(B&128){C.suspense.unmount(_,F);return}$&&Ws(C,null,I,"beforeUnmount"),B&64?C.type.remove(C,I,_,Q,F):E&&!E.hasOnce&&(U!==Ye||q>0&&q&64)?ee(E,I,_,!1,!0):(U===Ye&&q&384||!Y&&B&16)&&ee(w,I,_),F&&te(C)}(G&&(Ee=ce&&ce.onVnodeUnmounted)||$)&&yn(()=>{Ee&&dr(Ee,I,C),$&&Ws(C,null,I,"unmounted")},_)},te=C=>{const{type:I,el:_,anchor:F,transition:Y}=C;if(I===Ye){j(_,F);return}if(I===Bc){x(C);return}const U=()=>{s(_),Y&&!Y.persisted&&Y.afterLeave&&Y.afterLeave()};if(C.shapeFlag&1&&Y&&!Y.persisted){const{leave:ce,delayLeave:ue}=Y,w=()=>ce(_,U);ue?ue(C.el,U,w):w()}else U()},j=(C,I)=>{let _;for(;C!==I;)_=f(C),s(C),C=_;s(I)},X=(C,I,_)=>{const{bum:F,scope:Y,job:U,subTree:ce,um:ue,m:w,a:E}=C;sm(w),sm(E),F&&ba(F),Y.stop(),U&&(U.flags|=8,_e(ce,C,I,_)),ue&&yn(ue,I),yn(()=>{C.isUnmounted=!0},I)},ee=(C,I,_,F=!1,Y=!1,U=0)=>{for(let ce=U;ce<C.length;ce++)_e(C[ce],I,_,F,Y)},R=C=>{if(C.shapeFlag&6)return R(C.component.subTree);if(C.shapeFlag&128)return C.suspense.next();const I=f(C.anchor||C.el),_=I&&I[fb];return _?f(_):I};let V=!1;const K=(C,I,_)=>{C==null?I._vnode&&_e(I._vnode,null,null,!0):m(I._vnode||null,C,I,null,null,null,_),I._vnode=C,V||(V=!0,Uh(),ub(),V=!1)},Q={p:m,um:_e,m:ke,r:te,mt:ie,mc:A,pc:we,pbc:P,n:R,o:t};return{render:K,hydrate:void 0,createApp:ME(K)}}function $c({type:t,props:e},n){return n==="svg"&&t==="foreignObject"||n==="mathml"&&t==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function Us({effect:t,job:e},n){n?(t.flags|=32,e.flags|=4):(t.flags&=-33,e.flags&=-5)}function VE(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function bp(t,e,n=!1){const r=t.children,s=e.children;if(Oe(r)&&Oe(s))for(let o=0;o<r.length;o++){const i=r[o];let l=s[o];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[o]=as(s[o]),l.el=i.el),!n&&l.patchFlag!==-2&&bp(i,l)),l.type===Dl&&l.patchFlag!==-1&&(l.el=i.el),l.type===cn&&!l.el&&(l.el=i.el)}}function HE(t){const e=t.slice(),n=[0];let r,s,o,i,l;const a=t.length;for(r=0;r<a;r++){const u=t[r];if(u!==0){if(s=n[n.length-1],t[s]<u){e[r]=s,n.push(r);continue}for(o=0,i=n.length-1;o<i;)l=o+i>>1,t[n[l]]<u?o=l+1:i=l;u<t[n[o]]&&(o>0&&(e[r]=n[o-1]),n[o]=r)}}for(o=n.length,i=n[o-1];o-- >0;)n[o]=i,i=e[i];return n}function Vb(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Vb(e)}function sm(t){if(t)for(let e=0;e<t.length;e++)t[e].flags|=8}const jE=Symbol.for("v-scx"),zE=()=>tt(jE);function Pt(t,e){return xp(t,null,e)}function je(t,e,n){return xp(t,e,n)}function xp(t,e,n=lt){const{immediate:r,deep:s,flush:o,once:i}=n,l=Gt({},n),a=e&&r||!e&&o!=="post";let u;if(ml){if(o==="sync"){const p=zE();u=p.__watcherHandles||(p.__watcherHandles=[])}else if(!a){const p=()=>{};return p.stop=br,p.resume=br,p.pause=br,p}}const c=dn;l.call=(p,h,m)=>ir(p,c,h,m);let d=!1;o==="post"?l.scheduler=p=>{yn(p,c&&c.suspense)}:o!=="sync"&&(d=!0,l.scheduler=(p,h)=>{h?p():gp(p)}),l.augmentJob=p=>{e&&(p.flags|=4),d&&(p.flags|=2,c&&(p.id=c.uid,p.i=c))};const f=oE(t,e,l);return ml&&(u?u.push(f):a&&f()),f}function WE(t,e,n){const r=this.proxy,s=xt(t)?t.includes(".")?Hb(r,t):()=>r[t]:t.bind(r,r);let o;Re(e)?o=e:(o=e.handler,n=e);const i=Ll(this),l=xp(s,o.bind(r),n);return i(),l}function Hb(t,e){const n=e.split(".");return()=>{let r=t;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const UE=(t,e)=>e==="modelValue"||e==="model-value"?t.modelModifiers:t[`${e}Modifiers`]||t[`${Jn(e)}Modifiers`]||t[`${wo(e)}Modifiers`];function qE(t,e,...n){if(t.isUnmounted)return;const r=t.vnode.props||lt;let s=n;const o=e.startsWith("update:"),i=o&&UE(r,e.slice(7));i&&(i.trim&&(s=n.map(c=>xt(c)?c.trim():c)),i.number&&(s=n.map(up)));let l,a=r[l=Mc(e)]||r[l=Mc(Jn(e))];!a&&o&&(a=r[l=Mc(wo(e))]),a&&ir(a,t,6,s);const u=r[l+"Once"];if(u){if(!t.emitted)t.emitted={};else if(t.emitted[l])return;t.emitted[l]=!0,ir(u,t,6,s)}}const KE=new WeakMap;function jb(t,e,n=!1){const r=n?KE:e.emitsCache,s=r.get(t);if(s!==void 0)return s;const o=t.emits;let i={},l=!1;if(!Re(t)){const a=u=>{const c=jb(u,e,!0);c&&(l=!0,Gt(i,c))};!n&&e.mixins.length&&e.mixins.forEach(a),t.extends&&a(t.extends),t.mixins&&t.mixins.forEach(a)}return!o&&!l?(ft(t)&&r.set(t,null),null):(Oe(o)?o.forEach(a=>i[a]=null):Gt(i,o),ft(t)&&r.set(t,i),i)}function Ju(t,e){return!t||!Bu(e)?!1:(e=e.slice(2).replace(/Once$/,""),et(t,e[0].toLowerCase()+e.slice(1))||et(t,wo(e))||et(t,e))}function om(t){const{type:e,vnode:n,proxy:r,withProxy:s,propsOptions:[o],slots:i,attrs:l,emit:a,render:u,renderCache:c,props:d,data:f,setupState:p,ctx:h,inheritAttrs:m}=t,g=$a(t);let v,y;try{if(n.shapeFlag&4){const x=s||r,k=x;v=vr(u.call(k,x,c,d,p,f,h)),y=l}else{const x=e;v=vr(x.length>1?x(d,{attrs:l,slots:i,emit:a}):x(d,null)),y=e.props?l:GE(l)}}catch(x){qi.length=0,Ku(x,t,1),v=se(cn)}let b=v;if(y&&m!==!1){const x=Object.keys(y),{shapeFlag:k}=b;x.length&&k&7&&(o&&x.some(ip)&&(y=YE(y,o)),b=wr(b,y,!1,!0))}return n.dirs&&(b=wr(b,null,!1,!0),b.dirs=b.dirs?b.dirs.concat(n.dirs):n.dirs),n.transition&&fl(b,n.transition),v=b,$a(g),v}const GE=t=>{let e;for(const n in t)(n==="class"||n==="style"||Bu(n))&&((e||(e={}))[n]=t[n]);return e},YE=(t,e)=>{const n={};for(const r in t)(!ip(r)||!(r.slice(9)in e))&&(n[r]=t[r]);return n};function JE(t,e,n){const{props:r,children:s,component:o}=t,{props:i,children:l,patchFlag:a}=e,u=o.emitsOptions;if(e.dirs||e.transition)return!0;if(n&&a>=0){if(a&1024)return!0;if(a&16)return r?im(r,i,u):!!i;if(a&8){const c=e.dynamicProps;for(let d=0;d<c.length;d++){const f=c[d];if(i[f]!==r[f]&&!Ju(u,f))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===i?!1:r?i?im(r,i,u):!0:!!i;return!1}function im(t,e,n){const r=Object.keys(e);if(r.length!==Object.keys(t).length)return!0;for(let s=0;s<r.length;s++){const o=r[s];if(e[o]!==t[o]&&!Ju(n,o))return!0}return!1}function XE({vnode:t,parent:e},n){for(;e;){const r=e.subTree;if(r.suspense&&r.suspense.activeBranch===t&&(r.el=t.el),r===t)(t=e.vnode).el=n,e=e.parent;else break}}const zb=t=>t.__isSuspense;function QE(t,e){e&&e.pendingBranch?Oe(t)?e.effects.push(...t):e.effects.push(t):aE(t)}const Ye=Symbol.for("v-fgt"),Dl=Symbol.for("v-txt"),cn=Symbol.for("v-cmt"),Bc=Symbol.for("v-stc"),qi=[];let Ln=null;function J(t=!1){qi.push(Ln=t?null:[])}function ZE(){qi.pop(),Ln=qi[qi.length-1]||null}let pl=1;function Ha(t,e=!1){pl+=t,t<0&&Ln&&e&&(Ln.hasOnce=!0)}function Wb(t){return t.dynamicChildren=pl>0?Ln||Wo:null,ZE(),pl>0&&Ln&&Ln.push(t),t}function le(t,e,n,r,s,o){return Wb(N(t,e,n,r,s,o,!0))}function Ke(t,e,n,r,s){return Wb(se(t,e,n,r,s,!0))}function hl(t){return t?t.__v_isVNode===!0:!1}function no(t,e){return t.type===e.type&&t.key===e.key}const Ub=({key:t})=>t??null,ka=({ref:t,ref_key:e,ref_for:n})=>(typeof t=="number"&&(t=""+t),t!=null?xt(t)||rn(t)||Re(t)?{i:nn,r:t,k:e,f:!!n}:t:null);function N(t,e=null,n=null,r=0,s=null,o=t===Ye?0:1,i=!1,l=!1){const a={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&Ub(e),ref:e&&ka(e),scopeId:db,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:nn};return l?(kp(a,n),o&128&&t.normalize(a)):n&&(a.shapeFlag|=xt(n)?8:16),pl>0&&!i&&Ln&&(a.patchFlag>0||o&6)&&a.patchFlag!==32&&Ln.push(a),a}const se=eS;function eS(t,e=null,n=null,r=0,s=null,o=!1){if((!t||t===_b)&&(t=cn),hl(t)){const l=wr(t,e,!0);return n&&kp(l,n),pl>0&&!o&&Ln&&(l.shapeFlag&6?Ln[Ln.indexOf(t)]=l:Ln.push(l)),l.patchFlag=-2,l}if(dS(t)&&(t=t.__vccOpts),e){e=tS(e);let{class:l,style:a}=e;l&&!xt(l)&&(e.class=Pe(l)),ft(a)&&(mp(a)&&!Oe(a)&&(a=Gt({},a)),e.style=Wu(a))}const i=xt(t)?1:zb(t)?128:pb(t)?64:ft(t)?4:Re(t)?2:0;return N(t,e,n,r,s,i,o,!0)}function tS(t){return t?mp(t)||Pb(t)?Gt({},t):t:null}function wr(t,e,n=!1,r=!1){const{props:s,ref:o,patchFlag:i,children:l,transition:a}=t,u=e?nS(s||{},e):s,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:u,key:u&&Ub(u),ref:e&&e.ref?n&&o?Oe(o)?o.concat(ka(e)):[o,ka(e)]:ka(e):o,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:l,target:t.target,targetStart:t.targetStart,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==Ye?i===-1?16:i|16:i,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:a,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&wr(t.ssContent),ssFallback:t.ssFallback&&wr(t.ssFallback),placeholder:t.placeholder,el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return a&&r&&fl(c,a.clone(c)),c}function lr(t=" ",e=0){return se(Dl,null,t,e)}function Ve(t="",e=!1){return e?(J(),Ke(cn,null,t)):se(cn,null,t)}function vr(t){return t==null||typeof t=="boolean"?se(cn):Oe(t)?se(Ye,null,t.slice()):hl(t)?as(t):se(Dl,null,String(t))}function as(t){return t.el===null&&t.patchFlag!==-1||t.memo?t:wr(t)}function kp(t,e){let n=0;const{shapeFlag:r}=t;if(e==null)e=null;else if(Oe(e))n=16;else if(typeof e=="object")if(r&65){const s=e.default;s&&(s._c&&(s._d=!1),kp(t,s()),s._c&&(s._d=!0));return}else{n=32;const s=e._;!s&&!Pb(e)?e._ctx=nn:s===3&&nn&&(nn.slots._===1?e._=1:(e._=2,t.patchFlag|=1024))}else Re(e)?(e={default:e,_ctx:nn},n=32):(e=String(e),r&64?(n=16,e=[lr(e)]):n=8);t.children=e,t.shapeFlag|=n}function nS(...t){const e={};for(let n=0;n<t.length;n++){const r=t[n];for(const s in r)if(s==="class")e.class!==r.class&&(e.class=Pe([e.class,r.class]));else if(s==="style")e.style=Wu([e.style,r.style]);else if(Bu(s)){const o=e[s],i=r[s];i&&o!==i&&!(Oe(o)&&o.includes(i))&&(e[s]=o?[].concat(o,i):i)}else s!==""&&(e[s]=r[s])}return e}function dr(t,e,n,r=null){ir(t,e,7,[n,r])}const rS=Mb();let sS=0;function oS(t,e,n){const r=t.type,s=(e?e.appContext:t.appContext)||rS,o={uid:sS++,vnode:t,type:r,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jy(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lb(r,s),emitsOptions:jb(r,s),emit:null,emitted:null,propsDefaults:lt,inheritAttrs:r.inheritAttrs,ctx:lt,data:lt,props:lt,attrs:lt,slots:lt,refs:lt,setupState:lt,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=e?e.root:o,o.emit=qE.bind(null,o),t.ce&&t.ce(o),o}let dn=null;const ar=()=>dn||nn;let ja,Jd;{const t=zu(),e=(n,r)=>{let s;return(s=t[n])||(s=t[n]=[]),s.push(r),o=>{s.length>1?s.forEach(i=>i(o)):s[0](o)}};ja=e("__VUE_INSTANCE_SETTERS__",n=>dn=n),Jd=e("__VUE_SSR_SETTERS__",n=>ml=n)}const Ll=t=>{const e=dn;return ja(t),t.scope.on(),()=>{t.scope.off(),ja(e)}},lm=()=>{dn&&dn.scope.off(),ja(null)};function qb(t){return t.vnode.shapeFlag&4}let ml=!1;function iS(t,e=!1,n=!1){e&&Jd(e);const{props:r,children:s}=t.vnode,o=qb(t);NE(t,r,o,e),LE(t,s,n||e);const i=o?lS(t,e):void 0;return e&&Jd(!1),i}function lS(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=new Proxy(t.ctx,SE);const{setup:r}=n;if(r){Kr();const s=t.setupContext=r.length>1?uS(t):null,o=Ll(t),i=Pl(r,t,0,[t.props,s]),l=Dy(i);if(Gr(),o(),(l||t.sp)&&!Go(t)&&kb(t),l){if(i.then(lm,lm),e)return i.then(a=>{am(t,a)}).catch(a=>{Ku(a,t,0)});t.asyncDep=i}else am(t,i)}else Kb(t)}function am(t,e,n){Re(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:ft(e)&&(t.setupState=ib(e)),Kb(t)}function Kb(t,e,n){const r=t.type;t.render||(t.render=r.render||br);{const s=Ll(t);Kr();try{CE(t)}finally{Gr(),s()}}}const aS={get(t,e){return un(t,"get",""),t[e]}};function uS(t){const e=n=>{t.exposed=n||{}};return{attrs:new Proxy(t.attrs,aS),slots:t.slots,emit:t.emit,expose:e}}function Xu(t){return t.exposed?t.exposeProxy||(t.exposeProxy=new Proxy(ib(sb(t.exposed)),{get(e,n){if(n in e)return e[n];if(n in Ui)return Ui[n](t)},has(e,n){return n in e||n in Ui}})):t.proxy}function cS(t,e=!0){return Re(t)?t.displayName||t.name:t.name||e&&t.__name}function dS(t){return Re(t)&&"__vccOpts"in t}const L=(t,e)=>rE(t,e,ml);function Ue(t,e,n){try{Ha(-1);const r=arguments.length;return r===2?ft(e)&&!Oe(e)?hl(e)?se(t,null,[e]):se(t,e):se(t,null,e):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&hl(n)&&(n=[n]),se(t,e,n))}finally{Ha(1)}}const fS="3.5.24";let Xd;const um=typeof window<"u"&&window.trustedTypes;if(um)try{Xd=um.createPolicy("vue",{createHTML:t=>t})}catch{}const Gb=Xd?t=>Xd.createHTML(t):t=>t,pS="http://www.w3.org/2000/svg",hS="http://www.w3.org/1998/Math/MathML",Lr=typeof document<"u"?document:null,cm=Lr&&Lr.createElement("template"),mS={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,r)=>{const s=e==="svg"?Lr.createElementNS(pS,t):e==="mathml"?Lr.createElementNS(hS,t):n?Lr.createElement(t,{is:n}):Lr.createElement(t);return t==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:t=>Lr.createTextNode(t),createComment:t=>Lr.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>Lr.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,r,s,o){const i=n?n.previousSibling:e.lastChild;if(s&&(s===o||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),n),!(s===o||!(s=s.nextSibling)););else{cm.innerHTML=Gb(r==="svg"?`<svg>${t}</svg>`:r==="mathml"?`<math>${t}</math>`:t);const l=cm.content;if(r==="svg"||r==="mathml"){const a=l.firstChild;for(;a.firstChild;)l.appendChild(a.firstChild);l.removeChild(a)}e.insertBefore(l,n)}return[i?i.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},ts="transition",Ei="animation",gl=Symbol("_vtc"),Yb={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},gS=Gt({},gb,Yb),vS=t=>(t.displayName="Transition",t.props=gS,t),yS=vS((t,{slots:e})=>Ue(pE,bS(t),e)),qs=(t,e=[])=>{Oe(t)?t.forEach(n=>n(...e)):t&&t(...e)},dm=t=>t?Oe(t)?t.some(e=>e.length>1):t.length>1:!1;function bS(t){const e={};for(const D in t)D in Yb||(e[D]=t[D]);if(t.css===!1)return e;const{name:n="v",type:r,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:i=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:a=o,appearActiveClass:u=i,appearToClass:c=l,leaveFromClass:d=`${n}-leave-from`,leaveActiveClass:f=`${n}-leave-active`,leaveToClass:p=`${n}-leave-to`}=t,h=xS(s),m=h&&h[0],g=h&&h[1],{onBeforeEnter:v,onEnter:y,onEnterCancelled:b,onLeave:x,onLeaveCancelled:k,onBeforeAppear:S=v,onAppear:T=y,onAppearCancelled:A=b}=e,M=(D,W,ie,ae)=>{D._enterCancelled=ae,Ks(D,W?c:l),Ks(D,W?u:i),ie&&ie()},P=(D,W)=>{D._isLeaving=!1,Ks(D,d),Ks(D,p),Ks(D,f),W&&W()},z=D=>(W,ie)=>{const ae=D?T:y,de=()=>M(W,D,ie);qs(ae,[W,de]),fm(()=>{Ks(W,D?a:o),Ar(W,D?c:l),dm(ae)||pm(W,r,m,de)})};return Gt(e,{onBeforeEnter(D){qs(v,[D]),Ar(D,o),Ar(D,i)},onBeforeAppear(D){qs(S,[D]),Ar(D,a),Ar(D,u)},onEnter:z(!1),onAppear:z(!0),onLeave(D,W){D._isLeaving=!0;const ie=()=>P(D,W);Ar(D,d),D._enterCancelled?(Ar(D,f),gm(D)):(gm(D),Ar(D,f)),fm(()=>{D._isLeaving&&(Ks(D,d),Ar(D,p),dm(x)||pm(D,r,g,ie))}),qs(x,[D,ie])},onEnterCancelled(D){M(D,!1,void 0,!0),qs(b,[D])},onAppearCancelled(D){M(D,!0,void 0,!0),qs(A,[D])},onLeaveCancelled(D){P(D),qs(k,[D])}})}function xS(t){if(t==null)return null;if(ft(t))return[Vc(t.enter),Vc(t.leave)];{const e=Vc(t);return[e,e]}}function Vc(t){return Sw(t)}function Ar(t,e){e.split(/\s+/).forEach(n=>n&&t.classList.add(n)),(t[gl]||(t[gl]=new Set)).add(e)}function Ks(t,e){e.split(/\s+/).forEach(r=>r&&t.classList.remove(r));const n=t[gl];n&&(n.delete(e),n.size||(t[gl]=void 0))}function fm(t){requestAnimationFrame(()=>{requestAnimationFrame(t)})}let kS=0;function pm(t,e,n,r){const s=t._endId=++kS,o=()=>{s===t._endId&&r()};if(n!=null)return setTimeout(o,n);const{type:i,timeout:l,propCount:a}=wS(t,e);if(!i)return r();const u=i+"end";let c=0;const d=()=>{t.removeEventListener(u,f),o()},f=p=>{p.target===t&&++c>=a&&d()};setTimeout(()=>{c<a&&d()},l+1),t.addEventListener(u,f)}function wS(t,e){const n=window.getComputedStyle(t),r=h=>(n[h]||"").split(", "),s=r(`${ts}Delay`),o=r(`${ts}Duration`),i=hm(s,o),l=r(`${Ei}Delay`),a=r(`${Ei}Duration`),u=hm(l,a);let c=null,d=0,f=0;e===ts?i>0&&(c=ts,d=i,f=o.length):e===Ei?u>0&&(c=Ei,d=u,f=a.length):(d=Math.max(i,u),c=d>0?i>u?ts:Ei:null,f=c?c===ts?o.length:a.length:0);const p=c===ts&&/\b(?:transform|all)(?:,|$)/.test(r(`${ts}Property`).toString());return{type:c,timeout:d,propCount:f,hasTransform:p}}function hm(t,e){for(;t.length<e.length;)t=t.concat(t);return Math.max(...e.map((n,r)=>mm(n)+mm(t[r])))}function mm(t){return t==="auto"?0:Number(t.slice(0,-1).replace(",","."))*1e3}function gm(t){return(t?t.ownerDocument:document).body.offsetHeight}function ES(t,e,n){const r=t[gl];r&&(e=(e?[e,...r]:[...r]).join(" ")),e==null?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const vm=Symbol("_vod"),SS=Symbol("_vsh"),CS=Symbol(""),_S=/(?:^|;)\s*display\s*:/;function TS(t,e,n){const r=t.style,s=xt(n);let o=!1;if(n&&!s){if(e)if(xt(e))for(const i of e.split(";")){const l=i.slice(0,i.indexOf(":")).trim();n[l]==null&&wa(r,l,"")}else for(const i in e)n[i]==null&&wa(r,i,"");for(const i in n)i==="display"&&(o=!0),wa(r,i,n[i])}else if(s){if(e!==n){const i=r[CS];i&&(n+=";"+i),r.cssText=n,o=_S.test(n)}}else e&&t.removeAttribute("style");vm in t&&(t[vm]=o?r.display:"",t[SS]&&(r.display="none"))}const ym=/\s*!important$/;function wa(t,e,n){if(Oe(n))n.forEach(r=>wa(t,e,r));else if(n==null&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const r=AS(t,e);ym.test(n)?t.setProperty(wo(r),n.replace(ym,""),"important"):t[r]=n}}const bm=["Webkit","Moz","ms"],Hc={};function AS(t,e){const n=Hc[e];if(n)return n;let r=Jn(e);if(r!=="filter"&&r in t)return Hc[e]=r;r=ju(r);for(let s=0;s<bm.length;s++){const o=bm[s]+r;if(o in t)return Hc[e]=o}return e}const xm="http://www.w3.org/1999/xlink";function km(t,e,n,r,s,o=Ow(e)){r&&e.startsWith("xlink:")?n==null?t.removeAttributeNS(xm,e.slice(6,e.length)):t.setAttributeNS(xm,e,n):n==null||o&&!By(n)?t.removeAttribute(e):t.setAttribute(e,o?"":Xr(n)?String(n):n)}function wm(t,e,n,r,s){if(e==="innerHTML"||e==="textContent"){n!=null&&(t[e]=e==="innerHTML"?Gb(n):n);return}const o=t.tagName;if(e==="value"&&o!=="PROGRESS"&&!o.includes("-")){const l=o==="OPTION"?t.getAttribute("value")||"":t.value,a=n==null?t.type==="checkbox"?"on":"":String(n);(l!==a||!("_value"in t))&&(t.value=a),n==null&&t.removeAttribute(e),t._value=n;return}let i=!1;if(n===""||n==null){const l=typeof t[e];l==="boolean"?n=By(n):n==null&&l==="string"?(n="",i=!0):l==="number"&&(n=0,i=!0)}try{t[e]=n}catch{}i&&t.removeAttribute(s||e)}function No(t,e,n,r){t.addEventListener(e,n,r)}function IS(t,e,n,r){t.removeEventListener(e,n,r)}const Em=Symbol("_vei");function OS(t,e,n,r,s=null){const o=t[Em]||(t[Em]={}),i=o[e];if(r&&i)i.value=r;else{const[l,a]=MS(e);if(r){const u=o[e]=PS(r,s);No(t,l,u,a)}else i&&(IS(t,l,i,a),o[e]=void 0)}}const Sm=/(?:Once|Passive|Capture)$/;function MS(t){let e;if(Sm.test(t)){e={};let r;for(;r=t.match(Sm);)t=t.slice(0,t.length-r[0].length),e[r[0].toLowerCase()]=!0}return[t[2]===":"?t.slice(3):wo(t.slice(2)),e]}let jc=0;const NS=Promise.resolve(),RS=()=>jc||(NS.then(()=>jc=0),jc=Date.now());function PS(t,e){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ir(DS(r,n.value),e,5,[r])};return n.value=t,n.attached=RS(),n}function DS(t,e){if(Oe(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map(r=>s=>!s._stopped&&r&&r(s))}else return e}const Cm=t=>t.charCodeAt(0)===111&&t.charCodeAt(1)===110&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,LS=(t,e,n,r,s,o)=>{const i=s==="svg";e==="class"?ES(t,r,i):e==="style"?TS(t,n,r):Bu(e)?ip(e)||OS(t,e,n,r,o):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):FS(t,e,r,i))?(wm(t,e,r),!t.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&km(t,e,r,i,o,e!=="value")):t._isVueCE&&(/[A-Z]/.test(e)||!xt(r))?wm(t,Jn(e),r,o,e):(e==="true-value"?t._trueValue=r:e==="false-value"&&(t._falseValue=r),km(t,e,r,i))};function FS(t,e,n,r){if(r)return!!(e==="innerHTML"||e==="textContent"||e in t&&Cm(e)&&Re(n));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="sandbox"&&t.tagName==="IFRAME"||e==="form"||e==="list"&&t.tagName==="INPUT"||e==="type"&&t.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=t.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Cm(e)&&xt(n)?!1:e in t}const _m=t=>{const e=t.props["onUpdate:modelValue"]||!1;return Oe(e)?n=>ba(e,n):e};function $S(t){t.target.composing=!0}function Tm(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const zc=Symbol("_assign");function Am(t,e,n){return e&&(t=t.trim()),n&&(t=up(t)),t}const Cs={created(t,{modifiers:{lazy:e,trim:n,number:r}},s){t[zc]=_m(s);const o=r||s.props&&s.props.type==="number";No(t,e?"change":"input",i=>{i.target.composing||t[zc](Am(t.value,n,o))}),(n||o)&&No(t,"change",()=>{t.value=Am(t.value,n,o)}),e||(No(t,"compositionstart",$S),No(t,"compositionend",Tm),No(t,"change",Tm))},mounted(t,{value:e}){t.value=e??""},beforeUpdate(t,{value:e,oldValue:n,modifiers:{lazy:r,trim:s,number:o}},i){if(t[zc]=_m(i),t.composing)return;const l=(o||t.type==="number")&&!/^0\d/.test(t.value)?up(t.value):t.value,a=e??"";l!==a&&(document.activeElement===t&&t.type!=="range"&&(r&&e===n||s&&t.value.trim()===a)||(t.value=a))}},BS=["ctrl","shift","alt","meta"],VS={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&t.button!==0,middle:t=>"button"in t&&t.button!==1,right:t=>"button"in t&&t.button!==2,exact:(t,e)=>BS.some(n=>t[`${n}Key`]&&!e.includes(n))},Bt=(t,e)=>{const n=t._withMods||(t._withMods={}),r=e.join(".");return n[r]||(n[r]=((s,...o)=>{for(let i=0;i<e.length;i++){const l=VS[e[i]];if(l&&l(s,e))return}return t(s,...o)}))},HS=Gt({patchProp:LS},mS);let Im;function jS(){return Im||(Im=$E(HS))}const zS=((...t)=>{const e=jS().createApp(...t),{mount:n}=e;return e.mount=r=>{const s=US(r);if(!s)return;const o=e._component;!Re(o)&&!o.render&&!o.template&&(o.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const i=n(s,!1,WS(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),i},e});function WS(t){if(t instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&t instanceof MathMLElement)return"mathml"}function US(t){return xt(t)?document.querySelector(t):t}const Ro=typeof document<"u";function Jb(t){return typeof t=="object"||"displayName"in t||"props"in t||"__vccOpts"in t}function qS(t){return t.__esModule||t[Symbol.toStringTag]==="Module"||t.default&&Jb(t.default)}const Ze=Object.assign;function Wc(t,e){const n={};for(const r in e){const s=e[r];n[r]=ur(s)?s.map(t):t(s)}return n}const Ki=()=>{},ur=Array.isArray;function Om(t,e){const n={};for(const r in t)n[r]=r in e?e[r]:t[r];return n}const Xb=/#/g,KS=/&/g,GS=/\//g,YS=/=/g,JS=/\?/g,Qb=/\+/g,XS=/%5B/g,QS=/%5D/g,Zb=/%5E/g,ZS=/%60/g,e0=/%7B/g,eC=/%7C/g,t0=/%7D/g,tC=/%20/g;function wp(t){return t==null?"":encodeURI(""+t).replace(eC,"|").replace(XS,"[").replace(QS,"]")}function nC(t){return wp(t).replace(e0,"{").replace(t0,"}").replace(Zb,"^")}function Qd(t){return wp(t).replace(Qb,"%2B").replace(tC,"+").replace(Xb,"%23").replace(KS,"%26").replace(ZS,"`").replace(e0,"{").replace(t0,"}").replace(Zb,"^")}function rC(t){return Qd(t).replace(YS,"%3D")}function sC(t){return wp(t).replace(Xb,"%23").replace(JS,"%3F")}function oC(t){return sC(t).replace(GS,"%2F")}function vl(t){if(t==null)return null;try{return decodeURIComponent(""+t)}catch{}return""+t}const iC=/\/$/,lC=t=>t.replace(iC,"");function Uc(t,e,n="/"){let r,s={},o="",i="";const l=e.indexOf("#");let a=e.indexOf("?");return a=l>=0&&a>l?-1:a,a>=0&&(r=e.slice(0,a),o=e.slice(a,l>0?l:e.length),s=t(o.slice(1))),l>=0&&(r=r||e.slice(0,l),i=e.slice(l,e.length)),r=dC(r??e,n),{fullPath:r+o+i,path:r,query:s,hash:vl(i)}}function aC(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function Mm(t,e){return!e||!t.toLowerCase().startsWith(e.toLowerCase())?t:t.slice(e.length)||"/"}function uC(t,e,n){const r=e.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&Zo(e.matched[r],n.matched[s])&&n0(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function Zo(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function n0(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!cC(t[n],e[n]))return!1;return!0}function cC(t,e){return ur(t)?Nm(t,e):ur(e)?Nm(e,t):t===e}function Nm(t,e){return ur(e)?t.length===e.length&&t.every((n,r)=>n===e[r]):t.length===1&&t[0]===e}function dC(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),r=t.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let o=n.length-1,i,l;for(i=0;i<r.length;i++)if(l=r[i],l!==".")if(l==="..")o>1&&o--;else break;return n.slice(0,o).join("/")+"/"+r.slice(i).join("/")}const ns={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};let Zd=(function(t){return t.pop="pop",t.push="push",t})({}),qc=(function(t){return t.back="back",t.forward="forward",t.unknown="",t})({});function fC(t){if(!t)if(Ro){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return t[0]!=="/"&&t[0]!=="#"&&(t="/"+t),lC(t)}const pC=/^[^#]+#/;function hC(t,e){return t.replace(pC,"#")+e}function mC(t,e){const n=document.documentElement.getBoundingClientRect(),r=t.getBoundingClientRect();return{behavior:e.behavior,left:r.left-n.left-(e.left||0),top:r.top-n.top-(e.top||0)}}const Qu=()=>({left:window.scrollX,top:window.scrollY});function gC(t){let e;if("el"in t){const n=t.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;e=mC(s,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(e.left!=null?e.left:window.scrollX,e.top!=null?e.top:window.scrollY)}function Rm(t,e){return(history.state?history.state.position-e:-1)+t}const ef=new Map;function vC(t,e){ef.set(t,e)}function yC(t){const e=ef.get(t);return ef.delete(t),e}function bC(t){return typeof t=="string"||t&&typeof t=="object"}function r0(t){return typeof t=="string"||typeof t=="symbol"}let St=(function(t){return t[t.MATCHER_NOT_FOUND=1]="MATCHER_NOT_FOUND",t[t.NAVIGATION_GUARD_REDIRECT=2]="NAVIGATION_GUARD_REDIRECT",t[t.NAVIGATION_ABORTED=4]="NAVIGATION_ABORTED",t[t.NAVIGATION_CANCELLED=8]="NAVIGATION_CANCELLED",t[t.NAVIGATION_DUPLICATED=16]="NAVIGATION_DUPLICATED",t})({});const s0=Symbol("");St.MATCHER_NOT_FOUND+"",St.NAVIGATION_GUARD_REDIRECT+"",St.NAVIGATION_ABORTED+"",St.NAVIGATION_CANCELLED+"",St.NAVIGATION_DUPLICATED+"";function ei(t,e){return Ze(new Error,{type:t,[s0]:!0},e)}function Ir(t,e){return t instanceof Error&&s0 in t&&(e==null||!!(t.type&e))}const xC=["params","query","hash"];function kC(t){if(typeof t=="string")return t;if(t.path!=null)return t.path;const e={};for(const n of xC)n in t&&(e[n]=t[n]);return JSON.stringify(e,null,2)}function wC(t){const e={};if(t===""||t==="?")return e;const n=(t[0]==="?"?t.slice(1):t).split("&");for(let r=0;r<n.length;++r){const s=n[r].replace(Qb," "),o=s.indexOf("="),i=vl(o<0?s:s.slice(0,o)),l=o<0?null:vl(s.slice(o+1));if(i in e){let a=e[i];ur(a)||(a=e[i]=[a]),a.push(l)}else e[i]=l}return e}function Pm(t){let e="";for(let n in t){const r=t[n];if(n=rC(n),r==null){r!==void 0&&(e+=(e.length?"&":"")+n);continue}(ur(r)?r.map(s=>s&&Qd(s)):[r&&Qd(r)]).forEach(s=>{s!==void 0&&(e+=(e.length?"&":"")+n,s!=null&&(e+="="+s))})}return e}function EC(t){const e={};for(const n in t){const r=t[n];r!==void 0&&(e[n]=ur(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return e}const SC=Symbol(""),Dm=Symbol(""),Zu=Symbol(""),Ep=Symbol(""),tf=Symbol("");function Si(){let t=[];function e(r){return t.push(r),()=>{const s=t.indexOf(r);s>-1&&t.splice(s,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function us(t,e,n,r,s,o=i=>i()){const i=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,a)=>{const u=f=>{f===!1?a(ei(St.NAVIGATION_ABORTED,{from:n,to:e})):f instanceof Error?a(f):bC(f)?a(ei(St.NAVIGATION_GUARD_REDIRECT,{from:e,to:f})):(i&&r.enterCallbacks[s]===i&&typeof f=="function"&&i.push(f),l())},c=o(()=>t.call(r&&r.instances[s],e,n,u));let d=Promise.resolve(c);t.length<3&&(d=d.then(u)),d.catch(f=>a(f))})}function Kc(t,e,n,r,s=o=>o()){const o=[];for(const i of t)for(const l in i.components){let a=i.components[l];if(!(e!=="beforeRouteEnter"&&!i.instances[l]))if(Jb(a)){const u=(a.__vccOpts||a)[e];u&&o.push(us(u,n,r,i,l,s))}else{let u=a();o.push(()=>u.then(c=>{if(!c)throw new Error(`Couldn't resolve component "${l}" at "${i.path}"`);const d=qS(c)?c.default:c;i.mods[l]=c,i.components[l]=d;const f=(d.__vccOpts||d)[e];return f&&us(f,n,r,i,l,s)()}))}}return o}function CC(t,e){const n=[],r=[],s=[],o=Math.max(e.matched.length,t.matched.length);for(let i=0;i<o;i++){const l=e.matched[i];l&&(t.matched.find(u=>Zo(u,l))?r.push(l):n.push(l));const a=t.matched[i];a&&(e.matched.find(u=>Zo(u,a))||s.push(a))}return[n,r,s]}let _C=()=>location.protocol+"//"+location.host;function o0(t,e){const{pathname:n,search:r,hash:s}=e,o=t.indexOf("#");if(o>-1){let i=s.includes(t.slice(o))?t.slice(o).length:1,l=s.slice(i);return l[0]!=="/"&&(l="/"+l),Mm(l,"")}return Mm(n,t)+r+s}function TC(t,e,n,r){let s=[],o=[],i=null;const l=({state:f})=>{const p=o0(t,location),h=n.value,m=e.value;let g=0;if(f){if(n.value=p,e.value=f,i&&i===h){i=null;return}g=m?f.position-m.position:0}else r(p);s.forEach(v=>{v(n.value,h,{delta:g,type:Zd.pop,direction:g?g>0?qc.forward:qc.back:qc.unknown})})};function a(){i=n.value}function u(f){s.push(f);const p=()=>{const h=s.indexOf(f);h>-1&&s.splice(h,1)};return o.push(p),p}function c(){if(document.visibilityState==="hidden"){const{history:f}=window;if(!f.state)return;f.replaceState(Ze({},f.state,{scroll:Qu()}),"")}}function d(){for(const f of o)f();o=[],window.removeEventListener("popstate",l),window.removeEventListener("pagehide",c),document.removeEventListener("visibilitychange",c)}return window.addEventListener("popstate",l),window.addEventListener("pagehide",c),document.addEventListener("visibilitychange",c),{pauseListeners:a,listen:u,destroy:d}}function Lm(t,e,n,r=!1,s=!1){return{back:t,current:e,forward:n,replaced:r,position:window.history.length,scroll:s?Qu():null}}function AC(t){const{history:e,location:n}=window,r={value:o0(t,n)},s={value:e.state};s.value||o(r.value,{back:null,current:r.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0);function o(a,u,c){const d=t.indexOf("#"),f=d>-1?(n.host&&document.querySelector("base")?t:t.slice(d))+a:_C()+t+a;try{e[c?"replaceState":"pushState"](u,"",f),s.value=u}catch(p){console.error(p),n[c?"replace":"assign"](f)}}function i(a,u){o(a,Ze({},e.state,Lm(s.value.back,a,s.value.forward,!0),u,{position:s.value.position}),!0),r.value=a}function l(a,u){const c=Ze({},s.value,e.state,{forward:a,scroll:Qu()});o(c.current,c,!0),o(a,Ze({},Lm(r.value,a,null),{position:c.position+1},u),!1),r.value=a}return{location:r,state:s,push:l,replace:i}}function IC(t){t=fC(t);const e=AC(t),n=TC(t,e.state,e.location,e.replace);function r(o,i=!0){i||n.pauseListeners(),history.go(o)}const s=Ze({location:"",base:t,go:r,createHref:hC.bind(null,t)},e,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>e.state.value}),s}let so=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.Group=2]="Group",t})({});var $t=(function(t){return t[t.Static=0]="Static",t[t.Param=1]="Param",t[t.ParamRegExp=2]="ParamRegExp",t[t.ParamRegExpEnd=3]="ParamRegExpEnd",t[t.EscapeNext=4]="EscapeNext",t})($t||{});const OC={type:so.Static,value:""},MC=/[a-zA-Z0-9_]/;function NC(t){if(!t)return[[]];if(t==="/")return[[OC]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(p){throw new Error(`ERR (${n})/"${u}": ${p}`)}let n=$t.Static,r=n;const s=[];let o;function i(){o&&s.push(o),o=[]}let l=0,a,u="",c="";function d(){u&&(n===$t.Static?o.push({type:so.Static,value:u}):n===$t.Param||n===$t.ParamRegExp||n===$t.ParamRegExpEnd?(o.length>1&&(a==="*"||a==="+")&&e(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),o.push({type:so.Param,value:u,regexp:c,repeatable:a==="*"||a==="+",optional:a==="*"||a==="?"})):e("Invalid state to consume buffer"),u="")}function f(){u+=a}for(;l<t.length;){if(a=t[l++],a==="\\"&&n!==$t.ParamRegExp){r=n,n=$t.EscapeNext;continue}switch(n){case $t.Static:a==="/"?(u&&d(),i()):a===":"?(d(),n=$t.Param):f();break;case $t.EscapeNext:f(),n=r;break;case $t.Param:a==="("?n=$t.ParamRegExp:MC.test(a)?f():(d(),n=$t.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--);break;case $t.ParamRegExp:a===")"?c[c.length-1]=="\\"?c=c.slice(0,-1)+a:n=$t.ParamRegExpEnd:c+=a;break;case $t.ParamRegExpEnd:d(),n=$t.Static,a!=="*"&&a!=="?"&&a!=="+"&&l--,c="";break;default:e("Unknown state");break}}return n===$t.ParamRegExp&&e(`Unfinished custom RegExp for param "${u}"`),d(),i(),s}const Fm="[^/]+?",RC={sensitive:!1,strict:!1,start:!0,end:!0};var bn=(function(t){return t[t._multiplier=10]="_multiplier",t[t.Root=90]="Root",t[t.Segment=40]="Segment",t[t.SubSegment=30]="SubSegment",t[t.Static=40]="Static",t[t.Dynamic=20]="Dynamic",t[t.BonusCustomRegExp=10]="BonusCustomRegExp",t[t.BonusWildcard=-50]="BonusWildcard",t[t.BonusRepeatable=-20]="BonusRepeatable",t[t.BonusOptional=-8]="BonusOptional",t[t.BonusStrict=.7000000000000001]="BonusStrict",t[t.BonusCaseSensitive=.25]="BonusCaseSensitive",t})(bn||{});const PC=/[.+*?^${}()[\]/\\]/g;function DC(t,e){const n=Ze({},RC,e),r=[];let s=n.start?"^":"";const o=[];for(const u of t){const c=u.length?[]:[bn.Root];n.strict&&!u.length&&(s+="/");for(let d=0;d<u.length;d++){const f=u[d];let p=bn.Segment+(n.sensitive?bn.BonusCaseSensitive:0);if(f.type===so.Static)d||(s+="/"),s+=f.value.replace(PC,"\\$&"),p+=bn.Static;else if(f.type===so.Param){const{value:h,repeatable:m,optional:g,regexp:v}=f;o.push({name:h,repeatable:m,optional:g});const y=v||Fm;if(y!==Fm){p+=bn.BonusCustomRegExp;try{`${y}`}catch(x){throw new Error(`Invalid custom RegExp for param "${h}" (${y}): `+x.message)}}let b=m?`((?:${y})(?:/(?:${y}))*)`:`(${y})`;d||(b=g&&u.length<2?`(?:/${b})`:"/"+b),g&&(b+="?"),s+=b,p+=bn.Dynamic,g&&(p+=bn.BonusOptional),m&&(p+=bn.BonusRepeatable),y===".*"&&(p+=bn.BonusWildcard)}c.push(p)}r.push(c)}if(n.strict&&n.end){const u=r.length-1;r[u][r[u].length-1]+=bn.BonusStrict}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const i=new RegExp(s,n.sensitive?"":"i");function l(u){const c=u.match(i),d={};if(!c)return null;for(let f=1;f<c.length;f++){const p=c[f]||"",h=o[f-1];d[h.name]=p&&h.repeatable?p.split("/"):p}return d}function a(u){let c="",d=!1;for(const f of t){(!d||!c.endsWith("/"))&&(c+="/"),d=!1;for(const p of f)if(p.type===so.Static)c+=p.value;else if(p.type===so.Param){const{value:h,repeatable:m,optional:g}=p,v=h in u?u[h]:"";if(ur(v)&&!m)throw new Error(`Provided param "${h}" is an array but it is not repeatable (* or + modifiers)`);const y=ur(v)?v.join("/"):v;if(!y)if(g)f.length<2&&(c.endsWith("/")?c=c.slice(0,-1):d=!0);else throw new Error(`Missing required param "${h}"`);c+=y}}return c||"/"}return{re:i,score:r,keys:o,parse:l,stringify:a}}function LC(t,e){let n=0;for(;n<t.length&&n<e.length;){const r=e[n]-t[n];if(r)return r;n++}return t.length<e.length?t.length===1&&t[0]===bn.Static+bn.Segment?-1:1:t.length>e.length?e.length===1&&e[0]===bn.Static+bn.Segment?1:-1:0}function i0(t,e){let n=0;const r=t.score,s=e.score;for(;n<r.length&&n<s.length;){const o=LC(r[n],s[n]);if(o)return o;n++}if(Math.abs(s.length-r.length)===1){if($m(r))return 1;if($m(s))return-1}return s.length-r.length}function $m(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const FC={strict:!1,end:!0,sensitive:!1};function $C(t,e,n){const r=DC(NC(t.path),n),s=Ze(r,{record:t,parent:e,children:[],alias:[]});return e&&!s.record.aliasOf==!e.record.aliasOf&&e.children.push(s),s}function BC(t,e){const n=[],r=new Map;e=Om(FC,e);function s(d){return r.get(d)}function o(d,f,p){const h=!p,m=Vm(d);m.aliasOf=p&&p.record;const g=Om(e,d),v=[m];if("alias"in d){const x=typeof d.alias=="string"?[d.alias]:d.alias;for(const k of x)v.push(Vm(Ze({},m,{components:p?p.record.components:m.components,path:k,aliasOf:p?p.record:m})))}let y,b;for(const x of v){const{path:k}=x;if(f&&k[0]!=="/"){const S=f.record.path,T=S[S.length-1]==="/"?"":"/";x.path=f.record.path+(k&&T+k)}if(y=$C(x,f,g),p?p.alias.push(y):(b=b||y,b!==y&&b.alias.push(y),h&&d.name&&!Hm(y)&&i(d.name)),l0(y)&&a(y),m.children){const S=m.children;for(let T=0;T<S.length;T++)o(S[T],y,p&&p.children[T])}p=p||y}return b?()=>{i(b)}:Ki}function i(d){if(r0(d)){const f=r.get(d);f&&(r.delete(d),n.splice(n.indexOf(f),1),f.children.forEach(i),f.alias.forEach(i))}else{const f=n.indexOf(d);f>-1&&(n.splice(f,1),d.record.name&&r.delete(d.record.name),d.children.forEach(i),d.alias.forEach(i))}}function l(){return n}function a(d){const f=jC(d,n);n.splice(f,0,d),d.record.name&&!Hm(d)&&r.set(d.record.name,d)}function u(d,f){let p,h={},m,g;if("name"in d&&d.name){if(p=r.get(d.name),!p)throw ei(St.MATCHER_NOT_FOUND,{location:d});g=p.record.name,h=Ze(Bm(f.params,p.keys.filter(b=>!b.optional).concat(p.parent?p.parent.keys.filter(b=>b.optional):[]).map(b=>b.name)),d.params&&Bm(d.params,p.keys.map(b=>b.name))),m=p.stringify(h)}else if(d.path!=null)m=d.path,p=n.find(b=>b.re.test(m)),p&&(h=p.parse(m),g=p.record.name);else{if(p=f.name?r.get(f.name):n.find(b=>b.re.test(f.path)),!p)throw ei(St.MATCHER_NOT_FOUND,{location:d,currentLocation:f});g=p.record.name,h=Ze({},f.params,d.params),m=p.stringify(h)}const v=[];let y=p;for(;y;)v.unshift(y.record),y=y.parent;return{name:g,path:m,params:h,matched:v,meta:HC(v)}}t.forEach(d=>o(d));function c(){n.length=0,r.clear()}return{addRoute:o,resolve:u,removeRoute:i,clearRoutes:c,getRoutes:l,getRecordMatcher:s}}function Bm(t,e){const n={};for(const r of e)r in t&&(n[r]=t[r]);return n}function Vm(t){const e={path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:t.aliasOf,beforeEnter:t.beforeEnter,props:VC(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}};return Object.defineProperty(e,"mods",{value:{}}),e}function VC(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const r in t.components)e[r]=typeof n=="object"?n[r]:n;return e}function Hm(t){for(;t;){if(t.record.aliasOf)return!0;t=t.parent}return!1}function HC(t){return t.reduce((e,n)=>Ze(e,n.meta),{})}function jC(t,e){let n=0,r=e.length;for(;n!==r;){const o=n+r>>1;i0(t,e[o])<0?r=o:n=o+1}const s=zC(t);return s&&(r=e.lastIndexOf(s,r-1)),r}function zC(t){let e=t;for(;e=e.parent;)if(l0(e)&&i0(t,e)===0)return e}function l0({record:t}){return!!(t.name||t.components&&Object.keys(t.components).length||t.redirect)}function jm(t){const e=tt(Zu),n=tt(Ep),r=L(()=>{const a=O(t.to);return e.resolve(a)}),s=L(()=>{const{matched:a}=r.value,{length:u}=a,c=a[u-1],d=n.matched;if(!c||!d.length)return-1;const f=d.findIndex(Zo.bind(null,c));if(f>-1)return f;const p=zm(a[u-2]);return u>1&&zm(c)===p&&d[d.length-1].path!==p?d.findIndex(Zo.bind(null,a[u-2])):f}),o=L(()=>s.value>-1&&GC(n.params,r.value.params)),i=L(()=>s.value>-1&&s.value===n.matched.length-1&&n0(n.params,r.value.params));function l(a={}){if(KC(a)){const u=e[O(t.replace)?"replace":"push"](O(t.to)).catch(Ki);return t.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>u),u}return Promise.resolve()}return{route:r,href:L(()=>r.value.href),isActive:o,isExactActive:i,navigate:l}}function WC(t){return t.length===1?t[0]:t}const UC=xe({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:jm,setup(t,{slots:e}){const n=fi(jm(t)),{options:r}=tt(Zu),s=L(()=>({[Wm(t.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[Wm(t.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const o=e.default&&WC(e.default(n));return t.custom?o:Ue("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},o)}}}),qC=UC;function KC(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&!(t.button!==void 0&&t.button!==0)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function GC(t,e){for(const n in e){const r=e[n],s=t[n];if(typeof r=="string"){if(r!==s)return!1}else if(!ur(s)||s.length!==r.length||r.some((o,i)=>o!==s[i]))return!1}return!0}function zm(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Wm=(t,e,n)=>t??e??n,YC=xe({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const r=tt(tf),s=L(()=>t.route||r.value),o=tt(Dm,0),i=L(()=>{let u=O(o);const{matched:c}=s.value;let d;for(;(d=c[u])&&!d.components;)u++;return u}),l=L(()=>s.value.matched[i.value]);Ht(Dm,L(()=>i.value+1)),Ht(SC,l),Ht(tf,s);const a=H();return je(()=>[a.value,l.value,t.name],([u,c,d],[f,p,h])=>{c&&(c.instances[d]=u,p&&p!==c&&u&&u===f&&(c.leaveGuards.size||(c.leaveGuards=p.leaveGuards),c.updateGuards.size||(c.updateGuards=p.updateGuards))),u&&c&&(!p||!Zo(c,p)||!f)&&(c.enterCallbacks[d]||[]).forEach(m=>m(u))},{flush:"post"}),()=>{const u=s.value,c=t.name,d=l.value,f=d&&d.components[c];if(!f)return Um(n.default,{Component:f,route:u});const p=d.props[c],h=p?p===!0?u.params:typeof p=="function"?p(u):p:null,g=Ue(f,Ze({},h,e,{onVnodeUnmounted:v=>{v.component.isUnmounted&&(d.instances[c]=null)},ref:a}));return Um(n.default,{Component:g,route:u})||g}}});function Um(t,e){if(!t)return null;const n=t(e);return n.length===1?n[0]:n}const JC=YC;function XC(t){const e=BC(t.routes,t),n=t.parseQuery||wC,r=t.stringifyQuery||Pm,s=t.history,o=Si(),i=Si(),l=Si(),a=pi(ns);let u=ns;Ro&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const c=Wc.bind(null,R=>""+R),d=Wc.bind(null,oC),f=Wc.bind(null,vl);function p(R,V){let K,Q;return r0(R)?(K=e.getRecordMatcher(R),Q=V):Q=R,e.addRoute(Q,K)}function h(R){const V=e.getRecordMatcher(R);V&&e.removeRoute(V)}function m(){return e.getRoutes().map(R=>R.record)}function g(R){return!!e.getRecordMatcher(R)}function v(R,V){if(V=Ze({},V||a.value),typeof R=="string"){const _=Uc(n,R,V.path),F=e.resolve({path:_.path},V),Y=s.createHref(_.fullPath);return Ze(_,F,{params:f(F.params),hash:vl(_.hash),redirectedFrom:void 0,href:Y})}let K;if(R.path!=null)K=Ze({},R,{path:Uc(n,R.path,V.path).path});else{const _=Ze({},R.params);for(const F in _)_[F]==null&&delete _[F];K=Ze({},R,{params:d(_)}),V.params=d(V.params)}const Q=e.resolve(K,V),be=R.hash||"";Q.params=c(f(Q.params));const C=aC(r,Ze({},R,{hash:nC(be),path:Q.path})),I=s.createHref(C);return Ze({fullPath:C,hash:be,query:r===Pm?EC(R.query):R.query||{}},Q,{redirectedFrom:void 0,href:I})}function y(R){return typeof R=="string"?Uc(n,R,a.value.path):Ze({},R)}function b(R,V){if(u!==R)return ei(St.NAVIGATION_CANCELLED,{from:V,to:R})}function x(R){return T(R)}function k(R){return x(Ze(y(R),{replace:!0}))}function S(R,V){const K=R.matched[R.matched.length-1];if(K&&K.redirect){const{redirect:Q}=K;let be=typeof Q=="function"?Q(R,V):Q;return typeof be=="string"&&(be=be.includes("?")||be.includes("#")?be=y(be):{path:be},be.params={}),Ze({query:R.query,hash:R.hash,params:be.path!=null?{}:R.params},be)}}function T(R,V){const K=u=v(R),Q=a.value,be=R.state,C=R.force,I=R.replace===!0,_=S(K,Q);if(_)return T(Ze(y(_),{state:typeof _=="object"?Ze({},be,_.state):be,force:C,replace:I}),V||K);const F=K;F.redirectedFrom=V;let Y;return!C&&uC(r,Q,K)&&(Y=ei(St.NAVIGATION_DUPLICATED,{to:F,from:Q}),ke(Q,Q,!0,!1)),(Y?Promise.resolve(Y):P(F,Q)).catch(U=>Ir(U)?Ir(U,St.NAVIGATION_GUARD_REDIRECT)?U:ut(U):we(U,F,Q)).then(U=>{if(U){if(Ir(U,St.NAVIGATION_GUARD_REDIRECT))return T(Ze({replace:I},y(U.to),{state:typeof U.to=="object"?Ze({},be,U.to.state):be,force:C}),V||F)}else U=D(F,Q,!0,I,be);return z(F,Q,U),U})}function A(R,V){const K=b(R,V);return K?Promise.reject(K):Promise.resolve()}function M(R){const V=j.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(R):R()}function P(R,V){let K;const[Q,be,C]=CC(R,V);K=Kc(Q.reverse(),"beforeRouteLeave",R,V);for(const _ of Q)_.leaveGuards.forEach(F=>{K.push(us(F,R,V))});const I=A.bind(null,R,V);return K.push(I),ee(K).then(()=>{K=[];for(const _ of o.list())K.push(us(_,R,V));return K.push(I),ee(K)}).then(()=>{K=Kc(be,"beforeRouteUpdate",R,V);for(const _ of be)_.updateGuards.forEach(F=>{K.push(us(F,R,V))});return K.push(I),ee(K)}).then(()=>{K=[];for(const _ of C)if(_.beforeEnter)if(ur(_.beforeEnter))for(const F of _.beforeEnter)K.push(us(F,R,V));else K.push(us(_.beforeEnter,R,V));return K.push(I),ee(K)}).then(()=>(R.matched.forEach(_=>_.enterCallbacks={}),K=Kc(C,"beforeRouteEnter",R,V,M),K.push(I),ee(K))).then(()=>{K=[];for(const _ of i.list())K.push(us(_,R,V));return K.push(I),ee(K)}).catch(_=>Ir(_,St.NAVIGATION_CANCELLED)?_:Promise.reject(_))}function z(R,V,K){l.list().forEach(Q=>M(()=>Q(R,V,K)))}function D(R,V,K,Q,be){const C=b(R,V);if(C)return C;const I=V===ns,_=Ro?history.state:{};K&&(Q||I?s.replace(R.fullPath,Ze({scroll:I&&_&&_.scroll},be)):s.push(R.fullPath,be)),a.value=R,ke(R,V,K,I),ut()}let W;function ie(){W||(W=s.listen((R,V,K)=>{if(!X.listening)return;const Q=v(R),be=S(Q,X.currentRoute.value);if(be){T(Ze(be,{replace:!0,force:!0}),Q).catch(Ki);return}u=Q;const C=a.value;Ro&&vC(Rm(C.fullPath,K.delta),Qu()),P(Q,C).catch(I=>Ir(I,St.NAVIGATION_ABORTED|St.NAVIGATION_CANCELLED)?I:Ir(I,St.NAVIGATION_GUARD_REDIRECT)?(T(Ze(y(I.to),{force:!0}),Q).then(_=>{Ir(_,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&!K.delta&&K.type===Zd.pop&&s.go(-1,!1)}).catch(Ki),Promise.reject()):(K.delta&&s.go(-K.delta,!1),we(I,Q,C))).then(I=>{I=I||D(Q,C,!1),I&&(K.delta&&!Ir(I,St.NAVIGATION_CANCELLED)?s.go(-K.delta,!1):K.type===Zd.pop&&Ir(I,St.NAVIGATION_ABORTED|St.NAVIGATION_DUPLICATED)&&s.go(-1,!1)),z(Q,C,I)}).catch(Ki)}))}let ae=Si(),de=Si(),ve;function we(R,V,K){ut(R);const Q=de.list();return Q.length?Q.forEach(be=>be(R,V,K)):console.error(R),Promise.reject(R)}function Qe(){return ve&&a.value!==ns?Promise.resolve():new Promise((R,V)=>{ae.add([R,V])})}function ut(R){return ve||(ve=!R,ie(),ae.list().forEach(([V,K])=>R?K(R):V()),ae.reset()),R}function ke(R,V,K,Q){const{scrollBehavior:be}=t;if(!Ro||!be)return Promise.resolve();const C=!K&&yC(Rm(R.fullPath,0))||(Q||!K)&&history.state&&history.state.scroll||null;return bt().then(()=>be(R,V,C)).then(I=>I&&gC(I)).catch(I=>we(I,R,V))}const _e=R=>s.go(R);let te;const j=new Set,X={currentRoute:a,listening:!0,addRoute:p,removeRoute:h,clearRoutes:e.clearRoutes,hasRoute:g,getRoutes:m,resolve:v,options:t,push:x,replace:k,go:_e,back:()=>_e(-1),forward:()=>_e(1),beforeEach:o.add,beforeResolve:i.add,afterEach:l.add,onError:de.add,isReady:Qe,install(R){R.component("RouterLink",qC),R.component("RouterView",JC),R.config.globalProperties.$router=X,Object.defineProperty(R.config.globalProperties,"$route",{enumerable:!0,get:()=>O(a)}),Ro&&!te&&a.value===ns&&(te=!0,x(s.location).catch(Q=>{}));const V={};for(const Q in ns)Object.defineProperty(V,Q,{get:()=>a.value[Q],enumerable:!0});R.provide(Zu,X),R.provide(Ep,rb(V)),R.provide(tf,a);const K=R.unmount;j.add(R),R.unmount=function(){j.delete(R),j.size<1&&(u=ns,W&&W(),W=null,a.value=ns,te=!1,ve=!1),K()}}};function ee(R){return R.reduce((V,K)=>V.then(()=>M(K)),Promise.resolve())}return X}function mi(){return tt(Zu)}function ec(t){return tt(Ep)}function QC(t,e){typeof console<"u"&&(console.warn("[intlify] "+t),e&&console.warn(e.stack))}const za=typeof window<"u",Fs=(t,e=!1)=>e?Symbol.for(t):Symbol(t),ZC=(t,e,n)=>e_({l:t,k:e,s:n}),e_=t=>JSON.stringify(t).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029").replace(/\u0027/g,"\\u0027"),At=t=>typeof t=="number"&&isFinite(t),t_=t=>u0(t)==="[object Date]",Rs=t=>u0(t)==="[object RegExp]",tc=t=>Ne(t)&&Object.keys(t).length===0,sn=Object.assign,n_=Object.create,ot=(t=null)=>n_(t);let qm;const Hr=()=>qm||(qm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:ot());function Km(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/\//g,"&#x2F;").replace(/=/g,"&#x3D;")}function Gm(t){return t.replace(/&(?![a-zA-Z0-9#]{2,6};)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function r_(t){return t=t.replace(/(\w+)\s*=\s*"([^"]*)"/g,(r,s,o)=>`${s}="${Gm(o)}"`),t=t.replace(/(\w+)\s*=\s*'([^']*)'/g,(r,s,o)=>`${s}='${Gm(o)}'`),/\s*on\w+\s*=\s*["']?[^"'>]+["']?/gi.test(t)&&(t=t.replace(/(\s+)(on)(\w+\s*=)/gi,"$1&#111;n$3")),[/(\s+(?:href|src|action|formaction)\s*=\s*["']?)\s*javascript:/gi,/(style\s*=\s*["'][^"']*url\s*\(\s*)javascript:/gi].forEach(r=>{t=t.replace(r,"$1javascript&#58;")}),t}const s_=Object.prototype.hasOwnProperty;function nr(t,e){return s_.call(t,e)}const ht=Array.isArray,dt=t=>typeof t=="function",ge=t=>typeof t=="string",ze=t=>typeof t=="boolean",Je=t=>t!==null&&typeof t=="object",o_=t=>Je(t)&&dt(t.then)&&dt(t.catch),a0=Object.prototype.toString,u0=t=>a0.call(t),Ne=t=>{if(!Je(t))return!1;const e=Object.getPrototypeOf(t);return e===null||e.constructor===Object},i_=t=>t==null?"":ht(t)||Ne(t)&&t.toString===a0?JSON.stringify(t,null,2):String(t);function l_(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}function nc(t){let e=t;return()=>++e}const Zl=t=>!Je(t)||ht(t);function Ea(t,e){if(Zl(t)||Zl(e))throw new Error("Invalid value");const n=[{src:t,des:e}];for(;n.length;){const{src:r,des:s}=n.pop();Object.keys(r).forEach(o=>{o!=="__proto__"&&(Je(r[o])&&!Je(s[o])&&(s[o]=Array.isArray(r[o])?[]:ot()),Zl(s[o])||Zl(r[o])?s[o]=r[o]:n.push({src:r[o],des:s[o]}))})}}function a_(t,e,n){return{line:t,column:e,offset:n}}function Wa(t,e,n){return{start:t,end:e}}const u_=/\{([0-9a-zA-Z]+)\}/g;function c0(t,...e){return e.length===1&&c_(e[0])&&(e=e[0]),(!e||!e.hasOwnProperty)&&(e={}),t.replace(u_,(n,r)=>e.hasOwnProperty(r)?e[r]:"")}const d0=Object.assign,Ym=t=>typeof t=="string",c_=t=>t!==null&&typeof t=="object";function f0(t,e=""){return t.reduce((n,r,s)=>s===0?n+r:n+e+r,"")}const Sp={USE_MODULO_SYNTAX:1,__EXTEND_POINT__:2},d_={[Sp.USE_MODULO_SYNTAX]:"Use modulo before '{{0}}'."};function f_(t,e,...n){const r=c0(d_[t],...n||[]),s={message:String(r),code:t};return e&&(s.location=e),s}const Te={EXPECTED_TOKEN:1,INVALID_TOKEN_IN_PLACEHOLDER:2,UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER:3,UNKNOWN_ESCAPE_SEQUENCE:4,INVALID_UNICODE_ESCAPE_SEQUENCE:5,UNBALANCED_CLOSING_BRACE:6,UNTERMINATED_CLOSING_BRACE:7,EMPTY_PLACEHOLDER:8,NOT_ALLOW_NEST_PLACEHOLDER:9,INVALID_LINKED_FORMAT:10,MUST_HAVE_MESSAGES_IN_PLURAL:11,UNEXPECTED_EMPTY_LINKED_MODIFIER:12,UNEXPECTED_EMPTY_LINKED_KEY:13,UNEXPECTED_LEXICAL_ANALYSIS:14,UNHANDLED_CODEGEN_NODE_TYPE:15,UNHANDLED_MINIFIER_NODE_TYPE:16,__EXTEND_POINT__:17},p_={[Te.EXPECTED_TOKEN]:"Expected token: '{0}'",[Te.INVALID_TOKEN_IN_PLACEHOLDER]:"Invalid token in placeholder: '{0}'",[Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER]:"Unterminated single quote in placeholder",[Te.UNKNOWN_ESCAPE_SEQUENCE]:"Unknown escape sequence: \\{0}",[Te.INVALID_UNICODE_ESCAPE_SEQUENCE]:"Invalid unicode escape sequence: {0}",[Te.UNBALANCED_CLOSING_BRACE]:"Unbalanced closing brace",[Te.UNTERMINATED_CLOSING_BRACE]:"Unterminated closing brace",[Te.EMPTY_PLACEHOLDER]:"Empty placeholder",[Te.NOT_ALLOW_NEST_PLACEHOLDER]:"Not allowed nest placeholder",[Te.INVALID_LINKED_FORMAT]:"Invalid linked format",[Te.MUST_HAVE_MESSAGES_IN_PLURAL]:"Plural must have messages",[Te.UNEXPECTED_EMPTY_LINKED_MODIFIER]:"Unexpected empty linked modifier",[Te.UNEXPECTED_EMPTY_LINKED_KEY]:"Unexpected empty linked key",[Te.UNEXPECTED_LEXICAL_ANALYSIS]:"Unexpected lexical analysis in token: '{0}'",[Te.UNHANDLED_CODEGEN_NODE_TYPE]:"unhandled codegen node type: '{0}'",[Te.UNHANDLED_MINIFIER_NODE_TYPE]:"unhandled mimifier node type: '{0}'"};function gi(t,e,n={}){const{domain:r,messages:s,args:o}=n,i=c0((s||p_)[t]||"",...o||[]),l=new SyntaxError(String(i));return l.code=t,e&&(l.location=e),l.domain=r,l}function h_(t){throw t}const Or=" ",m_="\r",vn=`
`,g_="\u2028",v_="\u2029";function y_(t){const e=t;let n=0,r=1,s=1,o=0;const i=T=>e[T]===m_&&e[T+1]===vn,l=T=>e[T]===vn,a=T=>e[T]===v_,u=T=>e[T]===g_,c=T=>i(T)||l(T)||a(T)||u(T),d=()=>n,f=()=>r,p=()=>s,h=()=>o,m=T=>i(T)||a(T)||u(T)?vn:e[T],g=()=>m(n),v=()=>m(n+o);function y(){return o=0,c(n)&&(r++,s=0),i(n)&&n++,n++,s++,e[n]}function b(){return i(n+o)&&o++,o++,e[n+o]}function x(){n=0,r=1,s=1,o=0}function k(T=0){o=T}function S(){const T=n+o;for(;T!==n;)y();o=0}return{index:d,line:f,column:p,peekOffset:h,charAt:m,currentChar:g,currentPeek:v,next:y,peek:b,reset:x,resetPeek:k,skipToPeek:S}}const rs=void 0,b_=".",Jm="'",x_="tokenizer";function k_(t,e={}){const n=e.location!==!1,r=y_(t),s=()=>r.index(),o=()=>a_(r.line(),r.column(),r.index()),i=o(),l=s(),a={currentType:14,offset:l,startLoc:i,endLoc:i,lastType:14,lastOffset:l,lastStartLoc:i,lastEndLoc:i,braceNest:0,inLinked:!1,text:""},u=()=>a,{onError:c}=e;function d(w,E,B,...q){const he=u();if(E.column+=B,E.offset+=B,c){const oe=n?Wa(he.startLoc,E):null,$=gi(w,oe,{domain:x_,args:q});c($)}}function f(w,E,B){w.endLoc=o(),w.currentType=E;const q={type:E};return n&&(q.loc=Wa(w.startLoc,w.endLoc)),B!=null&&(q.value=B),q}const p=w=>f(w,14);function h(w,E){return w.currentChar()===E?(w.next(),E):(d(Te.EXPECTED_TOKEN,o(),0,E),"")}function m(w){let E="";for(;w.currentPeek()===Or||w.currentPeek()===vn;)E+=w.currentPeek(),w.peek();return E}function g(w){const E=m(w);return w.skipToPeek(),E}function v(w){if(w===rs)return!1;const E=w.charCodeAt(0);return E>=97&&E<=122||E>=65&&E<=90||E===95}function y(w){if(w===rs)return!1;const E=w.charCodeAt(0);return E>=48&&E<=57}function b(w,E){const{currentType:B}=E;if(B!==2)return!1;m(w);const q=v(w.currentPeek());return w.resetPeek(),q}function x(w,E){const{currentType:B}=E;if(B!==2)return!1;m(w);const q=w.currentPeek()==="-"?w.peek():w.currentPeek(),he=y(q);return w.resetPeek(),he}function k(w,E){const{currentType:B}=E;if(B!==2)return!1;m(w);const q=w.currentPeek()===Jm;return w.resetPeek(),q}function S(w,E){const{currentType:B}=E;if(B!==8)return!1;m(w);const q=w.currentPeek()===".";return w.resetPeek(),q}function T(w,E){const{currentType:B}=E;if(B!==9)return!1;m(w);const q=v(w.currentPeek());return w.resetPeek(),q}function A(w,E){const{currentType:B}=E;if(!(B===8||B===12))return!1;m(w);const q=w.currentPeek()===":";return w.resetPeek(),q}function M(w,E){const{currentType:B}=E;if(B!==10)return!1;const q=()=>{const oe=w.currentPeek();return oe==="{"?v(w.peek()):oe==="@"||oe==="%"||oe==="|"||oe===":"||oe==="."||oe===Or||!oe?!1:oe===vn?(w.peek(),q()):D(w,!1)},he=q();return w.resetPeek(),he}function P(w){m(w);const E=w.currentPeek()==="|";return w.resetPeek(),E}function z(w){const E=m(w),B=w.currentPeek()==="%"&&w.peek()==="{";return w.resetPeek(),{isModulo:B,hasSpace:E.length>0}}function D(w,E=!0){const B=(he=!1,oe="",$=!1)=>{const G=w.currentPeek();return G==="{"?oe==="%"?!1:he:G==="@"||!G?oe==="%"?!0:he:G==="%"?(w.peek(),B(he,"%",!0)):G==="|"?oe==="%"||$?!0:!(oe===Or||oe===vn):G===Or?(w.peek(),B(!0,Or,$)):G===vn?(w.peek(),B(!0,vn,$)):!0},q=B();return E&&w.resetPeek(),q}function W(w,E){const B=w.currentChar();return B===rs?rs:E(B)?(w.next(),B):null}function ie(w){const E=w.charCodeAt(0);return E>=97&&E<=122||E>=65&&E<=90||E>=48&&E<=57||E===95||E===36}function ae(w){return W(w,ie)}function de(w){const E=w.charCodeAt(0);return E>=97&&E<=122||E>=65&&E<=90||E>=48&&E<=57||E===95||E===36||E===45}function ve(w){return W(w,de)}function we(w){const E=w.charCodeAt(0);return E>=48&&E<=57}function Qe(w){return W(w,we)}function ut(w){const E=w.charCodeAt(0);return E>=48&&E<=57||E>=65&&E<=70||E>=97&&E<=102}function ke(w){return W(w,ut)}function _e(w){let E="",B="";for(;E=Qe(w);)B+=E;return B}function te(w){g(w);const E=w.currentChar();return E!=="%"&&d(Te.EXPECTED_TOKEN,o(),0,E),w.next(),"%"}function j(w){let E="";for(;;){const B=w.currentChar();if(B==="{"||B==="}"||B==="@"||B==="|"||!B)break;if(B==="%")if(D(w))E+=B,w.next();else break;else if(B===Or||B===vn)if(D(w))E+=B,w.next();else{if(P(w))break;E+=B,w.next()}else E+=B,w.next()}return E}function X(w){g(w);let E="",B="";for(;E=ve(w);)B+=E;return w.currentChar()===rs&&d(Te.UNTERMINATED_CLOSING_BRACE,o(),0),B}function ee(w){g(w);let E="";return w.currentChar()==="-"?(w.next(),E+=`-${_e(w)}`):E+=_e(w),w.currentChar()===rs&&d(Te.UNTERMINATED_CLOSING_BRACE,o(),0),E}function R(w){return w!==Jm&&w!==vn}function V(w){g(w),h(w,"'");let E="",B="";for(;E=W(w,R);)E==="\\"?B+=K(w):B+=E;const q=w.currentChar();return q===vn||q===rs?(d(Te.UNTERMINATED_SINGLE_QUOTE_IN_PLACEHOLDER,o(),0),q===vn&&(w.next(),h(w,"'")),B):(h(w,"'"),B)}function K(w){const E=w.currentChar();switch(E){case"\\":case"'":return w.next(),`\\${E}`;case"u":return Q(w,E,4);case"U":return Q(w,E,6);default:return d(Te.UNKNOWN_ESCAPE_SEQUENCE,o(),0,E),""}}function Q(w,E,B){h(w,E);let q="";for(let he=0;he<B;he++){const oe=ke(w);if(!oe){d(Te.INVALID_UNICODE_ESCAPE_SEQUENCE,o(),0,`\\${E}${q}${w.currentChar()}`);break}q+=oe}return`\\${E}${q}`}function be(w){return w!=="{"&&w!=="}"&&w!==Or&&w!==vn}function C(w){g(w);let E="",B="";for(;E=W(w,be);)B+=E;return B}function I(w){let E="",B="";for(;E=ae(w);)B+=E;return B}function _(w){const E=B=>{const q=w.currentChar();return q==="{"||q==="%"||q==="@"||q==="|"||q==="("||q===")"||!q||q===Or?B:(B+=q,w.next(),E(B))};return E("")}function F(w){g(w);const E=h(w,"|");return g(w),E}function Y(w,E){let B=null;switch(w.currentChar()){case"{":return E.braceNest>=1&&d(Te.NOT_ALLOW_NEST_PLACEHOLDER,o(),0),w.next(),B=f(E,2,"{"),g(w),E.braceNest++,B;case"}":return E.braceNest>0&&E.currentType===2&&d(Te.EMPTY_PLACEHOLDER,o(),0),w.next(),B=f(E,3,"}"),E.braceNest--,E.braceNest>0&&g(w),E.inLinked&&E.braceNest===0&&(E.inLinked=!1),B;case"@":return E.braceNest>0&&d(Te.UNTERMINATED_CLOSING_BRACE,o(),0),B=U(w,E)||p(E),E.braceNest=0,B;default:{let he=!0,oe=!0,$=!0;if(P(w))return E.braceNest>0&&d(Te.UNTERMINATED_CLOSING_BRACE,o(),0),B=f(E,1,F(w)),E.braceNest=0,E.inLinked=!1,B;if(E.braceNest>0&&(E.currentType===5||E.currentType===6||E.currentType===7))return d(Te.UNTERMINATED_CLOSING_BRACE,o(),0),E.braceNest=0,ce(w,E);if(he=b(w,E))return B=f(E,5,X(w)),g(w),B;if(oe=x(w,E))return B=f(E,6,ee(w)),g(w),B;if($=k(w,E))return B=f(E,7,V(w)),g(w),B;if(!he&&!oe&&!$)return B=f(E,13,C(w)),d(Te.INVALID_TOKEN_IN_PLACEHOLDER,o(),0,B.value),g(w),B;break}}return B}function U(w,E){const{currentType:B}=E;let q=null;const he=w.currentChar();switch((B===8||B===9||B===12||B===10)&&(he===vn||he===Or)&&d(Te.INVALID_LINKED_FORMAT,o(),0),he){case"@":return w.next(),q=f(E,8,"@"),E.inLinked=!0,q;case".":return g(w),w.next(),f(E,9,".");case":":return g(w),w.next(),f(E,10,":");default:return P(w)?(q=f(E,1,F(w)),E.braceNest=0,E.inLinked=!1,q):S(w,E)||A(w,E)?(g(w),U(w,E)):T(w,E)?(g(w),f(E,12,I(w))):M(w,E)?(g(w),he==="{"?Y(w,E)||q:f(E,11,_(w))):(B===8&&d(Te.INVALID_LINKED_FORMAT,o(),0),E.braceNest=0,E.inLinked=!1,ce(w,E))}}function ce(w,E){let B={type:14};if(E.braceNest>0)return Y(w,E)||p(E);if(E.inLinked)return U(w,E)||p(E);switch(w.currentChar()){case"{":return Y(w,E)||p(E);case"}":return d(Te.UNBALANCED_CLOSING_BRACE,o(),0),w.next(),f(E,3,"}");case"@":return U(w,E)||p(E);default:{if(P(w))return B=f(E,1,F(w)),E.braceNest=0,E.inLinked=!1,B;const{isModulo:he,hasSpace:oe}=z(w);if(he)return oe?f(E,0,j(w)):f(E,4,te(w));if(D(w))return f(E,0,j(w));break}}return B}function ue(){const{currentType:w,offset:E,startLoc:B,endLoc:q}=a;return a.lastType=w,a.lastOffset=E,a.lastStartLoc=B,a.lastEndLoc=q,a.offset=s(),a.startLoc=o(),r.currentChar()===rs?f(a,14):ce(r,a)}return{nextToken:ue,currentOffset:s,currentPosition:o,context:u}}const w_="parser",E_=/(?:\\\\|\\'|\\u([0-9a-fA-F]{4})|\\U([0-9a-fA-F]{6}))/g;function S_(t,e,n){switch(t){case"\\\\":return"\\";case"\\'":return"'";default:{const r=parseInt(e||n,16);return r<=55295||r>=57344?String.fromCodePoint(r):""}}}function C_(t={}){const e=t.location!==!1,{onError:n,onWarn:r}=t;function s(b,x,k,S,...T){const A=b.currentPosition();if(A.offset+=S,A.column+=S,n){const M=e?Wa(k,A):null,P=gi(x,M,{domain:w_,args:T});n(P)}}function o(b,x,k,S,...T){const A=b.currentPosition();if(A.offset+=S,A.column+=S,r){const M=e?Wa(k,A):null;r(f_(x,M,T))}}function i(b,x,k){const S={type:b};return e&&(S.start=x,S.end=x,S.loc={start:k,end:k}),S}function l(b,x,k,S){e&&(b.end=x,b.loc&&(b.loc.end=k))}function a(b,x){const k=b.context(),S=i(3,k.offset,k.startLoc);return S.value=x,l(S,b.currentOffset(),b.currentPosition()),S}function u(b,x){const k=b.context(),{lastOffset:S,lastStartLoc:T}=k,A=i(5,S,T);return A.index=parseInt(x,10),b.nextToken(),l(A,b.currentOffset(),b.currentPosition()),A}function c(b,x,k){const S=b.context(),{lastOffset:T,lastStartLoc:A}=S,M=i(4,T,A);return M.key=x,k===!0&&(M.modulo=!0),b.nextToken(),l(M,b.currentOffset(),b.currentPosition()),M}function d(b,x){const k=b.context(),{lastOffset:S,lastStartLoc:T}=k,A=i(9,S,T);return A.value=x.replace(E_,S_),b.nextToken(),l(A,b.currentOffset(),b.currentPosition()),A}function f(b){const x=b.nextToken(),k=b.context(),{lastOffset:S,lastStartLoc:T}=k,A=i(8,S,T);return x.type!==12?(s(b,Te.UNEXPECTED_EMPTY_LINKED_MODIFIER,k.lastStartLoc,0),A.value="",l(A,S,T),{nextConsumeToken:x,node:A}):(x.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,Qn(x)),A.value=x.value||"",l(A,b.currentOffset(),b.currentPosition()),{node:A})}function p(b,x){const k=b.context(),S=i(7,k.offset,k.startLoc);return S.value=x,l(S,b.currentOffset(),b.currentPosition()),S}function h(b){const x=b.context(),k=i(6,x.offset,x.startLoc);let S=b.nextToken();if(S.type===9){const T=f(b);k.modifier=T.node,S=T.nextConsumeToken||b.nextToken()}switch(S.type!==10&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(S)),S=b.nextToken(),S.type===2&&(S=b.nextToken()),S.type){case 11:S.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(S)),k.key=p(b,S.value||"");break;case 5:S.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(S)),k.key=c(b,S.value||"");break;case 6:S.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(S)),k.key=u(b,S.value||"");break;case 7:S.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(S)),k.key=d(b,S.value||"");break;default:{s(b,Te.UNEXPECTED_EMPTY_LINKED_KEY,x.lastStartLoc,0);const T=b.context(),A=i(7,T.offset,T.startLoc);return A.value="",l(A,T.offset,T.startLoc),k.key=A,l(k,T.offset,T.startLoc),{nextConsumeToken:S,node:k}}}return l(k,b.currentOffset(),b.currentPosition()),{node:k}}function m(b){const x=b.context(),k=x.currentType===1?b.currentOffset():x.offset,S=x.currentType===1?x.endLoc:x.startLoc,T=i(2,k,S);T.items=[];let A=null,M=null;do{const D=A||b.nextToken();switch(A=null,D.type){case 0:D.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(D)),T.items.push(a(b,D.value||""));break;case 6:D.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(D)),T.items.push(u(b,D.value||""));break;case 4:M=!0;break;case 5:D.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(D)),T.items.push(c(b,D.value||"",!!M)),M&&(o(b,Sp.USE_MODULO_SYNTAX,x.lastStartLoc,0,Qn(D)),M=null);break;case 7:D.value==null&&s(b,Te.UNEXPECTED_LEXICAL_ANALYSIS,x.lastStartLoc,0,Qn(D)),T.items.push(d(b,D.value||""));break;case 8:{const W=h(b);T.items.push(W.node),A=W.nextConsumeToken||null;break}}}while(x.currentType!==14&&x.currentType!==1);const P=x.currentType===1?x.lastOffset:b.currentOffset(),z=x.currentType===1?x.lastEndLoc:b.currentPosition();return l(T,P,z),T}function g(b,x,k,S){const T=b.context();let A=S.items.length===0;const M=i(1,x,k);M.cases=[],M.cases.push(S);do{const P=m(b);A||(A=P.items.length===0),M.cases.push(P)}while(T.currentType!==14);return A&&s(b,Te.MUST_HAVE_MESSAGES_IN_PLURAL,k,0),l(M,b.currentOffset(),b.currentPosition()),M}function v(b){const x=b.context(),{offset:k,startLoc:S}=x,T=m(b);return x.currentType===14?T:g(b,k,S,T)}function y(b){const x=k_(b,d0({},t)),k=x.context(),S=i(0,k.offset,k.startLoc);return e&&S.loc&&(S.loc.source=b),S.body=v(x),t.onCacheKey&&(S.cacheKey=t.onCacheKey(b)),k.currentType!==14&&s(x,Te.UNEXPECTED_LEXICAL_ANALYSIS,k.lastStartLoc,0,b[k.offset]||""),l(S,x.currentOffset(),x.currentPosition()),S}return{parse:y}}function Qn(t){if(t.type===14)return"EOF";const e=(t.value||"").replace(/\r?\n/gu,"\\n");return e.length>10?e.slice(0,9)+"":e}function __(t,e={}){const n={ast:t,helpers:new Set};return{context:()=>n,helper:o=>(n.helpers.add(o),o)}}function Xm(t,e){for(let n=0;n<t.length;n++)Cp(t[n],e)}function Cp(t,e){switch(t.type){case 1:Xm(t.cases,e),e.helper("plural");break;case 2:Xm(t.items,e);break;case 6:{Cp(t.key,e),e.helper("linked"),e.helper("type");break}case 5:e.helper("interpolate"),e.helper("list");break;case 4:e.helper("interpolate"),e.helper("named");break}}function T_(t,e={}){const n=__(t);n.helper("normalize"),t.body&&Cp(t.body,n);const r=n.context();t.helpers=Array.from(r.helpers)}function A_(t){const e=t.body;return e.type===2?Qm(e):e.cases.forEach(n=>Qm(n)),t}function Qm(t){if(t.items.length===1){const e=t.items[0];(e.type===3||e.type===9)&&(t.static=e.value,delete e.value)}else{const e=[];for(let n=0;n<t.items.length;n++){const r=t.items[n];if(!(r.type===3||r.type===9)||r.value==null)break;e.push(r.value)}if(e.length===t.items.length){t.static=f0(e);for(let n=0;n<t.items.length;n++){const r=t.items[n];(r.type===3||r.type===9)&&delete r.value}}}}const I_="minifier";function Po(t){switch(t.t=t.type,t.type){case 0:{const e=t;Po(e.body),e.b=e.body,delete e.body;break}case 1:{const e=t,n=e.cases;for(let r=0;r<n.length;r++)Po(n[r]);e.c=n,delete e.cases;break}case 2:{const e=t,n=e.items;for(let r=0;r<n.length;r++)Po(n[r]);e.i=n,delete e.items,e.static&&(e.s=e.static,delete e.static);break}case 3:case 9:case 8:case 7:{const e=t;e.value&&(e.v=e.value,delete e.value);break}case 6:{const e=t;Po(e.key),e.k=e.key,delete e.key,e.modifier&&(Po(e.modifier),e.m=e.modifier,delete e.modifier);break}case 5:{const e=t;e.i=e.index,delete e.index;break}case 4:{const e=t;e.k=e.key,delete e.key;break}default:throw gi(Te.UNHANDLED_MINIFIER_NODE_TYPE,null,{domain:I_,args:[t.type]})}delete t.type}const O_="parser";function M_(t,e){const{filename:n,breakLineCode:r,needIndent:s}=e,o=e.location!==!1,i={filename:n,code:"",column:1,line:1,offset:0,map:void 0,breakLineCode:r,needIndent:s,indentLevel:0};o&&t.loc&&(i.source=t.loc.source);const l=()=>i;function a(m,g){i.code+=m}function u(m,g=!0){const v=g?r:"";a(s?v+"  ".repeat(m):v)}function c(m=!0){const g=++i.indentLevel;m&&u(g)}function d(m=!0){const g=--i.indentLevel;m&&u(g)}function f(){u(i.indentLevel)}return{context:l,push:a,indent:c,deindent:d,newline:f,helper:m=>`_${m}`,needIndent:()=>i.needIndent}}function N_(t,e){const{helper:n}=t;t.push(`${n("linked")}(`),ti(t,e.key),e.modifier?(t.push(", "),ti(t,e.modifier),t.push(", _type")):t.push(", undefined, _type"),t.push(")")}function R_(t,e){const{helper:n,needIndent:r}=t;t.push(`${n("normalize")}([`),t.indent(r());const s=e.items.length;for(let o=0;o<s&&(ti(t,e.items[o]),o!==s-1);o++)t.push(", ");t.deindent(r()),t.push("])")}function P_(t,e){const{helper:n,needIndent:r}=t;if(e.cases.length>1){t.push(`${n("plural")}([`),t.indent(r());const s=e.cases.length;for(let o=0;o<s&&(ti(t,e.cases[o]),o!==s-1);o++)t.push(", ");t.deindent(r()),t.push("])")}}function D_(t,e){e.body?ti(t,e.body):t.push("null")}function ti(t,e){const{helper:n}=t;switch(e.type){case 0:D_(t,e);break;case 1:P_(t,e);break;case 2:R_(t,e);break;case 6:N_(t,e);break;case 8:t.push(JSON.stringify(e.value),e);break;case 7:t.push(JSON.stringify(e.value),e);break;case 5:t.push(`${n("interpolate")}(${n("list")}(${e.index}))`,e);break;case 4:t.push(`${n("interpolate")}(${n("named")}(${JSON.stringify(e.key)}))`,e);break;case 9:t.push(JSON.stringify(e.value),e);break;case 3:t.push(JSON.stringify(e.value),e);break;default:throw gi(Te.UNHANDLED_CODEGEN_NODE_TYPE,null,{domain:O_,args:[e.type]})}}const L_=(t,e={})=>{const n=Ym(e.mode)?e.mode:"normal",r=Ym(e.filename)?e.filename:"message.intl";e.sourceMap;const s=e.breakLineCode!=null?e.breakLineCode:n==="arrow"?";":`
`,o=e.needIndent?e.needIndent:n!=="arrow",i=t.helpers||[],l=M_(t,{filename:r,breakLineCode:s,needIndent:o});l.push(n==="normal"?"function __msg__ (ctx) {":"(ctx) => {"),l.indent(o),i.length>0&&(l.push(`const { ${f0(i.map(c=>`${c}: _${c}`),", ")} } = ctx`),l.newline()),l.push("return "),ti(l,t),l.deindent(o),l.push("}"),delete t.helpers;const{code:a,map:u}=l.context();return{ast:t,code:a,map:u?u.toJSON():void 0}};function F_(t,e={}){const n=d0({},e),r=!!n.jit,s=!!n.minify,o=n.optimize==null?!0:n.optimize,l=C_(n).parse(t);return r?(o&&A_(l),s&&Po(l),{ast:l,code:""}):(T_(l,n),L_(l,n))}function $_(){typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Hr().__INTLIFY_PROD_DEVTOOLS__=!1),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Hr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Hr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1)}function xr(t){return Je(t)&&_p(t)===0&&(nr(t,"b")||nr(t,"body"))}const p0=["b","body"];function B_(t){return $s(t,p0)}const h0=["c","cases"];function V_(t){return $s(t,h0,[])}const m0=["s","static"];function H_(t){return $s(t,m0)}const g0=["i","items"];function j_(t){return $s(t,g0,[])}const v0=["t","type"];function _p(t){return $s(t,v0)}const y0=["v","value"];function ea(t,e){const n=$s(t,y0);if(n!=null)return n;throw yl(e)}const b0=["m","modifier"];function z_(t){return $s(t,b0)}const x0=["k","key"];function W_(t){const e=$s(t,x0);if(e)return e;throw yl(6)}function $s(t,e,n){for(let r=0;r<e.length;r++){const s=e[r];if(nr(t,s)&&t[s]!=null)return t[s]}return n}const k0=[...p0,...h0,...m0,...g0,...x0,...b0,...y0,...v0];function yl(t){return new Error(`unhandled node type: ${t}`)}const Bs=[];Bs[0]={w:[0],i:[3,0],"[":[4],o:[7]};Bs[1]={w:[1],".":[2],"[":[4],o:[7]};Bs[2]={w:[2],i:[3,0],0:[3,0]};Bs[3]={i:[3,0],0:[3,0],w:[1,1],".":[2,1],"[":[4,1],o:[7,1]};Bs[4]={"'":[5,0],'"':[6,0],"[":[4,2],"]":[1,3],o:8,l:[4,0]};Bs[5]={"'":[4,0],o:8,l:[5,0]};Bs[6]={'"':[4,0],o:8,l:[6,0]};const U_=/^\s?(?:true|false|-?[\d.]+|'[^']*'|"[^"]*")\s?$/;function q_(t){return U_.test(t)}function K_(t){const e=t.charCodeAt(0),n=t.charCodeAt(t.length-1);return e===n&&(e===34||e===39)?t.slice(1,-1):t}function G_(t){if(t==null)return"o";switch(t.charCodeAt(0)){case 91:case 93:case 46:case 34:case 39:return t;case 95:case 36:case 45:return"i";case 9:case 10:case 13:case 160:case 65279:case 8232:case 8233:return"w"}return"i"}function Y_(t){const e=t.trim();return t.charAt(0)==="0"&&isNaN(parseInt(t))?!1:q_(e)?K_(e):"*"+e}function J_(t){const e=[];let n=-1,r=0,s=0,o,i,l,a,u,c,d;const f=[];f[0]=()=>{i===void 0?i=l:i+=l},f[1]=()=>{i!==void 0&&(e.push(i),i=void 0)},f[2]=()=>{f[0](),s++},f[3]=()=>{if(s>0)s--,r=4,f[0]();else{if(s=0,i===void 0||(i=Y_(i),i===!1))return!1;f[1]()}};function p(){const h=t[n+1];if(r===5&&h==="'"||r===6&&h==='"')return n++,l="\\"+h,f[0](),!0}for(;r!==null;)if(n++,o=t[n],!(o==="\\"&&p())){if(a=G_(o),d=Bs[r],u=d[a]||d.l||8,u===8||(r=u[0],u[1]!==void 0&&(c=f[u[1]],c&&(l=o,c()===!1))))return;if(r===7)return e}}const Zm=new Map;function X_(t,e){return Je(t)?t[e]:null}function Q_(t,e){if(!Je(t))return null;let n=Zm.get(e);if(n||(n=J_(e),n&&Zm.set(e,n)),!n)return null;const r=n.length;let s=t,o=0;for(;o<r;){const i=n[o];if(k0.includes(i)&&xr(s))return null;const l=s[i];if(l===void 0||dt(s))return null;s=l,o++}return s}const Z_=t=>t,eT=t=>"",tT="text",nT=t=>t.length===0?"":l_(t),rT=i_;function eg(t,e){return t=Math.abs(t),e===2?t?t>1?1:0:1:t?Math.min(t,2):0}function sT(t){const e=At(t.pluralIndex)?t.pluralIndex:-1;return t.named&&(At(t.named.count)||At(t.named.n))?At(t.named.count)?t.named.count:At(t.named.n)?t.named.n:e:e}function oT(t,e){e.count||(e.count=t),e.n||(e.n=t)}function iT(t={}){const e=t.locale,n=sT(t),r=Je(t.pluralRules)&&ge(e)&&dt(t.pluralRules[e])?t.pluralRules[e]:eg,s=Je(t.pluralRules)&&ge(e)&&dt(t.pluralRules[e])?eg:void 0,o=v=>v[r(n,v.length,s)],i=t.list||[],l=v=>i[v],a=t.named||ot();At(t.pluralIndex)&&oT(n,a);const u=v=>a[v];function c(v){const y=dt(t.messages)?t.messages(v):Je(t.messages)?t.messages[v]:!1;return y||(t.parent?t.parent.message(v):eT)}const d=v=>t.modifiers?t.modifiers[v]:Z_,f=Ne(t.processor)&&dt(t.processor.normalize)?t.processor.normalize:nT,p=Ne(t.processor)&&dt(t.processor.interpolate)?t.processor.interpolate:rT,h=Ne(t.processor)&&ge(t.processor.type)?t.processor.type:tT,g={list:l,named:u,plural:o,linked:(v,...y)=>{const[b,x]=y;let k="text",S="";y.length===1?Je(b)?(S=b.modifier||S,k=b.type||k):ge(b)&&(S=b||S):y.length===2&&(ge(b)&&(S=b||S),ge(x)&&(k=x||k));const T=c(v)(g),A=k==="vnode"&&ht(T)&&S?T[0]:T;return S?d(S)(A,k):A},message:c,type:h,interpolate:p,normalize:f,values:sn(ot(),i,a)};return g}let bl=null;function lT(t){bl=t}function aT(t,e,n){bl&&bl.emit("i18n:init",{timestamp:Date.now(),i18n:t,version:e,meta:n})}const uT=cT("function:translate");function cT(t){return e=>bl&&bl.emit(t,e)}const dT=Sp.__EXTEND_POINT__,Gs=nc(dT),fT={FALLBACK_TO_TRANSLATE:Gs(),CANNOT_FORMAT_NUMBER:Gs(),FALLBACK_TO_NUMBER_FORMAT:Gs(),CANNOT_FORMAT_DATE:Gs(),FALLBACK_TO_DATE_FORMAT:Gs(),EXPERIMENTAL_CUSTOM_MESSAGE_COMPILER:Gs(),__EXTEND_POINT__:Gs()},w0=Te.__EXTEND_POINT__,Ys=nc(w0),rr={INVALID_ARGUMENT:w0,INVALID_DATE_ARGUMENT:Ys(),INVALID_ISO_DATE_ARGUMENT:Ys(),NOT_SUPPORT_NON_STRING_MESSAGE:Ys(),NOT_SUPPORT_LOCALE_PROMISE_VALUE:Ys(),NOT_SUPPORT_LOCALE_ASYNC_FUNCTION:Ys(),NOT_SUPPORT_LOCALE_TYPE:Ys(),__EXTEND_POINT__:Ys()};function yr(t){return gi(t,null,void 0)}function Tp(t,e){return e.locale!=null?tg(e.locale):tg(t.locale)}let Gc;function tg(t){if(ge(t))return t;if(dt(t)){if(t.resolvedOnce&&Gc!=null)return Gc;if(t.constructor.name==="Function"){const e=t();if(o_(e))throw yr(rr.NOT_SUPPORT_LOCALE_PROMISE_VALUE);return Gc=e}else throw yr(rr.NOT_SUPPORT_LOCALE_ASYNC_FUNCTION)}else throw yr(rr.NOT_SUPPORT_LOCALE_TYPE)}function pT(t,e,n){return[...new Set([n,...ht(e)?e:Je(e)?Object.keys(e):ge(e)?[e]:[n]])]}function E0(t,e,n){const r=ge(n)?n:ni,s=t;s.__localeChainCache||(s.__localeChainCache=new Map);let o=s.__localeChainCache.get(r);if(!o){o=[];let i=[n];for(;ht(i);)i=ng(o,i,e);const l=ht(e)||!Ne(e)?e:e.default?e.default:null;i=ge(l)?[l]:l,ht(i)&&ng(o,i,!1),s.__localeChainCache.set(r,o)}return o}function ng(t,e,n){let r=!0;for(let s=0;s<e.length&&ze(r);s++){const o=e[s];ge(o)&&(r=hT(t,e[s],n))}return r}function hT(t,e,n){let r;const s=e.split("-");do{const o=s.join("-");r=mT(t,o,n),s.splice(-1,1)}while(s.length&&r===!0);return r}function mT(t,e,n){let r=!1;if(!t.includes(e)&&(r=!0,e)){r=e[e.length-1]!=="!";const s=e.replace(/!/g,"");t.push(s),(ht(n)||Ne(n))&&n[s]&&(r=n[s])}return r}const gT="9.14.5",rc=-1,ni="en-US",rg="",sg=t=>`${t.charAt(0).toLocaleUpperCase()}${t.substr(1)}`;function vT(){return{upper:(t,e)=>e==="text"&&ge(t)?t.toUpperCase():e==="vnode"&&Je(t)&&"__v_isVNode"in t?t.children.toUpperCase():t,lower:(t,e)=>e==="text"&&ge(t)?t.toLowerCase():e==="vnode"&&Je(t)&&"__v_isVNode"in t?t.children.toLowerCase():t,capitalize:(t,e)=>e==="text"&&ge(t)?sg(t):e==="vnode"&&Je(t)&&"__v_isVNode"in t?sg(t.children):t}}let S0;function og(t){S0=t}let C0;function yT(t){C0=t}let _0;function bT(t){_0=t}let T0=null;const xT=t=>{T0=t},kT=()=>T0;let A0=null;const ig=t=>{A0=t},wT=()=>A0;let lg=0;function ET(t={}){const e=dt(t.onWarn)?t.onWarn:QC,n=ge(t.version)?t.version:gT,r=ge(t.locale)||dt(t.locale)?t.locale:ni,s=dt(r)?ni:r,o=ht(t.fallbackLocale)||Ne(t.fallbackLocale)||ge(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:s,i=Ne(t.messages)?t.messages:Yc(s),l=Ne(t.datetimeFormats)?t.datetimeFormats:Yc(s),a=Ne(t.numberFormats)?t.numberFormats:Yc(s),u=sn(ot(),t.modifiers,vT()),c=t.pluralRules||ot(),d=dt(t.missing)?t.missing:null,f=ze(t.missingWarn)||Rs(t.missingWarn)?t.missingWarn:!0,p=ze(t.fallbackWarn)||Rs(t.fallbackWarn)?t.fallbackWarn:!0,h=!!t.fallbackFormat,m=!!t.unresolving,g=dt(t.postTranslation)?t.postTranslation:null,v=Ne(t.processor)?t.processor:null,y=ze(t.warnHtmlMessage)?t.warnHtmlMessage:!0,b=!!t.escapeParameter,x=dt(t.messageCompiler)?t.messageCompiler:S0,k=dt(t.messageResolver)?t.messageResolver:C0||X_,S=dt(t.localeFallbacker)?t.localeFallbacker:_0||pT,T=Je(t.fallbackContext)?t.fallbackContext:void 0,A=t,M=Je(A.__datetimeFormatters)?A.__datetimeFormatters:new Map,P=Je(A.__numberFormatters)?A.__numberFormatters:new Map,z=Je(A.__meta)?A.__meta:{};lg++;const D={version:n,cid:lg,locale:r,fallbackLocale:o,messages:i,modifiers:u,pluralRules:c,missing:d,missingWarn:f,fallbackWarn:p,fallbackFormat:h,unresolving:m,postTranslation:g,processor:v,warnHtmlMessage:y,escapeParameter:b,messageCompiler:x,messageResolver:k,localeFallbacker:S,fallbackContext:T,onWarn:e,__meta:z};return D.datetimeFormats=l,D.numberFormats=a,D.__datetimeFormatters=M,D.__numberFormatters=P,__INTLIFY_PROD_DEVTOOLS__&&aT(D,n,z),D}const Yc=t=>({[t]:ot()});function Ap(t,e,n,r,s){const{missing:o,onWarn:i}=t;if(o!==null){const l=o(t,n,e,s);return ge(l)?l:e}else return e}function Ci(t,e,n){const r=t;r.__localeChainCache=new Map,t.localeFallbacker(t,n,e)}function ST(t,e){return t===e?!1:t.split("-")[0]===e.split("-")[0]}function CT(t,e){const n=e.indexOf(t);if(n===-1)return!1;for(let r=n+1;r<e.length;r++)if(ST(t,e[r]))return!0;return!1}function Jc(t){return n=>_T(n,t)}function _T(t,e){const n=B_(e);if(n==null)throw yl(0);if(_p(n)===1){const o=V_(n);return t.plural(o.reduce((i,l)=>[...i,ag(t,l)],[]))}else return ag(t,n)}function ag(t,e){const n=H_(e);if(n!=null)return t.type==="text"?n:t.normalize([n]);{const r=j_(e).reduce((s,o)=>[...s,nf(t,o)],[]);return t.normalize(r)}}function nf(t,e){const n=_p(e);switch(n){case 3:return ea(e,n);case 9:return ea(e,n);case 4:{const r=e;if(nr(r,"k")&&r.k)return t.interpolate(t.named(r.k));if(nr(r,"key")&&r.key)return t.interpolate(t.named(r.key));throw yl(n)}case 5:{const r=e;if(nr(r,"i")&&At(r.i))return t.interpolate(t.list(r.i));if(nr(r,"index")&&At(r.index))return t.interpolate(t.list(r.index));throw yl(n)}case 6:{const r=e,s=z_(r),o=W_(r);return t.linked(nf(t,o),s?nf(t,s):void 0,t.type)}case 7:return ea(e,n);case 8:return ea(e,n);default:throw new Error(`unhandled node on format message part: ${n}`)}}const I0=t=>t;let Vo=ot();function O0(t,e={}){let n=!1;const r=e.onError||h_;return e.onError=s=>{n=!0,r(s)},{...F_(t,e),detectError:n}}const TT=(t,e)=>{if(!ge(t))throw yr(rr.NOT_SUPPORT_NON_STRING_MESSAGE);{ze(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||I0)(t),s=Vo[r];if(s)return s;const{code:o,detectError:i}=O0(t,e),l=new Function(`return ${o}`)();return i?l:Vo[r]=l}};function AT(t,e){if(__INTLIFY_JIT_COMPILATION__&&!__INTLIFY_DROP_MESSAGE_COMPILER__&&ge(t)){ze(e.warnHtmlMessage)&&e.warnHtmlMessage;const r=(e.onCacheKey||I0)(t),s=Vo[r];if(s)return s;const{ast:o,detectError:i}=O0(t,{...e,location:!1,jit:!0}),l=Jc(o);return i?l:Vo[r]=l}else{const n=t.cacheKey;if(n){const r=Vo[n];return r||(Vo[n]=Jc(t))}else return Jc(t)}}const ug=()=>"",Un=t=>dt(t);function cg(t,...e){const{fallbackFormat:n,postTranslation:r,unresolving:s,messageCompiler:o,fallbackLocale:i,messages:l}=t,[a,u]=rf(...e),c=ze(u.missingWarn)?u.missingWarn:t.missingWarn,d=ze(u.fallbackWarn)?u.fallbackWarn:t.fallbackWarn,f=ze(u.escapeParameter)?u.escapeParameter:t.escapeParameter,p=!!u.resolvedMessage,h=ge(u.default)||ze(u.default)?ze(u.default)?o?a:()=>a:u.default:n?o?a:()=>a:"",m=n||h!=="",g=Tp(t,u);f&&IT(u);let[v,y,b]=p?[a,g,l[g]||ot()]:M0(t,a,g,i,d,c),x=v,k=a;if(!p&&!(ge(x)||xr(x)||Un(x))&&m&&(x=h,k=x),!p&&(!(ge(x)||xr(x)||Un(x))||!ge(y)))return s?rc:a;let S=!1;const T=()=>{S=!0},A=Un(x)?x:N0(t,a,y,x,k,T);if(S)return x;const M=NT(t,y,b,u),P=iT(M),z=OT(t,A,P);let D=r?r(z,a):z;if(f&&ge(D)&&(D=r_(D)),__INTLIFY_PROD_DEVTOOLS__){const W={timestamp:Date.now(),key:ge(a)?a:Un(x)?x.key:"",locale:y||(Un(x)?x.locale:""),format:ge(x)?x:Un(x)?x.source:"",message:D};W.meta=sn({},t.__meta,kT()||{}),uT(W)}return D}function IT(t){ht(t.list)?t.list=t.list.map(e=>ge(e)?Km(e):e):Je(t.named)&&Object.keys(t.named).forEach(e=>{ge(t.named[e])&&(t.named[e]=Km(t.named[e]))})}function M0(t,e,n,r,s,o){const{messages:i,onWarn:l,messageResolver:a,localeFallbacker:u}=t,c=u(t,r,n);let d=ot(),f,p=null;const h="translate";for(let m=0;m<c.length&&(f=c[m],d=i[f]||ot(),(p=a(d,e))===null&&(p=d[e]),!(ge(p)||xr(p)||Un(p)));m++)if(!CT(f,c)){const g=Ap(t,e,f,o,h);g!==e&&(p=g)}return[p,f,d]}function N0(t,e,n,r,s,o){const{messageCompiler:i,warnHtmlMessage:l}=t;if(Un(r)){const u=r;return u.locale=u.locale||n,u.key=u.key||e,u}if(i==null){const u=(()=>r);return u.locale=n,u.key=e,u}const a=i(r,MT(t,n,s,r,l,o));return a.locale=n,a.key=e,a.source=r,a}function OT(t,e,n){return e(n)}function rf(...t){const[e,n,r]=t,s=ot();if(!ge(e)&&!At(e)&&!Un(e)&&!xr(e))throw yr(rr.INVALID_ARGUMENT);const o=At(e)?String(e):(Un(e),e);return At(n)?s.plural=n:ge(n)?s.default=n:Ne(n)&&!tc(n)?s.named=n:ht(n)&&(s.list=n),At(r)?s.plural=r:ge(r)?s.default=r:Ne(r)&&sn(s,r),[o,s]}function MT(t,e,n,r,s,o){return{locale:e,key:n,warnHtmlMessage:s,onError:i=>{throw o&&o(i),i},onCacheKey:i=>ZC(e,n,i)}}function NT(t,e,n,r){const{modifiers:s,pluralRules:o,messageResolver:i,fallbackLocale:l,fallbackWarn:a,missingWarn:u,fallbackContext:c}=t,f={locale:e,modifiers:s,pluralRules:o,messages:p=>{let h=i(n,p);if(h==null&&c){const[,,m]=M0(c,p,e,l,a,u);h=i(m,p)}if(ge(h)||xr(h)){let m=!1;const v=N0(t,p,e,h,p,()=>{m=!0});return m?ug:v}else return Un(h)?h:ug}};return t.processor&&(f.processor=t.processor),r.list&&(f.list=r.list),r.named&&(f.named=r.named),At(r.plural)&&(f.pluralIndex=r.plural),f}function dg(t,...e){const{datetimeFormats:n,unresolving:r,fallbackLocale:s,onWarn:o,localeFallbacker:i}=t,{__datetimeFormatters:l}=t,[a,u,c,d]=sf(...e),f=ze(c.missingWarn)?c.missingWarn:t.missingWarn;ze(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const p=!!c.part,h=Tp(t,c),m=i(t,s,h);if(!ge(a)||a==="")return new Intl.DateTimeFormat(h,d).format(u);let g={},v,y=null;const b="datetime format";for(let S=0;S<m.length&&(v=m[S],g=n[v]||{},y=g[a],!Ne(y));S++)Ap(t,a,v,f,b);if(!Ne(y)||!ge(v))return r?rc:a;let x=`${v}__${a}`;tc(d)||(x=`${x}__${JSON.stringify(d)}`);let k=l.get(x);return k||(k=new Intl.DateTimeFormat(v,sn({},y,d)),l.set(x,k)),p?k.formatToParts(u):k.format(u)}const R0=["localeMatcher","weekday","era","year","month","day","hour","minute","second","timeZoneName","formatMatcher","hour12","timeZone","dateStyle","timeStyle","calendar","dayPeriod","numberingSystem","hourCycle","fractionalSecondDigits"];function sf(...t){const[e,n,r,s]=t,o=ot();let i=ot(),l;if(ge(e)){const a=e.match(/(\d{4}-\d{2}-\d{2})(T|\s)?(.*)/);if(!a)throw yr(rr.INVALID_ISO_DATE_ARGUMENT);const u=a[3]?a[3].trim().startsWith("T")?`${a[1].trim()}${a[3].trim()}`:`${a[1].trim()}T${a[3].trim()}`:a[1].trim();l=new Date(u);try{l.toISOString()}catch{throw yr(rr.INVALID_ISO_DATE_ARGUMENT)}}else if(t_(e)){if(isNaN(e.getTime()))throw yr(rr.INVALID_DATE_ARGUMENT);l=e}else if(At(e))l=e;else throw yr(rr.INVALID_ARGUMENT);return ge(n)?o.key=n:Ne(n)&&Object.keys(n).forEach(a=>{R0.includes(a)?i[a]=n[a]:o[a]=n[a]}),ge(r)?o.locale=r:Ne(r)&&(i=r),Ne(s)&&(i=s),[o.key||"",l,o,i]}function fg(t,e,n){const r=t;for(const s in n){const o=`${e}__${s}`;r.__datetimeFormatters.has(o)&&r.__datetimeFormatters.delete(o)}}function pg(t,...e){const{numberFormats:n,unresolving:r,fallbackLocale:s,onWarn:o,localeFallbacker:i}=t,{__numberFormatters:l}=t,[a,u,c,d]=of(...e),f=ze(c.missingWarn)?c.missingWarn:t.missingWarn;ze(c.fallbackWarn)?c.fallbackWarn:t.fallbackWarn;const p=!!c.part,h=Tp(t,c),m=i(t,s,h);if(!ge(a)||a==="")return new Intl.NumberFormat(h,d).format(u);let g={},v,y=null;const b="number format";for(let S=0;S<m.length&&(v=m[S],g=n[v]||{},y=g[a],!Ne(y));S++)Ap(t,a,v,f,b);if(!Ne(y)||!ge(v))return r?rc:a;let x=`${v}__${a}`;tc(d)||(x=`${x}__${JSON.stringify(d)}`);let k=l.get(x);return k||(k=new Intl.NumberFormat(v,sn({},y,d)),l.set(x,k)),p?k.formatToParts(u):k.format(u)}const P0=["localeMatcher","style","currency","currencyDisplay","currencySign","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","notation","signDisplay","unit","unitDisplay","roundingMode","roundingPriority","roundingIncrement","trailingZeroDisplay"];function of(...t){const[e,n,r,s]=t,o=ot();let i=ot();if(!At(e))throw yr(rr.INVALID_ARGUMENT);const l=e;return ge(n)?o.key=n:Ne(n)&&Object.keys(n).forEach(a=>{P0.includes(a)?i[a]=n[a]:o[a]=n[a]}),ge(r)?o.locale=r:Ne(r)&&(i=r),Ne(s)&&(i=s),[o.key||"",l,o,i]}function hg(t,e,n){const r=t;for(const s in n){const o=`${e}__${s}`;r.__numberFormatters.has(o)&&r.__numberFormatters.delete(o)}}$_();const RT="9.14.5";function PT(){typeof __VUE_I18N_FULL_INSTALL__!="boolean"&&(Hr().__VUE_I18N_FULL_INSTALL__=!0),typeof __VUE_I18N_LEGACY_API__!="boolean"&&(Hr().__VUE_I18N_LEGACY_API__=!0),typeof __INTLIFY_JIT_COMPILATION__!="boolean"&&(Hr().__INTLIFY_JIT_COMPILATION__=!1),typeof __INTLIFY_DROP_MESSAGE_COMPILER__!="boolean"&&(Hr().__INTLIFY_DROP_MESSAGE_COMPILER__=!1),typeof __INTLIFY_PROD_DEVTOOLS__!="boolean"&&(Hr().__INTLIFY_PROD_DEVTOOLS__=!1)}const DT=fT.__EXTEND_POINT__,Mr=nc(DT);Mr(),Mr(),Mr(),Mr(),Mr(),Mr(),Mr(),Mr(),Mr();const D0=rr.__EXTEND_POINT__,_n=nc(D0),jt={UNEXPECTED_RETURN_TYPE:D0,INVALID_ARGUMENT:_n(),MUST_BE_CALL_SETUP_TOP:_n(),NOT_INSTALLED:_n(),NOT_AVAILABLE_IN_LEGACY_MODE:_n(),REQUIRED_VALUE:_n(),INVALID_VALUE:_n(),CANNOT_SETUP_VUE_DEVTOOLS_PLUGIN:_n(),NOT_INSTALLED_WITH_PROVIDE:_n(),UNEXPECTED_ERROR:_n(),NOT_COMPATIBLE_LEGACY_VUE_I18N:_n(),BRIDGE_SUPPORT_VUE_2_ONLY:_n(),MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION:_n(),NOT_AVAILABLE_COMPOSITION_IN_LEGACY:_n(),__EXTEND_POINT__:_n()};function Ut(t,...e){return gi(t,null,void 0)}const lf=Fs("__translateVNode"),af=Fs("__datetimeParts"),uf=Fs("__numberParts"),L0=Fs("__setPluralRules"),F0=Fs("__injectWithOption"),cf=Fs("__dispose");function xl(t){if(!Je(t)||xr(t))return t;for(const e in t)if(nr(t,e))if(!e.includes("."))Je(t[e])&&xl(t[e]);else{const n=e.split("."),r=n.length-1;let s=t,o=!1;for(let i=0;i<r;i++){if(n[i]==="__proto__")throw new Error(`unsafe key: ${n[i]}`);if(n[i]in s||(s[n[i]]=ot()),!Je(s[n[i]])){o=!0;break}s=s[n[i]]}if(o||(xr(s)?k0.includes(n[r])||delete t[e]:(s[n[r]]=t[e],delete t[e])),!xr(s)){const i=s[n[r]];Je(i)&&xl(i)}}return t}function sc(t,e){const{messages:n,__i18n:r,messageResolver:s,flatJson:o}=e,i=Ne(n)?n:ht(r)?ot():{[t]:ot()};if(ht(r)&&r.forEach(l=>{if("locale"in l&&"resource"in l){const{locale:a,resource:u}=l;a?(i[a]=i[a]||ot(),Ea(u,i[a])):Ea(u,i)}else ge(l)&&Ea(JSON.parse(l),i)}),s==null&&o)for(const l in i)nr(i,l)&&xl(i[l]);return i}function $0(t){return t.type}function B0(t,e,n){let r=Je(e.messages)?e.messages:ot();"__i18nGlobal"in n&&(r=sc(t.locale.value,{messages:r,__i18n:n.__i18nGlobal}));const s=Object.keys(r);s.length&&s.forEach(o=>{t.mergeLocaleMessage(o,r[o])});{if(Je(e.datetimeFormats)){const o=Object.keys(e.datetimeFormats);o.length&&o.forEach(i=>{t.mergeDateTimeFormat(i,e.datetimeFormats[i])})}if(Je(e.numberFormats)){const o=Object.keys(e.numberFormats);o.length&&o.forEach(i=>{t.mergeNumberFormat(i,e.numberFormats[i])})}}}function mg(t){return se(Dl,null,t,0)}const gg="__INTLIFY_META__",vg=()=>[],LT=()=>!1;let yg=0;function bg(t){return((e,n,r,s)=>t(n,r,ar()||void 0,s))}const FT=()=>{const t=ar();let e=null;return t&&(e=$0(t)[gg])?{[gg]:e}:null};function Ip(t={},e){const{__root:n,__injectWithOption:r}=t,s=n===void 0,o=t.flatJson,i=za?H:pi,l=!!t.translateExistCompatible;let a=ze(t.inheritLocale)?t.inheritLocale:!0;const u=i(n&&a?n.locale.value:ge(t.locale)?t.locale:ni),c=i(n&&a?n.fallbackLocale.value:ge(t.fallbackLocale)||ht(t.fallbackLocale)||Ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:u.value),d=i(sc(u.value,t)),f=i(Ne(t.datetimeFormats)?t.datetimeFormats:{[u.value]:{}}),p=i(Ne(t.numberFormats)?t.numberFormats:{[u.value]:{}});let h=n?n.missingWarn:ze(t.missingWarn)||Rs(t.missingWarn)?t.missingWarn:!0,m=n?n.fallbackWarn:ze(t.fallbackWarn)||Rs(t.fallbackWarn)?t.fallbackWarn:!0,g=n?n.fallbackRoot:ze(t.fallbackRoot)?t.fallbackRoot:!0,v=!!t.fallbackFormat,y=dt(t.missing)?t.missing:null,b=dt(t.missing)?bg(t.missing):null,x=dt(t.postTranslation)?t.postTranslation:null,k=n?n.warnHtmlMessage:ze(t.warnHtmlMessage)?t.warnHtmlMessage:!0,S=!!t.escapeParameter;const T=n?n.modifiers:Ne(t.modifiers)?t.modifiers:{};let A=t.pluralRules||n&&n.pluralRules,M;M=(()=>{s&&ig(null);const $={version:RT,locale:u.value,fallbackLocale:c.value,messages:d.value,modifiers:T,pluralRules:A,missing:b===null?void 0:b,missingWarn:h,fallbackWarn:m,fallbackFormat:v,unresolving:!0,postTranslation:x===null?void 0:x,warnHtmlMessage:k,escapeParameter:S,messageResolver:t.messageResolver,messageCompiler:t.messageCompiler,__meta:{framework:"vue"}};$.datetimeFormats=f.value,$.numberFormats=p.value,$.__datetimeFormatters=Ne(M)?M.__datetimeFormatters:void 0,$.__numberFormatters=Ne(M)?M.__numberFormatters:void 0;const G=ET($);return s&&ig(G),G})(),Ci(M,u.value,c.value);function z(){return[u.value,c.value,d.value,f.value,p.value]}const D=L({get:()=>u.value,set:$=>{u.value=$,M.locale=u.value}}),W=L({get:()=>c.value,set:$=>{c.value=$,M.fallbackLocale=c.value,Ci(M,u.value,$)}}),ie=L(()=>d.value),ae=L(()=>f.value),de=L(()=>p.value);function ve(){return dt(x)?x:null}function we($){x=$,M.postTranslation=$}function Qe(){return y}function ut($){$!==null&&(b=bg($)),y=$,M.missing=b}const ke=($,G,Ee,We,vt,hn)=>{z();let Jt;try{__INTLIFY_PROD_DEVTOOLS__,s||(M.fallbackContext=n?wT():void 0),Jt=$(M)}finally{__INTLIFY_PROD_DEVTOOLS__,s||(M.fallbackContext=void 0)}if(Ee!=="translate exists"&&At(Jt)&&Jt===rc||Ee==="translate exists"&&!Jt){const[zs,Oc]=G();return n&&g?We(n):vt(zs)}else{if(hn(Jt))return Jt;throw Ut(jt.UNEXPECTED_RETURN_TYPE)}};function _e(...$){return ke(G=>Reflect.apply(cg,null,[G,...$]),()=>rf(...$),"translate",G=>Reflect.apply(G.t,G,[...$]),G=>G,G=>ge(G))}function te(...$){const[G,Ee,We]=$;if(We&&!Je(We))throw Ut(jt.INVALID_ARGUMENT);return _e(G,Ee,sn({resolvedMessage:!0},We||{}))}function j(...$){return ke(G=>Reflect.apply(dg,null,[G,...$]),()=>sf(...$),"datetime format",G=>Reflect.apply(G.d,G,[...$]),()=>rg,G=>ge(G))}function X(...$){return ke(G=>Reflect.apply(pg,null,[G,...$]),()=>of(...$),"number format",G=>Reflect.apply(G.n,G,[...$]),()=>rg,G=>ge(G))}function ee($){return $.map(G=>ge(G)||At(G)||ze(G)?mg(String(G)):G)}const V={normalize:ee,interpolate:$=>$,type:"vnode"};function K(...$){return ke(G=>{let Ee;const We=G;try{We.processor=V,Ee=Reflect.apply(cg,null,[We,...$])}finally{We.processor=null}return Ee},()=>rf(...$),"translate",G=>G[lf](...$),G=>[mg(G)],G=>ht(G))}function Q(...$){return ke(G=>Reflect.apply(pg,null,[G,...$]),()=>of(...$),"number format",G=>G[uf](...$),vg,G=>ge(G)||ht(G))}function be(...$){return ke(G=>Reflect.apply(dg,null,[G,...$]),()=>sf(...$),"datetime format",G=>G[af](...$),vg,G=>ge(G)||ht(G))}function C($){A=$,M.pluralRules=A}function I($,G){return ke(()=>{if(!$)return!1;const Ee=ge(G)?G:u.value,We=Y(Ee),vt=M.messageResolver(We,$);return l?vt!=null:xr(vt)||Un(vt)||ge(vt)},()=>[$],"translate exists",Ee=>Reflect.apply(Ee.te,Ee,[$,G]),LT,Ee=>ze(Ee))}function _($){let G=null;const Ee=E0(M,c.value,u.value);for(let We=0;We<Ee.length;We++){const vt=d.value[Ee[We]]||{},hn=M.messageResolver(vt,$);if(hn!=null){G=hn;break}}return G}function F($){const G=_($);return G??(n?n.tm($)||{}:{})}function Y($){return d.value[$]||{}}function U($,G){if(o){const Ee={[$]:G};for(const We in Ee)nr(Ee,We)&&xl(Ee[We]);G=Ee[$]}d.value[$]=G,M.messages=d.value}function ce($,G){d.value[$]=d.value[$]||{};const Ee={[$]:G};if(o)for(const We in Ee)nr(Ee,We)&&xl(Ee[We]);G=Ee[$],Ea(G,d.value[$]),M.messages=d.value}function ue($){return f.value[$]||{}}function w($,G){f.value[$]=G,M.datetimeFormats=f.value,fg(M,$,G)}function E($,G){f.value[$]=sn(f.value[$]||{},G),M.datetimeFormats=f.value,fg(M,$,G)}function B($){return p.value[$]||{}}function q($,G){p.value[$]=G,M.numberFormats=p.value,hg(M,$,G)}function he($,G){p.value[$]=sn(p.value[$]||{},G),M.numberFormats=p.value,hg(M,$,G)}yg++,n&&za&&(je(n.locale,$=>{a&&(u.value=$,M.locale=$,Ci(M,u.value,c.value))}),je(n.fallbackLocale,$=>{a&&(c.value=$,M.fallbackLocale=$,Ci(M,u.value,c.value))}));const oe={id:yg,locale:D,fallbackLocale:W,get inheritLocale(){return a},set inheritLocale($){a=$,$&&n&&(u.value=n.locale.value,c.value=n.fallbackLocale.value,Ci(M,u.value,c.value))},get availableLocales(){return Object.keys(d.value).sort()},messages:ie,get modifiers(){return T},get pluralRules(){return A||{}},get isGlobal(){return s},get missingWarn(){return h},set missingWarn($){h=$,M.missingWarn=h},get fallbackWarn(){return m},set fallbackWarn($){m=$,M.fallbackWarn=m},get fallbackRoot(){return g},set fallbackRoot($){g=$},get fallbackFormat(){return v},set fallbackFormat($){v=$,M.fallbackFormat=v},get warnHtmlMessage(){return k},set warnHtmlMessage($){k=$,M.warnHtmlMessage=$},get escapeParameter(){return S},set escapeParameter($){S=$,M.escapeParameter=$},t:_e,getLocaleMessage:Y,setLocaleMessage:U,mergeLocaleMessage:ce,getPostTranslationHandler:ve,setPostTranslationHandler:we,getMissingHandler:Qe,setMissingHandler:ut,[L0]:C};return oe.datetimeFormats=ae,oe.numberFormats=de,oe.rt=te,oe.te=I,oe.tm=F,oe.d=j,oe.n=X,oe.getDateTimeFormat=ue,oe.setDateTimeFormat=w,oe.mergeDateTimeFormat=E,oe.getNumberFormat=B,oe.setNumberFormat=q,oe.mergeNumberFormat=he,oe[F0]=r,oe[lf]=K,oe[af]=be,oe[uf]=Q,oe}function $T(t){const e=ge(t.locale)?t.locale:ni,n=ge(t.fallbackLocale)||ht(t.fallbackLocale)||Ne(t.fallbackLocale)||t.fallbackLocale===!1?t.fallbackLocale:e,r=dt(t.missing)?t.missing:void 0,s=ze(t.silentTranslationWarn)||Rs(t.silentTranslationWarn)?!t.silentTranslationWarn:!0,o=ze(t.silentFallbackWarn)||Rs(t.silentFallbackWarn)?!t.silentFallbackWarn:!0,i=ze(t.fallbackRoot)?t.fallbackRoot:!0,l=!!t.formatFallbackMessages,a=Ne(t.modifiers)?t.modifiers:{},u=t.pluralizationRules,c=dt(t.postTranslation)?t.postTranslation:void 0,d=ge(t.warnHtmlInMessage)?t.warnHtmlInMessage!=="off":!0,f=!!t.escapeParameterHtml,p=ze(t.sync)?t.sync:!0;let h=t.messages;if(Ne(t.sharedMessages)){const S=t.sharedMessages;h=Object.keys(S).reduce((A,M)=>{const P=A[M]||(A[M]={});return sn(P,S[M]),A},h||{})}const{__i18n:m,__root:g,__injectWithOption:v}=t,y=t.datetimeFormats,b=t.numberFormats,x=t.flatJson,k=t.translateExistCompatible;return{locale:e,fallbackLocale:n,messages:h,flatJson:x,datetimeFormats:y,numberFormats:b,missing:r,missingWarn:s,fallbackWarn:o,fallbackRoot:i,fallbackFormat:l,modifiers:a,pluralRules:u,postTranslation:c,warnHtmlMessage:d,escapeParameter:f,messageResolver:t.messageResolver,inheritLocale:p,translateExistCompatible:k,__i18n:m,__root:g,__injectWithOption:v}}function df(t={},e){{const n=Ip($T(t)),{__extender:r}=t,s={id:n.id,get locale(){return n.locale.value},set locale(o){n.locale.value=o},get fallbackLocale(){return n.fallbackLocale.value},set fallbackLocale(o){n.fallbackLocale.value=o},get messages(){return n.messages.value},get datetimeFormats(){return n.datetimeFormats.value},get numberFormats(){return n.numberFormats.value},get availableLocales(){return n.availableLocales},get formatter(){return{interpolate(){return[]}}},set formatter(o){},get missing(){return n.getMissingHandler()},set missing(o){n.setMissingHandler(o)},get silentTranslationWarn(){return ze(n.missingWarn)?!n.missingWarn:n.missingWarn},set silentTranslationWarn(o){n.missingWarn=ze(o)?!o:o},get silentFallbackWarn(){return ze(n.fallbackWarn)?!n.fallbackWarn:n.fallbackWarn},set silentFallbackWarn(o){n.fallbackWarn=ze(o)?!o:o},get modifiers(){return n.modifiers},get formatFallbackMessages(){return n.fallbackFormat},set formatFallbackMessages(o){n.fallbackFormat=o},get postTranslation(){return n.getPostTranslationHandler()},set postTranslation(o){n.setPostTranslationHandler(o)},get sync(){return n.inheritLocale},set sync(o){n.inheritLocale=o},get warnHtmlInMessage(){return n.warnHtmlMessage?"warn":"off"},set warnHtmlInMessage(o){n.warnHtmlMessage=o!=="off"},get escapeParameterHtml(){return n.escapeParameter},set escapeParameterHtml(o){n.escapeParameter=o},get preserveDirectiveContent(){return!0},set preserveDirectiveContent(o){},get pluralizationRules(){return n.pluralRules||{}},__composer:n,t(...o){const[i,l,a]=o,u={};let c=null,d=null;if(!ge(i))throw Ut(jt.INVALID_ARGUMENT);const f=i;return ge(l)?u.locale=l:ht(l)?c=l:Ne(l)&&(d=l),ht(a)?c=a:Ne(a)&&(d=a),Reflect.apply(n.t,n,[f,c||d||{},u])},rt(...o){return Reflect.apply(n.rt,n,[...o])},tc(...o){const[i,l,a]=o,u={plural:1};let c=null,d=null;if(!ge(i))throw Ut(jt.INVALID_ARGUMENT);const f=i;return ge(l)?u.locale=l:At(l)?u.plural=l:ht(l)?c=l:Ne(l)&&(d=l),ge(a)?u.locale=a:ht(a)?c=a:Ne(a)&&(d=a),Reflect.apply(n.t,n,[f,c||d||{},u])},te(o,i){return n.te(o,i)},tm(o){return n.tm(o)},getLocaleMessage(o){return n.getLocaleMessage(o)},setLocaleMessage(o,i){n.setLocaleMessage(o,i)},mergeLocaleMessage(o,i){n.mergeLocaleMessage(o,i)},d(...o){return Reflect.apply(n.d,n,[...o])},getDateTimeFormat(o){return n.getDateTimeFormat(o)},setDateTimeFormat(o,i){n.setDateTimeFormat(o,i)},mergeDateTimeFormat(o,i){n.mergeDateTimeFormat(o,i)},n(...o){return Reflect.apply(n.n,n,[...o])},getNumberFormat(o){return n.getNumberFormat(o)},setNumberFormat(o,i){n.setNumberFormat(o,i)},mergeNumberFormat(o,i){n.mergeNumberFormat(o,i)},getChoiceIndex(o,i){return-1}};return s.__extender=r,s}}const Op={tag:{type:[String,Object]},locale:{type:String},scope:{type:String,validator:t=>t==="parent"||t==="global",default:"parent"},i18n:{type:Object}};function BT({slots:t},e){return e.length===1&&e[0]==="default"?(t.default?t.default():[]).reduce((r,s)=>[...r,...s.type===Ye?s.children:[s]],[]):e.reduce((n,r)=>{const s=t[r];return s&&(n[r]=s()),n},ot())}function V0(t){return Ye}const VT=xe({name:"i18n-t",props:sn({keypath:{type:String,required:!0},plural:{type:[Number,String],validator:t=>At(t)||!isNaN(t)}},Op),setup(t,e){const{slots:n,attrs:r}=e,s=t.i18n||Ot({useScope:t.scope,__useComponent:!0});return()=>{const o=Object.keys(n).filter(d=>d!=="_"),i=ot();t.locale&&(i.locale=t.locale),t.plural!==void 0&&(i.plural=ge(t.plural)?+t.plural:t.plural);const l=BT(e,o),a=s[lf](t.keypath,l,i),u=sn(ot(),r),c=ge(t.tag)||Je(t.tag)?t.tag:V0();return Ue(c,u,a)}}}),xg=VT;function HT(t){return ht(t)&&!ge(t[0])}function H0(t,e,n,r){const{slots:s,attrs:o}=e;return()=>{const i={part:!0};let l=ot();t.locale&&(i.locale=t.locale),ge(t.format)?i.key=t.format:Je(t.format)&&(ge(t.format.key)&&(i.key=t.format.key),l=Object.keys(t.format).reduce((f,p)=>n.includes(p)?sn(ot(),f,{[p]:t.format[p]}):f,ot()));const a=r(t.value,i,l);let u=[i.key];ht(a)?u=a.map((f,p)=>{const h=s[f.type],m=h?h({[f.type]:f.value,index:p,parts:a}):[f.value];return HT(m)&&(m[0].key=`${f.type}-${p}`),m}):ge(a)&&(u=[a]);const c=sn(ot(),o),d=ge(t.tag)||Je(t.tag)?t.tag:V0();return Ue(d,c,u)}}const jT=xe({name:"i18n-n",props:sn({value:{type:Number,required:!0},format:{type:[String,Object]}},Op),setup(t,e){const n=t.i18n||Ot({useScope:t.scope,__useComponent:!0});return H0(t,e,P0,(...r)=>n[uf](...r))}}),kg=jT,zT=xe({name:"i18n-d",props:sn({value:{type:[Number,Date],required:!0},format:{type:[String,Object]}},Op),setup(t,e){const n=t.i18n||Ot({useScope:t.scope,__useComponent:!0});return H0(t,e,R0,(...r)=>n[af](...r))}}),wg=zT;function WT(t,e){const n=t;if(t.mode==="composition")return n.__getInstance(e)||t.global;{const r=n.__getInstance(e);return r!=null?r.__composer:t.global.__composer}}function UT(t){const e=i=>{const{instance:l,modifiers:a,value:u}=i;if(!l||!l.$)throw Ut(jt.UNEXPECTED_ERROR);const c=WT(t,l.$),d=Eg(u);return[Reflect.apply(c.t,c,[...Sg(d)]),c]};return{created:(i,l)=>{const[a,u]=e(l);za&&t.global===u&&(i.__i18nWatcher=je(u.locale,()=>{l.instance&&l.instance.$forceUpdate()})),i.__composer=u,i.textContent=a},unmounted:i=>{za&&i.__i18nWatcher&&(i.__i18nWatcher(),i.__i18nWatcher=void 0,delete i.__i18nWatcher),i.__composer&&(i.__composer=void 0,delete i.__composer)},beforeUpdate:(i,{value:l})=>{if(i.__composer){const a=i.__composer,u=Eg(l);i.textContent=Reflect.apply(a.t,a,[...Sg(u)])}},getSSRProps:i=>{const[l]=e(i);return{textContent:l}}}}function Eg(t){if(ge(t))return{path:t};if(Ne(t)){if(!("path"in t))throw Ut(jt.REQUIRED_VALUE,"path");return t}else throw Ut(jt.INVALID_VALUE)}function Sg(t){const{path:e,locale:n,args:r,choice:s,plural:o}=t,i={},l=r||{};return ge(n)&&(i.locale=n),At(s)&&(i.plural=s),At(o)&&(i.plural=o),[e,l,i]}function qT(t,e,...n){const r=Ne(n[0])?n[0]:{},s=!!r.useI18nComponentName;(ze(r.globalInstall)?r.globalInstall:!0)&&([s?"i18n":xg.name,"I18nT"].forEach(i=>t.component(i,xg)),[kg.name,"I18nN"].forEach(i=>t.component(i,kg)),[wg.name,"I18nD"].forEach(i=>t.component(i,wg))),t.directive("t",UT(e))}function KT(t,e,n){return{beforeCreate(){const r=ar();if(!r)throw Ut(jt.UNEXPECTED_ERROR);const s=this.$options;if(s.i18n){const o=s.i18n;if(s.__i18n&&(o.__i18n=s.__i18n),o.__root=e,this===this.$root)this.$i18n=Cg(t,o);else{o.__injectWithOption=!0,o.__extender=n.__vueI18nExtend,this.$i18n=df(o);const i=this.$i18n;i.__extender&&(i.__disposer=i.__extender(this.$i18n))}}else if(s.__i18n)if(this===this.$root)this.$i18n=Cg(t,s);else{this.$i18n=df({__i18n:s.__i18n,__injectWithOption:!0,__extender:n.__vueI18nExtend,__root:e});const o=this.$i18n;o.__extender&&(o.__disposer=o.__extender(this.$i18n))}else this.$i18n=t;s.__i18nGlobal&&B0(e,s,s),this.$t=(...o)=>this.$i18n.t(...o),this.$rt=(...o)=>this.$i18n.rt(...o),this.$tc=(...o)=>this.$i18n.tc(...o),this.$te=(o,i)=>this.$i18n.te(o,i),this.$d=(...o)=>this.$i18n.d(...o),this.$n=(...o)=>this.$i18n.n(...o),this.$tm=o=>this.$i18n.tm(o),n.__setInstance(r,this.$i18n)},mounted(){},unmounted(){const r=ar();if(!r)throw Ut(jt.UNEXPECTED_ERROR);const s=this.$i18n;delete this.$t,delete this.$rt,delete this.$tc,delete this.$te,delete this.$d,delete this.$n,delete this.$tm,s.__disposer&&(s.__disposer(),delete s.__disposer,delete s.__extender),n.__deleteInstance(r),delete this.$i18n}}}function Cg(t,e){t.locale=e.locale||t.locale,t.fallbackLocale=e.fallbackLocale||t.fallbackLocale,t.missing=e.missing||t.missing,t.silentTranslationWarn=e.silentTranslationWarn||t.silentFallbackWarn,t.silentFallbackWarn=e.silentFallbackWarn||t.silentFallbackWarn,t.formatFallbackMessages=e.formatFallbackMessages||t.formatFallbackMessages,t.postTranslation=e.postTranslation||t.postTranslation,t.warnHtmlInMessage=e.warnHtmlInMessage||t.warnHtmlInMessage,t.escapeParameterHtml=e.escapeParameterHtml||t.escapeParameterHtml,t.sync=e.sync||t.sync,t.__composer[L0](e.pluralizationRules||t.pluralizationRules);const n=sc(t.locale,{messages:e.messages,__i18n:e.__i18n});return Object.keys(n).forEach(r=>t.mergeLocaleMessage(r,n[r])),e.datetimeFormats&&Object.keys(e.datetimeFormats).forEach(r=>t.mergeDateTimeFormat(r,e.datetimeFormats[r])),e.numberFormats&&Object.keys(e.numberFormats).forEach(r=>t.mergeNumberFormat(r,e.numberFormats[r])),t}const GT=Fs("global-vue-i18n");function YT(t={},e){const n=__VUE_I18N_LEGACY_API__&&ze(t.legacy)?t.legacy:__VUE_I18N_LEGACY_API__,r=ze(t.globalInjection)?t.globalInjection:!0,s=__VUE_I18N_LEGACY_API__&&n?!!t.allowComposition:!0,o=new Map,[i,l]=JT(t,n),a=Fs("");function u(f){return o.get(f)||null}function c(f,p){o.set(f,p)}function d(f){o.delete(f)}{const f={get mode(){return __VUE_I18N_LEGACY_API__&&n?"legacy":"composition"},get allowComposition(){return s},async install(p,...h){if(p.__VUE_I18N_SYMBOL__=a,p.provide(p.__VUE_I18N_SYMBOL__,f),Ne(h[0])){const v=h[0];f.__composerExtend=v.__composerExtend,f.__vueI18nExtend=v.__vueI18nExtend}let m=null;!n&&r&&(m=oA(p,f.global)),__VUE_I18N_FULL_INSTALL__&&qT(p,f,...h),__VUE_I18N_LEGACY_API__&&n&&p.mixin(KT(l,l.__composer,f));const g=p.unmount;p.unmount=()=>{m&&m(),f.dispose(),g()}},get global(){return l},dispose(){i.stop()},__instances:o,__getInstance:u,__setInstance:c,__deleteInstance:d};return f}}function Ot(t={}){const e=ar();if(e==null)throw Ut(jt.MUST_BE_CALL_SETUP_TOP);if(!e.isCE&&e.appContext.app!=null&&!e.appContext.app.__VUE_I18N_SYMBOL__)throw Ut(jt.NOT_INSTALLED);const n=XT(e),r=ZT(n),s=$0(e),o=QT(t,s);if(__VUE_I18N_LEGACY_API__&&n.mode==="legacy"&&!t.__useComponent){if(!n.allowComposition)throw Ut(jt.NOT_AVAILABLE_IN_LEGACY_MODE);return rA(e,o,r,t)}if(o==="global")return B0(r,t,s),r;if(o==="parent"){let a=eA(n,e,t.__useComponent);return a==null&&(a=r),a}const i=n;let l=i.__getInstance(e);if(l==null){const a=sn({},t);"__i18n"in s&&(a.__i18n=s.__i18n),r&&(a.__root=r),l=Ip(a),i.__composerExtend&&(l[cf]=i.__composerExtend(l)),nA(i,e,l),i.__setInstance(e,l)}return l}function JT(t,e,n){const r=Mw();{const s=__VUE_I18N_LEGACY_API__&&e?r.run(()=>df(t)):r.run(()=>Ip(t));if(s==null)throw Ut(jt.UNEXPECTED_ERROR);return[r,s]}}function XT(t){{const e=tt(t.isCE?GT:t.appContext.app.__VUE_I18N_SYMBOL__);if(!e)throw Ut(t.isCE?jt.NOT_INSTALLED_WITH_PROVIDE:jt.UNEXPECTED_ERROR);return e}}function QT(t,e){return tc(t)?"__i18n"in e?"local":"global":t.useScope?t.useScope:"local"}function ZT(t){return t.mode==="composition"?t.global:t.global.__composer}function eA(t,e,n=!1){let r=null;const s=e.root;let o=tA(e,n);for(;o!=null;){const i=t;if(t.mode==="composition")r=i.__getInstance(o);else if(__VUE_I18N_LEGACY_API__){const l=i.__getInstance(o);l!=null&&(r=l.__composer,n&&r&&!r[F0]&&(r=null))}if(r!=null||s===o)break;o=o.parent}return r}function tA(t,e=!1){return t==null?null:e&&t.vnode.ctx||t.parent}function nA(t,e,n){qe(()=>{},e),zt(()=>{const r=n;t.__deleteInstance(e);const s=r[cf];s&&(s(),delete r[cf])},e)}function rA(t,e,n,r={}){const s=e==="local",o=pi(null);if(s&&t.proxy&&!(t.proxy.$options.i18n||t.proxy.$options.__i18n))throw Ut(jt.MUST_DEFINE_I18N_OPTION_IN_ALLOW_COMPOSITION);const i=ze(r.inheritLocale)?r.inheritLocale:!ge(r.locale),l=H(!s||i?n.locale.value:ge(r.locale)?r.locale:ni),a=H(!s||i?n.fallbackLocale.value:ge(r.fallbackLocale)||ht(r.fallbackLocale)||Ne(r.fallbackLocale)||r.fallbackLocale===!1?r.fallbackLocale:l.value),u=H(sc(l.value,r)),c=H(Ne(r.datetimeFormats)?r.datetimeFormats:{[l.value]:{}}),d=H(Ne(r.numberFormats)?r.numberFormats:{[l.value]:{}}),f=s?n.missingWarn:ze(r.missingWarn)||Rs(r.missingWarn)?r.missingWarn:!0,p=s?n.fallbackWarn:ze(r.fallbackWarn)||Rs(r.fallbackWarn)?r.fallbackWarn:!0,h=s?n.fallbackRoot:ze(r.fallbackRoot)?r.fallbackRoot:!0,m=!!r.fallbackFormat,g=dt(r.missing)?r.missing:null,v=dt(r.postTranslation)?r.postTranslation:null,y=s?n.warnHtmlMessage:ze(r.warnHtmlMessage)?r.warnHtmlMessage:!0,b=!!r.escapeParameter,x=s?n.modifiers:Ne(r.modifiers)?r.modifiers:{},k=r.pluralRules||s&&n.pluralRules;function S(){return[l.value,a.value,u.value,c.value,d.value]}const T=L({get:()=>o.value?o.value.locale.value:l.value,set:_=>{o.value&&(o.value.locale.value=_),l.value=_}}),A=L({get:()=>o.value?o.value.fallbackLocale.value:a.value,set:_=>{o.value&&(o.value.fallbackLocale.value=_),a.value=_}}),M=L(()=>o.value?o.value.messages.value:u.value),P=L(()=>c.value),z=L(()=>d.value);function D(){return o.value?o.value.getPostTranslationHandler():v}function W(_){o.value&&o.value.setPostTranslationHandler(_)}function ie(){return o.value?o.value.getMissingHandler():g}function ae(_){o.value&&o.value.setMissingHandler(_)}function de(_){return S(),_()}function ve(..._){return o.value?de(()=>Reflect.apply(o.value.t,null,[..._])):de(()=>"")}function we(..._){return o.value?Reflect.apply(o.value.rt,null,[..._]):""}function Qe(..._){return o.value?de(()=>Reflect.apply(o.value.d,null,[..._])):de(()=>"")}function ut(..._){return o.value?de(()=>Reflect.apply(o.value.n,null,[..._])):de(()=>"")}function ke(_){return o.value?o.value.tm(_):{}}function _e(_,F){return o.value?o.value.te(_,F):!1}function te(_){return o.value?o.value.getLocaleMessage(_):{}}function j(_,F){o.value&&(o.value.setLocaleMessage(_,F),u.value[_]=F)}function X(_,F){o.value&&o.value.mergeLocaleMessage(_,F)}function ee(_){return o.value?o.value.getDateTimeFormat(_):{}}function R(_,F){o.value&&(o.value.setDateTimeFormat(_,F),c.value[_]=F)}function V(_,F){o.value&&o.value.mergeDateTimeFormat(_,F)}function K(_){return o.value?o.value.getNumberFormat(_):{}}function Q(_,F){o.value&&(o.value.setNumberFormat(_,F),d.value[_]=F)}function be(_,F){o.value&&o.value.mergeNumberFormat(_,F)}const C={get id(){return o.value?o.value.id:-1},locale:T,fallbackLocale:A,messages:M,datetimeFormats:P,numberFormats:z,get inheritLocale(){return o.value?o.value.inheritLocale:i},set inheritLocale(_){o.value&&(o.value.inheritLocale=_)},get availableLocales(){return o.value?o.value.availableLocales:Object.keys(u.value)},get modifiers(){return o.value?o.value.modifiers:x},get pluralRules(){return o.value?o.value.pluralRules:k},get isGlobal(){return o.value?o.value.isGlobal:!1},get missingWarn(){return o.value?o.value.missingWarn:f},set missingWarn(_){o.value&&(o.value.missingWarn=_)},get fallbackWarn(){return o.value?o.value.fallbackWarn:p},set fallbackWarn(_){o.value&&(o.value.missingWarn=_)},get fallbackRoot(){return o.value?o.value.fallbackRoot:h},set fallbackRoot(_){o.value&&(o.value.fallbackRoot=_)},get fallbackFormat(){return o.value?o.value.fallbackFormat:m},set fallbackFormat(_){o.value&&(o.value.fallbackFormat=_)},get warnHtmlMessage(){return o.value?o.value.warnHtmlMessage:y},set warnHtmlMessage(_){o.value&&(o.value.warnHtmlMessage=_)},get escapeParameter(){return o.value?o.value.escapeParameter:b},set escapeParameter(_){o.value&&(o.value.escapeParameter=_)},t:ve,getPostTranslationHandler:D,setPostTranslationHandler:W,getMissingHandler:ie,setMissingHandler:ae,rt:we,d:Qe,n:ut,tm:ke,te:_e,getLocaleMessage:te,setLocaleMessage:j,mergeLocaleMessage:X,getDateTimeFormat:ee,setDateTimeFormat:R,mergeDateTimeFormat:V,getNumberFormat:K,setNumberFormat:Q,mergeNumberFormat:be};function I(_){_.locale.value=l.value,_.fallbackLocale.value=a.value,Object.keys(u.value).forEach(F=>{_.mergeLocaleMessage(F,u.value[F])}),Object.keys(c.value).forEach(F=>{_.mergeDateTimeFormat(F,c.value[F])}),Object.keys(d.value).forEach(F=>{_.mergeNumberFormat(F,d.value[F])}),_.escapeParameter=b,_.fallbackFormat=m,_.fallbackRoot=h,_.fallbackWarn=p,_.missingWarn=f,_.warnHtmlMessage=y}return Eb(()=>{if(t.proxy==null||t.proxy.$i18n==null)throw Ut(jt.NOT_AVAILABLE_COMPOSITION_IN_LEGACY);const _=o.value=t.proxy.$i18n.__composer;e==="global"?(l.value=_.locale.value,a.value=_.fallbackLocale.value,u.value=_.messages.value,c.value=_.datetimeFormats.value,d.value=_.numberFormats.value):s&&I(_)}),C}const sA=["locale","fallbackLocale","availableLocales"],_g=["t","rt","d","n","tm","te"];function oA(t,e){const n=Object.create(null);return sA.forEach(s=>{const o=Object.getOwnPropertyDescriptor(e,s);if(!o)throw Ut(jt.UNEXPECTED_ERROR);const i=rn(o.value)?{get(){return o.value.value},set(l){o.value.value=l}}:{get(){return o.get&&o.get()}};Object.defineProperty(n,s,i)}),t.config.globalProperties.$i18n=n,_g.forEach(s=>{const o=Object.getOwnPropertyDescriptor(e,s);if(!o||!o.value)throw Ut(jt.UNEXPECTED_ERROR);Object.defineProperty(t.config.globalProperties,`$${s}`,o)}),()=>{delete t.config.globalProperties.$i18n,_g.forEach(s=>{delete t.config.globalProperties[`$${s}`]})}}PT();__INTLIFY_JIT_COMPILATION__?og(AT):og(TT);yT(Q_);bT(E0);if(__INTLIFY_PROD_DEVTOOLS__){const t=Hr();t.__INTLIFY__=!0,lT(t.__INTLIFY_DEVTOOLS_GLOBAL_HOOK__)}const iA={class:"flex items-center gap-4 flex-1 min-w-0"},lA={key:0,class:"text-sm font-medium text-gray-700 truncate"},aA={class:"flex items-center gap-2 flex-shrink-0"},uA=xe({__name:"Toolbar",props:{title:{default:void 0},class:{default:void 0}},setup(t){return(e,n)=>(J(),le("div",{class:Pe(["flex items-center justify-between gap-4 p-4 border-b border-gray-200 bg-white",t.class])},[N("div",iA,[Yr(e.$slots,"start",{},()=>[t.title?(J(),le("h2",lA,re(t.title),1)):Ve("",!0)])]),N("div",aA,[Yr(e.$slots,"end")])],2))}}),cA=xe({__name:"Container",props:{fluid:{type:Boolean,default:!1},maxWidth:{default:"6xl"},class:{default:void 0}},setup(t){const e=t,n=L(()=>{const r=["mx-auto","px-4"];if(e.fluid)r.push("w-full");else{const s={sm:"max-w-screen-sm",md:"max-w-screen-md",lg:"max-w-screen-lg",xl:"max-w-screen-xl","2xl":"max-w-2xl","3xl":"max-w-3xl","4xl":"max-w-4xl","5xl":"max-w-5xl","6xl":"max-w-6xl","7xl":"max-w-7xl",full:"max-w-full",container:"max-w-container"};r.push(s[e.maxWidth])}return e.class&&r.push(e.class),r.join(" ")});return(r,s)=>(J(),le("div",{class:Pe(n.value)},[Yr(r.$slots,"default")],2))}});function _o(t,e,n){let r=n.initialDeps??[],s;function o(){var i,l,a,u;let c;n.key&&((i=n.debug)!=null&&i.call(n))&&(c=Date.now());const d=t();if(!(d.length!==r.length||d.some((h,m)=>r[m]!==h)))return s;r=d;let p;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(p=Date.now()),s=e(...d),n.key&&((a=n.debug)!=null&&a.call(n))){const h=Math.round((Date.now()-c)*100)/100,m=Math.round((Date.now()-p)*100)/100,g=m/16,v=(y,b)=>{for(y=String(y);y.length<b;)y=" "+y;return y};console.info(`%c ${v(m,5)} /${v(h,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*g,120))}deg 100% 31%);`,n?.key)}return(u=n?.onChange)==null||u.call(n,s),s}return o.updateDeps=i=>{r=i},o}function Tg(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const dA=(t,e)=>Math.abs(t-e)<1.01,fA=(t,e,n)=>{let r;return function(...s){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,s),n)}},Ag=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},pA=t=>t,hA=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let s=e;s<=n;s++)r.push(s);return r},mA=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const s=i=>{const{width:l,height:a}=i;e({width:Math.round(l),height:Math.round(a)})};if(s(Ag(n)),!r.ResizeObserver)return()=>{};const o=new r.ResizeObserver(i=>{const l=()=>{const a=i[0];if(a?.borderBoxSize){const u=a.borderBoxSize[0];if(u){s({width:u.inlineSize,height:u.blockSize});return}}s(Ag(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(l):l()});return o.observe(n,{box:"border-box"}),()=>{o.unobserve(n)}},Ig={passive:!0},Og=typeof window>"u"?!0:"onscrollend"in window,gA=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let s=0;const o=t.options.useScrollendEvent&&Og?()=>{}:fA(r,()=>{e(s,!1)},t.options.isScrollingResetDelay),i=c=>()=>{const{horizontal:d,isRtl:f}=t.options;s=d?n.scrollLeft*(f&&-1||1):n.scrollTop,o(),e(s,c)},l=i(!0),a=i(!1);a(),n.addEventListener("scroll",l,Ig);const u=t.options.useScrollendEvent&&Og;return u&&n.addEventListener("scrollend",a,Ig),()=>{n.removeEventListener("scroll",l),u&&n.removeEventListener("scrollend",a)}},vA=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},yA=(t,{adjustments:e=0,behavior:n},r)=>{var s,o;const i=t+e;(o=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||o.call(s,{[r.options.horizontal?"left":"top"]:i,behavior:n})};class bA{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(s=>{s.forEach(o=>{const i=()=>{this._measureElement(o.target,o)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(i):i()})}));return{disconnect:()=>{var s;(s=r())==null||s.disconnect(),n=null},observe:s=>{var o;return(o=r())==null?void 0:o.observe(s,{box:"border-box"})},unobserve:s=>{var o;return(o=r())==null?void 0:o.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:pA,rangeExtractor:hA,onChange:()=>{},measureElement:vA,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,s;(s=(r=this.options).onChange)==null||s.call(r,this,n)},this.maybeNotify=_o(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(s=>{this.observer.observe(s)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,s=>{this.scrollRect=s,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(s,o)=>{this.scrollAdjustments=0,this.scrollDirection=o?this.getScrollOffset()<s?"forward":"backward":null,this.scrollOffset=s,this.isScrolling=o,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const s=new Map,o=new Map;for(let i=r-1;i>=0;i--){const l=n[i];if(s.has(l.lane))continue;const a=o.get(l.lane);if(a==null||l.end>a.end?o.set(l.lane,l):l.end<a.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return o.size===this.options.lanes?Array.from(o.values()).sort((i,l)=>i.end===l.end?i.index-l.index:i.end-l.end)[0]:void 0},this.getMeasurementOptions=_o(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,s,o,i)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:o,enabled:i}),{key:!1}),this.getMeasurements=_o(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:o,enabled:i},l)=>{if(!i)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const a=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,a);for(let c=a;c<n;c++){const d=o(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),p=f?f.end+this.options.gap:r+s,h=l.get(d),m=typeof h=="number"?h:this.options.estimateSize(c),g=p+m,v=f?f.lane:c%this.options.lanes;u[c]={index:c,start:p,size:m,end:g,key:d,lane:v}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_o(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,s,o)=>this.range=n.length>0&&r>0?xA({measurements:n,outerSize:r,scrollOffset:s,lanes:o}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=_o(()=>{let n=null,r=null;const s=this.calculateRange();return s&&(n=s.startIndex,r=s.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,s,o,i)=>o===null||i===null?[]:n({startIndex:o,endIndex:i,overscan:r,count:s}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.indexFromElement(n),o=this.measurementsCache[s];if(!o)return;const i=o.key,l=this.elementsCache.get(i);l!==n&&(l&&this.observer.unobserve(l),this.observer.observe(n),this.elementsCache.set(i,n)),n.isConnected&&this.resizeItem(s,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const s=this.measurementsCache[n];if(!s)return;const o=this.itemSizeCache.get(s.key)??s.size,i=r-o;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(s,i,this):s.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(s.index),this.itemSizeCache=new Map(this.itemSizeCache.set(s.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,s)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(s))});return}this._measureElement(n,void 0)},this.getVirtualItems=_o(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let o=0,i=n.length;o<i;o++){const l=n[o],a=r[l];s.push(a)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Tg(r[j0(0,r.length-1,s=>Tg(r[s]).start,n)])},this.getOffsetForAlignment=(n,r,s=0)=>{const o=this.getSize(),i=this.getScrollOffset();r==="auto"&&(r=n>=i+o?"end":"start"),r==="center"?n+=(s-o)/2:r==="end"&&(n-=o);const l=this.getTotalSize()+this.options.scrollMargin-o;return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=this.measurementsCache[n];if(!s)return;const o=this.getSize(),i=this.getScrollOffset();if(r==="auto")if(s.end>=i+o-this.options.scrollPaddingEnd)r="end";else if(s.start<=i+this.options.scrollPaddingStart)r="start";else return[i,r];const l=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(l,r,s.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let o=0;const i=10,l=u=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(n,u);if(!c){console.warn("Failed to get offset for index:",n);return}const[d,f]=c;this._scrollToOffset(d,{adjustments:void 0,behavior:s}),this.targetWindow.requestAnimationFrame(()=>{const p=this.getScrollOffset(),h=this.getOffsetForIndex(n,f);if(!h){console.warn("Failed to get offset for index:",n);return}dA(h[0],p)||a(f)})},a=u=>{this.targetWindow&&(o++,o<i?this.targetWindow.requestAnimationFrame(()=>l(u)):console.warn(`Failed to scroll to index ${n} after ${i} attempts.`))};l(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;if(r.length===0)s=this.options.paddingStart;else if(this.options.lanes===1)s=((n=r[r.length-1])==null?void 0:n.end)??0;else{const o=Array(this.options.lanes).fill(null);let i=r.length-1;for(;i>=0&&o.some(l=>l===null);){const l=r[i];o[l.lane]===null&&(o[l.lane]=l.end),i--}s=Math.max(...o.filter(l=>l!==null))}return Math.max(s-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const j0=(t,e,n,r)=>{for(;t<=e;){const s=(t+e)/2|0,o=n(s);if(o<r)t=s+1;else if(o>r)e=s-1;else return s}return t>0?t-1:0};function xA({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const s=t.length-1,o=a=>t[a].start;if(t.length<=r)return{startIndex:0,endIndex:s};let i=j0(0,s,o,n),l=i;if(r===1)for(;l<s&&t[l].end<n+e;)l++;else if(r>1){const a=Array(r).fill(0);for(;l<s&&a.some(c=>c<n+e);){const c=t[l];a[c.lane]=c.end,l++}const u=Array(r).fill(n+e);for(;i>=0&&u.some(c=>c>=n);){const c=t[i];u[c.lane]=c.start,i--}i=Math.max(0,i-i%r),l=Math.min(s,l+(r-1-l%r))}return{startIndex:i,endIndex:l}}function kA(t){const e=new bA(O(t)),n=pi(e),r=e._didMount();return je(()=>O(t).getScrollElement(),s=>{s&&e._willUpdate()},{immediate:!0}),je(()=>O(t),s=>{e.setOptions({...s,onChange:(o,i)=>{var l;Wh(n),(l=s.onChange)==null||l.call(s,o,i)}}),e._willUpdate(),Wh(n)},{immediate:!0}),Rw(r),n}function wA(t){return kA(L(()=>({observeElementRect:mA,observeElementOffset:gA,scrollToFn:yA,...O(t)})))}function EA(t,e,n){let r=H(n?.value),s=L(()=>t.value!==void 0);return[L(()=>s.value?t.value:r.value),function(o){return s.value||(r.value=o),e?.(o)}]}function oc(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Ps(){let t=[],e={addEventListener(n,r,s,o){return n.addEventListener(r,s,o),e.add(()=>n.removeEventListener(r,s,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){e.requestAnimationFrame(()=>{e.requestAnimationFrame(...n)})},setTimeout(...n){let r=setTimeout(...n);e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return oc(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Ps();return n(r),this.add(()=>r.dispose())},add(n){return t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function SA(){let t=Ps();return zt(()=>t.dispose()),t}function CA(){let t=SA();return e=>{t.dispose(),t.nextFrame(e)}}var Mg;let _A=Symbol("headlessui.useid"),TA=0;const $n=(Mg=hE)!=null?Mg:function(){return tt(_A,()=>`${++TA}`)()};function pe(t){var e;if(t==null||t.value==null)return null;let n=(e=t.value.$el)!=null?e:t.value;return n instanceof Node?n:null}function It(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,It),r}var AA=Object.defineProperty,IA=(t,e,n)=>e in t?AA(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Ng=(t,e,n)=>(IA(t,typeof e!="symbol"?e+"":e,n),n);let OA=class{constructor(){Ng(this,"current",this.detect()),Ng(this,"currentId",0)}set(e){this.current!==e&&(this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}},Fl=new OA;function _r(t){if(Fl.isServer)return null;if(t instanceof Node)return t.ownerDocument;if(t!=null&&t.hasOwnProperty("value")){let e=pe(t);if(e)return e.ownerDocument}return document}let ff=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var Nt=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t))(Nt||{}),Ho=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Ho||{}),MA=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(MA||{});function z0(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(ff)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Mp=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Mp||{});function Np(t,e=0){var n;return t===((n=_r(t))==null?void 0:n.body)?!1:It(e,{0(){return t.matches(ff)},1(){let r=t;for(;r!==null;){if(r.matches(ff))return!0;r=r.parentElement}return!1}})}function W0(t){let e=_r(t);bt(()=>{e&&!Np(e.activeElement,0)&&_s(t)})}var NA=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(NA||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function _s(t){t?.focus({preventScroll:!0})}let RA=["textarea","input"].join(",");function PA(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,RA))!=null?n:!1}function hs(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),o=e(r);if(s===null||o===null)return 0;let i=s.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function DA(t,e){return er(z0(),e,{relativeTo:t})}function er(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){var o;let i=(o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t?.ownerDocument)!=null?o:document,l=Array.isArray(t)?n?hs(t):t:z0(t);s.length>0&&l.length>1&&(l=l.filter(h=>!s.includes(h))),r=r??i.activeElement;let a=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,l.indexOf(r))-1;if(e&4)return Math.max(0,l.indexOf(r))+1;if(e&8)return l.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=e&32?{preventScroll:!0}:{},d=0,f=l.length,p;do{if(d>=f||d+f<=0)return 0;let h=u+d;if(e&16)h=(h+f)%f;else{if(h<0)return 3;if(h>=f)return 1}p=l[h],p?.focus(c),d+=a}while(p!==i.activeElement);return e&6&&PA(p)&&p.select(),2}function U0(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function LA(){return/Android/gi.test(window.navigator.userAgent)}function q0(){return U0()||LA()}function ta(t,e,n){Fl.isServer||Pt(r=>{document.addEventListener(t,e,n),r(()=>document.removeEventListener(t,e,n))})}function K0(t,e,n){Fl.isServer||Pt(r=>{window.addEventListener(t,e,n),r(()=>window.removeEventListener(t,e,n))})}function Rp(t,e,n=L(()=>!0)){function r(o,i){if(!n.value||o.defaultPrevented)return;let l=i(o);if(l===null||!l.getRootNode().contains(l))return;let a=(function u(c){return typeof c=="function"?u(c()):Array.isArray(c)||c instanceof Set?c:[c]})(t);for(let u of a){if(u===null)continue;let c=u instanceof HTMLElement?u:pe(u);if(c!=null&&c.contains(l)||o.composed&&o.composedPath().includes(c))return}return!Np(l,Mp.Loose)&&l.tabIndex!==-1&&o.preventDefault(),e(o,l)}let s=H(null);ta("pointerdown",o=>{var i,l;n.value&&(s.value=((l=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:l[0])||o.target)},!0),ta("mousedown",o=>{var i,l;n.value&&(s.value=((l=(i=o.composedPath)==null?void 0:i.call(o))==null?void 0:l[0])||o.target)},!0),ta("click",o=>{q0()||s.value&&(r(o,()=>s.value),s.value=null)},!0),ta("touchend",o=>r(o,()=>o.target instanceof HTMLElement?o.target:null),!0),K0("blur",o=>r(o,()=>window.document.activeElement instanceof HTMLIFrameElement?window.document.activeElement:null),!0)}function Rg(t,e){if(t)return t;let n=e??"button";if(typeof n=="string"&&n.toLowerCase()==="button")return"button"}function Pp(t,e){let n=H(Rg(t.value.type,t.value.as));return qe(()=>{n.value=Rg(t.value.type,t.value.as)}),Pt(()=>{var r;n.value||pe(e)&&pe(e)instanceof HTMLButtonElement&&!((r=pe(e))!=null&&r.hasAttribute("type"))&&(n.value="button")}),n}function Pg(t){return[t.screenX,t.screenY]}function G0(){let t=H([-1,-1]);return{wasMoved(e){let n=Pg(e);return t.value[0]===n[0]&&t.value[1]===n[1]?!1:(t.value=n,!0)},update(e){t.value=Pg(e)}}}function Y0({container:t,accept:e,walk:n,enabled:r}){Pt(()=>{let s=t.value;if(!s||r!==void 0&&!r.value)return;let o=_r(t);if(!o)return;let i=Object.assign(a=>e(a),{acceptNode:e}),l=o.createTreeWalker(s,NodeFilter.SHOW_ELEMENT,i,!1);for(;l.nextNode();)n(l.currentNode)})}var Xn=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(Xn||{}),ys=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(ys||{});function gt({visible:t=!0,features:e=0,ourProps:n,theirProps:r,...s}){var o;let i=X0(r,n),l=Object.assign(s,{props:i});if(t||e&2&&i.static)return Xc(l);if(e&1){let a=(o=i.unmount)==null||o?0:1;return It(a,{0(){return null},1(){return Xc({...s,props:{...i,hidden:!0,style:{display:"none"}}})}})}return Xc(l)}function Xc({props:t,attrs:e,slots:n,slot:r,name:s}){var o,i;let{as:l,...a}=vi(t,["unmount","static"]),u=(o=n.default)==null?void 0:o.call(n,r),c={};if(r){let d=!1,f=[];for(let[p,h]of Object.entries(r))typeof h=="boolean"&&(d=!0),h===!0&&f.push(p);d&&(c["data-headlessui-state"]=f.join(" "))}if(l==="template"){if(u=J0(u??[]),Object.keys(a).length>0||Object.keys(e).length>0){let[d,...f]=u??[];if(!$A(d)||f.length>0)throw new Error(['Passing props on "template"!',"",`The current component <${s} /> is rendering a "template".`,"However we need to passthrough the following props:",Object.keys(a).concat(Object.keys(e)).map(m=>m.trim()).filter((m,g,v)=>v.indexOf(m)===g).sort((m,g)=>m.localeCompare(g)).map(m=>`  - ${m}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "template".',"Render a single element as the child so that we can forward the props onto that element."].map(m=>`  - ${m}`).join(`
`)].join(`
`));let p=X0((i=d.props)!=null?i:{},a,c),h=wr(d,p,!0);for(let m in p)m.startsWith("on")&&(h.props||(h.props={}),h.props[m]=p[m]);return h}return Array.isArray(u)&&u.length===1?u[0]:u}return Ue(l,Object.assign({},a,c),{default:()=>u})}function J0(t){return t.flatMap(e=>e.type===Ye?J0(e.children):[e])}function X0(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])return Object.assign(e,Object.fromEntries(Object.keys(n).map(r=>[r,void 0])));for(let r in n)Object.assign(e,{[r](s,...o){let i=n[r];for(let l of i){if(s instanceof Event&&s.defaultPrevented)return;l(s,...o)}}});return e}function FA(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function vi(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function $A(t){return t==null?!1:typeof t.type=="string"||typeof t.type=="object"||typeof t.type=="function"}var ri=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(ri||{});let si=xe({name:"Hidden",props:{as:{type:[Object,String],default:"div"},features:{type:Number,default:1}},setup(t,{slots:e,attrs:n}){return()=>{var r;let{features:s,...o}=t,i={"aria-hidden":(s&2)===2?!0:(r=o["aria-hidden"])!=null?r:void 0,hidden:(s&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(s&4)===4&&(s&2)!==2&&{display:"none"}}};return gt({ourProps:i,theirProps:o,slot:{},attrs:n,slots:e,name:"Hidden"})}}}),Q0=Symbol("Context");var Tt=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(Tt||{});function BA(){return $l()!==null}function $l(){return tt(Q0,null)}function Dp(t){Ht(Q0,t)}var $e=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))($e||{}),Z0=(t=>(t[t.Left=0]="Left",t[t.Right=2]="Right",t))(Z0||{});function VA(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let jr=[];VA(()=>{function t(e){e.target instanceof HTMLElement&&e.target!==document.body&&jr[0]!==e.target&&(jr.unshift(e.target),jr=jr.filter(n=>n!=null&&n.isConnected),jr.splice(10))}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function HA(t){throw new Error("Unexpected object: "+t)}var st=(t=>(t[t.First=0]="First",t[t.Previous=1]="Previous",t[t.Next=2]="Next",t[t.Last=3]="Last",t[t.Specific=4]="Specific",t[t.Nothing=5]="Nothing",t))(st||{});function pf(t,e){let n=e.resolveItems();if(n.length<=0)return null;let r=e.resolveActiveIndex(),s=r??-1;switch(t.focus){case 0:{for(let o=0;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 1:{s===-1&&(s=n.length);for(let o=s-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 2:{for(let o=s+1;o<n.length;++o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 3:{for(let o=n.length-1;o>=0;--o)if(!e.resolveDisabled(n[o],o,n))return o;return r}case 4:{for(let o=0;o<n.length;++o)if(e.resolveId(n[o],o,n)===t.id)return o;return r}case 5:return null;default:HA(t)}}function e1(t={},e=null,n=[]){for(let[r,s]of Object.entries(t))n1(n,t1(e,r),s);return n}function t1(t,e){return t?t+"["+e+"]":e}function n1(t,e,n){if(Array.isArray(n))for(let[r,s]of n.entries())n1(t,t1(e,r.toString()),s);else n instanceof Date?t.push([e,n.toISOString()]):typeof n=="boolean"?t.push([e,n?"1":"0"]):typeof n=="string"?t.push([e,n]):typeof n=="number"?t.push([e,`${n}`]):n==null?t.push([e,""]):e1(n,e,t)}var jA={};function zA(t,e){return t===e}var WA=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(WA||{}),UA=(t=>(t[t.Single=0]="Single",t[t.Multi=1]="Multi",t))(UA||{}),qA=(t=>(t[t.Pointer=0]="Pointer",t[t.Focus=1]="Focus",t[t.Other=2]="Other",t))(qA||{});let r1=Symbol("ComboboxContext");function yi(t){let e=tt(r1,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,yi),n}return e}let s1=Symbol("VirtualContext"),KA=xe({name:"VirtualProvider",setup(t,{slots:e}){let n=yi("VirtualProvider"),r=L(()=>{let l=pe(n.optionsRef);if(!l)return{start:0,end:0};let a=window.getComputedStyle(l);return{start:parseFloat(a.paddingBlockStart||a.paddingTop),end:parseFloat(a.paddingBlockEnd||a.paddingBottom)}}),s=wA(L(()=>({scrollPaddingStart:r.value.start,scrollPaddingEnd:r.value.end,count:n.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return pe(n.optionsRef)},overscan:12}))),o=L(()=>{var l;return(l=n.virtual.value)==null?void 0:l.options}),i=H(0);return je([o],()=>{i.value+=1}),Ht(s1,n.virtual.value?s:null),()=>[Ue("div",{style:{position:"relative",width:"100%",height:`${s.value.getTotalSize()}px`},ref:l=>{if(l){if(typeof process<"u"&&jA.JEST_WORKER_ID!==void 0||n.activationTrigger.value===0)return;n.activeOptionIndex.value!==null&&n.virtual.value.options.length>n.activeOptionIndex.value&&s.value.scrollToIndex(n.activeOptionIndex.value)}}},s.value.getVirtualItems().map(l=>wr(e.default({option:n.virtual.value.options[l.index],open:n.comboboxState.value===0})[0],{key:`${i.value}-${l.index}`,"data-index":l.index,"aria-setsize":n.virtual.value.options.length,"aria-posinset":l.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${l.start}px)`,overflowAnchor:"none"}})))]}}),GA=xe({name:"Combobox",emits:{"update:modelValue":t=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(t,{slots:e,attrs:n,emit:r}){let s=H(1),o=H(null),i=H(null),l=H(null),a=H(null),u=H({static:!1,hold:!1}),c=H([]),d=H(null),f=H(2),p=H(!1);function h(P=z=>z){let z=d.value!==null?c.value[d.value]:null,D=P(c.value.slice()),W=D.length>0&&D[0].dataRef.order.value!==null?D.sort((ae,de)=>ae.dataRef.order.value-de.dataRef.order.value):hs(D,ae=>pe(ae.dataRef.domRef)),ie=z?W.indexOf(z):null;return ie===-1&&(ie=null),{options:W,activeOptionIndex:ie}}let m=L(()=>t.multiple?1:0),g=L(()=>t.nullable),[v,y]=EA(L(()=>t.modelValue),P=>r("update:modelValue",P),L(()=>t.defaultValue)),b=L(()=>v.value===void 0?It(m.value,{1:[],0:void 0}):v.value),x=null,k=null;function S(P){return It(m.value,{0(){return y?.(P)},1:()=>{let z=He(A.value.value).slice(),D=He(P),W=z.findIndex(ie=>A.compare(D,He(ie)));return W===-1?z.push(D):z.splice(W,1),y?.(z)}})}let T=L(()=>{});je([T],([P],[z])=>{if(A.virtual.value&&P&&z&&d.value!==null){let D=P.indexOf(z[d.value]);D!==-1?d.value=D:d.value=null}});let A={comboboxState:s,value:b,mode:m,compare(P,z){if(typeof t.by=="string"){let D=t.by;return P?.[D]===z?.[D]}return t.by===null?zA(P,z):t.by(P,z)},calculateIndex(P){return A.virtual.value?t.by===null?A.virtual.value.options.indexOf(P):A.virtual.value.options.findIndex(z=>A.compare(z,P)):c.value.findIndex(z=>A.compare(z.dataRef.value,P))},defaultValue:L(()=>t.defaultValue),nullable:g,immediate:L(()=>!1),virtual:L(()=>null),inputRef:i,labelRef:o,buttonRef:l,optionsRef:a,disabled:L(()=>t.disabled),options:c,change(P){y(P)},activeOptionIndex:L(()=>{if(p.value&&d.value===null&&(A.virtual.value?A.virtual.value.options.length>0:c.value.length>0)){if(A.virtual.value){let z=A.virtual.value.options.findIndex(D=>{var W;return!((W=A.virtual.value)!=null&&W.disabled(D))});if(z!==-1)return z}let P=c.value.findIndex(z=>!z.dataRef.disabled);if(P!==-1)return P}return d.value}),activationTrigger:f,optionsPropsRef:u,closeCombobox(){p.value=!1,!t.disabled&&s.value!==1&&(s.value=1,d.value=null)},openCombobox(){if(p.value=!0,!t.disabled&&s.value!==0){if(A.value.value){let P=A.calculateIndex(A.value.value);P!==-1&&(d.value=P)}s.value=0}},setActivationTrigger(P){f.value=P},goToOption(P,z,D){p.value=!1,x!==null&&cancelAnimationFrame(x),x=requestAnimationFrame(()=>{if(t.disabled||a.value&&!u.value.static&&s.value===1)return;if(A.virtual.value){d.value=P===st.Specific?z:pf({focus:P},{resolveItems:()=>A.virtual.value.options,resolveActiveIndex:()=>{var ae,de;return(de=(ae=A.activeOptionIndex.value)!=null?ae:A.virtual.value.options.findIndex(ve=>{var we;return!((we=A.virtual.value)!=null&&we.disabled(ve))}))!=null?de:null},resolveDisabled:ae=>A.virtual.value.disabled(ae),resolveId(){throw new Error("Function not implemented.")}}),f.value=D??2;return}let W=h();if(W.activeOptionIndex===null){let ae=W.options.findIndex(de=>!de.dataRef.disabled);ae!==-1&&(W.activeOptionIndex=ae)}let ie=P===st.Specific?z:pf({focus:P},{resolveItems:()=>W.options,resolveActiveIndex:()=>W.activeOptionIndex,resolveId:ae=>ae.id,resolveDisabled:ae=>ae.dataRef.disabled});d.value=ie,f.value=D??2,c.value=W.options})},selectOption(P){let z=c.value.find(W=>W.id===P);if(!z)return;let{dataRef:D}=z;S(D.value)},selectActiveOption(){if(A.activeOptionIndex.value!==null){if(A.virtual.value)S(A.virtual.value.options[A.activeOptionIndex.value]);else{let{dataRef:P}=c.value[A.activeOptionIndex.value];S(P.value)}A.goToOption(st.Specific,A.activeOptionIndex.value)}},registerOption(P,z){let D=fi({id:P,dataRef:z});if(A.virtual.value){c.value.push(D);return}k&&cancelAnimationFrame(k);let W=h(ie=>(ie.push(D),ie));d.value===null&&A.isSelected(z.value.value)&&(W.activeOptionIndex=W.options.indexOf(D)),c.value=W.options,d.value=W.activeOptionIndex,f.value=2,W.options.some(ie=>!pe(ie.dataRef.domRef))&&(k=requestAnimationFrame(()=>{let ie=h();c.value=ie.options,d.value=ie.activeOptionIndex}))},unregisterOption(P,z){if(x!==null&&cancelAnimationFrame(x),z&&(p.value=!0),A.virtual.value){c.value=c.value.filter(W=>W.id!==P);return}let D=h(W=>{let ie=W.findIndex(ae=>ae.id===P);return ie!==-1&&W.splice(ie,1),W});c.value=D.options,d.value=D.activeOptionIndex,f.value=2},isSelected(P){return It(m.value,{0:()=>A.compare(He(A.value.value),He(P)),1:()=>He(A.value.value).some(z=>A.compare(He(z),He(P)))})},isActive(P){return d.value===A.calculateIndex(P)}};Rp([i,l,a],()=>A.closeCombobox(),L(()=>s.value===0)),Ht(r1,A),Dp(L(()=>It(s.value,{0:Tt.Open,1:Tt.Closed})));let M=L(()=>{var P;return(P=pe(i))==null?void 0:P.closest("form")});return qe(()=>{je([M],()=>{if(!M.value||t.defaultValue===void 0)return;function P(){A.change(t.defaultValue)}return M.value.addEventListener("reset",P),()=>{var z;(z=M.value)==null||z.removeEventListener("reset",P)}},{immediate:!0})}),()=>{var P,z,D;let{name:W,disabled:ie,form:ae,...de}=t,ve={open:s.value===0,disabled:ie,activeIndex:A.activeOptionIndex.value,activeOption:A.activeOptionIndex.value===null?null:A.virtual.value?A.virtual.value.options[(P=A.activeOptionIndex.value)!=null?P:0]:(D=(z=A.options.value[A.activeOptionIndex.value])==null?void 0:z.dataRef.value)!=null?D:null,value:b.value};return Ue(Ye,[...W!=null&&b.value!=null?e1({[W]:b.value}).map(([we,Qe])=>Ue(si,FA({features:ri.Hidden,key:we,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:ae,disabled:ie,name:we,value:Qe}))):[],gt({theirProps:{...n,...vi(de,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:ve,slots:e,attrs:n,name:"Combobox"})])}}}),YA=xe({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-combobox-button-${$n()}`,i=yi("ComboboxButton");r({el:i.buttonRef,$el:i.buttonRef});function l(c){i.disabled.value||(i.comboboxState.value===0?i.closeCombobox():(c.preventDefault(),i.openCombobox()),bt(()=>{var d;return(d=pe(i.inputRef))==null?void 0:d.focus({preventScroll:!0})}))}function a(c){switch(c.key){case $e.ArrowDown:c.preventDefault(),c.stopPropagation(),i.comboboxState.value===1&&i.openCombobox(),bt(()=>{var d;return(d=i.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case $e.ArrowUp:c.preventDefault(),c.stopPropagation(),i.comboboxState.value===1&&(i.openCombobox(),bt(()=>{i.value.value||i.goToOption(st.Last)})),bt(()=>{var d;return(d=i.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case $e.Escape:if(i.comboboxState.value!==0)return;c.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&c.stopPropagation(),i.closeCombobox(),bt(()=>{var d;return(d=i.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return}}let u=Pp(L(()=>({as:t.as,type:e.type})),i.buttonRef);return()=>{var c,d;let f={open:i.comboboxState.value===0,disabled:i.disabled.value,value:i.value.value},{...p}=t,h={ref:i.buttonRef,id:o,type:u.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(c=pe(i.optionsRef))==null?void 0:c.id,"aria-expanded":i.comboboxState.value===0,"aria-labelledby":i.labelRef.value?[(d=pe(i.labelRef))==null?void 0:d.id,o].join(" "):void 0,disabled:i.disabled.value===!0?!0:void 0,onKeydown:a,onClick:l};return gt({ourProps:h,theirProps:p,slot:f,attrs:e,slots:n,name:"ComboboxButton"})}}}),JA=xe({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:t=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:s}){var o;let i=(o=t.id)!=null?o:`headlessui-combobox-input-${$n()}`,l=yi("ComboboxInput"),a=L(()=>_r(pe(l.inputRef))),u={value:!1};s({el:l.inputRef,$el:l.inputRef});function c(){l.change(null);let k=pe(l.optionsRef);k&&(k.scrollTop=0),l.goToOption(st.Nothing)}let d=L(()=>{var k;let S=l.value.value;return pe(l.inputRef)?typeof t.displayValue<"u"&&S!==void 0?(k=t.displayValue(S))!=null?k:"":typeof S=="string"?S:"":""});qe(()=>{je([d,l.comboboxState,a],([k,S],[T,A])=>{if(u.value)return;let M=pe(l.inputRef);M&&((A===0&&S===1||k!==T)&&(M.value=k),requestAnimationFrame(()=>{var P;if(u.value||!M||((P=a.value)==null?void 0:P.activeElement)!==M)return;let{selectionStart:z,selectionEnd:D}=M;Math.abs((D??0)-(z??0))===0&&z===0&&M.setSelectionRange(M.value.length,M.value.length)}))},{immediate:!0}),je([l.comboboxState],([k],[S])=>{if(k===0&&S===1){if(u.value)return;let T=pe(l.inputRef);if(!T)return;let A=T.value,{selectionStart:M,selectionEnd:P,selectionDirection:z}=T;T.value="",T.value=A,z!==null?T.setSelectionRange(M,P,z):T.setSelectionRange(M,P)}})});let f=H(!1);function p(){f.value=!0}function h(){Ps().nextFrame(()=>{f.value=!1})}let m=CA();function g(k){switch(u.value=!0,m(()=>{u.value=!1}),k.key){case $e.Enter:if(u.value=!1,l.comboboxState.value!==0||f.value)return;if(k.preventDefault(),k.stopPropagation(),l.activeOptionIndex.value===null){l.closeCombobox();return}l.selectActiveOption(),l.mode.value===0&&l.closeCombobox();break;case $e.ArrowDown:return u.value=!1,k.preventDefault(),k.stopPropagation(),It(l.comboboxState.value,{0:()=>l.goToOption(st.Next),1:()=>l.openCombobox()});case $e.ArrowUp:return u.value=!1,k.preventDefault(),k.stopPropagation(),It(l.comboboxState.value,{0:()=>l.goToOption(st.Previous),1:()=>{l.openCombobox(),bt(()=>{l.value.value||l.goToOption(st.Last)})}});case $e.Home:if(k.shiftKey)break;return u.value=!1,k.preventDefault(),k.stopPropagation(),l.goToOption(st.First);case $e.PageUp:return u.value=!1,k.preventDefault(),k.stopPropagation(),l.goToOption(st.First);case $e.End:if(k.shiftKey)break;return u.value=!1,k.preventDefault(),k.stopPropagation(),l.goToOption(st.Last);case $e.PageDown:return u.value=!1,k.preventDefault(),k.stopPropagation(),l.goToOption(st.Last);case $e.Escape:if(u.value=!1,l.comboboxState.value!==0)return;k.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&k.stopPropagation(),l.nullable.value&&l.mode.value===0&&l.value.value===null&&c(),l.closeCombobox();break;case $e.Tab:if(u.value=!1,l.comboboxState.value!==0)return;l.mode.value===0&&l.activationTrigger.value!==1&&l.selectActiveOption(),l.closeCombobox();break}}function v(k){e("change",k),l.nullable.value&&l.mode.value===0&&k.target.value===""&&c(),l.openCombobox()}function y(k){var S,T,A;let M=(S=k.relatedTarget)!=null?S:jr.find(P=>P!==k.currentTarget);if(u.value=!1,!((T=pe(l.optionsRef))!=null&&T.contains(M))&&!((A=pe(l.buttonRef))!=null&&A.contains(M))&&l.comboboxState.value===0)return k.preventDefault(),l.mode.value===0&&(l.nullable.value&&l.value.value===null?c():l.activationTrigger.value!==1&&l.selectActiveOption()),l.closeCombobox()}function b(k){var S,T,A;let M=(S=k.relatedTarget)!=null?S:jr.find(P=>P!==k.currentTarget);(T=pe(l.buttonRef))!=null&&T.contains(M)||(A=pe(l.optionsRef))!=null&&A.contains(M)||l.disabled.value||l.immediate.value&&l.comboboxState.value!==0&&(l.openCombobox(),Ps().nextFrame(()=>{l.setActivationTrigger(1)}))}let x=L(()=>{var k,S,T,A;return(A=(T=(S=t.defaultValue)!=null?S:l.defaultValue.value!==void 0?(k=t.displayValue)==null?void 0:k.call(t,l.defaultValue.value):null)!=null?T:l.defaultValue.value)!=null?A:""});return()=>{var k,S,T,A,M,P,z;let D={open:l.comboboxState.value===0},{displayValue:W,onChange:ie,...ae}=t,de={"aria-controls":(k=l.optionsRef.value)==null?void 0:k.id,"aria-expanded":l.comboboxState.value===0,"aria-activedescendant":l.activeOptionIndex.value===null?void 0:l.virtual.value?(S=l.options.value.find(ve=>!l.virtual.value.disabled(ve.dataRef.value)&&l.compare(ve.dataRef.value,l.virtual.value.options[l.activeOptionIndex.value])))==null?void 0:S.id:(T=l.options.value[l.activeOptionIndex.value])==null?void 0:T.id,"aria-labelledby":(P=(A=pe(l.labelRef))==null?void 0:A.id)!=null?P:(M=pe(l.buttonRef))==null?void 0:M.id,"aria-autocomplete":"list",id:i,onCompositionstart:p,onCompositionend:h,onKeydown:g,onInput:v,onFocus:b,onBlur:y,role:"combobox",type:(z=n.type)!=null?z:"text",tabIndex:0,ref:l.inputRef,defaultValue:x.value,disabled:l.disabled.value===!0?!0:void 0};return gt({ourProps:de,theirProps:ae,slot:D,attrs:n,slots:r,features:Xn.RenderStrategy|Xn.Static,name:"ComboboxInput"})}}}),XA=xe({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(t,{attrs:e,slots:n,expose:r}){let s=yi("ComboboxOptions"),o=`headlessui-combobox-options-${$n()}`;r({el:s.optionsRef,$el:s.optionsRef}),Pt(()=>{s.optionsPropsRef.value.static=t.static}),Pt(()=>{s.optionsPropsRef.value.hold=t.hold});let i=$l(),l=L(()=>i!==null?(i.value&Tt.Open)===Tt.Open:s.comboboxState.value===0);Y0({container:L(()=>pe(s.optionsRef)),enabled:L(()=>s.comboboxState.value===0),accept(u){return u.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:u.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(u){u.setAttribute("role","none")}});function a(u){u.preventDefault()}return()=>{var u,c,d;let f={open:s.comboboxState.value===0},p={"aria-labelledby":(d=(u=pe(s.labelRef))==null?void 0:u.id)!=null?d:(c=pe(s.buttonRef))==null?void 0:c.id,id:o,ref:s.optionsRef,role:"listbox","aria-multiselectable":s.mode.value===1?!0:void 0,onMousedown:a},h=vi(t,["hold"]);return gt({ourProps:p,theirProps:h,slot:f,attrs:e,slots:s.virtual.value&&s.comboboxState.value===0?{...n,default:()=>[Ue(KA,{},n.default)]}:n,features:Xn.RenderStrategy|Xn.Static,visible:l.value,name:"ComboboxOptions"})}}}),QA=xe({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(t,{slots:e,attrs:n,expose:r}){let s=yi("ComboboxOption"),o=`headlessui-combobox-option-${$n()}`,i=H(null),l=L(()=>t.disabled);r({el:i,$el:i});let a=L(()=>{var y;return s.virtual.value?s.activeOptionIndex.value===s.calculateIndex(t.value):s.activeOptionIndex.value===null?!1:((y=s.options.value[s.activeOptionIndex.value])==null?void 0:y.id)===o}),u=L(()=>s.isSelected(t.value)),c=tt(s1,null),d=L(()=>({disabled:t.disabled,value:t.value,domRef:i,order:L(()=>t.order)}));qe(()=>s.registerOption(o,d)),zt(()=>s.unregisterOption(o,a.value)),Pt(()=>{let y=pe(i);y&&c?.value.measureElement(y)}),Pt(()=>{s.comboboxState.value===0&&a.value&&(s.virtual.value||s.activationTrigger.value!==0&&bt(()=>{var y,b;return(b=(y=pe(i))==null?void 0:y.scrollIntoView)==null?void 0:b.call(y,{block:"nearest"})}))});function f(y){y.preventDefault(),y.button===Z0.Left&&(l.value||(s.selectOption(o),q0()||requestAnimationFrame(()=>{var b;return(b=pe(s.inputRef))==null?void 0:b.focus({preventScroll:!0})}),s.mode.value===0&&s.closeCombobox()))}function p(){var y;if(t.disabled||(y=s.virtual.value)!=null&&y.disabled(t.value))return s.goToOption(st.Nothing);let b=s.calculateIndex(t.value);s.goToOption(st.Specific,b)}let h=G0();function m(y){h.update(y)}function g(y){var b;if(!h.wasMoved(y)||t.disabled||(b=s.virtual.value)!=null&&b.disabled(t.value)||a.value)return;let x=s.calculateIndex(t.value);s.goToOption(st.Specific,x,0)}function v(y){var b;h.wasMoved(y)&&(t.disabled||(b=s.virtual.value)!=null&&b.disabled(t.value)||a.value&&(s.optionsPropsRef.value.hold||s.goToOption(st.Nothing)))}return()=>{let{disabled:y}=t,b={active:a.value,selected:u.value,disabled:y},x={id:o,ref:i,role:"option",tabIndex:y===!0?void 0:-1,"aria-disabled":y===!0?!0:void 0,"aria-selected":u.value,disabled:void 0,onMousedown:f,onFocus:p,onPointerenter:m,onMouseenter:m,onPointermove:g,onMousemove:g,onPointerleave:v,onMouseleave:v},k=vi(t,["order","value"]);return gt({ourProps:x,theirProps:k,slot:b,attrs:n,slots:e,name:"ComboboxOption"})}}});function o1(t,e,n,r){Fl.isServer||Pt(s=>{t=t??window,t.addEventListener(e,n,r),s(()=>t.removeEventListener(e,n,r))})}var Ni=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Ni||{});function ZA(){let t=H(0);return K0("keydown",e=>{e.key==="Tab"&&(t.value=e.shiftKey?1:0)}),t}function i1(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.value){let r=pe(n);r instanceof HTMLElement&&e.add(r)}return e}var l1=(t=>(t[t.None=1]="None",t[t.InitialFocus=2]="InitialFocus",t[t.TabLock=4]="TabLock",t[t.FocusLock=8]="FocusLock",t[t.RestoreFocus=16]="RestoreFocus",t[t.All=30]="All",t))(l1||{});let _i=Object.assign(xe({name:"FocusTrap",props:{as:{type:[Object,String],default:"div"},initialFocus:{type:Object,default:null},features:{type:Number,default:30},containers:{type:[Object,Function],default:H(new Set)}},inheritAttrs:!1,setup(t,{attrs:e,slots:n,expose:r}){let s=H(null);r({el:s,$el:s});let o=L(()=>_r(s)),i=H(!1);qe(()=>i.value=!0),zt(()=>i.value=!1),tI({ownerDocument:o},L(()=>i.value&&!!(t.features&16)));let l=nI({ownerDocument:o,container:s,initialFocus:L(()=>t.initialFocus)},L(()=>i.value&&!!(t.features&2)));rI({ownerDocument:o,container:s,containers:t.containers,previousActiveElement:l},L(()=>i.value&&!!(t.features&8)));let a=ZA();function u(p){let h=pe(s);h&&(m=>m())(()=>{It(a.value,{[Ni.Forwards]:()=>{er(h,Nt.First,{skipElements:[p.relatedTarget]})},[Ni.Backwards]:()=>{er(h,Nt.Last,{skipElements:[p.relatedTarget]})}})})}let c=H(!1);function d(p){p.key==="Tab"&&(c.value=!0,requestAnimationFrame(()=>{c.value=!1}))}function f(p){if(!i.value)return;let h=i1(t.containers);pe(s)instanceof HTMLElement&&h.add(pe(s));let m=p.relatedTarget;m instanceof HTMLElement&&m.dataset.headlessuiFocusGuard!=="true"&&(a1(h,m)||(c.value?er(pe(s),It(a.value,{[Ni.Forwards]:()=>Nt.Next,[Ni.Backwards]:()=>Nt.Previous})|Nt.WrapAround,{relativeTo:p.target}):p.target instanceof HTMLElement&&_s(p.target)))}return()=>{let p={},h={ref:s,onKeydown:d,onFocusout:f},{features:m,initialFocus:g,containers:v,...y}=t;return Ue(Ye,[!!(m&4)&&Ue(si,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:ri.Focusable}),gt({ourProps:h,theirProps:{...e,...y},slot:p,attrs:e,slots:n,name:"FocusTrap"}),!!(m&4)&&Ue(si,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:u,features:ri.Focusable})])}}}),{features:l1});function eI(t){let e=H(jr.slice());return je([t],([n],[r])=>{r===!0&&n===!1?oc(()=>{e.value.splice(0)}):r===!1&&n===!0&&(e.value=jr.slice())},{flush:"post"}),()=>{var n;return(n=e.value.find(r=>r!=null&&r.isConnected))!=null?n:null}}function tI({ownerDocument:t},e){let n=eI(e);qe(()=>{Pt(()=>{var r,s;e.value||((r=t.value)==null?void 0:r.activeElement)===((s=t.value)==null?void 0:s.body)&&_s(n())},{flush:"post"})}),zt(()=>{e.value&&_s(n())})}function nI({ownerDocument:t,container:e,initialFocus:n},r){let s=H(null),o=H(!1);return qe(()=>o.value=!0),zt(()=>o.value=!1),qe(()=>{je([e,n,r],(i,l)=>{if(i.every((u,c)=>l?.[c]===u)||!r.value)return;let a=pe(e);a&&oc(()=>{var u,c;if(!o.value)return;let d=pe(n),f=(u=t.value)==null?void 0:u.activeElement;if(d){if(d===f){s.value=f;return}}else if(a.contains(f)){s.value=f;return}d?_s(d):er(a,Nt.First|Nt.NoScroll)===Ho.Error&&console.warn("There are no focusable elements inside the <FocusTrap />"),s.value=(c=t.value)==null?void 0:c.activeElement})},{immediate:!0,flush:"post"})}),s}function rI({ownerDocument:t,container:e,containers:n,previousActiveElement:r},s){var o;o1((o=t.value)==null?void 0:o.defaultView,"focus",i=>{if(!s.value)return;let l=i1(n);pe(e)instanceof HTMLElement&&l.add(pe(e));let a=r.value;if(!a)return;let u=i.target;u&&u instanceof HTMLElement?a1(l,u)?(r.value=u,_s(u)):(i.preventDefault(),i.stopPropagation(),_s(a)):_s(r.value)},!0)}function a1(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function sI(t){let e=pi(t.getSnapshot());return zt(t.subscribe(()=>{e.value=t.getSnapshot()})),e}function oI(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...o){let i=e[s].call(n,...o);i&&(n=i,r.forEach(l=>l()))}}}function iI(){let t;return{before({doc:e}){var n;let r=e.documentElement;t=((n=e.defaultView)!=null?n:window).innerWidth-r.clientWidth},after({doc:e,d:n}){let r=e.documentElement,s=r.clientWidth-r.offsetWidth,o=t-s;n.style(r,"paddingRight",`${o}px`)}}}function lI(){return U0()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=Ps();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,i=null;e.addEventListener(t,"click",l=>{if(l.target instanceof HTMLElement)try{let a=l.target.closest("a");if(!a)return;let{hash:u}=new URL(a.href),c=t.querySelector(u);c&&!r(c)&&(i=c)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(l.target instanceof HTMLElement)if(r(l.target)){let a=l.target;for(;a.parentElement&&r(a.parentElement);)a=a.parentElement;e.style(a,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(l.target instanceof HTMLElement){if(l.target.tagName==="INPUT")return;if(r(l.target)){let a=l.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),e.add(()=>{var l;let a=(l=window.scrollY)!=null?l:window.pageYOffset;o!==a&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function aI(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function uI(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let oo=oI(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Ps(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:uI(n)},s=[lI(),iI(),aI()];s.forEach(({before:o})=>o?.(r)),s.forEach(({after:o})=>o?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});oo.subscribe(()=>{let t=oo.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&oo.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&oo.dispatch("TEARDOWN",n)}});function cI(t,e,n){let r=sI(oo),s=L(()=>{let o=t.value?r.value.get(t.value):void 0;return o?o.count>0:!1});return je([t,e],([o,i],[l],a)=>{if(!o||!i)return;oo.dispatch("PUSH",o,n);let u=!1;a(()=>{u||(oo.dispatch("POP",l??o,n),u=!0)})},{immediate:!0}),s}let Qc=new Map,Ti=new Map;function Dg(t,e=H(!0)){Pt(n=>{var r;if(!e.value)return;let s=pe(t);if(!s)return;n(function(){var i;if(!s)return;let l=(i=Ti.get(s))!=null?i:1;if(l===1?Ti.delete(s):Ti.set(s,l-1),l!==1)return;let a=Qc.get(s);a&&(a["aria-hidden"]===null?s.removeAttribute("aria-hidden"):s.setAttribute("aria-hidden",a["aria-hidden"]),s.inert=a.inert,Qc.delete(s))});let o=(r=Ti.get(s))!=null?r:0;Ti.set(s,o+1),o===0&&(Qc.set(s,{"aria-hidden":s.getAttribute("aria-hidden"),inert:s.inert}),s.setAttribute("aria-hidden","true"),s.inert=!0)})}function dI({defaultContainers:t=[],portals:e,mainTreeNodeRef:n}={}){let r=H(null),s=_r(r);function o(){var i,l,a;let u=[];for(let c of t)c!==null&&(c instanceof HTMLElement?u.push(c):"value"in c&&c.value instanceof HTMLElement&&u.push(c.value));if(e!=null&&e.value)for(let c of e.value)u.push(c);for(let c of(i=s?.querySelectorAll("html > *, body > *"))!=null?i:[])c!==document.body&&c!==document.head&&c instanceof HTMLElement&&c.id!=="headlessui-portal-root"&&(c.contains(pe(r))||c.contains((a=(l=pe(r))==null?void 0:l.getRootNode())==null?void 0:a.host)||u.some(d=>c.contains(d))||u.push(c));return u}return{resolveContainers:o,contains(i){return o().some(l=>l.contains(i))},mainTreeNodeRef:r,MainTreeNode(){return n!=null?null:Ue(si,{features:ri.Hidden,ref:r})}}}let u1=Symbol("ForcePortalRootContext");function fI(){return tt(u1,!1)}let Lg=xe({name:"ForcePortalRoot",props:{as:{type:[Object,String],default:"template"},force:{type:Boolean,default:!1}},setup(t,{slots:e,attrs:n}){return Ht(u1,t.force),()=>{let{force:r,...s}=t;return gt({theirProps:s,ourProps:{},slot:{},slots:e,attrs:n,name:"ForcePortalRoot"})}}}),c1=Symbol("StackContext");var hf=(t=>(t[t.Add=0]="Add",t[t.Remove=1]="Remove",t))(hf||{});function pI(){return tt(c1,()=>{})}function hI({type:t,enabled:e,element:n,onUpdate:r}){let s=pI();function o(...i){r?.(...i),s(...i)}qe(()=>{je(e,(i,l)=>{i?o(0,t,n):l===!0&&o(1,t,n)},{immediate:!0,flush:"sync"})}),zt(()=>{e.value&&o(1,t,n)}),Ht(c1,o)}let mI=Symbol("DescriptionContext");function gI({slot:t=H({}),name:e="Description",props:n={}}={}){let r=H([]);function s(o){return r.value.push(o),()=>{let i=r.value.indexOf(o);i!==-1&&r.value.splice(i,1)}}return Ht(mI,{register:s,slot:t,name:e,props:n}),L(()=>r.value.length>0?r.value.join(" "):void 0)}function vI(t){let e=_r(t);if(!e){if(t===null)return null;throw new Error(`[Headless UI]: Cannot find ownerDocument for contextElement: ${t}`)}let n=e.getElementById("headlessui-portal-root");if(n)return n;let r=e.createElement("div");return r.setAttribute("id","headlessui-portal-root"),e.body.appendChild(r)}const mf=new WeakMap;function yI(t){var e;return(e=mf.get(t))!=null?e:0}function Fg(t,e){let n=e(yI(t));return n<=0?mf.delete(t):mf.set(t,n),n}let bI=xe({name:"Portal",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:n}){let r=H(null),s=L(()=>_r(r)),o=fI(),i=tt(d1,null),l=H(o===!0||i==null?vI(r.value):i.resolveTarget());l.value&&Fg(l.value,f=>f+1);let a=H(!1);qe(()=>{a.value=!0}),Pt(()=>{o||i!=null&&(l.value=i.resolveTarget())});let u=tt(gf,null),c=!1,d=ar();return je(r,()=>{if(c||!u)return;let f=pe(r);f&&(zt(u.register(f),d),c=!0)}),zt(()=>{var f,p;let h=(f=s.value)==null?void 0:f.getElementById("headlessui-portal-root");!h||l.value!==h||Fg(l.value,m=>m-1)||l.value.children.length>0||(p=l.value.parentElement)==null||p.removeChild(l.value)}),()=>{if(!a.value||l.value===null)return null;let f={ref:r,"data-headlessui-portal":""};return Ue(cE,{to:l.value},gt({ourProps:f,theirProps:t,slot:{},attrs:n,slots:e,name:"Portal"}))}}}),gf=Symbol("PortalParentContext");function xI(){let t=tt(gf,null),e=H([]);function n(o){return e.value.push(o),t&&t.register(o),()=>r(o)}function r(o){let i=e.value.indexOf(o);i!==-1&&e.value.splice(i,1),t&&t.unregister(o)}let s={register:n,unregister:r,portals:e};return[e,xe({name:"PortalWrapper",setup(o,{slots:i}){return Ht(gf,s),()=>{var l;return(l=i.default)==null?void 0:l.call(i)}}})]}let d1=Symbol("PortalGroupContext"),kI=xe({name:"PortalGroup",props:{as:{type:[Object,String],default:"template"},target:{type:Object,default:null}},setup(t,{attrs:e,slots:n}){let r=fi({resolveTarget(){return t.target}});return Ht(d1,r),()=>{let{target:s,...o}=t;return gt({theirProps:o,ourProps:{},slot:{},attrs:e,slots:n,name:"PortalGroup"})}}});var wI=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(wI||{});let vf=Symbol("DialogContext");function Lp(t){let e=tt(vf,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Lp),n}return e}let na="DC8F892D-2EBD-447C-A4C8-A03058436FF4",f1=xe({name:"Dialog",inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},open:{type:[Boolean,String],default:na},initialFocus:{type:Object,default:null},id:{type:String,default:null},role:{type:String,default:"dialog"}},emits:{close:t=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:s}){var o,i;let l=(o=t.id)!=null?o:`headlessui-dialog-${$n()}`,a=H(!1);qe(()=>{a.value=!0});let u=!1,c=L(()=>t.role==="dialog"||t.role==="alertdialog"?t.role:(u||(u=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")),d=H(0),f=$l(),p=L(()=>t.open===na&&f!==null?(f.value&Tt.Open)===Tt.Open:t.open),h=H(null),m=L(()=>_r(h));if(s({el:h,$el:h}),!(t.open!==na||f!==null))throw new Error("You forgot to provide an `open` prop to the `Dialog`.");if(typeof p.value!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${p.value===na?void 0:t.open}`);let g=L(()=>a.value&&p.value?0:1),v=L(()=>g.value===0),y=L(()=>d.value>1),b=tt(vf,null)!==null,[x,k]=xI(),{resolveContainers:S,mainTreeNodeRef:T,MainTreeNode:A}=dI({portals:x,defaultContainers:[L(()=>{var ke;return(ke=ve.panelRef.value)!=null?ke:h.value})]}),M=L(()=>y.value?"parent":"leaf"),P=L(()=>f!==null?(f.value&Tt.Closing)===Tt.Closing:!1),z=L(()=>b||P.value?!1:v.value),D=L(()=>{var ke,_e,te;return(te=Array.from((_e=(ke=m.value)==null?void 0:ke.querySelectorAll("body > *"))!=null?_e:[]).find(j=>j.id==="headlessui-portal-root"?!1:j.contains(pe(T))&&j instanceof HTMLElement))!=null?te:null});Dg(D,z);let W=L(()=>y.value?!0:v.value),ie=L(()=>{var ke,_e,te;return(te=Array.from((_e=(ke=m.value)==null?void 0:ke.querySelectorAll("[data-headlessui-portal]"))!=null?_e:[]).find(j=>j.contains(pe(T))&&j instanceof HTMLElement))!=null?te:null});Dg(ie,W),hI({type:"Dialog",enabled:L(()=>g.value===0),element:h,onUpdate:(ke,_e)=>{if(_e==="Dialog")return It(ke,{[hf.Add]:()=>d.value+=1,[hf.Remove]:()=>d.value-=1})}});let ae=gI({name:"DialogDescription",slot:L(()=>({open:p.value}))}),de=H(null),ve={titleId:de,panelRef:H(null),dialogState:g,setTitleId(ke){de.value!==ke&&(de.value=ke)},close(){e("close",!1)}};Ht(vf,ve);let we=L(()=>!(!v.value||y.value));Rp(S,(ke,_e)=>{ke.preventDefault(),ve.close(),bt(()=>_e?.focus())},we);let Qe=L(()=>!(y.value||g.value!==0));o1((i=m.value)==null?void 0:i.defaultView,"keydown",ke=>{Qe.value&&(ke.defaultPrevented||ke.key===$e.Escape&&(ke.preventDefault(),ke.stopPropagation(),ve.close()))});let ut=L(()=>!(P.value||g.value!==0||b));return cI(m,ut,ke=>{var _e;return{containers:[...(_e=ke.containers)!=null?_e:[],S]}}),Pt(ke=>{if(g.value!==0)return;let _e=pe(h);if(!_e)return;let te=new ResizeObserver(j=>{for(let X of j){let ee=X.target.getBoundingClientRect();ee.x===0&&ee.y===0&&ee.width===0&&ee.height===0&&ve.close()}});te.observe(_e),ke(()=>te.disconnect())}),()=>{let{open:ke,initialFocus:_e,...te}=t,j={...n,ref:h,id:l,role:c.value,"aria-modal":g.value===0?!0:void 0,"aria-labelledby":de.value,"aria-describedby":ae.value},X={open:g.value===0};return Ue(Lg,{force:!0},()=>[Ue(bI,()=>Ue(kI,{target:h.value},()=>Ue(Lg,{force:!1},()=>Ue(_i,{initialFocus:_e,containers:S,features:v.value?It(M.value,{parent:_i.features.RestoreFocus,leaf:_i.features.All&~_i.features.FocusLock}):_i.features.None},()=>Ue(k,{},()=>gt({ourProps:j,theirProps:{...te,...n},slot:X,attrs:n,slots:r,visible:g.value===0,features:Xn.RenderStrategy|Xn.Static,name:"Dialog"})))))),Ue(A)])}}}),p1=xe({name:"DialogPanel",props:{as:{type:[Object,String],default:"div"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-dialog-panel-${$n()}`,i=Lp("DialogPanel");r({el:i.panelRef,$el:i.panelRef});function l(a){a.stopPropagation()}return()=>{let{...a}=t,u={id:o,ref:i.panelRef,onClick:l};return gt({ourProps:u,theirProps:a,slot:{open:i.dialogState.value===0},attrs:e,slots:n,name:"DialogPanel"})}}}),h1=xe({name:"DialogTitle",props:{as:{type:[Object,String],default:"h2"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n}){var r;let s=(r=t.id)!=null?r:`headlessui-dialog-title-${$n()}`,o=Lp("DialogTitle");return qe(()=>{o.setTitleId(s),zt(()=>o.setTitleId(null))}),()=>{let{...i}=t;return gt({ourProps:{id:s},theirProps:i,slot:{open:o.dialogState.value===0},attrs:e,slots:n,name:"DialogTitle"})}}}),$g=/([\u2700-\u27BF]|[\uE000-\uF8FF]|\uD83C[\uDC00-\uDFFF]|\uD83D[\uDC00-\uDFFF]|[\u2011-\u26FF]|\uD83E[\uDD10-\uDDFF])/g;function Bg(t){var e,n;let r=(e=t.innerText)!=null?e:"",s=t.cloneNode(!0);if(!(s instanceof HTMLElement))return r;let o=!1;for(let l of s.querySelectorAll('[hidden],[aria-hidden],[role="img"]'))l.remove(),o=!0;let i=o?(n=s.innerText)!=null?n:"":r;return $g.test(i)&&(i=i.replace($g,"")),i}function EI(t){let e=t.getAttribute("aria-label");if(typeof e=="string")return e.trim();let n=t.getAttribute("aria-labelledby");if(n){let r=n.split(" ").map(s=>{let o=document.getElementById(s);if(o){let i=o.getAttribute("aria-label");return typeof i=="string"?i.trim():Bg(o).trim()}return null}).filter(Boolean);if(r.length>0)return r.join(", ")}return Bg(t).trim()}function SI(t){let e=H(""),n=H("");return()=>{let r=pe(t);if(!r)return"";let s=r.innerText;if(e.value===s)return n.value;let o=EI(r).trim().toLowerCase();return e.value=s,n.value=o,o}}var CI=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(CI||{}),_I=(t=>(t[t.Pointer=0]="Pointer",t[t.Other=1]="Other",t))(_I||{});function TI(t){requestAnimationFrame(()=>requestAnimationFrame(t))}let m1=Symbol("MenuContext");function ic(t){let e=tt(m1,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,ic),n}return e}let AI=xe({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(t,{slots:e,attrs:n}){let r=H(1),s=H(null),o=H(null),i=H([]),l=H(""),a=H(null),u=H(1);function c(f=p=>p){let p=a.value!==null?i.value[a.value]:null,h=hs(f(i.value.slice()),g=>pe(g.dataRef.domRef)),m=p?h.indexOf(p):null;return m===-1&&(m=null),{items:h,activeItemIndex:m}}let d={menuState:r,buttonRef:s,itemsRef:o,items:i,searchQuery:l,activeItemIndex:a,activationTrigger:u,closeMenu:()=>{r.value=1,a.value=null},openMenu:()=>r.value=0,goToItem(f,p,h){let m=c(),g=pf(f===st.Specific?{focus:st.Specific,id:p}:{focus:f},{resolveItems:()=>m.items,resolveActiveIndex:()=>m.activeItemIndex,resolveId:v=>v.id,resolveDisabled:v=>v.dataRef.disabled});l.value="",a.value=g,u.value=h??1,i.value=m.items},search(f){let p=l.value!==""?0:1;l.value+=f.toLowerCase();let h=(a.value!==null?i.value.slice(a.value+p).concat(i.value.slice(0,a.value+p)):i.value).find(g=>g.dataRef.textValue.startsWith(l.value)&&!g.dataRef.disabled),m=h?i.value.indexOf(h):-1;m===-1||m===a.value||(a.value=m,u.value=1)},clearSearch(){l.value=""},registerItem(f,p){let h=c(m=>[...m,{id:f,dataRef:p}]);i.value=h.items,a.value=h.activeItemIndex,u.value=1},unregisterItem(f){let p=c(h=>{let m=h.findIndex(g=>g.id===f);return m!==-1&&h.splice(m,1),h});i.value=p.items,a.value=p.activeItemIndex,u.value=1}};return Rp([s,o],(f,p)=>{var h;d.closeMenu(),Np(p,Mp.Loose)||(f.preventDefault(),(h=pe(s))==null||h.focus())},L(()=>r.value===0)),Ht(m1,d),Dp(L(()=>It(r.value,{0:Tt.Open,1:Tt.Closed}))),()=>{let f={open:r.value===0,close:d.closeMenu};return gt({ourProps:{},theirProps:t,slot:f,slots:e,attrs:n,name:"Menu"})}}}),II=xe({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-button-${$n()}`,i=ic("MenuButton");r({el:i.buttonRef,$el:i.buttonRef});function l(d){switch(d.key){case $e.Space:case $e.Enter:case $e.ArrowDown:d.preventDefault(),d.stopPropagation(),i.openMenu(),bt(()=>{var f;(f=pe(i.itemsRef))==null||f.focus({preventScroll:!0}),i.goToItem(st.First)});break;case $e.ArrowUp:d.preventDefault(),d.stopPropagation(),i.openMenu(),bt(()=>{var f;(f=pe(i.itemsRef))==null||f.focus({preventScroll:!0}),i.goToItem(st.Last)});break}}function a(d){switch(d.key){case $e.Space:d.preventDefault();break}}function u(d){t.disabled||(i.menuState.value===0?(i.closeMenu(),bt(()=>{var f;return(f=pe(i.buttonRef))==null?void 0:f.focus({preventScroll:!0})})):(d.preventDefault(),i.openMenu(),TI(()=>{var f;return(f=pe(i.itemsRef))==null?void 0:f.focus({preventScroll:!0})})))}let c=Pp(L(()=>({as:t.as,type:e.type})),i.buttonRef);return()=>{var d;let f={open:i.menuState.value===0},{...p}=t,h={ref:i.buttonRef,id:o,type:c.value,"aria-haspopup":"menu","aria-controls":(d=pe(i.itemsRef))==null?void 0:d.id,"aria-expanded":i.menuState.value===0,onKeydown:l,onKeyup:a,onClick:u};return gt({ourProps:h,theirProps:p,slot:f,attrs:e,slots:n,name:"MenuButton"})}}}),OI=xe({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-items-${$n()}`,i=ic("MenuItems"),l=H(null);r({el:i.itemsRef,$el:i.itemsRef}),Y0({container:L(()=>pe(i.itemsRef)),enabled:L(()=>i.menuState.value===0),accept(f){return f.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:f.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(f){f.setAttribute("role","none")}});function a(f){var p;switch(l.value&&clearTimeout(l.value),f.key){case $e.Space:if(i.searchQuery.value!=="")return f.preventDefault(),f.stopPropagation(),i.search(f.key);case $e.Enter:if(f.preventDefault(),f.stopPropagation(),i.activeItemIndex.value!==null){let h=i.items.value[i.activeItemIndex.value];(p=pe(h.dataRef.domRef))==null||p.click()}i.closeMenu(),W0(pe(i.buttonRef));break;case $e.ArrowDown:return f.preventDefault(),f.stopPropagation(),i.goToItem(st.Next);case $e.ArrowUp:return f.preventDefault(),f.stopPropagation(),i.goToItem(st.Previous);case $e.Home:case $e.PageUp:return f.preventDefault(),f.stopPropagation(),i.goToItem(st.First);case $e.End:case $e.PageDown:return f.preventDefault(),f.stopPropagation(),i.goToItem(st.Last);case $e.Escape:f.preventDefault(),f.stopPropagation(),i.closeMenu(),bt(()=>{var h;return(h=pe(i.buttonRef))==null?void 0:h.focus({preventScroll:!0})});break;case $e.Tab:f.preventDefault(),f.stopPropagation(),i.closeMenu(),bt(()=>DA(pe(i.buttonRef),f.shiftKey?Nt.Previous:Nt.Next));break;default:f.key.length===1&&(i.search(f.key),l.value=setTimeout(()=>i.clearSearch(),350));break}}function u(f){switch(f.key){case $e.Space:f.preventDefault();break}}let c=$l(),d=L(()=>c!==null?(c.value&Tt.Open)===Tt.Open:i.menuState.value===0);return()=>{var f,p;let h={open:i.menuState.value===0},{...m}=t,g={"aria-activedescendant":i.activeItemIndex.value===null||(f=i.items.value[i.activeItemIndex.value])==null?void 0:f.id,"aria-labelledby":(p=pe(i.buttonRef))==null?void 0:p.id,id:o,onKeydown:a,onKeyup:u,role:"menu",tabIndex:0,ref:i.itemsRef};return gt({ourProps:g,theirProps:m,slot:h,attrs:e,slots:n,features:Xn.RenderStrategy|Xn.Static,visible:d.value,name:"MenuItems"})}}}),MI=xe({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(t,{slots:e,attrs:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-menu-item-${$n()}`,i=ic("MenuItem"),l=H(null);r({el:l,$el:l});let a=L(()=>i.activeItemIndex.value!==null?i.items.value[i.activeItemIndex.value].id===o:!1),u=SI(l),c=L(()=>({disabled:t.disabled,get textValue(){return u()},domRef:l}));qe(()=>i.registerItem(o,c)),zt(()=>i.unregisterItem(o)),Pt(()=>{i.menuState.value===0&&a.value&&i.activationTrigger.value!==0&&bt(()=>{var v,y;return(y=(v=pe(l))==null?void 0:v.scrollIntoView)==null?void 0:y.call(v,{block:"nearest"})})});function d(v){if(t.disabled)return v.preventDefault();i.closeMenu(),W0(pe(i.buttonRef))}function f(){if(t.disabled)return i.goToItem(st.Nothing);i.goToItem(st.Specific,o)}let p=G0();function h(v){p.update(v)}function m(v){p.wasMoved(v)&&(t.disabled||a.value||i.goToItem(st.Specific,o,0))}function g(v){p.wasMoved(v)&&(t.disabled||a.value&&i.goToItem(st.Nothing))}return()=>{let{disabled:v,...y}=t,b={active:a.value,disabled:v,close:i.closeMenu};return gt({ourProps:{id:o,ref:l,role:"menuitem",tabIndex:v===!0?void 0:-1,"aria-disabled":v===!0?!0:void 0,onClick:d,onFocus:f,onPointerenter:h,onMouseenter:h,onPointermove:m,onMousemove:m,onPointerleave:g,onMouseleave:g},theirProps:{...n,...y},slot:b,attrs:n,slots:e,name:"MenuItem"})}}}),NI=xe({props:{onFocus:{type:Function,required:!0}},setup(t){let e=H(!0);return()=>e.value?Ue(si,{as:"button",type:"button",features:ri.Focusable,onFocus(n){n.preventDefault();let r,s=50;function o(){var i;if(s--<=0){r&&cancelAnimationFrame(r);return}if((i=t.onFocus)!=null&&i.call(t)){e.value=!1,cancelAnimationFrame(r);return}r=requestAnimationFrame(o)}r=requestAnimationFrame(o)}}):null}});var RI=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(RI||{}),PI=(t=>(t[t.Less=-1]="Less",t[t.Equal=0]="Equal",t[t.Greater=1]="Greater",t))(PI||{});let g1=Symbol("TabsContext");function Bl(t){let e=tt(g1,null);if(e===null){let n=new Error(`<${t} /> is missing a parent <TabGroup /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Bl),n}return e}let Fp=Symbol("TabsSSRContext"),DI=xe({name:"TabGroup",emits:{change:t=>!0},props:{as:{type:[Object,String],default:"template"},selectedIndex:{type:[Number],default:null},defaultIndex:{type:[Number],default:0},vertical:{type:[Boolean],default:!1},manual:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(t,{slots:e,attrs:n,emit:r}){var s;let o=H((s=t.selectedIndex)!=null?s:t.defaultIndex),i=H([]),l=H([]),a=L(()=>t.selectedIndex!==null),u=L(()=>a.value?t.selectedIndex:o.value);function c(m){var g;let v=hs(d.tabs.value,pe),y=hs(d.panels.value,pe),b=v.filter(x=>{var k;return!((k=pe(x))!=null&&k.hasAttribute("disabled"))});if(m<0||m>v.length-1){let x=It(o.value===null?0:Math.sign(m-o.value),{[-1]:()=>1,0:()=>It(Math.sign(m),{[-1]:()=>0,0:()=>0,1:()=>1}),1:()=>0}),k=It(x,{0:()=>v.indexOf(b[0]),1:()=>v.indexOf(b[b.length-1])});k!==-1&&(o.value=k),d.tabs.value=v,d.panels.value=y}else{let x=v.slice(0,m),k=[...v.slice(m),...x].find(T=>b.includes(T));if(!k)return;let S=(g=v.indexOf(k))!=null?g:d.selectedIndex.value;S===-1&&(S=d.selectedIndex.value),o.value=S,d.tabs.value=v,d.panels.value=y}}let d={selectedIndex:L(()=>{var m,g;return(g=(m=o.value)!=null?m:t.defaultIndex)!=null?g:null}),orientation:L(()=>t.vertical?"vertical":"horizontal"),activation:L(()=>t.manual?"manual":"auto"),tabs:i,panels:l,setSelectedIndex(m){u.value!==m&&r("change",m),a.value||c(m)},registerTab(m){var g;if(i.value.includes(m))return;let v=i.value[o.value];if(i.value.push(m),i.value=hs(i.value,pe),!a.value){let y=(g=i.value.indexOf(v))!=null?g:o.value;y!==-1&&(o.value=y)}},unregisterTab(m){let g=i.value.indexOf(m);g!==-1&&i.value.splice(g,1)},registerPanel(m){l.value.includes(m)||(l.value.push(m),l.value=hs(l.value,pe))},unregisterPanel(m){let g=l.value.indexOf(m);g!==-1&&l.value.splice(g,1)}};Ht(g1,d);let f=H({tabs:[],panels:[]}),p=H(!1);qe(()=>{p.value=!0}),Ht(Fp,L(()=>p.value?null:f.value));let h=L(()=>t.selectedIndex);return qe(()=>{je([h],()=>{var m;return c((m=t.selectedIndex)!=null?m:t.defaultIndex)},{immediate:!0})}),Pt(()=>{if(!a.value||u.value==null||d.tabs.value.length<=0)return;let m=hs(d.tabs.value,pe);m.some((g,v)=>pe(d.tabs.value[v])!==pe(g))&&d.setSelectedIndex(m.findIndex(g=>pe(g)===pe(d.tabs.value[u.value])))}),()=>{let m={selectedIndex:o.value};return Ue(Ye,[i.value.length<=0&&Ue(NI,{onFocus:()=>{for(let g of i.value){let v=pe(g);if(v?.tabIndex===0)return v.focus(),!0}return!1}}),gt({theirProps:{...n,...vi(t,["selectedIndex","defaultIndex","manual","vertical","onChange"])},ourProps:{},slot:m,slots:e,attrs:n,name:"TabGroup"})])}}}),LI=xe({name:"TabList",props:{as:{type:[Object,String],default:"div"}},setup(t,{attrs:e,slots:n}){let r=Bl("TabList");return()=>{let s={selectedIndex:r.selectedIndex.value},o={role:"tablist","aria-orientation":r.orientation.value};return gt({ourProps:o,theirProps:t,slot:s,attrs:e,slots:n,name:"TabList"})}}}),FI=xe({name:"Tab",props:{as:{type:[Object,String],default:"button"},disabled:{type:[Boolean],default:!1},id:{type:String,default:null}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-tabs-tab-${$n()}`,i=Bl("Tab"),l=H(null);r({el:l,$el:l}),qe(()=>i.registerTab(l)),zt(()=>i.unregisterTab(l));let a=tt(Fp),u=L(()=>{if(a.value){let y=a.value.tabs.indexOf(o);return y===-1?a.value.tabs.push(o)-1:y}return-1}),c=L(()=>{let y=i.tabs.value.indexOf(l);return y===-1?u.value:y}),d=L(()=>c.value===i.selectedIndex.value);function f(y){var b;let x=y();if(x===Ho.Success&&i.activation.value==="auto"){let k=(b=_r(l))==null?void 0:b.activeElement,S=i.tabs.value.findIndex(T=>pe(T)===k);S!==-1&&i.setSelectedIndex(S)}return x}function p(y){let b=i.tabs.value.map(x=>pe(x)).filter(Boolean);if(y.key===$e.Space||y.key===$e.Enter){y.preventDefault(),y.stopPropagation(),i.setSelectedIndex(c.value);return}switch(y.key){case $e.Home:case $e.PageUp:return y.preventDefault(),y.stopPropagation(),f(()=>er(b,Nt.First));case $e.End:case $e.PageDown:return y.preventDefault(),y.stopPropagation(),f(()=>er(b,Nt.Last))}if(f(()=>It(i.orientation.value,{vertical(){return y.key===$e.ArrowUp?er(b,Nt.Previous|Nt.WrapAround):y.key===$e.ArrowDown?er(b,Nt.Next|Nt.WrapAround):Ho.Error},horizontal(){return y.key===$e.ArrowLeft?er(b,Nt.Previous|Nt.WrapAround):y.key===$e.ArrowRight?er(b,Nt.Next|Nt.WrapAround):Ho.Error}}))===Ho.Success)return y.preventDefault()}let h=H(!1);function m(){var y;h.value||(h.value=!0,!t.disabled&&((y=pe(l))==null||y.focus({preventScroll:!0}),i.setSelectedIndex(c.value),oc(()=>{h.value=!1})))}function g(y){y.preventDefault()}let v=Pp(L(()=>({as:t.as,type:e.type})),l);return()=>{var y,b;let x={selected:d.value,disabled:(y=t.disabled)!=null?y:!1},{...k}=t,S={ref:l,onKeydown:p,onMousedown:g,onClick:m,id:o,role:"tab",type:v.value,"aria-controls":(b=pe(i.panels.value[c.value]))==null?void 0:b.id,"aria-selected":d.value,tabIndex:d.value?0:-1,disabled:t.disabled?!0:void 0};return gt({ourProps:S,theirProps:k,slot:x,attrs:e,slots:n,name:"Tab"})}}}),$I=xe({name:"TabPanels",props:{as:{type:[Object,String],default:"div"}},setup(t,{slots:e,attrs:n}){let r=Bl("TabPanels");return()=>{let s={selectedIndex:r.selectedIndex.value};return gt({theirProps:t,ourProps:{},slot:s,attrs:n,slots:e,name:"TabPanels"})}}}),Zc=xe({name:"TabPanel",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null},tabIndex:{type:Number,default:0}},setup(t,{attrs:e,slots:n,expose:r}){var s;let o=(s=t.id)!=null?s:`headlessui-tabs-panel-${$n()}`,i=Bl("TabPanel"),l=H(null);r({el:l,$el:l}),qe(()=>i.registerPanel(l)),zt(()=>i.unregisterPanel(l));let a=tt(Fp),u=L(()=>{if(a.value){let f=a.value.panels.indexOf(o);return f===-1?a.value.panels.push(o)-1:f}return-1}),c=L(()=>{let f=i.panels.value.indexOf(l);return f===-1?u.value:f}),d=L(()=>c.value===i.selectedIndex.value);return()=>{var f;let p={selected:d.value},{tabIndex:h,...m}=t,g={ref:l,id:o,role:"tabpanel","aria-labelledby":(f=pe(i.tabs.value[c.value]))==null?void 0:f.id,tabIndex:d.value?h:-1};return!d.value&&t.unmount&&!t.static?Ue(si,{as:"span","aria-hidden":!0,...g}):gt({ourProps:g,theirProps:m,slot:p,attrs:e,slots:n,features:Xn.Static|Xn.RenderStrategy,visible:d.value,name:"TabPanel"})}}});function BI(t){let e={called:!1};return(...n)=>{if(!e.called)return e.called=!0,t(...n)}}function ed(t,...e){t&&e.length>0&&t.classList.add(...e)}function ra(t,...e){t&&e.length>0&&t.classList.remove(...e)}var yf=(t=>(t.Finished="finished",t.Cancelled="cancelled",t))(yf||{});function VI(t,e){let n=Ps();if(!t)return n.dispose;let{transitionDuration:r,transitionDelay:s}=getComputedStyle(t),[o,i]=[r,s].map(l=>{let[a=0]=l.split(",").filter(Boolean).map(u=>u.includes("ms")?parseFloat(u):parseFloat(u)*1e3).sort((u,c)=>c-u);return a});return o!==0?n.setTimeout(()=>e("finished"),o+i):e("finished"),n.add(()=>e("cancelled")),n.dispose}function Vg(t,e,n,r,s,o){let i=Ps(),l=o!==void 0?BI(o):()=>{};return ra(t,...s),ed(t,...e,...n),i.nextFrame(()=>{ra(t,...n),ed(t,...r),i.add(VI(t,a=>(ra(t,...r,...e),ed(t,...s),l(a))))}),i.add(()=>ra(t,...e,...n,...r,...s)),i.add(()=>l("cancelled")),i.dispose}function Js(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let $p=Symbol("TransitionContext");var HI=(t=>(t.Visible="visible",t.Hidden="hidden",t))(HI||{});function jI(){return tt($p,null)!==null}function zI(){let t=tt($p,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}function WI(){let t=tt(Bp,null);if(t===null)throw new Error("A <TransitionChild /> is used but it is missing a parent <TransitionRoot />.");return t}let Bp=Symbol("NestingContext");function lc(t){return"children"in t?lc(t.children):t.value.filter(({state:e})=>e==="visible").length>0}function v1(t){let e=H([]),n=H(!1);qe(()=>n.value=!0),zt(()=>n.value=!1);function r(o,i=ys.Hidden){let l=e.value.findIndex(({id:a})=>a===o);l!==-1&&(It(i,{[ys.Unmount](){e.value.splice(l,1)},[ys.Hidden](){e.value[l].state="hidden"}}),!lc(e)&&n.value&&t?.())}function s(o){let i=e.value.find(({id:l})=>l===o);return i?i.state!=="visible"&&(i.state="visible"):e.value.push({id:o,state:"visible"}),()=>r(o,ys.Unmount)}return{children:e,register:s,unregister:r}}let y1=Xn.RenderStrategy,kl=xe({props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:n,slots:r,expose:s}){let o=H(0);function i(){o.value|=Tt.Opening,e("beforeEnter")}function l(){o.value&=~Tt.Opening,e("afterEnter")}function a(){o.value|=Tt.Closing,e("beforeLeave")}function u(){o.value&=~Tt.Closing,e("afterLeave")}if(!jI()&&BA())return()=>Ue(Vp,{...t,onBeforeEnter:i,onAfterEnter:l,onBeforeLeave:a,onAfterLeave:u},r);let c=H(null),d=L(()=>t.unmount?ys.Unmount:ys.Hidden);s({el:c,$el:c});let{show:f,appear:p}=zI(),{register:h,unregister:m}=WI(),g=H(f.value?"visible":"hidden"),v={value:!0},y=$n(),b={value:!1},x=v1(()=>{!b.value&&g.value!=="hidden"&&(g.value="hidden",m(y),u())});qe(()=>{let W=h(y);zt(W)}),Pt(()=>{if(d.value===ys.Hidden&&y){if(f.value&&g.value!=="visible"){g.value="visible";return}It(g.value,{hidden:()=>m(y),visible:()=>h(y)})}});let k=Js(t.enter),S=Js(t.enterFrom),T=Js(t.enterTo),A=Js(t.entered),M=Js(t.leave),P=Js(t.leaveFrom),z=Js(t.leaveTo);qe(()=>{Pt(()=>{if(g.value==="visible"){let W=pe(c);if(W instanceof Comment&&W.data==="")throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")}})});function D(W){let ie=v.value&&!p.value,ae=pe(c);!ae||!(ae instanceof HTMLElement)||ie||(b.value=!0,f.value&&i(),f.value||a(),W(f.value?Vg(ae,k,S,T,A,de=>{b.value=!1,de===yf.Finished&&l()}):Vg(ae,M,P,z,A,de=>{b.value=!1,de===yf.Finished&&(lc(x)||(g.value="hidden",m(y),u()))})))}return qe(()=>{je([f],(W,ie,ae)=>{D(ae),v.value=!1},{immediate:!0})}),Ht(Bp,x),Dp(L(()=>It(g.value,{visible:Tt.Open,hidden:Tt.Closed})|o.value)),()=>{let{appear:W,show:ie,enter:ae,enterFrom:de,enterTo:ve,entered:we,leave:Qe,leaveFrom:ut,leaveTo:ke,..._e}=t,te={ref:c},j={..._e,...p.value&&f.value&&Fl.isServer?{class:Pe([n.class,_e.class,...k,...S])}:{}};return gt({theirProps:j,ourProps:te,slot:{},slots:r,attrs:n,features:y1,visible:g.value==="visible",name:"TransitionChild"})}}}),UI=kl,Vp=xe({inheritAttrs:!1,props:{as:{type:[Object,String],default:"div"},show:{type:[Boolean],default:null},unmount:{type:[Boolean],default:!0},appear:{type:[Boolean],default:!1},enter:{type:[String],default:""},enterFrom:{type:[String],default:""},enterTo:{type:[String],default:""},entered:{type:[String],default:""},leave:{type:[String],default:""},leaveFrom:{type:[String],default:""},leaveTo:{type:[String],default:""}},emits:{beforeEnter:()=>!0,afterEnter:()=>!0,beforeLeave:()=>!0,afterLeave:()=>!0},setup(t,{emit:e,attrs:n,slots:r}){let s=$l(),o=L(()=>t.show===null&&s!==null?(s.value&Tt.Open)===Tt.Open:t.show);Pt(()=>{if(![!0,!1].includes(o.value))throw new Error('A <Transition /> is used but it is missing a `:show="true | false"` prop.')});let i=H(o.value?"visible":"hidden"),l=v1(()=>{i.value="hidden"}),a=H(!0),u={show:o,appear:L(()=>t.appear||!a.value)};return qe(()=>{Pt(()=>{a.value=!1,o.value?i.value="visible":lc(l)||(i.value="hidden")})}),Ht(Bp,l),Ht($p,u),()=>{let c=vi(t,["show","appear","unmount","onBeforeEnter","onBeforeLeave","onAfterEnter","onAfterLeave"]),d={unmount:t.unmount};return gt({ourProps:{...d,as:"template"},theirProps:{},slot:{},slots:{...r,default:()=>[Ue(UI,{onBeforeEnter:()=>e("beforeEnter"),onAfterEnter:()=>e("afterEnter"),onBeforeLeave:()=>e("beforeLeave"),onAfterLeave:()=>e("afterLeave"),...n,...d,...c},r.default)]},attrs:{},features:y1,visible:i.value==="visible",name:"Transition"})}}});const Hg=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),qI=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),KI=t=>{const e=qI(t);return e.charAt(0).toUpperCase()+e.slice(1)},GI=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),jg=t=>t==="";var Ai={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const YI=({name:t,iconNode:e,absoluteStrokeWidth:n,"absolute-stroke-width":r,strokeWidth:s,"stroke-width":o,size:i=Ai.width,color:l=Ai.stroke,...a},{slots:u})=>Ue("svg",{...Ai,...a,width:i,height:i,stroke:l,"stroke-width":jg(n)||jg(r)||n===!0||r===!0?Number(s||o||Ai["stroke-width"])*24/Number(i):s||o||Ai["stroke-width"],class:GI("lucide",a.class,...t?[`lucide-${Hg(KI(t))}-icon`,`lucide-${Hg(t)}`]:["lucide-icon"])},[...e.map(c=>Ue(...c)),...u.default?[u.default()]:[]]);const it=(t,e)=>(n,{slots:r,attrs:s})=>Ue(YI,{...s,...n,iconNode:e,name:t},r);const JI=it("bold",[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]]);const b1=it("book-open-check",[["path",{d:"M12 21V7",key:"gj6g52"}],["path",{d:"m16 12 2 2 4-4",key:"mdajum"}],["path",{d:"M22 6V4a1 1 0 0 0-1-1h-5a4 4 0 0 0-4 4 4 4 0 0 0-4-4H3a1 1 0 0 0-1 1v13a1 1 0 0 0 1 1h6a3 3 0 0 1 3 3 3 3 0 0 1 3-3h6a1 1 0 0 0 1-1v-1.3",key:"8arnkb"}]]);const XI=it("book-open",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const QI=it("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const ZI=it("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const zg=it("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const eO=it("chevrons-up-down",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const x1=it("circle-question-mark",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const tO=it("code",[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]]);const k1=it("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const Wg=it("folder-open",[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2",key:"usdka0"}]]);const nO=it("folder-root",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}],["path",{d:"M12 15v5",key:"11xva1"}]]);const Ua=it("folder",[["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]]);const ac=it("grip-vertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const rO=it("italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);const sO=it("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);const oO=it("list-ordered",[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]]);const iO=it("list",[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]]);const Hp=it("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);const lO=it("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const aO=it("quote",[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]]);const uO=it("redo-2",[["path",{d:"m15 14 5-5-5-5",key:"12vg1m"}],["path",{d:"M20 9H9.5A5.5 5.5 0 0 0 4 14.5A5.5 5.5 0 0 0 9.5 20H13",key:"6uklza"}]]);const Ug=it("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]);const cO=it("strikethrough",[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]]);const uc=it("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);const dO=it("underline",[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]]);const fO=it("undo-2",[["path",{d:"M9 14 4 9l5-5",key:"102s5s"}],["path",{d:"M4 9h10.5a5.5 5.5 0 0 1 5.5 5.5a5.5 5.5 0 0 1-5.5 5.5H11",key:"f3b9sd"}]]);const w1=it("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),pO={class:"rounded-full bg-blue-600 px-2 py-0.5 text-white"},hO={class:"px-1 py-1"},mO=["onClick"],gO={class:"mr-2"},vO=xe({__name:"LocalePicker",setup(t){const{locale:e}=Ot(),n=[{code:"en",label:"English",flag:""},{code:"ru",label:"",flag:""}],r=L(()=>e.value),s=L(()=>{const i=n.find(l=>l.code===r.value);return i?i.code.toUpperCase():"EN"}),o=i=>{i!==e.value&&(e.value=i)};return je(()=>e.value,i=>{typeof window<"u"&&window.localStorage.setItem("locale",i)},{immediate:!0}),(i,l)=>(J(),Ke(O(AI),{as:"div",class:"relative inline-block text-left"},{default:De(()=>[N("div",null,[se(O(II),{class:"inline-flex items-center gap-2 rounded-full border border-gray-300 bg-white px-3 py-1.5 text-xs font-medium text-gray-700 shadow-sm hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2"},{default:De(()=>[N("span",pO,re(s.value),1),se(O(ZI),{size:14,class:"text-gray-400","aria-hidden":"true"})]),_:1})]),se(yS,{"enter-active-class":"transition duration-100 ease-out","enter-from-class":"transform scale-95 opacity-0","enter-to-class":"transform scale-100 opacity-100","leave-active-class":"transition duration-75 ease-in","leave-from-class":"transform scale-100 opacity-100","leave-to-class":"transform scale-95 opacity-0"},{default:De(()=>[se(O(OI),{class:"absolute right-0 mt-2 w-32 origin-top-right divide-y divide-gray-100 rounded-md bg-white shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none z-50"},{default:De(()=>[N("div",hO,[(J(),le(Ye,null,Dn(n,a=>se(O(MI),{key:a.code},{default:De(({active:u})=>[N("button",{type:"button",class:Pe([u?"bg-blue-50 text-blue-900":"text-gray-900",a.code===r.value?"font-semibold":"font-normal","group flex w-full items-center rounded-md px-2 py-2 text-sm"]),onClick:c=>o(a.code)},[N("span",gO,re(a.flag),1),lr(" "+re(a.label)+" ",1),a.code===r.value?(J(),Ke(O(QI),{key:0,size:16,class:"ml-auto text-blue-600","aria-hidden":"true"})):Ve("",!0)],10,mO)]),_:2},1024)),64))])]),_:1})]),_:1})]),_:1}))}}),rt=1,me=()=>new Date().toISOString(),yO={trees:[{id:1,forestId:rt,parentId:null,position:0,path:"/1/",name:"Banking",type:"tree",createdAt:me(),updatedAt:me(),deletedAt:null},{id:2,forestId:rt,parentId:1,position:0,path:"/1/2/",name:"Accounts",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:3,forestId:rt,parentId:1,position:1,path:"/1/3/",name:"Credits",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:4,forestId:rt,parentId:1,position:2,path:"/1/4/",name:"Payments",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:5,forestId:rt,parentId:1,position:3,path:"/1/5/",name:"Risks",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:6,forestId:rt,parentId:2,position:0,path:"/1/2/6/",name:"Checking Accounts",type:"leaf",objectId:"course-checking-accounts-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:7,forestId:rt,parentId:2,position:1,path:"/1/2/7/",name:"Savings Accounts",type:"leaf",objectId:"course-savings-accounts-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:8,forestId:rt,parentId:3,position:0,path:"/1/3/8/",name:"Personal Loans",type:"leaf",objectId:"course-personal-loans-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:9,forestId:rt,parentId:3,position:1,path:"/1/3/9/",name:"Credit Cards",type:"leaf",objectId:"course-credit-cards-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:10,forestId:rt,parentId:4,position:0,path:"/1/4/10/",name:"Wire Transfers",type:"leaf",objectId:"course-wire-transfers-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:11,forestId:rt,parentId:5,position:0,path:"/1/5/11/",name:"Credit Risk",type:"leaf",objectId:"course-credit-risk-en",createdAt:me(),updatedAt:me(),deletedAt:null},{id:12,forestId:rt,parentId:5,position:1,path:"/1/5/12/",name:"AML / KYC",type:"leaf",objectId:"course-aml-kyc-en",createdAt:me(),updatedAt:me(),deletedAt:null}],courses:[{id:"course-checking-accounts-en",author:"Banking Academy",fullName:"Checking Accounts Fundamentals",description:"Learn the basics of checking accounts, including opening, managing, and understanding account features.",structure:[{id:"section-1-checking-en",name:"Introduction to Checking Accounts",steps:[{id:"slide-1-checking-en",type:"slide",name:"What is a Checking Account?",content:"<h2>What is a Checking Account?</h2><p>A checking account is a type of bank account that allows you to deposit and withdraw money easily. It's designed for frequent transactions and provides immediate access to your funds.</p><p><strong>Key Features:</strong></p><ul><li>Easy access to your money via checks, debit cards, or online transfers</li><li>No limit on the number of transactions</li><li>Typically earns little or no interest</li><li>May require a minimum balance</li></ul>"},{id:"question-1-checking-en",type:"question",name:"Checking Account Basics",slide:"<p>What is the primary purpose of a checking account?</p>",options:["Long-term savings with high interest","Easy access to funds for daily transactions","Investment in stocks and bonds","Retirement planning"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-checking-en",type:"slide",name:"Types of Checking Accounts",content:"<h2>Types of Checking Accounts</h2><p>Banks offer various types of checking accounts to meet different needs:</p><ul><li><strong>Basic Checking:</strong> Simple account with minimal fees, ideal for everyday use</li><li><strong>Interest-Bearing Checking:</strong> Earns interest but may require higher minimum balance</li><li><strong>Student Checking:</strong> Designed for students with lower fees and requirements</li><li><strong>Premium Checking:</strong> Offers additional benefits like waived fees and perks</li></ul>"},{id:"question-2-checking-en",type:"question",name:"Account Types",slide:"<p>Which checking account type is best suited for students?</p>",options:["Premium Checking","Interest-Bearing Checking","Student Checking","Basic Checking"],inputRule:{type:"single",correctOptions:[2]}}]},{id:"section-2-checking-en",name:"Opening and Managing Your Account",steps:[{id:"slide-3-checking-en",type:"slide",name:"How to Open a Checking Account",content:"<h2>How to Open a Checking Account</h2><p>Opening a checking account is straightforward. Here's what you need:</p><ol><li><strong>Choose a bank:</strong> Compare fees, features, and branch locations</li><li><strong>Gather required documents:</strong> Government-issued ID, Social Security number, proof of address</li><li><strong>Make initial deposit:</strong> Most banks require a minimum opening deposit</li><li><strong>Complete application:</strong> Fill out forms online or in person</li></ol><p>Once approved, you'll receive your account number, checks, and debit card.</p>"},{id:"question-3-checking-en",type:"question",name:"Required Documents",slide:"<p>Which documents are typically required to open a checking account? Select all that apply.</p>",options:["Government-issued ID","Social Security number","Proof of address","Employment contract"],inputRule:{type:"multiple",correctOptions:[0,1,2]}},{id:"slide-4-checking-en",type:"slide",name:"Managing Your Account",content:"<h2>Managing Your Checking Account</h2><p>Effective account management helps avoid fees and maintain good banking relationships:</p><ul><li><strong>Monitor your balance:</strong> Check regularly via mobile app or online banking</li><li><strong>Set up alerts:</strong> Get notified of low balances or large transactions</li><li><strong>Reconcile monthly:</strong> Match your records with bank statements</li><li><strong>Understand fees:</strong> Know your account's fee structure and how to avoid them</li><li><strong>Use direct deposit:</strong> Many banks waive fees with direct deposit</li></ul>"}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-savings-accounts-en",author:"Banking Academy",fullName:"Savings Accounts Guide",description:"Comprehensive guide to savings accounts, interest rates, and savings strategies.",structure:[{id:"section-1-savings-en",name:"Introduction to Savings Accounts",steps:[{id:"slide-1-savings-en",type:"slide",name:"What is a Savings Account?",content:"<h2>What is a Savings Account?</h2><p>A savings account is a deposit account held at a bank that earns interest on the money you deposit. Unlike checking accounts, savings accounts are designed for accumulating funds over time rather than frequent transactions.</p><p><strong>Key Features:</strong></p><ul><li>Earns interest on your balance</li><li>Limited number of withdrawals per month (typically 6)</li><li>Higher interest rates than checking accounts</li><li>Safe place to store money for future goals</li></ul>"},{id:"question-1-savings-en",type:"question",name:"Savings Account Basics",slide:"<p>What is the primary purpose of a savings account?</p>",options:["Frequent daily transactions","Accumulating funds and earning interest over time","Writing checks for payments","Investing in stocks"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-savings-en",type:"slide",name:"Types of Savings Accounts",content:"<h2>Types of Savings Accounts</h2><p>Banks offer various savings account options:</p><ul><li><strong>Traditional Savings:</strong> Basic account with standard interest rates</li><li><strong>High-Yield Savings:</strong> Higher interest rates, often online-only</li><li><strong>Money Market Accounts:</strong> Higher rates with check-writing privileges</li><li><strong>Certificate of Deposit (CD):</strong> Fixed term with guaranteed interest rate</li></ul>"},{id:"question-2-savings-en",type:"question",name:"Account Types",slide:"<p>Which savings account type typically offers the highest interest rates?</p>",options:["Traditional Savings","High-Yield Savings","Money Market Accounts","All offer the same rates"],inputRule:{type:"single",correctOptions:[1]}}]},{id:"section-2-savings-en",name:"Interest Rates and Growth",steps:[{id:"slide-3-savings-en",type:"slide",name:"Understanding Interest Rates",content:"<h2>Understanding Interest Rates</h2><p>Interest rates determine how much your savings will grow:</p><ul><li><strong>Annual Percentage Yield (APY):</strong> The actual rate you earn, including compound interest</li><li><strong>Compound Interest:</strong> Interest earned on both principal and previously earned interest</li><li><strong>Variable vs Fixed:</strong> Rates can change or remain fixed for a term</li><li><strong>Minimum Balance:</strong> Some accounts require minimum balance to earn interest</li></ul>"},{id:"question-3-savings-en",type:"question",name:"Interest Concepts",slide:"<p>What does APY (Annual Percentage Yield) represent? Select all that apply.</p>",options:["The actual rate you earn including compound interest","The simple interest rate only","The rate that determines your savings growth","A marketing term with no real meaning"],inputRule:{type:"multiple",correctOptions:[0,2]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-personal-loans-en",author:"Banking Academy",fullName:"Personal Loans Overview",description:"Understanding personal loans, application process, and repayment options.",structure:[{id:"section-1-loans-en",name:"Introduction to Personal Loans",steps:[{id:"slide-1-loans-en",type:"slide",name:"What is a Personal Loan?",content:"<h2>What is a Personal Loan?</h2><p>A personal loan is an unsecured loan that you can use for various purposes, such as debt consolidation, home improvements, medical expenses, or major purchases. Unlike secured loans, personal loans don't require collateral.</p><p><strong>Key Characteristics:</strong></p><ul><li><strong>Unsecured:</strong> No collateral required</li><li><strong>Fixed Interest Rate:</strong> Predictable monthly payments</li><li><strong>Fixed Term:</strong> Repayment period typically 1-7 years</li><li><strong>Lump Sum:</strong> Receive the full amount upfront</li></ul>"},{id:"question-1-loans-en",type:"question",name:"Personal Loan Basics",slide:"<p>What is a key characteristic of personal loans?</p>",options:["They require collateral","They are unsecured loans","They have variable interest rates only","They must be repaid in one payment"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-loans-en",type:"slide",name:"Types of Personal Loans",content:"<h2>Types of Personal Loans</h2><p>Different types of personal loans serve different needs:</p><ul><li><strong>Debt Consolidation Loans:</strong> Combine multiple debts into one payment</li><li><strong>Home Improvement Loans:</strong> Finance renovations and repairs</li><li><strong>Medical Loans:</strong> Cover unexpected medical expenses</li><li><strong>Wedding Loans:</strong> Finance wedding expenses</li><li><strong>Vacation Loans:</strong> Fund travel and vacations</li></ul>"}]},{id:"section-2-loans-en",name:"Application and Approval",steps:[{id:"slide-3-loans-en",type:"slide",name:"Loan Application Process",content:"<h2>Loan Application Process</h2><p>The personal loan application process typically involves:</p><ol><li><strong>Check Your Credit:</strong> Review your credit score and report</li><li><strong>Compare Lenders:</strong> Research rates, terms, and fees</li><li><strong>Gather Documents:</strong> Income proof, ID, bank statements</li><li><strong>Submit Application:</strong> Online or in-person application</li><li><strong>Review Offer:</strong> Compare loan terms and conditions</li><li><strong>Accept and Receive Funds:</strong> Funds typically deposited within 1-7 days</li></ol>"},{id:"question-2-loans-en",type:"question",name:"Application Steps",slide:"<p>What should you do first when applying for a personal loan?</p>",options:["Submit the application immediately","Check your credit score and report","Accept the first offer you receive","Skip comparing lenders"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-4-loans-en",type:"slide",name:"Factors Affecting Approval",content:"<h2>Factors Affecting Loan Approval</h2><p>Lenders evaluate several factors when considering your loan application:</p><ul><li><strong>Credit Score:</strong> Higher scores increase approval chances</li><li><strong>Income:</strong> Stable, sufficient income demonstrates repayment ability</li><li><strong>Debt-to-Income Ratio:</strong> Lower ratio shows better financial health</li><li><strong>Employment History:</strong> Stable employment history preferred</li><li><strong>Credit History:</strong> Past repayment behavior matters</li></ul>"},{id:"question-3-loans-en",type:"question",name:"Approval Factors",slide:"<p>Which factors affect personal loan approval? Select all that apply.</p>",options:["Credit score","Income level","Debt-to-income ratio","Hair color"],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]},{id:"section-3-loans-en",name:"Repayment and Management",steps:[{id:"slide-5-loans-en",type:"slide",name:"Repayment Options",content:"<h2>Repayment Options</h2><p>Understanding your repayment options helps manage your loan effectively:</p><ul><li><strong>Fixed Monthly Payments:</strong> Same amount each month for the loan term</li><li><strong>Early Repayment:</strong> Pay off loan early, but check for prepayment penalties</li><li><strong>Automatic Payments:</strong> Set up autopay to avoid missed payments</li><li><strong>Payment Extensions:</strong> Some lenders offer hardship programs</li><li><strong>Refinancing:</strong> Consider refinancing if rates drop significantly</li></ul>"},{id:"question-4-loans-en",type:"question",name:"Repayment",slide:"<p>What should you check before paying off a personal loan early?</p>",options:["Nothing, early repayment is always free","Prepayment penalties","Your credit score","Other loan offers"],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-credit-cards-en",author:"Banking Academy",fullName:"Credit Cards Essentials",description:"Master credit card features, benefits, and responsible usage.",structure:[{id:"section-1-cards-en",name:"Understanding Credit Cards",steps:[{id:"slide-1-cards-en",type:"slide",name:"What is a Credit Card?",content:"<h2>What is a Credit Card?</h2><p>A credit card is a payment card that allows you to borrow money from a financial institution to make purchases. Unlike a debit card, you're spending borrowed money that you must repay.</p><p><strong>Key Components:</strong></p><ul><li><strong>Credit Limit:</strong> Maximum amount you can borrow</li><li><strong>Annual Percentage Rate (APR):</strong> Interest rate charged on outstanding balances</li><li><strong>Minimum Payment:</strong> Smallest amount you must pay each month</li><li><strong>Grace Period:</strong> Time to pay without interest charges</li></ul>"},{id:"question-1-cards-en",type:"question",name:"Credit Card Basics",slide:"<p>What happens if you only pay the minimum payment each month?</p>",options:["You avoid all interest charges","You pay off the balance quickly","You accumulate interest on the remaining balance","Your credit limit increases automatically"],inputRule:{type:"single",correctOptions:[2]}},{id:"slide-2-cards-en",type:"slide",name:"Types of Credit Cards",content:"<h2>Types of Credit Cards</h2><p>Different credit cards serve different purposes:</p><ul><li><strong>Rewards Cards:</strong> Earn points, miles, or cash back on purchases</li><li><strong>Balance Transfer Cards:</strong> Low or 0% APR for transferring existing debt</li><li><strong>Secured Cards:</strong> Require a security deposit, good for building credit</li><li><strong>Business Cards:</strong> Designed for business expenses and tracking</li><li><strong>Student Cards:</strong> Lower credit limits, designed for students</li></ul>"}]},{id:"section-2-cards-en",name:"Using Credit Cards Wisely",steps:[{id:"slide-3-cards-en",type:"slide",name:"Building Good Credit",content:"<h2>Building Good Credit with Credit Cards</h2><p>Credit cards can help build your credit score when used responsibly:</p><ul><li><strong>Pay on time:</strong> Payment history is 35% of your credit score</li><li><strong>Keep balances low:</strong> Use less than 30% of your credit limit</li><li><strong>Don't close old accounts:</strong> Length of credit history matters</li><li><strong>Monitor your credit:</strong> Check reports regularly for errors</li></ul>"},{id:"question-2-cards-en",type:"question",name:"Credit Utilization",slide:"<p>What is the recommended credit utilization ratio for maintaining good credit?</p>",options:["Less than 30%","50-70%","80-100%","It doesn't matter"],inputRule:{type:"single",correctOptions:[0]}},{id:"slide-4-cards-en",type:"slide",name:"Avoiding Credit Card Debt",content:"<h2>Avoiding Credit Card Debt</h2><p>Prevent debt accumulation with these strategies:</p><ul><li><strong>Pay in full:</strong> Pay off the entire balance each month</li><li><strong>Set a budget:</strong> Only charge what you can afford to pay</li><li><strong>Track spending:</strong> Monitor purchases regularly</li><li><strong>Emergency use only:</strong> Reserve for true emergencies if needed</li><li><strong>Understand fees:</strong> Know late fees, over-limit fees, and annual fees</li></ul>"},{id:"question-3-cards-en",type:"question",name:"Debt Prevention",slide:"<p>Which strategies help avoid credit card debt? Select all that apply.</p>",options:["Pay only the minimum payment","Pay the full balance each month","Set a spending budget","Track your purchases regularly"],inputRule:{type:"multiple",correctOptions:[1,2,3]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-wire-transfers-en",author:"Banking Academy",fullName:"Wire Transfers and International Payments",description:"Learn about wire transfers, international payments, and transfer procedures.",structure:[{id:"section-1-wire-en",name:"Understanding Wire Transfers",steps:[{id:"slide-1-wire-en",type:"slide",name:"What is a Wire Transfer?",content:"<h2>What is a Wire Transfer?</h2><p>A wire transfer is an electronic transfer of funds from one bank account to another, either domestically or internationally. It's one of the fastest and most secure methods of sending money.</p><p><strong>Key Characteristics:</strong></p><ul><li>Electronic transfer via secure networks</li><li>Typically completed within 1-3 business days</li><li>Irreversible once completed</li><li>Requires recipient bank details</li><li>Fees apply for both domestic and international transfers</li></ul>"},{id:"question-1-wire-en",type:"question",name:"Wire Transfer Basics",slide:"<p>What is a key characteristic of wire transfers?</p>",options:["They are free of charge","They are typically irreversible once completed","They take weeks to process","They don't require recipient bank details"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-wire-en",type:"slide",name:"Types of Wire Transfers",content:"<h2>Types of Wire Transfers</h2><p>There are two main types of wire transfers:</p><ul><li><strong>Domestic Wire Transfers:</strong> Transfers within the same country, typically processed same day or next business day</li><li><strong>International Wire Transfers:</strong> Cross-border transfers using SWIFT network, may take 1-5 business days</li></ul><p>Both types require specific information including account numbers, routing numbers (domestic), or SWIFT codes (international).</p>"},{id:"question-2-wire-en",type:"question",name:"Transfer Types",slide:"<p>What information is typically required for international wire transfers? Select all that apply.</p>",options:["SWIFT code","Account number","Routing number only","Recipient name and address"],inputRule:{type:"multiple",correctOptions:[0,1,3]}}]},{id:"section-2-wire-en",name:"Transfer Procedures",steps:[{id:"slide-3-wire-en",type:"slide",name:"How to Initiate a Wire Transfer",content:"<h2>How to Initiate a Wire Transfer</h2><p>The process for initiating a wire transfer:</p><ol><li><strong>Gather Information:</strong> Collect recipient bank details, account number, and transfer amount</li><li><strong>Contact Your Bank:</strong> Visit branch, call, or use online banking</li><li><strong>Provide Details:</strong> Submit all required information and verify accuracy</li><li><strong>Pay Fees:</strong> Wire transfer fees are typically deducted from your account</li><li><strong>Confirm:</strong> Receive confirmation number for tracking</li></ol>"},{id:"question-3-wire-en",type:"question",name:"Transfer Process",slide:"<p>What should you do before initiating a wire transfer?</p>",options:["Skip verifying recipient details","Gather all required information including recipient bank details","Assume the bank will find the information","Send without confirmation"],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-credit-risk-en",author:"Banking Academy",fullName:"Credit Risk Management",description:"Fundamentals of credit risk assessment, analysis, and mitigation strategies.",structure:[{id:"section-1-risk-en",name:"Introduction to Credit Risk",steps:[{id:"slide-1-risk-en",type:"slide",name:"What is Credit Risk?",content:"<h2>What is Credit Risk?</h2><p>Credit risk is the possibility of loss resulting from a borrower's failure to repay a loan or meet contractual obligations. It's one of the most significant risks banks face.</p><p><strong>Types of Credit Risk:</strong></p><ul><li><strong>Default Risk:</strong> Borrower fails to make required payments</li><li><strong>Concentration Risk:</strong> Too much exposure to one borrower or sector</li><li><strong>Country Risk:</strong> Risk from lending to foreign entities</li><li><strong>Settlement Risk:</strong> Risk during transaction settlement</li></ul>"},{id:"question-1-risk-en",type:"question",name:"Credit Risk Types",slide:"<p>What type of credit risk occurs when a bank has too much exposure to a single borrower?</p>",options:["Default Risk","Concentration Risk","Country Risk","Settlement Risk"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-risk-en",type:"slide",name:"Credit Risk Assessment",content:"<h2>Credit Risk Assessment</h2><p>Banks use various methods to assess credit risk:</p><ul><li><strong>Credit Scoring:</strong> Statistical models to predict default probability</li><li><strong>Financial Analysis:</strong> Review of financial statements and ratios</li><li><strong>Collateral Evaluation:</strong> Assessment of pledged assets</li><li><strong>Credit History:</strong> Analysis of past repayment behavior</li><li><strong>Industry Analysis:</strong> Understanding sector-specific risks</li></ul>"}]},{id:"section-2-risk-en",name:"Risk Mitigation Strategies",steps:[{id:"slide-3-risk-en",type:"slide",name:"Diversification",content:"<h2>Diversification as Risk Mitigation</h2><p>Diversification spreads risk across different borrowers, sectors, and geographic regions:</p><ul><li><strong>Portfolio Diversification:</strong> Spread loans across various industries</li><li><strong>Geographic Diversification:</strong> Avoid concentration in one region</li><li><strong>Borrower Diversification:</strong> Limit exposure to individual borrowers</li><li><strong>Product Diversification:</strong> Mix of secured and unsecured loans</li></ul>"},{id:"question-2-risk-en",type:"question",name:"Diversification",slide:"<p>How does diversification help mitigate credit risk?</p>",options:["By concentrating loans in one profitable sector","By spreading risk across different borrowers and sectors","By lending only to high-risk borrowers","By avoiding all types of loans"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-4-risk-en",type:"slide",name:"Credit Risk Monitoring",content:"<h2>Credit Risk Monitoring</h2><p>Ongoing monitoring is essential for effective risk management:</p><ul><li><strong>Regular Reviews:</strong> Periodic assessment of borrower financial health</li><li><strong>Early Warning Systems:</strong> Indicators of potential default</li><li><strong>Stress Testing:</strong> Scenario analysis under adverse conditions</li><li><strong>Portfolio Analysis:</strong> Aggregate risk assessment</li><li><strong>Regulatory Compliance:</strong> Adherence to capital requirements</li></ul>"},{id:"question-3-risk-en",type:"question",name:"Monitoring Methods",slide:"<p>Which methods are used for credit risk monitoring? Select all that apply.</p>",options:["Regular borrower reviews","Early warning systems","Stress testing","Ignoring portfolio changes"],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-aml-kyc-en",author:"Banking Academy",fullName:"AML and KYC Compliance",description:"Anti-Money Laundering and Know Your Customer procedures and best practices.",structure:[{id:"section-1-aml-en",name:"Introduction to AML and KYC",steps:[{id:"slide-1-aml-en",type:"slide",name:"What is AML?",content:"<h2>What is Anti-Money Laundering (AML)?</h2><p>Anti-Money Laundering refers to laws, regulations, and procedures designed to prevent criminals from disguising illegally obtained funds as legitimate income. Banks must implement AML programs to detect and report suspicious activities.</p><p><strong>Key Objectives:</strong></p><ul><li>Detect suspicious transactions</li><li>Report to regulatory authorities</li><li>Maintain customer due diligence</li><li>Comply with financial regulations</li></ul>"},{id:"question-1-aml-en",type:"question",name:"AML Basics",slide:"<p>What is the primary purpose of AML regulations?</p>",options:["To increase bank profits","To prevent criminals from disguising illegal funds as legitimate","To reduce customer service","To simplify banking procedures"],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-aml-en",type:"slide",name:"What is KYC?",content:"<h2>What is Know Your Customer (KYC)?</h2><p>KYC is the process of verifying the identity of customers and assessing their suitability for banking services. It's a critical component of AML compliance.</p><p><strong>KYC Requirements:</strong></p><ul><li>Identity verification (government-issued ID)</li><li>Address verification</li><li>Understanding customer's business or occupation</li><li>Assessing risk profile</li><li>Ongoing monitoring of transactions</li></ul>"},{id:"question-2-aml-en",type:"question",name:"KYC Requirements",slide:"<p>What information is typically required for KYC? Select all that apply.</p>",options:["Government-issued ID","Address verification","Customer's business or occupation","Social media passwords"],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]},{id:"section-2-aml-en",name:"Compliance Procedures",steps:[{id:"slide-3-aml-en",type:"slide",name:"Suspicious Activity Reporting",content:"<h2>Suspicious Activity Reporting (SAR)</h2><p>Banks must file SARs when they detect potentially suspicious transactions:</p><ul><li><strong>Unusual Patterns:</strong> Transactions inconsistent with customer profile</li><li><strong>Large Cash Transactions:</strong> Above reporting thresholds</li><li><strong>Structuring:</strong> Breaking large transactions into smaller ones</li><li><strong>High-Risk Activities:</strong> Transactions with high-risk countries or entities</li></ul><p>SARs are confidential and filed with financial intelligence units.</p>"},{id:"question-3-aml-en",type:"question",name:"SAR Filing",slide:"<p>When should a bank file a Suspicious Activity Report?</p>",options:["Only for confirmed criminal activity","When detecting potentially suspicious transactions","Never, to protect customer privacy","Only for large transactions"],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null}]},bO={trees:[{id:1,forestId:rt,parentId:null,position:0,path:"/1/",name:" ",type:"tree",createdAt:me(),updatedAt:me(),deletedAt:null},{id:2,forestId:rt,parentId:1,position:0,path:"/1/2/",name:"",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:3,forestId:rt,parentId:1,position:1,path:"/1/3/",name:"",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:4,forestId:rt,parentId:1,position:2,path:"/1/4/",name:"",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:5,forestId:rt,parentId:1,position:3,path:"/1/5/",name:"",type:"branch",createdAt:me(),updatedAt:me(),deletedAt:null},{id:6,forestId:rt,parentId:2,position:0,path:"/1/2/6/",name:" ",type:"leaf",objectId:"course-checking-accounts-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:7,forestId:rt,parentId:2,position:1,path:"/1/2/7/",name:" ",type:"leaf",objectId:"course-savings-accounts-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:8,forestId:rt,parentId:3,position:0,path:"/1/3/8/",name:" ",type:"leaf",objectId:"course-personal-loans-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:9,forestId:rt,parentId:3,position:1,path:"/1/3/9/",name:" ",type:"leaf",objectId:"course-credit-cards-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:10,forestId:rt,parentId:4,position:0,path:"/1/4/10/",name:" ",type:"leaf",objectId:"course-wire-transfers-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:11,forestId:rt,parentId:5,position:0,path:"/1/5/11/",name:" ",type:"leaf",objectId:"course-credit-risk-ru",createdAt:me(),updatedAt:me(),deletedAt:null},{id:12,forestId:rt,parentId:5,position:1,path:"/1/5/12/",name:" / KYC",type:"leaf",objectId:"course-aml-kyc-ru",createdAt:me(),updatedAt:me(),deletedAt:null}],courses:[{id:"course-checking-accounts-ru",author:" ",fullName:"  ",description:"   ,  ,     .",structure:[{id:"section-1-checking-ru",name:"   ",steps:[{id:"slide-1-checking-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>      ,       .            .</p><p><strong> :</strong></p><ul><li>     ,    -</li><li>    </li><li>       </li><li>   </li></ul>"},{id:"question-1-checking-ru",type:"question",name:"  ",slide:"<p>    ?</p>",options:["    ","      ","    ","   "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-checking-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>         :</p><ul><li><strong>  :</strong>     ,    </li><li><strong>  :</strong>  ,       </li><li><strong> :</strong>         </li><li><strong> :</strong>   ,      </li></ul>"},{id:"question-2-checking-ru",type:"question",name:" ",slide:"<p>        ?</p>",options:[" ","  "," ","  "],inputRule:{type:"single",correctOptions:[2]}}]},{id:"section-2-checking-ru",name:"   ",steps:[{id:"slide-3-checking-ru",type:"slide",name:"   ",content:"<h2>   </h2><p>     .    :</p><ol><li><strong> :</strong>  ,    </li><li><strong>  :</strong>    ,  ,  </li><li><strong>  :</strong>      </li><li><strong> :</strong>     </li></ol><p>     ,    .</p>"},{id:"question-3-checking-ru",type:"question",name:" ",slide:"<p>       ?    .</p>",options:["   "," "," "," "],inputRule:{type:"multiple",correctOptions:[0,1,2]}},{id:"slide-4-checking-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>           :</p><ul><li><strong>  :</strong>       -</li><li><strong> :</strong>        </li><li><strong> :</strong>      </li><li><strong> :</strong>         </li><li><strong>  :</strong>       </li></ul>"}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-savings-accounts-ru",author:" ",fullName:"   ",description:"    ,     .",structure:[{id:"section-1-savings-ru",name:"   ",steps:[{id:"slide-1-savings-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>       ,       .     ,         ,     .</p><p><strong> :</strong></p><ul><li>    </li><li>     ( 6)</li><li>   ,    </li><li>       </li></ul>"},{id:"question-1-savings-ru",type:"question",name:"  ",slide:"<p>    ?</p>",options:["  ","       ","   ","  "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-savings-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>     :</p><ul><li><strong> :</strong>      </li><li><strong> :</strong>    ,   </li><li><strong> :</strong>       </li><li><strong>  ():</strong>      </li></ul>"},{id:"question-2-savings-ru",type:"question",name:" ",slide:"<p>         ?</p>",options:[" "," "," ","   "],inputRule:{type:"single",correctOptions:[1]}}]},{id:"section-2-savings-ru",name:"   ",steps:[{id:"slide-3-savings-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>  ,    :</p><ul><li><strong>   ():</strong>  ,   ,   </li><li><strong> :</strong> ,     ,      </li><li><strong> vs :</strong>        </li><li><strong> :</strong>        </li></ul>"},{id:"question-3-savings-ru",type:"question",name:" ",slide:"<p>   (  )?    .</p>",options:[" ,   ,   ","   ",",     ","    "],inputRule:{type:"multiple",correctOptions:[0,2]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-personal-loans-ru",author:" ",fullName:"  ",description:"  ,      .",structure:[{id:"section-1-loans-ru",name:"   ",steps:[{id:"slide-1-loans-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>     ,      ,    ,  ,     .     ,     .</p><p><strong> :</strong></p><ul><li><strong>:</strong>   </li><li><strong>  :</strong>   </li><li><strong> :</strong>    1-7 </li><li><strong> :</strong>    </li></ul>"},{id:"question-1-loans-ru",type:"question",name:"  ",slide:"<p>    ?</p>",options:["  ","   ","     ","     "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-loans-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>      :</p><ul><li><strong>   :</strong>      </li><li><strong>  :</strong>    </li><li><strong> :</strong>    </li><li><strong> :</strong>   </li><li><strong> :</strong>    </li></ul>"}]},{id:"section-2-loans-ru",name:"   ",steps:[{id:"slide-3-loans-ru",type:"slide",name:"    ",content:"<h2>    </h2><p>       :</p><ol><li><strong>  :</strong>      </li><li><strong> :</strong>  ,   </li><li><strong> :</strong>  ,  ,  </li><li><strong> :</strong>   </li><li><strong> :</strong>   </li><li><strong>   :</strong>      1-7 </li></ol>"},{id:"question-2-loans-ru",type:"question",name:"  ",slide:"<p>           ?</p>",options:["  ","     ","  ","  "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-4-loans-ru",type:"slide",name:",   ",content:"<h2>,    </h2><p>       :</p><ul><li><strong> :</strong>       </li><li><strong>:</strong> ,      </li><li><strong>   :</strong>       </li><li><strong> :</strong>    </li><li><strong> :</strong>     </li></ul>"},{id:"question-3-loans-ru",type:"question",name:" ",slide:"<p>      ?    .</p>",options:[" "," ","   "," "],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]},{id:"section-3-loans-ru",name:"  ",steps:[{id:"slide-5-loans-ru",type:"slide",name:" ",content:"<h2> </h2><p>       :</p><ul><li><strong>  :</strong>        </li><li><strong> :</strong>   ,      </li><li><strong> :</strong>  ,    </li><li><strong> :</strong>     </li><li><strong>:</strong>  ,    </li></ul>"},{id:"question-4-loans-ru",type:"question",name:"",slide:"<p>       ?</p>",options:[",    ","   ","  ","   "],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-credit-cards-ru",author:" ",fullName:"  ",description:"   ,    .",structure:[{id:"section-1-cards-ru",name:"  ",steps:[{id:"slide-1-cards-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>     ,           .     ,    ,   .</p><p><strong> :</strong></p><ul><li><strong> :</strong>  ,    </li><li><strong>   ():</strong>  ,    </li><li><strong> :</strong>  ,      </li><li><strong> :</strong>      </li></ul>"},{id:"question-1-cards-ru",type:"question",name:"  ",slide:"<p> ,        ?</p>",options:["    ","   ","     ","    "],inputRule:{type:"single",correctOptions:[2]}},{id:"slide-2-cards-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>     :</p><ul><li><strong>  :</strong>  ,     </li><li><strong>   :</strong>   0%     </li><li><strong> :</strong>  ,     </li><li><strong>-:</strong>   -  </li><li><strong> :</strong>    ,   </li></ul>"}]},{id:"section-2-cards-ru",name:"   ",steps:[{id:"slide-3-cards-ru",type:"slide",name:"   ",content:"<h2>       </h2><p>          :</p><ul><li><strong> :</strong>    35%   </li><li><strong>  :</strong>   30%   </li><li><strong>   :</strong>     </li><li><strong>  :</strong>     </li></ul>"},{id:"question-2-cards-ru",type:"question",name:" ",slide:"<p>         ?</p>",options:[" 30%","50-70%","80-100%","   "],inputRule:{type:"single",correctOptions:[0]}},{id:"slide-4-cards-ru",type:"slide",name:"    ",content:"<h2>    </h2><p>      :</p><ul><li><strong> :</strong>     </li><li><strong> :</strong>   ,     </li><li><strong> :</strong>   </li><li><strong>   :</strong>       </li><li><strong> :</strong>    ,     </li></ul>"},{id:"question-3-cards-ru",type:"question",name:" ",slide:"<p>       ?    .</p>",options:["   ","    ","  ","  "],inputRule:{type:"multiple",correctOptions:[1,2,3]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-wire-transfers-ru",author:" ",fullName:"    ",description:"   ,     .",structure:[{id:"section-1-wire-ru",name:"  ",steps:[{id:"slide-1-wire-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>            ,    .          .</p><p><strong> :</strong></p><ul><li>    </li><li>    1-3  </li><li>  </li><li>   </li><li>    ,     </li></ul>"},{id:"question-1-wire-ru",type:"question",name:"  ",slide:"<p>    ?</p>",options:[" ","    ","  ","     "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-wire-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>     :</p><ul><li><strong>  :</strong>     ,           </li><li><strong>  :</strong>      SWIFT,   1-5  </li></ul><p>    ,   ,   ()   SWIFT ().</p>"},{id:"question-2-wire-ru",type:"question",name:" ",slide:"<p>       ?    .</p>",options:[" SWIFT"," ","  ","   "],inputRule:{type:"multiple",correctOptions:[0,1,3]}}]},{id:"section-2-wire-ru",name:" ",steps:[{id:"slide-3-wire-ru",type:"slide",name:"   ",content:"<h2>   </h2><p>   :</p><ol><li><strong> :</strong>    ,     </li><li><strong>   :</strong>  ,    -</li><li><strong> :</strong>       </li><li><strong> :</strong>         </li><li><strong>:</strong>     </li></ol>"},{id:"question-3-wire-ru",type:"question",name:" ",slide:"<p>      ?</p>",options:["   ","   ,    ",",    ","  "],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-credit-risk-ru",author:" ",fullName:"  ",description:"   ,     .",structure:[{id:"section-1-risk-ru",name:"   ",steps:[{id:"slide-1-risk-ru",type:"slide",name:"   ?",content:"<h2>   ?</h2><p>               .      ,    .</p><p><strong>  :</strong></p><ul><li><strong> :</strong>     </li><li><strong> :</strong>       </li><li><strong> :</strong>     </li><li><strong> :</strong>      </li></ul>"},{id:"question-1-risk-ru",type:"question",name:"  ",slide:"<p>    ,        ?</p>",options:[" "," "," "," "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-risk-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>       :</p><ul><li><strong> :</strong>      </li><li><strong> :</strong>     </li><li><strong> :</strong>   </li><li><strong> :</strong>     </li><li><strong> :</strong>   </li></ul>"}]},{id:"section-2-risk-ru",name:"  ",steps:[{id:"slide-3-risk-ru",type:"slide",name:"",content:"<h2>   </h2><p>     ,    :</p><ul><li><strong> :</strong>     </li><li><strong> :</strong>     </li><li><strong> :</strong>    </li><li><strong> :</strong>     </li></ul>"},{id:"question-2-risk-ru",type:"question",name:"",slide:"<p>     ?</p>",options:["     ","      ","   ","   "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-4-risk-ru",type:"slide",name:"  ",content:"<h2>  </h2><p>      :</p><ul><li><strong> :</strong>     </li><li><strong>  :</strong>   </li><li><strong>-:</strong>     </li><li><strong> :</strong>   </li><li><strong>  :</strong>    </li></ul>"},{id:"question-3-risk-ru",type:"question",name:" ",slide:"<p>      ?    .</p>",options:["  ","  ","-","  "],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null},{id:"course-aml-kyc-ru",author:" ",fullName:"    KYC",description:"      ,    .",structure:[{id:"section-1-aml-ru",name:"    KYC",steps:[{id:"slide-1-aml-ru",type:"slide",name:"  ?",content:"<h2>     ()?</h2><p>     ,    ,    ,         .            .</p><p><strong> :</strong></p><ul><li>  </li><li>   </li><li>     </li><li>  </li></ul>"},{id:"question-1-aml-ru",type:"question",name:" ",slide:"<p>    ?</p>",options:["  ","      ","   ","  "],inputRule:{type:"single",correctOptions:[1]}},{id:"slide-2-aml-ru",type:"slide",name:"  KYC?",content:"<h2>    (KYC)?</h2><p>KYC             .      .</p><p><strong> KYC:</strong></p><ul><li>  (   )</li><li> </li><li>    </li><li>  </li><li>  </li></ul>"},{id:"question-2-aml-ru",type:"question",name:" KYC",slide:"<p>     KYC?    .</p>",options:["   "," ","   ","   "],inputRule:{type:"multiple",correctOptions:[0,1,2]}}]},{id:"section-2-aml-ru",name:" ",steps:[{id:"slide-3-aml-ru",type:"slide",name:"   ",content:"<h2>    ()</h2><p>   ,     :</p><ul><li><strong> :</strong> ,    </li><li><strong>  :</strong>    </li><li><strong>:</strong>      </li><li><strong> :</strong>       </li></ul><p>        .</p>"},{id:"question-3-aml-ru",type:"question",name:" ",slide:"<p>       ?</p>",options:["    ","    ",",    ","   "],inputRule:{type:"single",correctOptions:[1]}}]}],createdAt:me(),updatedAt:me(),deletedAt:null}]};function E1(t){return t==="ru"?bO:yO}function bf(t){return E1(t).trees}function xO(t){return E1(t).courses}function xf(){if(typeof window>"u")return"en";const t=window.localStorage.getItem("locale");return t==="ru"||t==="en"?t:window.navigator.language?.split("-")[0]?.toLowerCase()==="ru"?"ru":"en"}async function jp(){await new Promise(t=>setTimeout(t,100));try{const t=localStorage.getItem("tree");if(t)return JSON.parse(t);const e=xf();return bf(e)}catch(t){console.error(t);const e=xf();return bf(e)}}async function zp(t){await new Promise(e=>setTimeout(e,100)),console.log("saveAllTrees",t);try{localStorage.setItem("tree",JSON.stringify(t))}catch(e){console.error(e)}}async function kO(t){try{const e=t??xf(),n=bf(e);await zp(n)}catch(e){console.error(e)}}function S1(t){return t.replace(/\/+/g,"/").replace(/^\/\//,"/")}async function wn(t){const e=await jp(),n=e.filter(s=>s.forestId===t);if(n.some(s=>s.path.includes("//"))){const s=new Map,o=n.map(a=>{const u=S1(a.path);return s.set(a.id,u),{...a,path:u}}),i=o.map(a=>{const u=o.find(c=>c.id===a.parentId);if(u&&a.path.startsWith(u.path))return a;if(a.parentId!=null){const c=s.get(a.parentId);if(c){const d=a.path.split("/").filter(Boolean).pop();return{...a,path:`${c}${d}/`}}}return a}),l=e.filter(a=>a.forestId!==t);return await zp([...l,...i]),i}return n}async function Vl(t,e){const n=wO(e),o=[...(await jp()).filter(i=>i.forestId!==t),...n];await zp(o)}function Wp(t,e){const n=t.type!=="leaf",r=e.type!=="leaf";return n!==r?n?-1:1:t.position!==e.position?t.position-e.position:t.id-e.id}function wO(t){const e=Array.from(new Set(t.map(r=>r.parentId??null))),n=new Map;return e.forEach(r=>{t.filter(o=>o.deletedAt===null).filter(o=>(o.parentId??null)===r).sort(Wp).forEach((o,i)=>{n.set(o.id,i)})}),t.map(r=>{if(r.deletedAt!==null)return r;const s=n.get(r.id);return s&&s!==r.position?{...r,position:s}:r})}async function EO(){return(await jp()).reduce((e,n)=>Math.max(e,n.id),0)+1}async function C1(t,e,n){const r=await wn(t),s=await EO(),o=r.filter(f=>f.parentId===e).filter(f=>f.deletedAt===null),l=(o.length===0?-1:o.reduce((f,p)=>Math.max(f,p.position),-1))+1,a=r.find(f=>f.id===e),u=a?S1(a.path):"",c=u?`${u}${s}/`:`/${s}/`,d={...n,id:s,forestId:t,parentId:e,position:l,path:c,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),deletedAt:null};r.push(d),await Vl(t,r)}async function SO(t,e){const n=await wn(t),r=n.find(o=>o.id===e);if(!r)throw new Error("Node not found");const s=n.map(o=>o.id===e?{...o,deletedAt:new Date().toISOString()}:o.path.startsWith(r.path)?{...o,deletedAt:new Date().toISOString()}:o.parentId===r.parentId&&o.position>r.position?{...o,position:o.position-1}:o);await Vl(t,s)}async function Sa(t,e,n,r){const s=await wn(t),o=s.find(x=>x.id===e&&x.deletedAt===null);if(!o)throw new Error("Node not found");if(o.parentId===n&&r===o.position)return;if(n===e)throw new Error("Cannot move a node into itself");const i=x=>x.path.startsWith(`${o.path}`);if(n!==null){const x=s.find(k=>k.id===n&&k.deletedAt===null);if(!x)throw new Error("New parent not found");if(i(x))throw new Error("Cannot move a node into its own descendant")}const l=o.parentId??null,a=o.path,u=new Date().toISOString(),c=n===null?null:s.find(x=>x.id===n&&x.deletedAt===null)??null,d=s.filter(x=>x.deletedAt===null).filter(x=>x.parentId===n),f=d.length===0?-1:d.reduce((x,k)=>Math.max(x,k.position),-1),p=Math.max(0,Math.min(r,f+1)),h=c?`${c.path}${o.id}/`:`/${o.id}/`,m=o.parentId!==n,v=(m?s.map(x=>x.deletedAt!==null?x:x.parentId===l&&x.position>o.position&&x.id!==o.id?{...x,position:x.position-1,updatedAt:u}:x):s).map(x=>{if(x.deletedAt!==null)return x;if(x.parentId===n){const k=x.id===o.id;if(m){if(x.position>=p&&!k)return{...x,position:x.position+1,updatedAt:u}}else if(!k){if(o.position<p&&x.position<=p&&x.position>o.position)return{...x,position:x.position-1,updatedAt:u};if(o.position>p&&x.position>=p&&x.position<o.position)return{...x,position:x.position+1,updatedAt:u}}}return x}),y=v.filter(x=>x.deletedAt===null&&x.path.startsWith(a)).map(x=>x.id),b=v.map(x=>{if(x.id===o.id)return{...x,parentId:n,position:p,path:h,updatedAt:u};if(y.includes(x.id)){const k=x.path.slice(a.length);return{...x,path:`${h}${k}`,updatedAt:u}}return x});await Vl(t,b)}async function _1(t,e,n,r){const s=await wn(t),o=s.find(u=>u.id===e&&u.deletedAt===null);if(!o)throw new Error("Node not found");const i=n!==o.name,l=(o.parentId??null)!==r;if(!i&&!l)return;const a=new Date().toISOString();if(l){const u=s.filter(f=>f.deletedAt===null).filter(f=>f.parentId===r),d=(u.length===0?-1:u.reduce((f,p)=>Math.max(f,p.position),-1))+1;await Sa(t,e,r,d)}if(i){const c=(await wn(t)).map(d=>d.id===e?{...d,name:n,updatedAt:a}:d);await Vl(t,c)}}async function qg(t,e,n){const r=await wn(t),s=new Date().toISOString(),o=r.map(i=>i.id===e?{...i,objectId:n,updatedAt:s}:i);await Vl(t,o)}const T1="courses",wl=()=>new Date().toISOString(),CO=()=>{if(typeof crypto<"u"&&"randomUUID"in crypto)return crypto.randomUUID();const t=()=>Math.floor((1+Math.random())*65536).toString(16).slice(1);return`${t()}${t()}-${t()}-${t()}-${t()}-${t()}${t()}${t()}`};function cc(){try{const t=localStorage.getItem(T1);return t?JSON.parse(t):[]}catch{return[]}}async function dc(t){await new Promise(e=>setTimeout(e,100));try{localStorage.setItem(T1,JSON.stringify(t))}catch{}}function _O(){if(typeof window>"u")return"en";const t=window.localStorage.getItem("locale");return t==="ru"||t==="en"?t:window.navigator.language?.split("-")[0]?.toLowerCase()==="ru"?"ru":"en"}async function TO(t){try{const e=t??_O(),n=xO(e);await dc(n)}catch{}}function Up(t){return cc().find(e=>e.id===t)??null}async function Kg(t){const e={id:CO(),author:t.author,fullName:t.fullName,description:t.description,structure:t.structure??[],createdAt:wl(),updatedAt:wl(),deletedAt:null},n=cc();return await dc([...n,e]),e}async function Gg(t,e){const r=cc().map(s=>s.id===t?{...s,...e,updatedAt:wl()}:s);await dc(r)}async function AO(t){const n=cc().map(r=>r.id===t?{...r,deletedAt:wl(),updatedAt:wl()}:r);await dc(n)}const IO={class:"min-h-screen bg-gray-50"},OO=xe({__name:"App",setup(t){const{t:e,locale:n}=Ot(),r=mi(),s=async()=>{if(!window.confirm(e("mainPage.resetConfirm")))return;const i=n.value;await kO(i),await TO(i),r.push({path:"/"})};return(o,i)=>{const l=Cb("RouterView");return J(),le("div",IO,[se(uA,null,{start:De(()=>[N("button",{type:"button",class:"flex items-center gap-2 hover:opacity-80 transition-opacity cursor-pointer",onClick:i[0]||(i[0]=a=>O(r).push({path:"/"}))},[se(O(XI),{size:20,class:"text-blue-600"}),i[1]||(i[1]=N("h1",{class:"text-lg font-semibold text-gray-900"},"Tree UX",-1))])]),end:De(()=>[N("button",{type:"button",class:"rounded border border-gray-200 px-2 py-1 text-xs text-gray-700 hover:bg-gray-50",onClick:s},re(O(e)("mainPage.resetTree")),1),se(vO)]),_:1}),se(cA,{class:"py-6"},{default:De(()=>[se(l)]),_:1})])}}}),MO={class:"flex items-center gap-1 text-sm",role:"navigation","aria-label":"Breadcrumb"},NO={class:"flex items-center gap-1"},RO={class:"flex items-center gap-1"},PO={class:"rounded px-1 py-0.5 hover:bg-gray-50 data-[drag-over=true]:bg-gray-100"},DO={class:"text-sm text-gray-700"},LO={key:0,class:"text-gray-400"},FO=["onDragover","onDragleave","onDrop","data-drag-over"],$O={class:"truncate max-w-40 inline-block align-middle"},BO={key:0,class:"text-gray-400"},VO=xe({__name:"GeneralTreeBreadcrumb",props:{items:{},onRootClick:{type:Function},onBreadcrumbDrop:{type:Function},getChildrenCount:{type:Function}},setup(t){const e=t,{t:n}=Ot(),r=H(null),s=l=>{r.value=l},o=l=>{r.value===l&&(r.value=null)},i=l=>{const a=e.getChildrenCount(l.id);e.onBreadcrumbDrop({newParentId:l.id,newPosition:a}),r.value=null};return(l,a)=>(J(),le("nav",MO,[N("ol",NO,[N("li",RO,[N("div",PO,[N("button",{type:"button",class:"inline-flex items-center gap-1 align-middle rounded px-0.5 cursor-pointer hover:bg-gray-50","aria-label":"Root",onClick:a[0]||(a[0]=(...u)=>t.onRootClick&&t.onRootClick(...u))},[se(O(nO),{size:16,class:"text-gray-500","aria-hidden":"true"}),N("span",DO,re(O(n)("common.root")),1)])]),t.items.length>0?(J(),le("span",LO,"/")):Ve("",!0)]),(J(!0),le(Ye,null,Dn(t.items,(u,c)=>(J(),le("li",{key:u.id,class:"flex items-center gap-1"},[N("div",{class:"rounded px-1 py-0 hover:bg-gray-50 data-[drag-over=true]:bg-gray-100 cursor-default",onDragover:Bt(d=>s(c),["prevent"]),onDragleave:d=>o(c),onDrop:Bt(d=>i(u),["prevent"]),"data-drag-over":r.value===c?"true":"false"},[Yr(l.$slots,"item",{item:u,index:c},()=>[N("span",$O,re(u.name),1)])],40,FO),c<t.items.length-1?(J(),le("span",BO,"/")):Ve("",!0)]))),128))])]))}}),A1=xe({__name:"TreeBreadcrumb",props:{forestId:{},path:{}},emits:["breadcrumb-drop","root-click"],setup(t,{emit:e}){const n=t,r=e,s=H([]),o=async()=>{s.value=await wn(n.forestId)};qe(()=>{o()}),je(()=>[n.forestId,n.path],()=>{o()});const i=L(()=>{const c=n.path.split("/").filter(Boolean).map(p=>Number(p)).filter(p=>Number.isFinite(p)),d=s.value.filter(p=>p.deletedAt===null),f=new Map(d.map(p=>[p.id,p]));return c.map(p=>f.get(p)).filter(p=>!!p)}),l=c=>s.value.filter(d=>d.deletedAt===null).filter(d=>(d.parentId??null)===c).length,a=()=>{r("root-click")},u=c=>{r("breadcrumb-drop",c)};return(c,d)=>(J(),Ke(VO,{items:i.value,"on-root-click":a,"on-breadcrumb-drop":u,"get-children-count":l},{item:De(({item:f,index:p})=>[Yr(c.$slots,"item",{item:f,index:p})]),_:3},8,["items"]))}});function HO(){return typeof window<"u"?window.console:global.console}const jO=HO();function zO(t){const e=Object.create(null);return function(r){return e[r]||(e[r]=t(r))}}const WO=/-(\w)/g,Yg=zO(t=>t.replace(WO,(e,n)=>n?n.toUpperCase():""));function td(t){t.parentElement!==null&&t.parentElement.removeChild(t)}function Jg(t,e,n){const r=n===0?t.children[0]:t.children[n-1].nextSibling;t.insertBefore(e,r)}function Xg(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(t,s).enumerable})),n.push.apply(n,r)}return n}function Er(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xg(Object(n),!0).forEach(function(r){UO(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xg(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ca(t){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ca=function(e){return typeof e}:Ca=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ca(t)}function UO(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Jr(){return Jr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Jr.apply(this,arguments)}function qO(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,o;for(o=0;o<r.length;o++)s=r[o],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function KO(t,e){if(t==null)return{};var n=qO(t,e),r,s;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);for(s=0;s<o.length;s++)r=o[s],!(e.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(t,r)&&(n[r]=t[r])}return n}var GO="1.14.0";function Wr(t){if(typeof window<"u"&&window.navigator)return!!navigator.userAgent.match(t)}var Zr=Wr(/(?:Trident.*rv[ :]?11\.|msie|iemobile|Windows Phone)/i),Hl=Wr(/Edge/i),Qg=Wr(/firefox/i),Gi=Wr(/safari/i)&&!Wr(/chrome/i)&&!Wr(/android/i),I1=Wr(/iP(ad|od|hone)/i),YO=Wr(/chrome/i)&&Wr(/android/i),O1={capture:!1,passive:!1};function Xe(t,e,n){t.addEventListener(e,n,!Zr&&O1)}function Ge(t,e,n){t.removeEventListener(e,n,!Zr&&O1)}function qa(t,e){if(e){if(e[0]===">"&&(e=e.substring(1)),t)try{if(t.matches)return t.matches(e);if(t.msMatchesSelector)return t.msMatchesSelector(e);if(t.webkitMatchesSelector)return t.webkitMatchesSelector(e)}catch{return!1}return!1}}function JO(t){return t.host&&t!==document&&t.host.nodeType?t.host:t.parentNode}function gr(t,e,n,r){if(t){n=n||document;do{if(e!=null&&(e[0]===">"?t.parentNode===n&&qa(t,e):qa(t,e))||r&&t===n)return t;if(t===n)break}while(t=JO(t))}return null}var Zg=/\s+/g;function Mn(t,e,n){if(t&&e)if(t.classList)t.classList[n?"add":"remove"](e);else{var r=(" "+t.className+" ").replace(Zg," ").replace(" "+e+" "," ");t.className=(r+(n?" "+e:"")).replace(Zg," ")}}function Ae(t,e,n){var r=t&&t.style;if(r){if(n===void 0)return document.defaultView&&document.defaultView.getComputedStyle?n=document.defaultView.getComputedStyle(t,""):t.currentStyle&&(n=t.currentStyle),e===void 0?n:n[e];!(e in r)&&e.indexOf("webkit")===-1&&(e="-webkit-"+e),r[e]=n+(typeof n=="string"?"":"px")}}function Jo(t,e){var n="";if(typeof t=="string")n=t;else do{var r=Ae(t,"transform");r&&r!=="none"&&(n=r+" "+n)}while(!e&&(t=t.parentNode));var s=window.DOMMatrix||window.WebKitCSSMatrix||window.CSSMatrix||window.MSCSSMatrix;return s&&new s(n)}function M1(t,e,n){if(t){var r=t.getElementsByTagName(e),s=0,o=r.length;if(n)for(;s<o;s++)n(r[s],s);return r}return[]}function kr(){var t=document.scrollingElement;return t||document.documentElement}function Vt(t,e,n,r,s){if(!(!t.getBoundingClientRect&&t!==window)){var o,i,l,a,u,c,d;if(t!==window&&t.parentNode&&t!==kr()?(o=t.getBoundingClientRect(),i=o.top,l=o.left,a=o.bottom,u=o.right,c=o.height,d=o.width):(i=0,l=0,a=window.innerHeight,u=window.innerWidth,c=window.innerHeight,d=window.innerWidth),(e||n)&&t!==window&&(s=s||t.parentNode,!Zr))do if(s&&s.getBoundingClientRect&&(Ae(s,"transform")!=="none"||n&&Ae(s,"position")!=="static")){var f=s.getBoundingClientRect();i-=f.top+parseInt(Ae(s,"border-top-width")),l-=f.left+parseInt(Ae(s,"border-left-width")),a=i+o.height,u=l+o.width;break}while(s=s.parentNode);if(r&&t!==window){var p=Jo(s||t),h=p&&p.a,m=p&&p.d;p&&(i/=m,l/=h,d/=h,c/=m,a=i+c,u=l+d)}return{top:i,left:l,bottom:a,right:u,width:d,height:c}}}function ev(t,e,n){for(var r=bs(t,!0),s=Vt(t)[e];r;){var o=Vt(r)[n],i=void 0;if(i=s>=o,!i)return r;if(r===kr())break;r=bs(r,!1)}return!1}function oi(t,e,n,r){for(var s=0,o=0,i=t.children;o<i.length;){if(i[o].style.display!=="none"&&i[o]!==Ie.ghost&&(r||i[o]!==Ie.dragged)&&gr(i[o],n.draggable,t,!1)){if(s===e)return i[o];s++}o++}return null}function qp(t,e){for(var n=t.lastElementChild;n&&(n===Ie.ghost||Ae(n,"display")==="none"||e&&!qa(n,e));)n=n.previousElementSibling;return n||null}function zn(t,e){var n=0;if(!t||!t.parentNode)return-1;for(;t=t.previousElementSibling;)t.nodeName.toUpperCase()!=="TEMPLATE"&&t!==Ie.clone&&(!e||qa(t,e))&&n++;return n}function tv(t){var e=0,n=0,r=kr();if(t)do{var s=Jo(t),o=s.a,i=s.d;e+=t.scrollLeft*o,n+=t.scrollTop*i}while(t!==r&&(t=t.parentNode));return[e,n]}function XO(t,e){for(var n in t)if(t.hasOwnProperty(n)){for(var r in e)if(e.hasOwnProperty(r)&&e[r]===t[n][r])return Number(n)}return-1}function bs(t,e){if(!t||!t.getBoundingClientRect)return kr();var n=t,r=!1;do if(n.clientWidth<n.scrollWidth||n.clientHeight<n.scrollHeight){var s=Ae(n);if(n.clientWidth<n.scrollWidth&&(s.overflowX=="auto"||s.overflowX=="scroll")||n.clientHeight<n.scrollHeight&&(s.overflowY=="auto"||s.overflowY=="scroll")){if(!n.getBoundingClientRect||n===document.body)return kr();if(r||e)return n;r=!0}}while(n=n.parentNode);return kr()}function QO(t,e){if(t&&e)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function nd(t,e){return Math.round(t.top)===Math.round(e.top)&&Math.round(t.left)===Math.round(e.left)&&Math.round(t.height)===Math.round(e.height)&&Math.round(t.width)===Math.round(e.width)}var Yi;function N1(t,e){return function(){if(!Yi){var n=arguments,r=this;n.length===1?t.call(r,n[0]):t.apply(r,n),Yi=setTimeout(function(){Yi=void 0},e)}}}function ZO(){clearTimeout(Yi),Yi=void 0}function R1(t,e,n){t.scrollLeft+=e,t.scrollTop+=n}function P1(t){var e=window.Polymer,n=window.jQuery||window.Zepto;return e&&e.dom?e.dom(t).cloneNode(!0):n?n(t).clone(!0)[0]:t.cloneNode(!0)}var Rn="Sortable"+new Date().getTime();function eM(){var t=[],e;return{captureAnimationState:function(){if(t=[],!!this.options.animation){var r=[].slice.call(this.el.children);r.forEach(function(s){if(!(Ae(s,"display")==="none"||s===Ie.ghost)){t.push({target:s,rect:Vt(s)});var o=Er({},t[t.length-1].rect);if(s.thisAnimationDuration){var i=Jo(s,!0);i&&(o.top-=i.f,o.left-=i.e)}s.fromRect=o}})}},addAnimationState:function(r){t.push(r)},removeAnimationState:function(r){t.splice(XO(t,{target:r}),1)},animateAll:function(r){var s=this;if(!this.options.animation){clearTimeout(e),typeof r=="function"&&r();return}var o=!1,i=0;t.forEach(function(l){var a=0,u=l.target,c=u.fromRect,d=Vt(u),f=u.prevFromRect,p=u.prevToRect,h=l.rect,m=Jo(u,!0);m&&(d.top-=m.f,d.left-=m.e),u.toRect=d,u.thisAnimationDuration&&nd(f,d)&&!nd(c,d)&&(h.top-d.top)/(h.left-d.left)===(c.top-d.top)/(c.left-d.left)&&(a=nM(h,f,p,s.options)),nd(d,c)||(u.prevFromRect=c,u.prevToRect=d,a||(a=s.options.animation),s.animate(u,h,d,a)),a&&(o=!0,i=Math.max(i,a),clearTimeout(u.animationResetTimer),u.animationResetTimer=setTimeout(function(){u.animationTime=0,u.prevFromRect=null,u.fromRect=null,u.prevToRect=null,u.thisAnimationDuration=null},a),u.thisAnimationDuration=a)}),clearTimeout(e),o?e=setTimeout(function(){typeof r=="function"&&r()},i):typeof r=="function"&&r(),t=[]},animate:function(r,s,o,i){if(i){Ae(r,"transition",""),Ae(r,"transform","");var l=Jo(this.el),a=l&&l.a,u=l&&l.d,c=(s.left-o.left)/(a||1),d=(s.top-o.top)/(u||1);r.animatingX=!!c,r.animatingY=!!d,Ae(r,"transform","translate3d("+c+"px,"+d+"px,0)"),this.forRepaintDummy=tM(r),Ae(r,"transition","transform "+i+"ms"+(this.options.easing?" "+this.options.easing:"")),Ae(r,"transform","translate3d(0,0,0)"),typeof r.animated=="number"&&clearTimeout(r.animated),r.animated=setTimeout(function(){Ae(r,"transition",""),Ae(r,"transform",""),r.animated=!1,r.animatingX=!1,r.animatingY=!1},i)}}}}function tM(t){return t.offsetWidth}function nM(t,e,n,r){return Math.sqrt(Math.pow(e.top-t.top,2)+Math.pow(e.left-t.left,2))/Math.sqrt(Math.pow(e.top-n.top,2)+Math.pow(e.left-n.left,2))*r.animation}var To=[],rd={initializeByDefault:!0},jl={mount:function(e){for(var n in rd)rd.hasOwnProperty(n)&&!(n in e)&&(e[n]=rd[n]);To.forEach(function(r){if(r.pluginName===e.pluginName)throw"Sortable: Cannot mount plugin ".concat(e.pluginName," more than once")}),To.push(e)},pluginEvent:function(e,n,r){var s=this;this.eventCanceled=!1,r.cancel=function(){s.eventCanceled=!0};var o=e+"Global";To.forEach(function(i){n[i.pluginName]&&(n[i.pluginName][o]&&n[i.pluginName][o](Er({sortable:n},r)),n.options[i.pluginName]&&n[i.pluginName][e]&&n[i.pluginName][e](Er({sortable:n},r)))})},initializePlugins:function(e,n,r,s){To.forEach(function(l){var a=l.pluginName;if(!(!e.options[a]&&!l.initializeByDefault)){var u=new l(e,n,e.options);u.sortable=e,u.options=e.options,e[a]=u,Jr(r,u.defaults)}});for(var o in e.options)if(e.options.hasOwnProperty(o)){var i=this.modifyOption(e,o,e.options[o]);typeof i<"u"&&(e.options[o]=i)}},getEventProperties:function(e,n){var r={};return To.forEach(function(s){typeof s.eventProperties=="function"&&Jr(r,s.eventProperties.call(n[s.pluginName],e))}),r},modifyOption:function(e,n,r){var s;return To.forEach(function(o){e[o.pluginName]&&o.optionListeners&&typeof o.optionListeners[n]=="function"&&(s=o.optionListeners[n].call(e[o.pluginName],r))}),s}};function rM(t){var e=t.sortable,n=t.rootEl,r=t.name,s=t.targetEl,o=t.cloneEl,i=t.toEl,l=t.fromEl,a=t.oldIndex,u=t.newIndex,c=t.oldDraggableIndex,d=t.newDraggableIndex,f=t.originalEvent,p=t.putSortable,h=t.extraEventProperties;if(e=e||n&&n[Rn],!!e){var m,g=e.options,v="on"+r.charAt(0).toUpperCase()+r.substr(1);window.CustomEvent&&!Zr&&!Hl?m=new CustomEvent(r,{bubbles:!0,cancelable:!0}):(m=document.createEvent("Event"),m.initEvent(r,!0,!0)),m.to=i||n,m.from=l||n,m.item=s||n,m.clone=o,m.oldIndex=a,m.newIndex=u,m.oldDraggableIndex=c,m.newDraggableIndex=d,m.originalEvent=f,m.pullMode=p?p.lastPutMode:void 0;var y=Er(Er({},h),jl.getEventProperties(r,e));for(var b in y)m[b]=y[b];n&&n.dispatchEvent(m),g[v]&&g[v].call(e,m)}}var sM=["evt"],Tn=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=r.evt,o=KO(r,sM);jl.pluginEvent.bind(Ie)(e,n,Er({dragEl:fe,parentEl:wt,ghostEl:Le,rootEl:mt,nextEl:to,lastDownEl:_a,cloneEl:Et,cloneHidden:ms,dragStarted:Ri,putSortable:Xt,activeSortable:Ie.active,originalEvent:s,oldIndex:jo,oldDraggableIndex:Ji,newIndex:Nn,newDraggableIndex:cs,hideGhostForTarget:$1,unhideGhostForTarget:B1,cloneNowHidden:function(){ms=!0},cloneNowShown:function(){ms=!1},dispatchSortableEvent:function(l){gn({sortable:n,name:l,originalEvent:s})}},o))};function gn(t){rM(Er({putSortable:Xt,cloneEl:Et,targetEl:fe,rootEl:mt,oldIndex:jo,oldDraggableIndex:Ji,newIndex:Nn,newDraggableIndex:cs},t))}var fe,wt,Le,mt,to,_a,Et,ms,jo,Nn,Ji,cs,sa,Xt,Do=!1,Ka=!1,Ga=[],Xs,Zn,sd,od,nv,rv,Ri,Ao,Xi,Qi=!1,oa=!1,Ta,on,id=[],kf=!1,Ya=[],fc=typeof document<"u",ia=I1,sv=Hl||Zr?"cssFloat":"float",oM=fc&&!YO&&!I1&&"draggable"in document.createElement("div"),D1=(function(){if(fc){if(Zr)return!1;var t=document.createElement("x");return t.style.cssText="pointer-events:auto",t.style.pointerEvents==="auto"}})(),L1=function(e,n){var r=Ae(e),s=parseInt(r.width)-parseInt(r.paddingLeft)-parseInt(r.paddingRight)-parseInt(r.borderLeftWidth)-parseInt(r.borderRightWidth),o=oi(e,0,n),i=oi(e,1,n),l=o&&Ae(o),a=i&&Ae(i),u=l&&parseInt(l.marginLeft)+parseInt(l.marginRight)+Vt(o).width,c=a&&parseInt(a.marginLeft)+parseInt(a.marginRight)+Vt(i).width;if(r.display==="flex")return r.flexDirection==="column"||r.flexDirection==="column-reverse"?"vertical":"horizontal";if(r.display==="grid")return r.gridTemplateColumns.split(" ").length<=1?"vertical":"horizontal";if(o&&l.float&&l.float!=="none"){var d=l.float==="left"?"left":"right";return i&&(a.clear==="both"||a.clear===d)?"vertical":"horizontal"}return o&&(l.display==="block"||l.display==="flex"||l.display==="table"||l.display==="grid"||u>=s&&r[sv]==="none"||i&&r[sv]==="none"&&u+c>s)?"vertical":"horizontal"},iM=function(e,n,r){var s=r?e.left:e.top,o=r?e.right:e.bottom,i=r?e.width:e.height,l=r?n.left:n.top,a=r?n.right:n.bottom,u=r?n.width:n.height;return s===l||o===a||s+i/2===l+u/2},lM=function(e,n){var r;return Ga.some(function(s){var o=s[Rn].options.emptyInsertThreshold;if(!(!o||qp(s))){var i=Vt(s),l=e>=i.left-o&&e<=i.right+o,a=n>=i.top-o&&n<=i.bottom+o;if(l&&a)return r=s}}),r},F1=function(e){function n(o,i){return function(l,a,u,c){var d=l.options.group.name&&a.options.group.name&&l.options.group.name===a.options.group.name;if(o==null&&(i||d))return!0;if(o==null||o===!1)return!1;if(i&&o==="clone")return o;if(typeof o=="function")return n(o(l,a,u,c),i)(l,a,u,c);var f=(i?l:a).options.group.name;return o===!0||typeof o=="string"&&o===f||o.join&&o.indexOf(f)>-1}}var r={},s=e.group;(!s||Ca(s)!="object")&&(s={name:s}),r.name=s.name,r.checkPull=n(s.pull,!0),r.checkPut=n(s.put),r.revertClone=s.revertClone,e.group=r},$1=function(){!D1&&Le&&Ae(Le,"display","none")},B1=function(){!D1&&Le&&Ae(Le,"display","")};fc&&document.addEventListener("click",function(t){if(Ka)return t.preventDefault(),t.stopPropagation&&t.stopPropagation(),t.stopImmediatePropagation&&t.stopImmediatePropagation(),Ka=!1,!1},!0);var Qs=function(e){if(fe){e=e.touches?e.touches[0]:e;var n=lM(e.clientX,e.clientY);if(n){var r={};for(var s in e)e.hasOwnProperty(s)&&(r[s]=e[s]);r.target=r.rootEl=n,r.preventDefault=void 0,r.stopPropagation=void 0,n[Rn]._onDragOver(r)}}},aM=function(e){fe&&fe.parentNode[Rn]._isOutsideThisEl(e.target)};function Ie(t,e){if(!(t&&t.nodeType&&t.nodeType===1))throw"Sortable: `el` must be an HTMLElement, not ".concat({}.toString.call(t));this.el=t,this.options=e=Jr({},e),t[Rn]=this;var n={group:null,sort:!0,disabled:!1,store:null,handle:null,draggable:/^[uo]l$/i.test(t.nodeName)?">li":">*",swapThreshold:1,invertSwap:!1,invertedSwapThreshold:null,removeCloneOnHide:!0,direction:function(){return L1(t,this.options)},ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,easing:null,setData:function(i,l){i.setData("Text",l.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,delayOnTouchOnly:!1,touchStartThreshold:(Number.parseInt?Number:window).parseInt(window.devicePixelRatio,10)||1,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:Ie.supportPointer!==!1&&"PointerEvent"in window&&!Gi,emptyInsertThreshold:5};jl.initializePlugins(this,t,n);for(var r in n)!(r in e)&&(e[r]=n[r]);F1(e);for(var s in this)s.charAt(0)==="_"&&typeof this[s]=="function"&&(this[s]=this[s].bind(this));this.nativeDraggable=e.forceFallback?!1:oM,this.nativeDraggable&&(this.options.touchStartThreshold=1),e.supportPointer?Xe(t,"pointerdown",this._onTapStart):(Xe(t,"mousedown",this._onTapStart),Xe(t,"touchstart",this._onTapStart)),this.nativeDraggable&&(Xe(t,"dragover",this),Xe(t,"dragenter",this)),Ga.push(this.el),e.store&&e.store.get&&this.sort(e.store.get(this)||[]),Jr(this,eM())}Ie.prototype={constructor:Ie,_isOutsideThisEl:function(e){!this.el.contains(e)&&e!==this.el&&(Ao=null)},_getDirection:function(e,n){return typeof this.options.direction=="function"?this.options.direction.call(this,e,n,fe):this.options.direction},_onTapStart:function(e){if(e.cancelable){var n=this,r=this.el,s=this.options,o=s.preventOnFilter,i=e.type,l=e.touches&&e.touches[0]||e.pointerType&&e.pointerType==="touch"&&e,a=(l||e).target,u=e.target.shadowRoot&&(e.path&&e.path[0]||e.composedPath&&e.composedPath()[0])||a,c=s.filter;if(gM(r),!fe&&!(/mousedown|pointerdown/.test(i)&&e.button!==0||s.disabled)&&!u.isContentEditable&&!(!this.nativeDraggable&&Gi&&a&&a.tagName.toUpperCase()==="SELECT")&&(a=gr(a,s.draggable,r,!1),!(a&&a.animated)&&_a!==a)){if(jo=zn(a),Ji=zn(a,s.draggable),typeof c=="function"){if(c.call(this,e,a,this)){gn({sortable:n,rootEl:u,name:"filter",targetEl:a,toEl:r,fromEl:r}),Tn("filter",n,{evt:e}),o&&e.cancelable&&e.preventDefault();return}}else if(c&&(c=c.split(",").some(function(d){if(d=gr(u,d.trim(),r,!1),d)return gn({sortable:n,rootEl:d,name:"filter",targetEl:a,fromEl:r,toEl:r}),Tn("filter",n,{evt:e}),!0}),c)){o&&e.cancelable&&e.preventDefault();return}s.handle&&!gr(u,s.handle,r,!1)||this._prepareDragStart(e,l,a)}}},_prepareDragStart:function(e,n,r){var s=this,o=s.el,i=s.options,l=o.ownerDocument,a;if(r&&!fe&&r.parentNode===o){var u=Vt(r);if(mt=o,fe=r,wt=fe.parentNode,to=fe.nextSibling,_a=r,sa=i.group,Ie.dragged=fe,Xs={target:fe,clientX:(n||e).clientX,clientY:(n||e).clientY},nv=Xs.clientX-u.left,rv=Xs.clientY-u.top,this._lastX=(n||e).clientX,this._lastY=(n||e).clientY,fe.style["will-change"]="all",a=function(){if(Tn("delayEnded",s,{evt:e}),Ie.eventCanceled){s._onDrop();return}s._disableDelayedDragEvents(),!Qg&&s.nativeDraggable&&(fe.draggable=!0),s._triggerDragStart(e,n),gn({sortable:s,name:"choose",originalEvent:e}),Mn(fe,i.chosenClass,!0)},i.ignore.split(",").forEach(function(c){M1(fe,c.trim(),ld)}),Xe(l,"dragover",Qs),Xe(l,"mousemove",Qs),Xe(l,"touchmove",Qs),Xe(l,"mouseup",s._onDrop),Xe(l,"touchend",s._onDrop),Xe(l,"touchcancel",s._onDrop),Qg&&this.nativeDraggable&&(this.options.touchStartThreshold=4,fe.draggable=!0),Tn("delayStart",this,{evt:e}),i.delay&&(!i.delayOnTouchOnly||n)&&(!this.nativeDraggable||!(Hl||Zr))){if(Ie.eventCanceled){this._onDrop();return}Xe(l,"mouseup",s._disableDelayedDrag),Xe(l,"touchend",s._disableDelayedDrag),Xe(l,"touchcancel",s._disableDelayedDrag),Xe(l,"mousemove",s._delayedDragTouchMoveHandler),Xe(l,"touchmove",s._delayedDragTouchMoveHandler),i.supportPointer&&Xe(l,"pointermove",s._delayedDragTouchMoveHandler),s._dragStartTimer=setTimeout(a,i.delay)}else a()}},_delayedDragTouchMoveHandler:function(e){var n=e.touches?e.touches[0]:e;Math.max(Math.abs(n.clientX-this._lastX),Math.abs(n.clientY-this._lastY))>=Math.floor(this.options.touchStartThreshold/(this.nativeDraggable&&window.devicePixelRatio||1))&&this._disableDelayedDrag()},_disableDelayedDrag:function(){fe&&ld(fe),clearTimeout(this._dragStartTimer),this._disableDelayedDragEvents()},_disableDelayedDragEvents:function(){var e=this.el.ownerDocument;Ge(e,"mouseup",this._disableDelayedDrag),Ge(e,"touchend",this._disableDelayedDrag),Ge(e,"touchcancel",this._disableDelayedDrag),Ge(e,"mousemove",this._delayedDragTouchMoveHandler),Ge(e,"touchmove",this._delayedDragTouchMoveHandler),Ge(e,"pointermove",this._delayedDragTouchMoveHandler)},_triggerDragStart:function(e,n){n=n||e.pointerType=="touch"&&e,!this.nativeDraggable||n?this.options.supportPointer?Xe(document,"pointermove",this._onTouchMove):n?Xe(document,"touchmove",this._onTouchMove):Xe(document,"mousemove",this._onTouchMove):(Xe(fe,"dragend",this),Xe(mt,"dragstart",this._onDragStart));try{document.selection?Aa(function(){document.selection.empty()}):window.getSelection().removeAllRanges()}catch{}},_dragStarted:function(e,n){if(Do=!1,mt&&fe){Tn("dragStarted",this,{evt:n}),this.nativeDraggable&&Xe(document,"dragover",aM);var r=this.options;!e&&Mn(fe,r.dragClass,!1),Mn(fe,r.ghostClass,!0),Ie.active=this,e&&this._appendGhost(),gn({sortable:this,name:"start",originalEvent:n})}else this._nulling()},_emulateDragOver:function(){if(Zn){this._lastX=Zn.clientX,this._lastY=Zn.clientY,$1();for(var e=document.elementFromPoint(Zn.clientX,Zn.clientY),n=e;e&&e.shadowRoot&&(e=e.shadowRoot.elementFromPoint(Zn.clientX,Zn.clientY),e!==n);)n=e;if(fe.parentNode[Rn]._isOutsideThisEl(e),n)do{if(n[Rn]){var r=void 0;if(r=n[Rn]._onDragOver({clientX:Zn.clientX,clientY:Zn.clientY,target:e,rootEl:n}),r&&!this.options.dragoverBubble)break}e=n}while(n=n.parentNode);B1()}},_onTouchMove:function(e){if(Xs){var n=this.options,r=n.fallbackTolerance,s=n.fallbackOffset,o=e.touches?e.touches[0]:e,i=Le&&Jo(Le,!0),l=Le&&i&&i.a,a=Le&&i&&i.d,u=ia&&on&&tv(on),c=(o.clientX-Xs.clientX+s.x)/(l||1)+(u?u[0]-id[0]:0)/(l||1),d=(o.clientY-Xs.clientY+s.y)/(a||1)+(u?u[1]-id[1]:0)/(a||1);if(!Ie.active&&!Do){if(r&&Math.max(Math.abs(o.clientX-this._lastX),Math.abs(o.clientY-this._lastY))<r)return;this._onDragStart(e,!0)}if(Le){i?(i.e+=c-(sd||0),i.f+=d-(od||0)):i={a:1,b:0,c:0,d:1,e:c,f:d};var f="matrix(".concat(i.a,",").concat(i.b,",").concat(i.c,",").concat(i.d,",").concat(i.e,",").concat(i.f,")");Ae(Le,"webkitTransform",f),Ae(Le,"mozTransform",f),Ae(Le,"msTransform",f),Ae(Le,"transform",f),sd=c,od=d,Zn=o}e.cancelable&&e.preventDefault()}},_appendGhost:function(){if(!Le){var e=this.options.fallbackOnBody?document.body:mt,n=Vt(fe,!0,ia,!0,e),r=this.options;if(ia){for(on=e;Ae(on,"position")==="static"&&Ae(on,"transform")==="none"&&on!==document;)on=on.parentNode;on!==document.body&&on!==document.documentElement?(on===document&&(on=kr()),n.top+=on.scrollTop,n.left+=on.scrollLeft):on=kr(),id=tv(on)}Le=fe.cloneNode(!0),Mn(Le,r.ghostClass,!1),Mn(Le,r.fallbackClass,!0),Mn(Le,r.dragClass,!0),Ae(Le,"transition",""),Ae(Le,"transform",""),Ae(Le,"box-sizing","border-box"),Ae(Le,"margin",0),Ae(Le,"top",n.top),Ae(Le,"left",n.left),Ae(Le,"width",n.width),Ae(Le,"height",n.height),Ae(Le,"opacity","0.8"),Ae(Le,"position",ia?"absolute":"fixed"),Ae(Le,"zIndex","100000"),Ae(Le,"pointerEvents","none"),Ie.ghost=Le,e.appendChild(Le),Ae(Le,"transform-origin",nv/parseInt(Le.style.width)*100+"% "+rv/parseInt(Le.style.height)*100+"%")}},_onDragStart:function(e,n){var r=this,s=e.dataTransfer,o=r.options;if(Tn("dragStart",this,{evt:e}),Ie.eventCanceled){this._onDrop();return}Tn("setupClone",this),Ie.eventCanceled||(Et=P1(fe),Et.draggable=!1,Et.style["will-change"]="",this._hideClone(),Mn(Et,this.options.chosenClass,!1),Ie.clone=Et),r.cloneId=Aa(function(){Tn("clone",r),!Ie.eventCanceled&&(r.options.removeCloneOnHide||mt.insertBefore(Et,fe),r._hideClone(),gn({sortable:r,name:"clone"}))}),!n&&Mn(fe,o.dragClass,!0),n?(Ka=!0,r._loopId=setInterval(r._emulateDragOver,50)):(Ge(document,"mouseup",r._onDrop),Ge(document,"touchend",r._onDrop),Ge(document,"touchcancel",r._onDrop),s&&(s.effectAllowed="move",o.setData&&o.setData.call(r,s,fe)),Xe(document,"drop",r),Ae(fe,"transform","translateZ(0)")),Do=!0,r._dragStartId=Aa(r._dragStarted.bind(r,n,e)),Xe(document,"selectstart",r),Ri=!0,Gi&&Ae(document.body,"user-select","none")},_onDragOver:function(e){var n=this.el,r=e.target,s,o,i,l=this.options,a=l.group,u=Ie.active,c=sa===a,d=l.sort,f=Xt||u,p,h=this,m=!1;if(kf)return;function g(we,Qe){Tn(we,h,Er({evt:e,isOwner:c,axis:p?"vertical":"horizontal",revert:i,dragRect:s,targetRect:o,canSort:d,fromSortable:f,target:r,completed:y,onMove:function(ke,_e){return la(mt,n,fe,s,ke,Vt(ke),e,_e)},changed:b},Qe))}function v(){g("dragOverAnimationCapture"),h.captureAnimationState(),h!==f&&f.captureAnimationState()}function y(we){return g("dragOverCompleted",{insertion:we}),we&&(c?u._hideClone():u._showClone(h),h!==f&&(Mn(fe,Xt?Xt.options.ghostClass:u.options.ghostClass,!1),Mn(fe,l.ghostClass,!0)),Xt!==h&&h!==Ie.active?Xt=h:h===Ie.active&&Xt&&(Xt=null),f===h&&(h._ignoreWhileAnimating=r),h.animateAll(function(){g("dragOverAnimationComplete"),h._ignoreWhileAnimating=null}),h!==f&&(f.animateAll(),f._ignoreWhileAnimating=null)),(r===fe&&!fe.animated||r===n&&!r.animated)&&(Ao=null),!l.dragoverBubble&&!e.rootEl&&r!==document&&(fe.parentNode[Rn]._isOutsideThisEl(e.target),!we&&Qs(e)),!l.dragoverBubble&&e.stopPropagation&&e.stopPropagation(),m=!0}function b(){Nn=zn(fe),cs=zn(fe,l.draggable),gn({sortable:h,name:"change",toEl:n,newIndex:Nn,newDraggableIndex:cs,originalEvent:e})}if(e.preventDefault!==void 0&&e.cancelable&&e.preventDefault(),r=gr(r,l.draggable,n,!0),g("dragOver"),Ie.eventCanceled)return m;if(fe.contains(e.target)||r.animated&&r.animatingX&&r.animatingY||h._ignoreWhileAnimating===r)return y(!1);if(Ka=!1,u&&!l.disabled&&(c?d||(i=wt!==mt):Xt===this||(this.lastPutMode=sa.checkPull(this,u,fe,e))&&a.checkPut(this,u,fe,e))){if(p=this._getDirection(e,r)==="vertical",s=Vt(fe),g("dragOverValid"),Ie.eventCanceled)return m;if(i)return wt=mt,v(),this._hideClone(),g("revert"),Ie.eventCanceled||(to?mt.insertBefore(fe,to):mt.appendChild(fe)),y(!0);var x=qp(n,l.draggable);if(!x||fM(e,p,this)&&!x.animated){if(x===fe)return y(!1);if(x&&n===e.target&&(r=x),r&&(o=Vt(r)),la(mt,n,fe,s,r,o,e,!!r)!==!1)return v(),n.appendChild(fe),wt=n,b(),y(!0)}else if(x&&dM(e,p,this)){var k=oi(n,0,l,!0);if(k===fe)return y(!1);if(r=k,o=Vt(r),la(mt,n,fe,s,r,o,e,!1)!==!1)return v(),n.insertBefore(fe,k),wt=n,b(),y(!0)}else if(r.parentNode===n){o=Vt(r);var S=0,T,A=fe.parentNode!==n,M=!iM(fe.animated&&fe.toRect||s,r.animated&&r.toRect||o,p),P=p?"top":"left",z=ev(r,"top","top")||ev(fe,"top","top"),D=z?z.scrollTop:void 0;Ao!==r&&(T=o[P],Qi=!1,oa=!M&&l.invertSwap||A),S=pM(e,r,o,p,M?1:l.swapThreshold,l.invertedSwapThreshold==null?l.swapThreshold:l.invertedSwapThreshold,oa,Ao===r);var W;if(S!==0){var ie=zn(fe);do ie-=S,W=wt.children[ie];while(W&&(Ae(W,"display")==="none"||W===Le))}if(S===0||W===r)return y(!1);Ao=r,Xi=S;var ae=r.nextElementSibling,de=!1;de=S===1;var ve=la(mt,n,fe,s,r,o,e,de);if(ve!==!1)return(ve===1||ve===-1)&&(de=ve===1),kf=!0,setTimeout(cM,30),v(),de&&!ae?n.appendChild(fe):r.parentNode.insertBefore(fe,de?ae:r),z&&R1(z,0,D-z.scrollTop),wt=fe.parentNode,T!==void 0&&!oa&&(Ta=Math.abs(T-Vt(r)[P])),b(),y(!0)}if(n.contains(fe))return y(!1)}return!1},_ignoreWhileAnimating:null,_offMoveEvents:function(){Ge(document,"mousemove",this._onTouchMove),Ge(document,"touchmove",this._onTouchMove),Ge(document,"pointermove",this._onTouchMove),Ge(document,"dragover",Qs),Ge(document,"mousemove",Qs),Ge(document,"touchmove",Qs)},_offUpEvents:function(){var e=this.el.ownerDocument;Ge(e,"mouseup",this._onDrop),Ge(e,"touchend",this._onDrop),Ge(e,"pointerup",this._onDrop),Ge(e,"touchcancel",this._onDrop),Ge(document,"selectstart",this)},_onDrop:function(e){var n=this.el,r=this.options;if(Nn=zn(fe),cs=zn(fe,r.draggable),Tn("drop",this,{evt:e}),wt=fe&&fe.parentNode,Nn=zn(fe),cs=zn(fe,r.draggable),Ie.eventCanceled){this._nulling();return}Do=!1,oa=!1,Qi=!1,clearInterval(this._loopId),clearTimeout(this._dragStartTimer),wf(this.cloneId),wf(this._dragStartId),this.nativeDraggable&&(Ge(document,"drop",this),Ge(n,"dragstart",this._onDragStart)),this._offMoveEvents(),this._offUpEvents(),Gi&&Ae(document.body,"user-select",""),Ae(fe,"transform",""),e&&(Ri&&(e.cancelable&&e.preventDefault(),!r.dropBubble&&e.stopPropagation()),Le&&Le.parentNode&&Le.parentNode.removeChild(Le),(mt===wt||Xt&&Xt.lastPutMode!=="clone")&&Et&&Et.parentNode&&Et.parentNode.removeChild(Et),fe&&(this.nativeDraggable&&Ge(fe,"dragend",this),ld(fe),fe.style["will-change"]="",Ri&&!Do&&Mn(fe,Xt?Xt.options.ghostClass:this.options.ghostClass,!1),Mn(fe,this.options.chosenClass,!1),gn({sortable:this,name:"unchoose",toEl:wt,newIndex:null,newDraggableIndex:null,originalEvent:e}),mt!==wt?(Nn>=0&&(gn({rootEl:wt,name:"add",toEl:wt,fromEl:mt,originalEvent:e}),gn({sortable:this,name:"remove",toEl:wt,originalEvent:e}),gn({rootEl:wt,name:"sort",toEl:wt,fromEl:mt,originalEvent:e}),gn({sortable:this,name:"sort",toEl:wt,originalEvent:e})),Xt&&Xt.save()):Nn!==jo&&Nn>=0&&(gn({sortable:this,name:"update",toEl:wt,originalEvent:e}),gn({sortable:this,name:"sort",toEl:wt,originalEvent:e})),Ie.active&&((Nn==null||Nn===-1)&&(Nn=jo,cs=Ji),gn({sortable:this,name:"end",toEl:wt,originalEvent:e}),this.save()))),this._nulling()},_nulling:function(){Tn("nulling",this),mt=fe=wt=Le=to=Et=_a=ms=Xs=Zn=Ri=Nn=cs=jo=Ji=Ao=Xi=Xt=sa=Ie.dragged=Ie.ghost=Ie.clone=Ie.active=null,Ya.forEach(function(e){e.checked=!0}),Ya.length=sd=od=0},handleEvent:function(e){switch(e.type){case"drop":case"dragend":this._onDrop(e);break;case"dragenter":case"dragover":fe&&(this._onDragOver(e),uM(e));break;case"selectstart":e.preventDefault();break}},toArray:function(){for(var e=[],n,r=this.el.children,s=0,o=r.length,i=this.options;s<o;s++)n=r[s],gr(n,i.draggable,this.el,!1)&&e.push(n.getAttribute(i.dataIdAttr)||mM(n));return e},sort:function(e,n){var r={},s=this.el;this.toArray().forEach(function(o,i){var l=s.children[i];gr(l,this.options.draggable,s,!1)&&(r[o]=l)},this),n&&this.captureAnimationState(),e.forEach(function(o){r[o]&&(s.removeChild(r[o]),s.appendChild(r[o]))}),n&&this.animateAll()},save:function(){var e=this.options.store;e&&e.set&&e.set(this)},closest:function(e,n){return gr(e,n||this.options.draggable,this.el,!1)},option:function(e,n){var r=this.options;if(n===void 0)return r[e];var s=jl.modifyOption(this,e,n);typeof s<"u"?r[e]=s:r[e]=n,e==="group"&&F1(r)},destroy:function(){Tn("destroy",this);var e=this.el;e[Rn]=null,Ge(e,"mousedown",this._onTapStart),Ge(e,"touchstart",this._onTapStart),Ge(e,"pointerdown",this._onTapStart),this.nativeDraggable&&(Ge(e,"dragover",this),Ge(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(n){n.removeAttribute("draggable")}),this._onDrop(),this._disableDelayedDragEvents(),Ga.splice(Ga.indexOf(this.el),1),this.el=e=null},_hideClone:function(){if(!ms){if(Tn("hideClone",this),Ie.eventCanceled)return;Ae(Et,"display","none"),this.options.removeCloneOnHide&&Et.parentNode&&Et.parentNode.removeChild(Et),ms=!0}},_showClone:function(e){if(e.lastPutMode!=="clone"){this._hideClone();return}if(ms){if(Tn("showClone",this),Ie.eventCanceled)return;fe.parentNode==mt&&!this.options.group.revertClone?mt.insertBefore(Et,fe):to?mt.insertBefore(Et,to):mt.appendChild(Et),this.options.group.revertClone&&this.animate(fe,Et),Ae(Et,"display",""),ms=!1}}};function uM(t){t.dataTransfer&&(t.dataTransfer.dropEffect="move"),t.cancelable&&t.preventDefault()}function la(t,e,n,r,s,o,i,l){var a,u=t[Rn],c=u.options.onMove,d;return window.CustomEvent&&!Zr&&!Hl?a=new CustomEvent("move",{bubbles:!0,cancelable:!0}):(a=document.createEvent("Event"),a.initEvent("move",!0,!0)),a.to=e,a.from=t,a.dragged=n,a.draggedRect=r,a.related=s||e,a.relatedRect=o||Vt(e),a.willInsertAfter=l,a.originalEvent=i,t.dispatchEvent(a),c&&(d=c.call(u,a,i)),d}function ld(t){t.draggable=!1}function cM(){kf=!1}function dM(t,e,n){var r=Vt(oi(n.el,0,n.options,!0)),s=10;return e?t.clientX<r.left-s||t.clientY<r.top&&t.clientX<r.right:t.clientY<r.top-s||t.clientY<r.bottom&&t.clientX<r.left}function fM(t,e,n){var r=Vt(qp(n.el,n.options.draggable)),s=10;return e?t.clientX>r.right+s||t.clientX<=r.right&&t.clientY>r.bottom&&t.clientX>=r.left:t.clientX>r.right&&t.clientY>r.top||t.clientX<=r.right&&t.clientY>r.bottom+s}function pM(t,e,n,r,s,o,i,l){var a=r?t.clientY:t.clientX,u=r?n.height:n.width,c=r?n.top:n.left,d=r?n.bottom:n.right,f=!1;if(!i){if(l&&Ta<u*s){if(!Qi&&(Xi===1?a>c+u*o/2:a<d-u*o/2)&&(Qi=!0),Qi)f=!0;else if(Xi===1?a<c+Ta:a>d-Ta)return-Xi}else if(a>c+u*(1-s)/2&&a<d-u*(1-s)/2)return hM(e)}return f=f||i,f&&(a<c+u*o/2||a>d-u*o/2)?a>c+u/2?1:-1:0}function hM(t){return zn(fe)<zn(t)?1:-1}function mM(t){for(var e=t.tagName+t.className+t.src+t.href+t.textContent,n=e.length,r=0;n--;)r+=e.charCodeAt(n);return r.toString(36)}function gM(t){Ya.length=0;for(var e=t.getElementsByTagName("input"),n=e.length;n--;){var r=e[n];r.checked&&Ya.push(r)}}function Aa(t){return setTimeout(t,0)}function wf(t){return clearTimeout(t)}fc&&Xe(document,"touchmove",function(t){(Ie.active||Do)&&t.cancelable&&t.preventDefault()});Ie.utils={on:Xe,off:Ge,css:Ae,find:M1,is:function(e,n){return!!gr(e,n,e,!1)},extend:QO,throttle:N1,closest:gr,toggleClass:Mn,clone:P1,index:zn,nextTick:Aa,cancelNextTick:wf,detectDirection:L1,getChild:oi};Ie.get=function(t){return t[Rn]};Ie.mount=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];e[0].constructor===Array&&(e=e[0]),e.forEach(function(r){if(!r.prototype||!r.prototype.constructor)throw"Sortable: Mounted plugin must be a constructor function, not ".concat({}.toString.call(r));r.utils&&(Ie.utils=Er(Er({},Ie.utils),r.utils)),jl.mount(r)})};Ie.create=function(t,e){return new Ie(t,e)};Ie.version=GO;var Mt=[],Pi,Ef,Sf=!1,ad,ud,Ja,Di;function vM(){function t(){this.defaults={scroll:!0,forceAutoScrollFallback:!1,scrollSensitivity:30,scrollSpeed:10,bubbleScroll:!0};for(var e in this)e.charAt(0)==="_"&&typeof this[e]=="function"&&(this[e]=this[e].bind(this))}return t.prototype={dragStarted:function(n){var r=n.originalEvent;this.sortable.nativeDraggable?Xe(document,"dragover",this._handleAutoScroll):this.options.supportPointer?Xe(document,"pointermove",this._handleFallbackAutoScroll):r.touches?Xe(document,"touchmove",this._handleFallbackAutoScroll):Xe(document,"mousemove",this._handleFallbackAutoScroll)},dragOverCompleted:function(n){var r=n.originalEvent;!this.options.dragOverBubble&&!r.rootEl&&this._handleAutoScroll(r)},drop:function(){this.sortable.nativeDraggable?Ge(document,"dragover",this._handleAutoScroll):(Ge(document,"pointermove",this._handleFallbackAutoScroll),Ge(document,"touchmove",this._handleFallbackAutoScroll),Ge(document,"mousemove",this._handleFallbackAutoScroll)),ov(),Ia(),ZO()},nulling:function(){Ja=Ef=Pi=Sf=Di=ad=ud=null,Mt.length=0},_handleFallbackAutoScroll:function(n){this._handleAutoScroll(n,!0)},_handleAutoScroll:function(n,r){var s=this,o=(n.touches?n.touches[0]:n).clientX,i=(n.touches?n.touches[0]:n).clientY,l=document.elementFromPoint(o,i);if(Ja=n,r||this.options.forceAutoScrollFallback||Hl||Zr||Gi){cd(n,this.options,l,r);var a=bs(l,!0);Sf&&(!Di||o!==ad||i!==ud)&&(Di&&ov(),Di=setInterval(function(){var u=bs(document.elementFromPoint(o,i),!0);u!==a&&(a=u,Ia()),cd(n,s.options,u,r)},10),ad=o,ud=i)}else{if(!this.options.bubbleScroll||bs(l,!0)===kr()){Ia();return}cd(n,this.options,bs(l,!1),!1)}}},Jr(t,{pluginName:"scroll",initializeByDefault:!0})}function Ia(){Mt.forEach(function(t){clearInterval(t.pid)}),Mt=[]}function ov(){clearInterval(Di)}var cd=N1(function(t,e,n,r){if(e.scroll){var s=(t.touches?t.touches[0]:t).clientX,o=(t.touches?t.touches[0]:t).clientY,i=e.scrollSensitivity,l=e.scrollSpeed,a=kr(),u=!1,c;Ef!==n&&(Ef=n,Ia(),Pi=e.scroll,c=e.scrollFn,Pi===!0&&(Pi=bs(n,!0)));var d=0,f=Pi;do{var p=f,h=Vt(p),m=h.top,g=h.bottom,v=h.left,y=h.right,b=h.width,x=h.height,k=void 0,S=void 0,T=p.scrollWidth,A=p.scrollHeight,M=Ae(p),P=p.scrollLeft,z=p.scrollTop;p===a?(k=b<T&&(M.overflowX==="auto"||M.overflowX==="scroll"||M.overflowX==="visible"),S=x<A&&(M.overflowY==="auto"||M.overflowY==="scroll"||M.overflowY==="visible")):(k=b<T&&(M.overflowX==="auto"||M.overflowX==="scroll"),S=x<A&&(M.overflowY==="auto"||M.overflowY==="scroll"));var D=k&&(Math.abs(y-s)<=i&&P+b<T)-(Math.abs(v-s)<=i&&!!P),W=S&&(Math.abs(g-o)<=i&&z+x<A)-(Math.abs(m-o)<=i&&!!z);if(!Mt[d])for(var ie=0;ie<=d;ie++)Mt[ie]||(Mt[ie]={});(Mt[d].vx!=D||Mt[d].vy!=W||Mt[d].el!==p)&&(Mt[d].el=p,Mt[d].vx=D,Mt[d].vy=W,clearInterval(Mt[d].pid),(D!=0||W!=0)&&(u=!0,Mt[d].pid=setInterval((function(){r&&this.layer===0&&Ie.active._onTouchMove(Ja);var ae=Mt[this.layer].vy?Mt[this.layer].vy*l:0,de=Mt[this.layer].vx?Mt[this.layer].vx*l:0;typeof c=="function"&&c.call(Ie.dragged.parentNode[Rn],de,ae,t,Ja,Mt[this.layer].el)!=="continue"||R1(Mt[this.layer].el,de,ae)}).bind({layer:d}),24))),d++}while(e.bubbleScroll&&f!==a&&(f=bs(f,!1)));Sf=u}},30),V1=function(e){var n=e.originalEvent,r=e.putSortable,s=e.dragEl,o=e.activeSortable,i=e.dispatchSortableEvent,l=e.hideGhostForTarget,a=e.unhideGhostForTarget;if(n){var u=r||o;l();var c=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:n,d=document.elementFromPoint(c.clientX,c.clientY);a(),u&&!u.el.contains(d)&&(i("spill"),this.onSpill({dragEl:s,putSortable:r}))}};function Kp(){}Kp.prototype={startIndex:null,dragStart:function(e){var n=e.oldDraggableIndex;this.startIndex=n},onSpill:function(e){var n=e.dragEl,r=e.putSortable;this.sortable.captureAnimationState(),r&&r.captureAnimationState();var s=oi(this.sortable.el,this.startIndex,this.options);s?this.sortable.el.insertBefore(n,s):this.sortable.el.appendChild(n),this.sortable.animateAll(),r&&r.animateAll()},drop:V1};Jr(Kp,{pluginName:"revertOnSpill"});function Gp(){}Gp.prototype={onSpill:function(e){var n=e.dragEl,r=e.putSortable,s=r||this.sortable;s.captureAnimationState(),n.parentNode&&n.parentNode.removeChild(n),s.animateAll()},drop:V1};Jr(Gp,{pluginName:"removeOnSpill"});Ie.mount(new vM);Ie.mount(Gp,Kp);function yM(t,e){return Object.values(t).indexOf(e)}function bM(t,e,n,r){if(!t)return[];const s=Object.values(t),o=e.length-r;return[...e].map((l,a)=>a>=o?s.length:s.indexOf(l))}function xM(t){return["transition-group","TransitionGroup"].includes(t)}function iv(t){if(!t||t.length!==1)return!1;const[{type:e}]=t;return e?xM(e.name):!1}function kM(t,e){return e?{...e.props,...e.attrs}:t}const Cf=["Start","Add","Remove","Update","End"],_f=["Choose","Unchoose","Sort","Filter","Clone"],wM=["Move",...Cf,..._f].map(t=>"on"+t);let dd=null;const pc=xe({name:"VueDraggableNext",inheritAttrs:!1,props:{options:Object,list:{type:Array,required:!1,default:null},noTransitionOnDrag:{type:Boolean,default:!1},clone:{type:Function,default:t=>t},tag:{type:String,default:"div"},move:{type:Function,default:null},componentData:{type:Object,required:!1,default:null},component:{type:String,default:null},modelValue:{type:Array,required:!1,default:null}},emits:["update:modelValue","move","change",...Cf.map(t=>t.toLowerCase()),..._f.map(t=>t.toLowerCase())],setup(t,{emit:e,slots:n,attrs:r}){const s=H(!1),o=H(!1),i=H(0),l=H(0),a=H([]),u=H(null),c=H(null),d=L(()=>t.list?t.list:t.modelValue),f=ar();function p(){return t.component?Cb(t.component):t.tag}function h(te){if(c.value)for(const j in te){const X=Yg(j);wM.indexOf(X)===-1&&c.value.option(X,te[j])}}function m(){return f?.proxy?.$el.children||[]}async function g(){await bt(),a.value=bM(m(),f?.proxy?.$el.children||[],s.value,l.value)}function v(te){const j=yM(m()||[],te);if(j===-1)return null;const X=d.value?d.value[j]:null;return{index:j,element:X}}function y(te){bt(()=>e("change",te))}function b(te){if(t.list){te(t.list);return}const j=[...t.modelValue||[]];te(j),e("update:modelValue",j)}function x(...te){b(X=>X.splice(...te))}function k(te,j){b(ee=>ee.splice(j,0,ee.splice(te,1)[0]))}function S(te){const j=a.value,X=j.length;return te>X-1?X:j[te]}function T(){return n.default&&n.default()[0]?.component?.proxy||null}function A(te){if(!t.noTransitionOnDrag||!s.value)return;const j=m();j[te]&&(j[te].data=null);const X=T();X&&(X.children=[],X.kept=void 0)}function M(te){g(),u.value=v(te.item),u.value&&(te.item._underlying_vm_=t.clone(u.value.element),dd=te.item)}function P(te){const j=te.item._underlying_vm_;if(j===void 0)return;td(te.item);const X=S(te.newIndex);x(X,0,j),g(),y({added:{element:j,newIndex:X}})}function z(te){if(Jg(f?.proxy?.$el,te.item,te.oldIndex),te.pullMode==="clone"){td(te.clone);return}if(!u.value)return;const j=u.value.index;x(j,1),A(j),y({removed:{element:u.value.element,oldIndex:j}})}function D(te){td(te.item),Jg(te.from,te.item,te.oldIndex);const j=u.value?.index,X=S(te.newIndex);k(j,X),y({moved:{element:u.value?.element,oldIndex:j,newIndex:X}})}function W(te,j){Object.prototype.hasOwnProperty.call(te,j)&&(te[j]+=i.value)}function ie(te){return te.__draggable_component__}function ae({to:te,related:j}){const X=ie(te);if(!X)return{component:X};const ee=X.realList,R={list:ee,component:X};if(te!==j&&ee&&X.getUnderlyingVm){const V=X.getUnderlyingVm(j);if(V)return Object.assign(V,R)}return R}function de(te,j){const X=[...j.to.children].filter(K=>K.style.display!=="none");if(X.length===0)return 0;const ee=X.indexOf(j.related),R=te.component.getVmIndex(ee);return X.indexOf(dd)!==-1||!j.willInsertAfter?R:R+1}const ve=()=>{const te={};Cf.forEach(R=>{te["on"+R]=Qe(R)}),_f.forEach(R=>{te["on"+R]=we.bind(null,R)});const j=Object.keys(r).reduce((R,V)=>(R[Yg(V)]=r[V],R),{}),X=Object.assign({},j,te,{onMove:(R,V)=>ut(R,V)});"draggable"in X||(X.draggable=">*");const ee=f?.proxy?.$el.nodeType===1?f.proxy.$el:f?.proxy?.$el.parentElement||null;ee&&(c.value=new Ie(ee,X),ee.__draggable_component__=f?.proxy,g())};function we(te,j){bt(()=>e(te.toLowerCase(),j))}function Qe(te){return j=>{if(d.value!==null){const X="onDrag"+te,ee=_e[X];ee&&ee(j)}we(te,j)}}function ut(te,j){const X=t.move;if(!X||!d.value)return!0;const ee=ae(te),R=u.value,V=de(ee,te);R&&Object.assign(R,{futureIndex:V});const K=Object.assign({},te,{relatedContext:ee,draggedContext:R});return X(K,j)}function ke(){g(),dd=null}const _e={onDragStart:M,onDragAdd:P,onDragRemove:z,onDragUpdate:D,onDragMove:ut,onDragEnd:ke};return qe(()=>{ve()}),t.list!==null&&t.modelValue!==null&&jO.error("list props are mutually exclusive! Please set one."),{getTag:p,realList:d,visibleIndexes:a,noneFunctionalComponentMode:o,headerOffset:i,footerOffset:l,transitionMode:s,computeIndexes:g,updateOptions:h,getChildrenNodes:m,getUnderlyingVm:v,emitChanges:y,alterList:b,spliceList:x,updatePosition:k,getVmIndex:S,getComponent:T,resetTransitionData:A,onDragStart:M,onDragAdd:P,onDragRemove:z,onDragUpdate:D,updateProperty:W,onDragMove:ut,onDragEnd:ke,mounted:ve,context:u,sortableInstance:c,getRelatedContextFromMoveEvent:ae,getTargetedComponent:ie,computeFutureIndex:de}},render(){const t=this.getTag(),e=kM(this.$attrs,this.componentData);if(typeof t=="string"){const r=this.$slots.default&&typeof this.$slots.default=="function"?this.$slots.default():null;return r?(this.transitionMode=iv(r),Ue(t,e,r)):Ue(t,e,[])}const n=this.$slots.default?{default:this.$slots.default}:{};if(this.$slots.default){const r=typeof this.$slots.default=="function"?this.$slots.default():null;this.transitionMode=iv(r||[])}return Ue(t,e,n)}}),EM=["onClick","onDragover","onDrop"],SM={class:"px-2 py-1 text-sm inline-flex items-center gap-2"},CM=xe({__name:"TreeList",props:{items:{},parentId:{},forestId:{},handleClass:{default:".drag-handle"}},emits:["drop-node","click","drop-into"],setup(t,{emit:e}){const n=t,r=e,s=H([]),o=H(null);je(()=>n.items,d=>{s.value=Array.isArray(d)?[...d]:[]},{immediate:!0});const i=d=>{const f=d.oldIndex;if(f==null){o.value=null;return}const p=s.value[f];o.value=p?p.id:null},l=d=>{if(!d.moved){s.value=[...n.items];return}const{oldIndex:f,newIndex:p}=d.moved,h=n.items[f];if(!h){s.value=[...n.items];return}r("drop-node",{nodeId:h.id,newParentId:n.parentId,newPosition:p}),s.value=[...n.items]},a=d=>{r("click",{itemId:d})},u=d=>{},c=d=>{o.value!=null&&d.type!=="leaf"&&(r("drop-into",{nodeId:o.value,targetParentId:d.id}),s.value=[...n.items],o.value=null)};return(d,f)=>(J(),Ke(O(pc),{modelValue:s.value,"onUpdate:modelValue":f[0]||(f[0]=p=>s.value=p),"item-key":"id",tag:"ul",class:"flex flex-col gap-1",animation:200,"swap-threshold":.5,"chosen-class":"opacity-60","ghost-class":"drag-ghost",handle:n.handleClass,onStart:i,onChange:l},{default:De(()=>[(J(!0),le(Ye,null,Dn(s.value,(p,h)=>(J(),le("li",{key:p.id,class:"rounded hover:bg-gray-50 cursor-pointer",onClick:m=>a(p.id),onDragover:Bt(m=>u(p),["prevent"]),onDrop:Bt(m=>c(p),["stop","prevent"])},[Yr(d.$slots,"item",{item:p,index:h},()=>[N("div",SM,[p.type!=="leaf"?(J(),Ke(O(Ua),{key:0,size:16,class:"text-gray-500","aria-hidden":"true"})):(J(),Ke(O(b1),{key:1,size:16,class:"text-gray-500","aria-hidden":"true"})),N("span",null,re(p.name),1)])],!0)],40,EM))),128))]),_:3},8,["modelValue","handle"]))}}),zl=(t,e)=>{const n=t.__vccOpts||t;for(const[r,s]of e)n[r]=s;return n},_M=zl(CM,[["__scopeId","data-v-41a105fb"]]),TM={class:"flex items-center justify-between"},AM={class:"inline-flex items-center gap-2 flex-1 min-w-0"},IM=["title"],OM={key:0,class:"inline-flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"},MM=["aria-label"],NM=["aria-label"],RM=xe({__name:"ContentListItem",props:{item:{},index:{},readonly:{type:Boolean}},emits:["edit","delete"],setup(t,{emit:e}){const{t:n}=Ot(),r=e,s=()=>{r("edit")},o=()=>{r("delete")};return(i,l)=>(J(),le("button",{type:"button",class:Pe(["px-2 py-1 text-sm text-left w-full rounded transition hover:bg-gray-50 group",t.item.type!=="leaf"?"cursor-pointer":""])},[N("div",TM,[N("span",AM,[t.readonly?Ve("",!0):(J(),le("button",{key:0,type:"button",class:"drag-handle shrink-0 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 cursor-move",title:O(n)("common.drag"),onClick:l[0]||(l[0]=Bt(()=>{},["stop"]))},[se(O(ac),{size:16})],8,IM)),t.item.type!=="leaf"?(J(),Ke(O(Ua),{key:1,size:16,class:"text-gray-500 shrink-0","aria-hidden":"true"})):(J(),Ke(O(b1),{key:2,size:16,class:"text-gray-500 shrink-0","aria-hidden":"true"})),N("span",{class:Pe(["truncate",t.item.type!=="leaf"?"group-hover:underline":""])},re(t.item.name),3)]),t.readonly?Ve("",!0):(J(),le("span",OM,[N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.edit"),onClick:Bt(s,["stop"])},[se(O(Hp),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,MM),N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.delete"),onClick:Bt(o,["stop"])},[se(O(uc),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,NM)]))])],2))}}),PM=xe({__name:"ContentList",props:{items:{},parentId:{},forestId:{},readonly:{type:Boolean,default:!1},class:{},handleClass:{default:".drag-handle"}},emits:["drop-node","click","drop-into","edit","delete"],setup(t,{emit:e}){const n=t,r=e,s=u=>{r("drop-node",u)},o=u=>{r("click",u)},i=u=>{r("drop-into",u)},l=u=>{r("edit",{itemId:u.id})},a=u=>{r("delete",{itemId:u.id})};return(u,c)=>(J(),Ke(_M,{items:t.items,"parent-id":t.parentId,"forest-id":t.forestId,class:Pe(t.class),"handle-class":t.handleClass,onDropNode:s,onClick:o,onDropInto:i},{item:De(({item:d,index:f})=>[se(RM,{item:d,index:f,readonly:n.readonly,onEdit:p=>l(d),onDelete:p=>a(d)},null,8,["item","index","readonly","onEdit","onDelete"])]),_:1},8,["items","parent-id","forest-id","class","handle-class"]))}}),DM={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},LM={class:"px-4 py-2 border-b border-gray-200"},FM=["onClick"],$M={class:"py-2"},BM={key:0,class:"flex items-center justify-center py-8 text-gray-500 text-sm"},VM={key:2,class:"px-2 pt-2 flex gap-2 border-t border-gray-100"},HM=["title"],jM=["disabled","title"],lv=xe({__name:"MainPage",props:{path:{}},setup(t){const{t:e}=Ot(),n=t,r=mi(),s=rt,o=H(!1),i=H([]),l=H(0),a=H(null),u=L(()=>{const k=n.path.split("/").filter(Boolean).map(S=>Number(S)).filter(S=>Number.isFinite(S));return k.length===0?null:k[k.length-1]??null}),c=L(()=>(l.value,i.value.filter(k=>k.deletedAt===null).filter(k=>(k.parentId??null)===(u.value??null)).sort(Wp))),d=async()=>{o.value=!0;try{i.value=await wn(s),l.value++}finally{o.value=!1}};qe(()=>{d()}),je(()=>n.path,()=>{d()});const f=k=>{console.log("goTo",k,r.currentRoute.value.path);const S=k.endsWith("/")?k:`${k}/`;r.push({path:S})},p=async k=>{if(console.log("onDropNode",k),u.value!=null){o.value=!0;try{await Sa(s,k.nodeId,k.newParentId,k.newPosition),await d()}finally{o.value=!1}}},h=async k=>{if(a.value!=null){o.value=!0;try{await Sa(s,a.value,k.newParentId,k.newPosition),a.value=null,await d()}finally{o.value=!1}}},m=async k=>{if(k.nodeId!==k.targetParentId){o.value=!0;try{const S=await wn(s),T=S.find(P=>P.id===k.nodeId&&P.deletedAt===null);if(!T)return;const A=S.find(P=>P.id===k.targetParentId&&P.deletedAt===null);if(A&&A.path.startsWith(T.path))return;const M=S.filter(P=>P.deletedAt===null).filter(P=>(P.parentId??null)===k.targetParentId).length;await Sa(s,k.nodeId,k.targetParentId,M),await d()}finally{o.value=!1}}},g=k=>{const S=i.value.find(T=>T.id===k.itemId&&T.deletedAt===null);if(S){if(S.type!=="leaf"){f(S.path);return}r.push({path:`/course${S.path}`})}},v=k=>{const S=i.value.find(T=>T.id===k.itemId&&T.deletedAt===null);if(S){if(S.type==="leaf"){r.push({path:`/course${S.path}edit`});return}r.push({path:`/folder${S.path}`})}},y=async k=>{const S=k.itemId,T=await wn(s),A=T.find(z=>z.id===S&&z.deletedAt===null);if(!A)return;const M=A.type==="leaf"?e("mainPage.deleteConfirm"):e("mainPage.deleteFolderConfirm");if(window.confirm(M)){o.value=!0;try{const D=T.filter(W=>W.deletedAt===null).filter(W=>W.path.startsWith(A.path)).filter(W=>W.type==="leaf"&&typeof W.objectId=="string"&&W.objectId);await Promise.all(D.map(W=>AO(W.objectId))),await SO(s,S),await d()}finally{o.value=!1}}},b=()=>{const k=u.value,S=k!=null?{parentId:k.toString()}:{};r.push({path:"/folder/new",query:S})},x=()=>{const k=u.value;if(k==null){alert(e("mainPage.selectFolderFirst"));return}r.push({path:"/course/new",query:{parentId:k.toString()}})};return(k,S)=>(J(),le("div",DM,[N("div",LM,[se(A1,{"forest-id":O(s),path:t.path,onRootClick:S[0]||(S[0]=T=>f("/")),onBreadcrumbDrop:h},{item:De(({item:T})=>[N("button",{class:"truncate max-w-40 inline-block align-middle hover:underline",onClick:A=>f(T.path)},re(T.name),9,FM)]),_:1},8,["forest-id","path"])]),N("div",$M,[o.value?(J(),le("div",BM,re(O(e)("mainPage.loading")),1)):(J(),Ke(PM,{key:1,items:c.value,"parent-id":u.value,"forest-id":O(s),class:"px-2",onDropNode:p,onClick:g,onEdit:v,onDelete:y,onDropInto:m},null,8,["items","parent-id","forest-id"])),o.value?Ve("",!0):(J(),le("div",VM,[N("button",{type:"button",class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:b,title:O(e)("mainPage.addSubFolderTitle")},re(O(e)("mainPage.addFolder")),9,HM),N("button",{type:"button",class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:u.value==null,onClick:x,title:u.value==null?O(e)("mainPage.selectFolderFirst"):O(e)("mainPage.addCourseTitle")},re(O(e)("mainPage.addCourse")),9,jM)]))])]))}}),zM={class:"relative"},WM={class:"relative"},UM={class:"block truncate text-sm"},qM=["innerHTML"],KM={key:1,class:"absolute z-10 mt-1 w-full rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},GM={class:"relative"},YM={class:"px-3 py-2 text-sm text-gray-500 text-center"},JM=xe({__name:"GeneralFolderPicker",props:{folders:{},selectedFolderId:{},getFolderPath:{},onSelect:{},allowRoot:{type:Boolean,default:!0},rootText:{default:"Root"},selectFolderButtonText:{default:"Select folder"},noFoldersFoundText:{default:"No folders found"}},setup(t){const e=t,n=H(""),r=H(null),s=H(null),o=m=>{const g=document.createElement("div");return g.textContent=m,g.innerHTML},i=m=>m.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),l=(m,g)=>{if(!g.trim())return o(m);const v=new RegExp(`(${i(g)})`,"gi");return o(m).replace(v,'<mark class="bg-yellow-200">$1</mark>')},a=(m,g)=>g.trim()?m.toLowerCase().includes(g.toLowerCase()):!0,u=L(()=>{const m=n.value.trim();return m?e.folders.filter(g=>{const v=e.getFolderPath(g);return a(v,m)||a(g.name,m)}):e.folders}),c=L(()=>{if(!e.allowRoot)return!1;const m=n.value.trim().toLowerCase();if(!m)return!0;const g=e.rootText.toLowerCase();return a(g,m)||a("root",m)}),d=L(()=>{const m=[],g=n.value.trim();return c.value&&m.push({id:"root",folder:null,highlightedText:l(e.rootText,g)}),u.value.forEach(v=>{const y=e.getFolderPath(v);m.push({id:v.id,folder:v,highlightedText:l(y,g)})}),m}),f=L({get(){return e.selectedFolderId==null?null:e.folders.find(m=>m.id===e.selectedFolderId)??null},set(m){e.onSelect(m?.id??null),n.value=""}}),p=L(()=>f.value?e.getFolderPath(f.value):e.allowRoot?e.rootText:e.selectFolderButtonText),h=async()=>{await bt();const m=s.value?.$el;if(m){const g=m.parentElement,v=g?.querySelector("button[data-headlessui-state]")||g?.querySelector("button");v&&v.click()}};return je(()=>e.selectedFolderId,()=>{n.value=""}),(m,g)=>(J(),Ke(O(GA),{modelValue:f.value,"onUpdate:modelValue":g[10]||(g[10]=v=>f.value=v),as:"div",nullable:""},{default:De(()=>[N("div",zM,[se(O(JA),{ref_key:"inputRef",ref:s,"model-value":p.value,readonly:"",class:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md text-left bg-white focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer","display-value":()=>p.value,onClick:h},null,8,["model-value","display-value"]),se(O(YA),{ref_key:"buttonRef",ref:r,class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:De(()=>[se(O(eO),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1},512),d.value.length>0?(J(),Ke(O(XA),{key:0,class:"absolute z-10 mt-1 max-h-60 w-full overflow-auto rounded-md bg-white py-1 text-base shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:De(()=>[N("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-3 py-2 z-10",onClick:g[3]||(g[3]=Bt(()=>{},["stop"])),onMousedown:g[4]||(g[4]=Bt(()=>{},["stop"])),style:{"pointer-events":"auto"}},[N("div",WM,[se(O(Ug),{class:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),Ss(N("input",{"onUpdate:modelValue":g[0]||(g[0]=v=>n.value=v),type:"search",disabled:!1,class:"w-full pl-8 pr-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search folders...",onClick:g[1]||(g[1]=Bt(()=>{},["stop"])),onMousedown:g[2]||(g[2]=Bt(()=>{},["stop"])),style:{"pointer-events":"auto"}},null,544),[[Cs,n.value]])])],32),(J(!0),le(Ye,null,Dn(d.value,v=>(J(),Ke(O(QA),{key:v.id??"root",value:v.folder,as:"template"},{default:De(({active:y,selected:b})=>[N("li",{class:Pe(["relative cursor-pointer select-none px-3 py-2",{"bg-blue-600 text-white":y,"bg-gray-100":b&&!y,"text-gray-900":!y}])},[N("span",UM,[N("span",{innerHTML:v.highlightedText},null,8,qM)])],2)]),_:2},1032,["value"]))),128))]),_:1})):Ve("",!0),d.value.length===0?(J(),le("div",KM,[N("div",{class:"sticky top-0 bg-white border-b border-gray-200 px-3 py-2 z-10",onClick:g[8]||(g[8]=Bt(()=>{},["stop"])),onMousedown:g[9]||(g[9]=Bt(()=>{},["stop"])),style:{"pointer-events":"auto"}},[N("div",GM,[se(O(Ug),{class:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),Ss(N("input",{"onUpdate:modelValue":g[5]||(g[5]=v=>n.value=v),type:"search",disabled:!1,class:"w-full pl-8 pr-2 py-1.5 text-sm border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search folders...",onClick:g[6]||(g[6]=Bt(()=>{},["stop"])),onMousedown:g[7]||(g[7]=Bt(()=>{},["stop"])),style:{"pointer-events":"auto"}},null,544),[[Cs,n.value]])])],32),N("div",YM,re(t.noFoldersFoundText),1)])):Ve("",!0)])]),_:1},8,["modelValue"]))}}),XM=zl(JM,[["__scopeId","data-v-b94ad8a2"]]),H1=xe({__name:"FolderPicker",props:{forestId:{},currentFolderId:{},value:{},excludeDescendantsOf:{default:null},allowRoot:{type:Boolean,default:!0}},emits:["update:value"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H([]),i=async()=>{o.value=await wn(r.forestId)};qe(()=>{i()}),je(()=>r.forestId,()=>{i()});const l=L(()=>{const p=r.excludeDescendantsOf;return o.value.filter(h=>h.deletedAt===null&&h.type!=="leaf").filter(h=>{if(!p||!h.path)return!0;const m=o.value.find(g=>g.id===p);return m?!h.path.startsWith(m.path):!0}).sort(Wp)}),a=p=>{const h=p.path.split("/").filter(Boolean).map(g=>Number(g)).filter(g=>Number.isFinite(g)),m=[];return h.forEach(g=>{const v=o.value.find(y=>y.id===g&&y.deletedAt===null);v&&m.push(v.name)}),m.length>0?m.join(" / "):p.name},u=L(()=>n("folderPicker.root")),c=L(()=>n("folderPicker.selectFolderButton")),d=L(()=>n("folderPicker.noFoldersFound")),f=p=>{s("update:value",p)};return(p,h)=>(J(),Ke(XM,{folders:l.value,"selected-folder-id":t.value,"get-folder-path":a,"on-select":f,"allow-root":t.allowRoot,"root-text":u.value,"select-folder-button-text":c.value,"no-folders-found-text":d.value},null,8,["folders","selected-folder-id","allow-root","root-text","select-folder-button-text","no-folders-found-text"]))}}),QM={class:"mx-auto max-w-2xl"},ZM={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},eN={class:"p-4 border-b border-gray-100"},tN={class:"text-lg font-semibold"},nN={class:"p-4 space-y-4"},rN={class:"block text-sm font-medium text-gray-700 mb-1"},sN=["placeholder"],oN={class:"block text-sm font-medium text-gray-700 mb-1"},iN={class:"flex gap-2 justify-end"},lN=["disabled"],av=xe({__name:"FolderEditorPage",setup(t){const{t:e}=Ot(),n=mi(),r=ec(),s=rt,o=H(null),i=H(""),l=H(null),a=H([]),u=async()=>{a.value=await wn(s)},c=L(()=>r.path==="/folder/new"),d=L(()=>o.value!=null?a.value.find(g=>g.id===o.value&&g.deletedAt===null)??null:null),f=L(()=>!!i.value.trim()),p=g=>{const v=g.split("/").filter(Boolean).map(b=>Number(b)).filter(b=>Number.isFinite(b)),y=v.length>0?v[v.length-1]:void 0;return y??null};qe(async()=>{if(await u(),c.value){const g=r.query.parentId;if(g){const v=Number(g);Number.isFinite(v)&&(l.value=v)}o.value=null}else{const g=r.params.path||"",v=g.endsWith("/")?g:`${g}/`;o.value=p(v),d.value?(i.value=d.value.name,l.value=d.value.parentId??null):n.push({path:"/"})}});const h=async()=>{if(i.value.trim())if(c.value){await C1(s,l.value,{name:i.value.trim(),type:"branch"});const g=l.value?a.value.find(v=>v.id===l.value)?.path??"/":"/";n.push({path:g})}else{if(!o.value)return;await _1(s,o.value,i.value.trim(),l.value);const g=l.value?a.value.find(v=>v.id===l.value)?.path??"/":"/";n.push({path:g})}},m=()=>{if(c.value){const g=l.value?a.value.find(v=>v.id===l.value)?.path??"/":"/";n.push({path:g})}else{const g=d.value;if(g){const v=g.parentId?a.value.find(y=>y.id===g.parentId&&y.deletedAt===null)?.path??"/":"/";n.push({path:v})}else n.push({path:"/"})}};return(g,v)=>(J(),le("div",QM,[N("div",ZM,[N("div",eN,[N("h1",tN,re(c.value?O(e)("folderEditor.newTitle"):O(e)("folderEditor.title")),1)]),N("div",nN,[N("div",null,[N("label",rN,re(O(e)("common.name")),1),Ss(N("input",{"onUpdate:modelValue":v[0]||(v[0]=y=>i.value=y),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:O(e)("folderEditor.namePlaceholder")},null,8,sN),[[Cs,i.value]])]),N("div",null,[N("label",oN,re(O(e)("common.parent")),1),se(H1,{"forest-id":O(s),"current-folder-id":o.value,"exclude-descendants-of":o.value,value:l.value,"allow-root":!0,"onUpdate:value":v[1]||(v[1]=y=>l.value=y)},null,8,["forest-id","current-folder-id","exclude-descendants-of","value"])]),N("div",iN,[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:m},re(O(e)("common.cancel")),1),N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!f.value,onClick:h},re(c.value?O(e)("common.create"):O(e)("common.save")),9,lN)])])])]))}});function Qt(t){this.content=t}Qt.prototype={constructor:Qt,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,s=r.find(t),o=r.content.slice();return s==-1?o.push(n||t,e):(o[s+1]=e,n&&(o[s]=n)),new Qt(o)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Qt(n)},addToStart:function(t,e){return new Qt([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Qt(n)},addBefore:function(t,e,n){var r=this.remove(e),s=r.content.slice(),o=r.find(t);return s.splice(o==-1?s.length:o,0,e,n),new Qt(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Qt.from(t),t.size?new Qt(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Qt.from(t),t.size?new Qt(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Qt.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Qt.from=function(t){if(t instanceof Qt)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Qt(e)};function j1(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(r),o=e.child(r);if(s==o){n+=s.nodeSize;continue}if(!s.sameMarkup(o))return n;if(s.isText&&s.text!=o.text){for(let i=0;s.text[i]==o.text[i];i++)n++;return n}if(s.content.size||o.content.size){let i=j1(s.content,o.content,n+1);if(i!=null)return i}n+=s.nodeSize}}function z1(t,e,n,r){for(let s=t.childCount,o=e.childCount;;){if(s==0||o==0)return s==o?null:{a:n,b:r};let i=t.child(--s),l=e.child(--o),a=i.nodeSize;if(i==l){n-=a,r-=a;continue}if(!i.sameMarkup(l))return{a:n,b:r};if(i.isText&&i.text!=l.text){let u=0,c=Math.min(i.text.length,l.text.length);for(;u<c&&i.text[i.text.length-u-1]==l.text[l.text.length-u-1];)u++,n--,r--;return{a:n,b:r}}if(i.content.size||l.content.size){let u=z1(i.content,l.content,n-1,r-1);if(u)return u}n-=a,r-=a}}class Z{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,s=0,o){for(let i=0,l=0;l<n;i++){let a=this.content[i],u=l+a.nodeSize;if(u>e&&r(a,s+l,o||null,i)!==!1&&a.content.size){let c=l+1;a.nodesBetween(Math.max(0,e-c),Math.min(a.content.size,n-c),r,s+c)}l=u}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,s){let o="",i=!0;return this.nodesBetween(e,n,(l,a)=>{let u=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?s?typeof s=="function"?s(l):s:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&u||l.isTextblock)&&r&&(i?i=!1:o+=r),o+=u},0),o}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,s=this.content.slice(),o=0;for(n.isText&&n.sameMarkup(r)&&(s[s.length-1]=n.withText(n.text+r.text),o=1);o<e.content.length;o++)s.push(e.content[o]);return new Z(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],s=0;if(n>e)for(let o=0,i=0;i<n;o++){let l=this.content[o],a=i+l.nodeSize;a>e&&((i<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-i),Math.min(l.text.length,n-i)):l=l.cut(Math.max(0,e-i-1),Math.min(l.content.size,n-i-1))),r.push(l),s+=l.nodeSize),i=a}return new Z(r,s)}cutByIndex(e,n){return e==n?Z.empty:e==0&&n==this.content.length?this:new Z(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let s=this.content.slice(),o=this.size+n.nodeSize-r.nodeSize;return s[e]=n,new Z(s,o)}addToStart(e){return new Z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new Z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let s=this.content[n];e(s,r,n),r+=s.nodeSize}}findDiffStart(e,n=0){return j1(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return z1(this,e,n,r)}findIndex(e){if(e==0)return aa(0,e);if(e==this.size)return aa(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let s=this.child(n),o=r+s.nodeSize;if(o>=e)return o==e?aa(n+1,o):aa(n,r);r=o}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return Z.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new Z(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return Z.empty;let n,r=0;for(let s=0;s<e.length;s++){let o=e[s];r+=o.nodeSize,s&&o.isText&&e[s-1].sameMarkup(o)?(n||(n=e.slice(0,s)),n[n.length-1]=o.withText(n[n.length-1].text+o.text)):n&&n.push(o)}return new Z(n||e,r)}static from(e){if(!e)return Z.empty;if(e instanceof Z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new Z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}Z.empty=new Z([],0);const fd={index:0,offset:0};function aa(t,e){return fd.index=t,fd.offset=e,fd}function Xa(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Xa(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Xa(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let at=class Tf{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let s=0;s<e.length;s++){let o=e[s];if(this.eq(o))return e;if(this.type.excludes(o.type))n||(n=e.slice(0,s));else{if(o.type.excludes(this.type))return e;!r&&o.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),r=!0),n&&n.push(o)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Xa(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=r.create(n.attrs);return r.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Tf.none;if(e instanceof Tf)return[e];let n=e.slice();return n.sort((r,s)=>r.type.rank-s.type.rank),n}};at.none=[];class Qa extends Error{}class ye{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=U1(this.content,e+this.openStart,n);return r&&new ye(r,this.openStart,this.openEnd)}removeBetween(e,n){return new ye(W1(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ye.empty;let r=n.openStart||0,s=n.openEnd||0;if(typeof r!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ye(Z.fromJSON(e,n.content),r,s)}static maxOpen(e,n=!0){let r=0,s=0;for(let o=e.firstChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.firstChild)r++;for(let o=e.lastChild;o&&!o.isLeaf&&(n||!o.type.spec.isolating);o=o.lastChild)s++;return new ye(e,r,s)}}ye.empty=new ye(Z.empty,0,0);function W1(t,e,n){let{index:r,offset:s}=t.findIndex(e),o=t.maybeChild(r),{index:i,offset:l}=t.findIndex(n);if(s==e||o.isText){if(l!=n&&!t.child(i).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=i)throw new RangeError("Removing non-flat range");return t.replaceChild(r,o.copy(W1(o.content,e-s-1,n-s-1)))}function U1(t,e,n,r){let{index:s,offset:o}=t.findIndex(e),i=t.maybeChild(s);if(o==e||i.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=U1(i.content,e-o-1,n,i);return l&&t.replaceChild(s,i.copy(l))}function aN(t,e,n){if(n.openStart>t.depth)throw new Qa("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Qa("Inconsistent open depths");return q1(t,e,n,0)}function q1(t,e,n,r){let s=t.index(r),o=t.node(r);if(s==e.index(r)&&r<t.depth-n.openStart){let i=q1(t,e,n,r+1);return o.copy(o.content.replaceChild(s,i))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let i=t.parent,l=i.content;return po(i,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:i,end:l}=uN(n,t);return po(o,G1(t,i,l,e,r))}else return po(o,Za(t,e,r))}function K1(t,e){if(!e.type.compatibleContent(t.type))throw new Qa("Cannot join "+e.type.name+" onto "+t.type.name)}function Af(t,e,n){let r=t.node(n);return K1(r,e.node(n)),r}function fo(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Zi(t,e,n,r){let s=(e||t).node(n),o=0,i=e?e.index(n):s.childCount;t&&(o=t.index(n),t.depth>n?o++:t.textOffset&&(fo(t.nodeAfter,r),o++));for(let l=o;l<i;l++)fo(s.child(l),r);e&&e.depth==n&&e.textOffset&&fo(e.nodeBefore,r)}function po(t,e){return t.type.checkContent(e),t.copy(e)}function G1(t,e,n,r,s){let o=t.depth>s&&Af(t,e,s+1),i=r.depth>s&&Af(n,r,s+1),l=[];return Zi(null,t,s,l),o&&i&&e.index(s)==n.index(s)?(K1(o,i),fo(po(o,G1(t,e,n,r,s+1)),l)):(o&&fo(po(o,Za(t,e,s+1)),l),Zi(e,n,s,l),i&&fo(po(i,Za(n,r,s+1)),l)),Zi(r,null,s,l),new Z(l)}function Za(t,e,n){let r=[];if(Zi(null,t,n,r),t.depth>n){let s=Af(t,e,n+1);fo(po(s,Za(t,e,n+1)),r)}return Zi(e,null,n,r),new Z(r)}function uN(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let o=n-1;o>=0;o--)s=e.node(o).copy(Z.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class El{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],s=e.child(n);return r?e.child(n).cut(r):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let o=0;o<e;o++)s+=r.child(o).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return at.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),s=e.maybeChild(n);if(!r){let l=r;r=s,s=l}let o=r.marks;for(var i=0;i<o.length;i++)o[i].type.spec.inclusive===!1&&(!s||!o[i].isInSet(s.marks))&&(o=o[i--].removeFromSet(o));return o}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,s=e.parent.maybeChild(e.index());for(var o=0;o<r.length;o++)r[o].type.spec.inclusive===!1&&(!s||!r[o].isInSet(s.marks))&&(r=r[o--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new eu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],s=0,o=n;for(let i=e;;){let{index:l,offset:a}=i.content.findIndex(o),u=o-a;if(r.push(i,l,s+a),!u||(i=i.child(l),i.isText))break;o=u-1,s+=a+1}return new El(n,r,o)}static resolveCached(e,n){let r=uv.get(e);if(r)for(let o=0;o<r.elts.length;o++){let i=r.elts[o];if(i.pos==n)return i}else uv.set(e,r=new cN);let s=r.elts[r.i]=El.resolve(e,n);return r.i=(r.i+1)%dN,s}}class cN{constructor(){this.elts=[],this.i=0}}const dN=12,uv=new WeakMap;class eu{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const fN=Object.create(null);let Ts=class If{constructor(e,n,r,s=at.none){this.type=e,this.attrs=n,this.marks=s,this.content=r||Z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,s=0){this.content.nodesBetween(e,n,r,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,s){return this.content.textBetween(e,n,r,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Xa(this.attrs,n||e.defaultAttrs||fN)&&at.sameSet(this.marks,r||at.none)}copy(e=null){return e==this.content?this:new If(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new If(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return ye.empty;let s=this.resolve(e),o=this.resolve(n),i=r?0:s.sharedDepth(n),l=s.start(i),u=s.node(i).content.cut(s.pos-l,o.pos-l);return new ye(u,s.depth-i,o.depth-i)}replace(e,n,r){return aN(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let s=this.content.child(n-1);return{node:s,index:n-1,offset:r-s.nodeSize}}resolve(e){return El.resolveCached(this,e)}resolveNoCache(e){return El.resolve(this,e)}rangeHasMark(e,n,r){let s=!1;return n>e&&this.nodesBetween(e,n,o=>(r.isInSet(o.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Y1(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=Z.empty,s=0,o=r.childCount){let i=this.contentMatchAt(e).matchFragment(r,s,o),l=i&&i.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=s;a<o;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,s){if(s&&!this.type.allowsMarks(s))return!1;let o=this.contentMatchAt(e).matchType(r),i=o&&o.matchFragment(this.content,n);return i?i.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=at.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!at.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let s=Z.fromJSON(e,n.content),o=e.nodeType(n.type).create(n.attrs,s,r);return o.type.checkAttrs(o.attrs),o}};Ts.prototype.text=void 0;class tu extends Ts{constructor(e,n,r,s){if(super(e,n,null,s),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Y1(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new tu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new tu(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Y1(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class vo{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new pN(e,n);if(r.next==null)return vo.empty;let s=J1(r);r.next&&r.err("Unexpected trailing text");let o=xN(bN(s));return kN(o,r),o}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let s=this;for(let o=n;s&&o<r;o++)s=s.matchType(e.child(o).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let s=[this];function o(i,l){let a=i.matchFragment(e,r);if(a&&(!n||a.validEnd))return Z.from(l.map(u=>u.createAndFill()));for(let u=0;u<i.next.length;u++){let{type:c,next:d}=i.next[u];if(!(c.isText||c.hasRequiredAttrs())&&s.indexOf(d)==-1){s.push(d);let f=o(d,l.concat(c));if(f)return f}}return null}return o(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let s=r.shift(),o=s.match;if(o.matchType(e)){let i=[];for(let l=s;l.type;l=l.via)i.push(l.type);return i.reverse()}for(let i=0;i<o.next.length;i++){let{type:l,next:a}=o.next[i];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!s.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:s}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let s=0;s<r.next.length;s++)e.indexOf(r.next[s].next)==-1&&n(r.next[s].next)}return n(this),e.map((r,s)=>{let o=s+(r.validEnd?"*":" ")+" ";for(let i=0;i<r.next.length;i++)o+=(i?", ":"")+r.next[i].type.name+"->"+e.indexOf(r.next[i].next);return o}).join(`
`)}}vo.empty=new vo(!0);class pN{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function J1(t){let e=[];do e.push(hN(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function hN(t){let e=[];do e.push(mN(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function mN(t){let e=yN(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=gN(t,e);else break;return e}function cv(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function gN(t,e){let n=cv(t),r=n;return t.eat(",")&&(t.next!="}"?r=cv(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function vN(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let s=[];for(let o in n){let i=n[o];i.isInGroup(e)&&s.push(i)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function yN(t){if(t.eat("(")){let e=J1(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=vN(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function bN(t){let e=[[]];return s(o(t,0),n()),e;function n(){return e.push([])-1}function r(i,l,a){let u={term:a,to:l};return e[i].push(u),u}function s(i,l){i.forEach(a=>a.to=l)}function o(i,l){if(i.type=="choice")return i.exprs.reduce((a,u)=>a.concat(o(u,l)),[]);if(i.type=="seq")for(let a=0;;a++){let u=o(i.exprs[a],l);if(a==i.exprs.length-1)return u;s(u,l=n())}else if(i.type=="star"){let a=n();return r(l,a),s(o(i.expr,a),a),[r(a)]}else if(i.type=="plus"){let a=n();return s(o(i.expr,l),a),s(o(i.expr,a),a),[r(a)]}else{if(i.type=="opt")return[r(l)].concat(o(i.expr,l));if(i.type=="range"){let a=l;for(let u=0;u<i.min;u++){let c=n();s(o(i.expr,a),c),a=c}if(i.max==-1)s(o(i.expr,a),a);else for(let u=i.min;u<i.max;u++){let c=n();r(a,c),s(o(i.expr,a),c),a=c}return[r(a)]}else{if(i.type=="name")return[r(l,void 0,i.value)];throw new Error("Unknown expr type")}}}}function X1(t,e){return e-t}function dv(t,e){let n=[];return r(e),n.sort(X1);function r(s){let o=t[s];if(o.length==1&&!o[0].term)return r(o[0].to);n.push(s);for(let i=0;i<o.length;i++){let{term:l,to:a}=o[i];!l&&n.indexOf(a)==-1&&r(a)}}}function xN(t){let e=Object.create(null);return n(dv(t,0));function n(r){let s=[];r.forEach(i=>{t[i].forEach(({term:l,to:a})=>{if(!l)return;let u;for(let c=0;c<s.length;c++)s[c][0]==l&&(u=s[c][1]);dv(t,a).forEach(c=>{u||s.push([l,u=[]]),u.indexOf(c)==-1&&u.push(c)})})});let o=e[r.join(",")]=new vo(r.indexOf(t.length-1)>-1);for(let i=0;i<s.length;i++){let l=s[i][1].sort(X1);o.next.push({type:s[i][0],next:e[l.join(",")]||n(l)})}return o}}function kN(t,e){for(let n=0,r=[t];n<r.length;n++){let s=r[n],o=!s.validEnd,i=[];for(let l=0;l<s.next.length;l++){let{type:a,next:u}=s.next[l];i.push(a.name),o&&!(a.isText||a.hasRequiredAttrs())&&(o=!1),r.indexOf(u)==-1&&r.push(u)}o&&e.err("Only non-generatable nodes ("+i.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Q1(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function Z1(t,e){let n=Object.create(null);for(let r in t){let s=e&&e[r];if(s===void 0){let o=t[r];if(o.hasDefault)s=o.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=s}return n}function ex(t,e,n,r){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let o=t[s];o.validate&&o.validate(e[s])}}function tx(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new EN(t,r,e[r]);return n}let fv=class nx{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=tx(e,r.attrs),this.defaultAttrs=Q1(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==vo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Z1(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ts(this,this.computeAttrs(e),Z.from(n),at.setFrom(r))}createChecked(e=null,n,r){return n=Z.from(n),this.checkContent(n),new Ts(this,this.computeAttrs(e),n,at.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=Z.from(n),n.size){let i=this.contentMatch.fillBefore(n);if(!i)return null;n=i.append(n)}let s=this.contentMatch.matchFragment(n),o=s&&s.fillBefore(Z.empty,!0);return o?new Ts(this,e,n.append(o),at.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ex(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:at.none:e}static compile(e,n){let r=Object.create(null);e.forEach((o,i)=>r[o]=new nx(o,n,i));let s=n.spec.topNode||"doc";if(!r[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let o in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function wN(t,e,n){let r=n.split("|");return s=>{let o=s===null?"null":typeof s;if(r.indexOf(o)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${o}`)}}class EN{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?wN(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class hc{constructor(e,n,r,s){this.name=e,this.rank=n,this.schema=r,this.spec=s,this.attrs=tx(e,s.attrs),this.excluded=null;let o=Q1(this.attrs);this.instance=o?new at(this,o):null}create(e=null){return!e&&this.instance?this.instance:new at(this,Z1(this.attrs,e))}static compile(e,n){let r=Object.create(null),s=0;return e.forEach((o,i)=>r[o]=new hc(o,s++,n,i)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){ex(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class rx{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=Qt.from(e.nodes),n.marks=Qt.from(e.marks||{}),this.nodes=fv.compile(this.spec.nodes,this),this.marks=hc.compile(this.spec.marks,this);let r=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let o=this.nodes[s],i=o.spec.content||"",l=o.spec.marks;if(o.contentMatch=r[i]||(r[i]=vo.parse(i,this.nodes)),o.inlineContent=o.contentMatch.inlineContent,o.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!o.isInline||!o.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=o}o.markSet=l=="_"?null:l?pv(this,l.split(" ")):l==""||!o.inlineContent?[]:null}for(let s in this.marks){let o=this.marks[s],i=o.spec.excludes;o.excluded=i==null?[o]:i==""?[]:pv(this,i.split(" "))}this.nodeFromJSON=s=>Ts.fromJSON(this,s),this.markFromJSON=s=>at.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof fv){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,s)}text(e,n){let r=this.nodes.text;return new tu(r,r.defaultAttrs,e,at.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function pv(t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],o=t.marks[s],i=o;if(o)n.push(o);else for(let l in t.marks){let a=t.marks[l];(s=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(s)>-1)&&n.push(i=a)}if(!i)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function SN(t){return t.tag!=null}function CN(t){return t.style!=null}class As{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(s=>{if(SN(s))this.tags.push(s);else if(CN(s)){let o=/[^=]*/.exec(s.style)[0];r.indexOf(o)<0&&r.push(o),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let o=e.nodes[s.node];return o.contentMatch.matchType(o)})}parse(e,n={}){let r=new mv(this,n,!1);return r.addAll(e,at.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new mv(this,n,!0);return r.addAll(e,at.none,n.from,n.to),ye.maxOpen(r.finish())}matchTag(e,n,r){for(let s=r?this.tags.indexOf(r)+1:0;s<this.tags.length;s++){let o=this.tags[s];if(AN(e,o.tag)&&(o.namespace===void 0||e.namespaceURI==o.namespace)&&(!o.context||n.matchesContext(o.context))){if(o.getAttrs){let i=o.getAttrs(e);if(i===!1)continue;o.attrs=i||void 0}return o}}}matchStyle(e,n,r,s){for(let o=s?this.styles.indexOf(s)+1:0;o<this.styles.length;o++){let i=this.styles[o],l=i.style;if(!(l.indexOf(e)!=0||i.context&&!r.matchesContext(i.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(i.getAttrs){let a=i.getAttrs(n);if(a===!1)continue;i.attrs=a||void 0}return i}}}static schemaRules(e){let n=[];function r(s){let o=s.priority==null?50:s.priority,i=0;for(;i<n.length;i++){let l=n[i];if((l.priority==null?50:l.priority)<o)break}n.splice(i,0,s)}for(let s in e.marks){let o=e.marks[s].spec.parseDOM;o&&o.forEach(i=>{r(i=gv(i)),i.mark||i.ignore||i.clearMark||(i.mark=s)})}for(let s in e.nodes){let o=e.nodes[s].spec.parseDOM;o&&o.forEach(i=>{r(i=gv(i)),i.node||i.ignore||i.mark||(i.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new As(e,As.schemaRules(e)))}}const sx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},_N={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},ox={ol:!0,ul:!0},Sl=1,Of=2,el=4;function hv(t,e,n){return e!=null?(e?Sl:0)|(e==="full"?Of:0):t&&t.whitespace=="pre"?Sl|Of:n&~el}class ua{constructor(e,n,r,s,o,i){this.type=e,this.attrs=n,this.marks=r,this.solid=s,this.options=i,this.content=[],this.activeMarks=at.none,this.match=o||(i&el?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(Z.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,s;return(s=r.findWrapping(e.type))?(this.match=r,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Sl)){let r=this.content[this.content.length-1],s;if(r&&r.isText&&(s=/[ \t\r\n\u000c]+$/.exec(r.text))){let o=r;r.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=o.withText(o.text.slice(0,o.text.length-s[0].length))}}let n=Z.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(Z.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!sx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class mv{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let s=n.topNode,o,i=hv(null,n.preserveWhitespace,0)|(r?el:0);s?o=new ua(s.type,s.attrs,at.none,!0,n.topMatch||s.type.contentMatch,i):r?o=new ua(null,null,at.none,!0,null,i):o=new ua(e.schema.topNodeType,null,at.none,!0,null,i),this.nodes=[o],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,s=this.top,o=s.options&Of?"full":this.localPreserveWS||(s.options&Sl)>0,{schema:i}=this.parser;if(o==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(o)if(o==="full")r=r.replace(/\r\n?/g,`
`);else if(i.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(i.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(i.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(i.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=s.content[s.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(i.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let s=this.localPreserveWS,o=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let i=e.nodeName.toLowerCase(),l;ox.hasOwnProperty(i)&&this.parser.normalizeLists&&TN(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:_N.hasOwnProperty(i))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let u,c=this.needsBlock;if(sx.hasOwnProperty(i))o.content.length&&o.content[0].isInline&&this.open&&(this.open--,o=this.top),u=!0,o.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),u&&this.sync(o),this.needsBlock=c}else{let u=this.readStyles(e,n);u&&this.addElementByRule(e,a,u,a.consuming===!1?l:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let o=this.parser.matchedStyles[s],i=r.getPropertyValue(o);if(i)for(let l=void 0;;){let a=this.parser.matchStyle(o,i,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(u=>!a.clearMark(u)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,s){let o,i;if(n.node)if(i=this.parser.schema.nodes[n.node],i.isLeaf)this.insertNode(i.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(i,n.attrs||null,r,n.preserveWhitespace);a&&(o=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(i&&i.isLeaf)this.findInside(e);else if(s)this.addElement(e,r,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}o&&this.sync(l)&&this.open--}addAll(e,n,r,s){let o=r||0;for(let i=r?e.childNodes[r]:e.firstChild,l=s==null?null:e.childNodes[s];i!=l;i=i.nextSibling,++o)this.findAtPoint(e,o),this.addDOM(i,n);this.findAtPoint(e,o)}findPlace(e,n,r){let s,o;for(let i=this.open,l=0;i>=0;i--){let a=this.nodes[i],u=a.findWrapping(e);if(u&&(!s||s.length>u.length+l)&&(s=u,o=a,!u.length))break;if(a.solid){if(r)break;l+=2}}if(!s)return null;this.sync(o);for(let i=0;i<s.length;i++)n=this.enterInner(s[i],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let o=this.textblockFromContext();o&&(n=this.enterInner(o,null,n))}let s=this.findPlace(e,n,r);if(s){this.closeExtra();let o=this.top;o.match&&(o.match=o.match.matchType(e.type));let i=at.none;for(let l of s.concat(e.marks))(o.type?o.type.allowsMarkType(l.type):vv(l.type,e.type))&&(i=l.addToSet(i));return o.content.push(e.mark(i)),!0}return!1}enter(e,n,r,s){let o=this.findPlace(e.create(n),r,!1);return o&&(o=this.enterInner(e,n,r,!0,s)),o}enterInner(e,n,r,s=!1,o){this.closeExtra();let i=this.top;i.match=i.match&&i.match.matchType(e);let l=hv(e,o,i.options);i.options&el&&i.content.length==0&&(l|=el);let a=at.none;return r=r.filter(u=>(i.type?i.type.allowsMarkType(u.type):vv(u.type,e))?(a=u.addToSet(a),!1):!0),this.nodes.push(new ua(e,n,a,s,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Sl)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let s=r.length-1;s>=0;s--)e+=r[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(r?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,s=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),o=-(r?r.depth+1:0)+(s?0:1),i=(l,a)=>{for(;l>=0;l--){let u=n[l];if(u==""){if(l==n.length-1||l==0)continue;for(;a>=o;a--)if(i(l-1,a))return!0;return!1}else{let c=a>0||a==0&&s?this.nodes[a].type:r&&a>=o?r.node(a-o).type:null;if(!c||c.name!=u&&!c.isInGroup(u))return!1;a--}}return!0};return i(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function TN(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&ox.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function AN(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function gv(t){let e={};for(let n in t)e[n]=t[n];return e}function vv(t,e){let n=e.schema.nodes;for(let r in n){let s=n[r];if(!s.allowsMarkType(t))continue;let o=[],i=l=>{o.push(l);for(let a=0;a<l.edgeCount;a++){let{type:u,next:c}=l.edge(a);if(u==e||o.indexOf(c)<0&&i(c))return!0}};if(i(s.contentMatch))return!0}}class Eo{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=pd(n).createDocumentFragment());let s=r,o=[];return e.forEach(i=>{if(o.length||i.marks.length){let l=0,a=0;for(;l<o.length&&a<i.marks.length;){let u=i.marks[a];if(!this.marks[u.type.name]){a++;continue}if(!u.eq(o[l][0])||u.type.spec.spanning===!1)break;l++,a++}for(;l<o.length;)s=o.pop()[1];for(;a<i.marks.length;){let u=i.marks[a++],c=this.serializeMark(u,i.isInline,n);c&&(o.push([u,s]),s.appendChild(c.dom),s=c.contentDOM||c.dom)}}s.appendChild(this.serializeNodeInner(i,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:s}=Oa(pd(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let o=this.serializeMark(e.marks[s],e.isInline,n);o&&((o.contentDOM||o.dom).appendChild(r),r=o.dom)}return r}serializeMark(e,n,r={}){let s=this.marks[e.type.name];return s&&Oa(pd(r),s(e,n),null,e.attrs)}static renderSpec(e,n,r=null,s){return Oa(e,n,r,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Eo(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=yv(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return yv(e.marks)}}function yv(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function pd(t){return t.document||window.document}const bv=new WeakMap;function IN(t){let e=bv.get(t);return e===void 0&&bv.set(t,e=ON(t)),e}function ON(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let s=0;s<r.length;s++)n(r[s]);else for(let s in r)n(r[s])}return n(t),e}function Oa(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],o;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(o=IN(r))&&o.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let i=s.indexOf(" ");i>0&&(n=s.slice(0,i),s=s.slice(i+1));let l,a=n?t.createElementNS(n,s):t.createElement(s),u=e[1],c=1;if(u&&typeof u=="object"&&u.nodeType==null&&!Array.isArray(u)){c=2;for(let d in u)if(u[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),u[d]):d=="style"&&a.style?a.style.cssText=u[d]:a.setAttribute(d,u[d])}}for(let d=c;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>c)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:p,contentDOM:h}=Oa(t,f,n,r);if(a.appendChild(p),h){if(l)throw new RangeError("Multiple content holes");l=h}}}return{dom:a,contentDOM:l}}const ix=65535,lx=Math.pow(2,16);function MN(t,e){return t+e*lx}function xv(t){return t&ix}function NN(t){return(t-(t&ix))/lx}const ax=1,ux=2,Ma=4,cx=8;class Mf{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&cx)>0}get deletedBefore(){return(this.delInfo&(ax|Ma))>0}get deletedAfter(){return(this.delInfo&(ux|Ma))>0}get deletedAcross(){return(this.delInfo&Ma)>0}}class Pn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Pn.empty)return Pn.empty}recover(e){let n=0,r=xv(e);if(!this.inverted)for(let s=0;s<r;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[r*3]+n+NN(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let s=0,o=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?s:0);if(a>e)break;let u=this.ranges[l+o],c=this.ranges[l+i],d=a+u;if(e<=d){let f=u?e==a?-1:e==d?1:n:n,p=a+s+(f<0?0:c);if(r)return p;let h=e==(n<0?a:d)?null:MN(l/3,e-a),m=e==a?ux:e==d?ax:Ma;return(n<0?e!=a:e!=d)&&(m|=cx),new Mf(p,m,h)}s+=c-u}return r?e+s:new Mf(e+s,0,null)}touches(e,n){let r=0,s=xv(n),o=this.inverted?2:1,i=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let u=this.ranges[l+o],c=a+u;if(e<=c&&l==s*3)return!0;r+=this.ranges[l+i]-u}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let s=0,o=0;s<this.ranges.length;s+=3){let i=this.ranges[s],l=i-(this.inverted?o:0),a=i+(this.inverted?0:o),u=this.ranges[s+n],c=this.ranges[s+r];e(l,l+u,a,a+c),o+=c-u}}invert(){return new Pn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Pn.empty:new Pn(e<0?[0,-e,0]:[0,0,e])}}Pn.empty=new Pn([]);class Cl{constructor(e,n,r=0,s=e?e.length:0){this.mirror=n,this.from=r,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Cl(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?r+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?r-s-1:void 0)}}invert(){let e=new Cl;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let s=0;for(let o=this.from;o<this.to;o++){let i=this._maps[o],l=i.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(o);if(a!=null&&a>o&&a<this.to){o=a,e=this._maps[a].recover(l.recover);continue}}s|=l.delInfo,e=l.pos}return r?e:new Mf(e,s,null)}}const hd=Object.create(null);class pn{getMap(){return Pn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=hd[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in hd)throw new RangeError("Duplicate use of step JSON ID "+e);return hd[e]=n,n.prototype.jsonID=e,n}}class Rt{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Rt(e,null)}static fail(e){return new Rt(null,e)}static fromReplace(e,n,r,s){try{return Rt.ok(e.replace(n,r,s))}catch(o){if(o instanceof Qa)return Rt.fail(o.message);throw o}}}function Yp(t,e,n){let r=[];for(let s=0;s<t.childCount;s++){let o=t.child(s);o.content.size&&(o=o.copy(Yp(o.content,e,o))),o.isInline&&(o=e(o,n,s)),r.push(o)}return Z.fromArray(r)}class xs extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),s=r.node(r.sharedDepth(this.to)),o=new ye(Yp(n.content,(i,l)=>!i.isAtom||!l.type.allowsMarkType(this.mark.type)?i:i.mark(this.mark.addToSet(i.marks)),s),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,o)}invert(){return new sr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xs(n.pos,r.pos,this.mark)}merge(e){return e instanceof xs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xs(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("addMark",xs);class sr extends pn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new ye(Yp(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Rt.fromReplace(e,this.from,this.to,r)}invert(){return new xs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new sr(n.pos,r.pos,this.mark)}merge(e){return e instanceof sr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new sr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new sr(n.from,n.to,e.markFromJSON(n.mark))}}pn.jsonID("removeMark",sr);class ks extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new ye(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(r))return new ks(this.pos,n.marks[s]);return new ks(this.pos,this.mark)}}return new yo(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ks(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ks(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("addNodeMark",ks);class yo extends pn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Rt.fromReplace(e,this.pos,this.pos+1,new ye(Z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ks(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yo(n.pos,e.markFromJSON(n.mark))}}pn.jsonID("removeNodeMark",yo);class Wt extends pn{constructor(e,n,r,s=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=s}apply(e){return this.structure&&Nf(e,this.from,this.to)?Rt.fail("Structure replace would overwrite content"):Rt.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Pn([this.from,this.to-this.from,this.slice.size])}invert(e){return new Wt(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Wt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Wt)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ye.empty:new ye(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Wt(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ye.empty:new ye(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Wt(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Wt(n.from,n.to,ye.fromJSON(e,n.slice),!!n.structure)}}pn.jsonID("replace",Wt);class qt extends pn{constructor(e,n,r,s,o,i,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=s,this.slice=o,this.insert=i,this.structure=l}apply(e){if(this.structure&&(Nf(e,this.from,this.gapFrom)||Nf(e,this.gapTo,this.to)))return Rt.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Rt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Rt.fromReplace(e,this.from,this.to,r):Rt.fail("Content does not fit in gap")}getMap(){return new Pn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new qt(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),o=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||s<n.pos||o>r.pos?null:new qt(n.pos,r.pos,s,o,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new qt(n.from,n.to,n.gapFrom,n.gapTo,ye.fromJSON(e,n.slice),n.insert,!!n.structure)}}pn.jsonID("replaceAround",qt);function Nf(t,e,n){let r=t.resolve(e),s=n-e,o=r.depth;for(;s>0&&o>0&&r.indexAfter(o)==r.node(o).childCount;)o--,s--;if(s>0){let i=r.node(o).maybeChild(r.indexAfter(o));for(;s>0;){if(!i||i.isLeaf)return!0;i=i.firstChild,s--}}return!1}function RN(t,e,n,r){let s=[],o=[],i,l;t.doc.nodesBetween(e,n,(a,u,c)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&c.type.allowsMarkType(r.type)){let f=Math.max(u,e),p=Math.min(u+a.nodeSize,n),h=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(h)||(i&&i.to==f&&i.mark.eq(d[m])?i.to=p:s.push(i=new sr(f,p,d[m])));l&&l.to==f?l.to=p:o.push(l=new xs(f,p,r))}}),s.forEach(a=>t.step(a)),o.forEach(a=>t.step(a))}function PN(t,e,n,r){let s=[],o=0;t.doc.nodesBetween(e,n,(i,l)=>{if(!i.isInline)return;o++;let a=null;if(r instanceof hc){let u=i.marks,c;for(;c=r.isInSet(u);)(a||(a=[])).push(c),u=c.removeFromSet(u)}else r?r.isInSet(i.marks)&&(a=[r]):a=i.marks;if(a&&a.length){let u=Math.min(l+i.nodeSize,n);for(let c=0;c<a.length;c++){let d=a[c],f;for(let p=0;p<s.length;p++){let h=s[p];h.step==o-1&&d.eq(s[p].style)&&(f=h)}f?(f.to=u,f.step=o):s.push({style:d,from:Math.max(l,e),to:u,step:o})}}}),s.forEach(i=>t.step(new sr(i.from,i.to,i.style)))}function Jp(t,e,n,r=n.contentMatch,s=!0){let o=t.doc.nodeAt(e),i=[],l=e+1;for(let a=0;a<o.childCount;a++){let u=o.child(a),c=l+u.nodeSize,d=r.matchType(u.type);if(!d)i.push(new Wt(l,c,ye.empty));else{r=d;for(let f=0;f<u.marks.length;f++)n.allowsMarkType(u.marks[f].type)||t.step(new sr(l,c,u.marks[f]));if(s&&u.isText&&n.whitespace!="pre"){let f,p=/\r?\n|\r/g,h;for(;f=p.exec(u.text);)h||(h=new ye(Z.from(n.schema.text(" ",n.allowedMarks(u.marks))),0,0)),i.push(new Wt(l+f.index,l+f.index+f[0].length,h))}}l=c}if(!r.validEnd){let a=r.fillBefore(Z.empty,!0);t.replace(l,l,new ye(a,0,0))}for(let a=i.length-1;a>=0;a--)t.step(i[a])}function DN(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function bi(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,s=0,o=0;;--r){let i=t.$from.node(r),l=t.$from.index(r)+s,a=t.$to.indexAfter(r)-o;if(r<t.depth&&i.canReplace(l,a,n))return r;if(r==0||i.type.spec.isolating||!DN(i,l,a))break;l&&(s=1),a<i.childCount&&(o=1)}return null}function LN(t,e,n){let{$from:r,$to:s,depth:o}=e,i=r.before(o+1),l=s.after(o+1),a=i,u=l,c=Z.empty,d=0;for(let h=o,m=!1;h>n;h--)m||r.index(h)>0?(m=!0,c=Z.from(r.node(h).copy(c)),d++):a--;let f=Z.empty,p=0;for(let h=o,m=!1;h>n;h--)m||s.after(h+1)<s.end(h)?(m=!0,f=Z.from(s.node(h).copy(f)),p++):u++;t.step(new qt(a,u,i,l,new ye(c.append(f),d,p),c.size-d,!0))}function Xp(t,e,n=null,r=t){let s=FN(t,e),o=s&&$N(r,e);return o?s.map(kv).concat({type:e,attrs:n}).concat(o.map(kv)):null}function kv(t){return{type:t,attrs:null}}function FN(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.contentMatchAt(r).findWrapping(e);if(!o)return null;let i=o.length?o[0]:e;return n.canReplaceWith(r,s,i)?o:null}function $N(t,e){let{parent:n,startIndex:r,endIndex:s}=t,o=n.child(r),i=e.contentMatch.findWrapping(o.type);if(!i)return null;let a=(i.length?i[i.length-1]:e).contentMatch;for(let u=r;a&&u<s;u++)a=a.matchType(n.child(u).type);return!a||!a.validEnd?null:i}function BN(t,e,n){let r=Z.empty;for(let i=n.length-1;i>=0;i--){if(r.size){let l=n[i].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=Z.from(n[i].type.create(n[i].attrs,r))}let s=e.start,o=e.end;t.step(new qt(s,o,s,o,new ye(r,0,0),n.length,!0))}function VN(t,e,n,r,s){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let o=t.steps.length;t.doc.nodesBetween(e,n,(i,l)=>{let a=typeof s=="function"?s(i):s;if(i.isTextblock&&!i.hasMarkup(r,a)&&HN(t.doc,t.mapping.slice(o).map(l),r)){let u=null;if(r.schema.linebreakReplacement){let p=r.whitespace=="pre",h=!!r.contentMatch.matchType(r.schema.linebreakReplacement);p&&!h?u=!1:!p&&h&&(u=!0)}u===!1&&fx(t,i,l,o),Jp(t,t.mapping.slice(o).map(l,1),r,void 0,u===null);let c=t.mapping.slice(o),d=c.map(l,1),f=c.map(l+i.nodeSize,1);return t.step(new qt(d,f,d+1,f-1,new ye(Z.from(r.create(a,null,i.marks)),0,0),1,!0)),u===!0&&dx(t,i,l,o),!1}})}function dx(t,e,n,r){e.forEach((s,o)=>{if(s.isText){let i,l=/\r?\n|\r/g;for(;i=l.exec(s.text);){let a=t.mapping.slice(r).map(n+1+o+i.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function fx(t,e,n,r){e.forEach((s,o)=>{if(s.type==s.type.schema.linebreakReplacement){let i=t.mapping.slice(r).map(n+1+o);t.replaceWith(i,i+1,e.type.schema.text(`
`))}})}function HN(t,e,n){let r=t.resolve(e),s=r.index();return r.parent.canReplaceWith(s,s+1,n)}function jN(t,e,n,r,s){let o=t.doc.nodeAt(e);if(!o)throw new RangeError("No node at given position");n||(n=o.type);let i=n.create(r,null,s||o.marks);if(o.isLeaf)return t.replaceWith(e,e+o.nodeSize,i);if(!n.validContent(o.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new qt(e,e+o.nodeSize,e+1,e+o.nodeSize-1,new ye(Z.from(i),0,0),1,!0))}function Ur(t,e,n=1,r){let s=t.resolve(e),o=s.depth-n,i=r&&r[r.length-1]||s.parent;if(o<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!i.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let u=s.depth-1,c=n-2;u>o;u--,c--){let d=s.node(u),f=s.index(u);if(d.type.spec.isolating)return!1;let p=d.content.cutByIndex(f,d.childCount),h=r&&r[c+1];h&&(p=p.replaceChild(0,h.type.create(h.attrs)));let m=r&&r[c]||d;if(!d.canReplace(f+1,d.childCount)||!m.type.validContent(p))return!1}let l=s.indexAfter(o),a=r&&r[0];return s.node(o).canReplaceWith(l,l,a?a.type:s.node(o+1).type)}function zN(t,e,n=1,r){let s=t.doc.resolve(e),o=Z.empty,i=Z.empty;for(let l=s.depth,a=s.depth-n,u=n-1;l>a;l--,u--){o=Z.from(s.node(l).copy(o));let c=r&&r[u];i=Z.from(c?c.type.create(c.attrs,i):s.node(l).copy(i))}t.step(new Wt(e,e,new ye(o.append(i),n,n),!0))}function Vs(t,e){let n=t.resolve(e),r=n.index();return px(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function WN(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let s=0;s<e.childCount;s++){let o=e.child(s),i=o.type==r?t.type.schema.nodes.text:o.type;if(n=n.matchType(i),!n||!t.type.allowsMarks(o.marks))return!1}return n.validEnd}function px(t,e){return!!(t&&e&&!t.isLeaf&&WN(t,e))}function mc(t,e,n=-1){let r=t.resolve(e);for(let s=r.depth;;s--){let o,i,l=r.index(s);if(s==r.depth?(o=r.nodeBefore,i=r.nodeAfter):n>0?(o=r.node(s+1),l++,i=r.node(s).maybeChild(l)):(o=r.node(s).maybeChild(l-1),i=r.node(s+1)),o&&!o.isTextblock&&px(o,i)&&r.node(s).canReplace(l,l+1))return e;if(s==0)break;e=n<0?r.before(s):r.after(s)}}function UN(t,e,n){let r=null,{linebreakReplacement:s}=t.doc.type.schema,o=t.doc.resolve(e-n),i=o.node().type;if(s&&i.inlineContent){let c=i.whitespace=="pre",d=!!i.contentMatch.matchType(s);c&&!d?r=!1:!c&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let c=t.doc.resolve(e+n);fx(t,c.node(),c.before(),l)}i.inlineContent&&Jp(t,e+n-1,i,o.node().contentMatchAt(o.index()),r==null);let a=t.mapping.slice(l),u=a.map(e-n);if(t.step(new Wt(u,a.map(e+n,-1),ye.empty,!0)),r===!0){let c=t.doc.resolve(u);dx(t,c.node(),c.before(),t.steps.length)}return t}function qN(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let s=r.depth-1;s>=0;s--){let o=r.index(s);if(r.node(s).canReplaceWith(o,o,n))return r.before(s+1);if(o>0)return null}if(r.parentOffset==r.parent.content.size)for(let s=r.depth-1;s>=0;s--){let o=r.indexAfter(s);if(r.node(s).canReplaceWith(o,o,n))return r.after(s+1);if(o<r.node(s).childCount)return null}return null}function hx(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let o=0;o<n.openStart;o++)s=s.firstChild.content;for(let o=1;o<=(n.openStart==0&&n.size?2:1);o++)for(let i=r.depth;i>=0;i--){let l=i==r.depth?0:r.pos<=(r.start(i+1)+r.end(i+1))/2?-1:1,a=r.index(i)+(l>0?1:0),u=r.node(i),c=!1;if(o==1)c=u.canReplace(a,a,s);else{let d=u.contentMatchAt(a).findWrapping(s.firstChild.type);c=d&&u.canReplaceWith(a,a,d[0])}if(c)return l==0?r.pos:l<0?r.before(i+1):r.after(i+1)}return null}function gc(t,e,n=e,r=ye.empty){if(e==n&&!r.size)return null;let s=t.resolve(e),o=t.resolve(n);return mx(s,o,r)?new Wt(e,n,r):new KN(s,o,r).fit()}function mx(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class KN{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=Z.empty;for(let s=0;s<=e.depth;s++){let o=e.node(s);this.frontier.push({type:o.type,match:o.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=Z.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let u=this.findFittable();u?this.placeNodes(u):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,s=this.close(e<0?this.$to:r.doc.resolve(e));if(!s)return null;let o=this.placed,i=r.depth,l=s.depth;for(;i&&l&&o.childCount==1;)o=o.firstChild.content,i--,l--;let a=new ye(o,i,l);return e>-1?new qt(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new Wt(r.pos,s.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,s=this.unplaced.openEnd;r<e;r++){let o=n.firstChild;if(n.childCount>1&&(s=0),o.type.spec.isolating&&s<=r){e=r;break}n=o.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let s,o=null;r?(o=md(this.unplaced.content,r-1).firstChild,s=o.content):s=this.unplaced.content;let i=s.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:u}=this.frontier[l],c,d=null;if(n==1&&(i?u.matchType(i.type)||(d=u.fillBefore(Z.from(i),!1)):o&&a.compatibleContent(o.type)))return{sliceDepth:r,frontierDepth:l,parent:o,inject:d};if(n==2&&i&&(c=u.findWrapping(i.type)))return{sliceDepth:r,frontierDepth:l,parent:o,wrap:c};if(o&&u.matchType(o.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=md(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ye(e,n+1,Math.max(r,s.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,s=md(e,n);if(s.childCount<=1&&n>0){let o=e.size-n<=n+s.size;this.unplaced=new ye(Li(e,n-1,1),n-1,o?n-1:r)}else this.unplaced=new ye(Li(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:s,wrap:o}){for(;this.depth>n;)this.closeFrontierNode();if(o)for(let m=0;m<o.length;m++)this.openFrontierNode(o[m]);let i=this.unplaced,l=r?r.content:i.content,a=i.openStart-e,u=0,c=[],{match:d,type:f}=this.frontier[n];if(s){for(let m=0;m<s.childCount;m++)c.push(s.child(m));d=d.matchFragment(s)}let p=l.size+e-(i.content.size-i.openEnd);for(;u<l.childCount;){let m=l.child(u),g=d.matchType(m.type);if(!g)break;u++,(u>1||a==0||m.content.size)&&(d=g,c.push(gx(m.mark(f.allowedMarks(m.marks)),u==1?a:0,u==l.childCount?p:-1)))}let h=u==l.childCount;h||(p=-1),this.placed=Fi(this.placed,n,Z.from(c)),this.frontier[n].match=d,h&&p<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,g=l;m<p;m++){let v=g.lastChild;this.frontier.push({type:v.type,match:v.contentMatchAt(v.childCount)}),g=v.content}this.unplaced=h?e==0?ye.empty:new ye(Li(i.content,e-1,1),e-1,p<0?i.openEnd:e-1):new ye(Li(i.content,e,u),i.openStart,i.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!gd(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,s=this.$to.after(r);for(;r>1&&s==this.$to.end(--r);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:s}=this.frontier[n],o=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),i=gd(e,n,s,r,o);if(i){for(let l=n-1;l>=0;l--){let{match:a,type:u}=this.frontier[l],c=gd(e,l,u,a,!0);if(!c||c.childCount)continue e}return{depth:n,fit:i,move:o?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Fi(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let s=e.node(r),o=s.type.contentMatch.fillBefore(s.content,!0,e.index(r));this.openFrontierNode(s.type,s.attrs,o)}return e}openFrontierNode(e,n=null,r){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Fi(this.placed,this.depth,Z.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(Z.empty,!0);n.childCount&&(this.placed=Fi(this.placed,this.frontier.length,n))}}function Li(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Li(t.firstChild.content,e-1,n)))}function Fi(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Fi(t.lastChild.content,e-1,n)))}function md(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function gx(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,gx(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(Z.empty,!0)))),t.copy(r)}function gd(t,e,n,r,s){let o=t.node(e),i=s?t.indexAfter(e):t.index(e);if(i==o.childCount&&!n.compatibleContent(o.type))return null;let l=r.fillBefore(o.content,!0,i);return l&&!GN(n,o.content,i)?l:null}function GN(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function YN(t){return t.spec.defining||t.spec.definingForContent}function JN(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),o=t.doc.resolve(n);if(mx(s,o,r))return t.step(new Wt(e,n,r));let i=yx(s,o);i[i.length-1]==0&&i.pop();let l=-(s.depth+1);i.unshift(l);for(let f=s.depth,p=s.pos-1;f>0;f--,p--){let h=s.node(f).type.spec;if(h.defining||h.definingAsContext||h.isolating)break;i.indexOf(f)>-1?l=f:s.before(f)==p&&i.splice(1,0,-f)}let a=i.indexOf(l),u=[],c=r.openStart;for(let f=r.content,p=0;;p++){let h=f.firstChild;if(u.push(h),p==r.openStart)break;f=h.content}for(let f=c-1;f>=0;f--){let p=u[f],h=YN(p.type);if(h&&!p.sameMarkup(s.node(Math.abs(l)-1)))c=f;else if(h||!p.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let p=(f+c+1)%(r.openStart+1),h=u[p];if(h)for(let m=0;m<i.length;m++){let g=i[(m+a)%i.length],v=!0;g<0&&(v=!1,g=-g);let y=s.node(g-1),b=s.index(g-1);if(y.canReplaceWith(b,b,h.type,h.marks))return t.replace(s.before(g),v?o.after(g):n,new ye(vx(r.content,0,r.openStart,p),p,r.openEnd))}}let d=t.steps.length;for(let f=i.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let p=i[f];p<0||(e=s.before(p),n=o.after(p))}}function vx(t,e,n,r,s){if(e<n){let o=t.firstChild;t=t.replaceChild(0,o.copy(vx(o.content,e+1,n,r,o)))}if(e>r){let o=s.contentMatchAt(0),i=o.fillBefore(t).append(t);t=i.append(o.matchFragment(i).fillBefore(Z.empty,!0))}return t}function XN(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=qN(t.doc,e,r.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new ye(Z.from(r),0,0))}function QN(t,e,n){let r=t.doc.resolve(e),s=t.doc.resolve(n),o=yx(r,s);for(let i=0;i<o.length;i++){let l=o[i],a=i==o.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),s.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),s.indexAfter(l-1))))return t.delete(r.before(l),s.after(l))}for(let i=1;i<=r.depth&&i<=s.depth;i++)if(e-r.start(i)==r.depth-i&&n>r.end(i)&&s.end(i)-n!=s.depth-i&&r.start(i-1)==s.start(i-1)&&r.node(i-1).canReplace(r.index(i-1),s.index(i-1)))return t.delete(r.before(i),n);t.delete(e,n)}function yx(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let s=r;s>=0;s--){let o=t.start(s);if(o<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(o==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==o-1)&&n.push(s)}return n}class Xo extends pn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Rt.fail("No node at attribute step's position");let r=Object.create(null);for(let o in n.attrs)r[o]=n.attrs[o];r[this.attr]=this.value;let s=n.type.create(r,null,n.marks);return Rt.fromReplace(e,this.pos,this.pos+1,new ye(Z.from(s),0,n.isLeaf?0:1))}getMap(){return Pn.empty}invert(e){return new Xo(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Xo(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Xo(n.pos,n.attr,n.value)}}pn.jsonID("attr",Xo);class _l extends pn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Rt.ok(r)}getMap(){return Pn.empty}invert(e){return new _l(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new _l(n.attr,n.value)}}pn.jsonID("docAttr",_l);let ii=class extends Error{};ii=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ii.prototype=Object.create(Error.prototype);ii.prototype.constructor=ii;ii.prototype.name="TransformError";class bx{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Cl}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ii(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=ye.empty){let s=gc(this.doc,e,n,r);return s&&this.step(s),this}replaceWith(e,n,r){return this.replace(e,n,new ye(Z.from(r),0,0))}delete(e,n){return this.replace(e,n,ye.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return JN(this,e,n,r),this}replaceRangeWith(e,n,r){return XN(this,e,n,r),this}deleteRange(e,n){return QN(this,e,n),this}lift(e,n){return LN(this,e,n),this}join(e,n=1){return UN(this,e,n),this}wrap(e,n){return BN(this,e,n),this}setBlockType(e,n=e,r,s=null){return VN(this,e,n,r,s),this}setNodeMarkup(e,n,r=null,s){return jN(this,e,n,r,s),this}setNodeAttribute(e,n,r){return this.step(new Xo(e,n,r)),this}setDocAttribute(e,n){return this.step(new _l(e,n)),this}addNodeMark(e,n){return this.step(new ks(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof at)n.isInSet(r.marks)&&this.step(new yo(e,n));else{let s=r.marks,o,i=[];for(;o=n.isInSet(s);)i.push(new yo(e,o)),s=o.removeFromSet(s);for(let l=i.length-1;l>=0;l--)this.step(i[l])}return this}split(e,n=1,r){return zN(this,e,n,r),this}addMark(e,n,r){return RN(this,e,n,r),this}removeMark(e,n,r){return PN(this,e,n,r),this}clearIncompatible(e,n,r){return Jp(this,e,n,r),this}}const vd=Object.create(null);class Be{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new ZN(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ye.empty){let r=n.content.lastChild,s=null;for(let l=0;l<n.openEnd;l++)s=r,r=r.lastChild;let o=e.steps.length,i=this.ranges;for(let l=0;l<i.length;l++){let{$from:a,$to:u}=i[l],c=e.mapping.slice(o);e.replaceRange(c.map(a.pos),c.map(u.pos),l?ye.empty:n),l==0&&Sv(e,o,(r?r.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,s=this.ranges;for(let o=0;o<s.length;o++){let{$from:i,$to:l}=s[o],a=e.mapping.slice(r),u=a.map(i.pos),c=a.map(l.pos);o?e.deleteRange(u,c):(e.replaceRangeWith(u,c,n),Sv(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let s=e.parent.inlineContent?new Me(e):Lo(e.node(0),e.parent,e.pos,e.index(),n,r);if(s)return s;for(let o=e.depth-1;o>=0;o--){let i=n<0?Lo(e.node(0),e.node(o),e.before(o+1),e.index(o),n,r):Lo(e.node(0),e.node(o),e.after(o+1),e.index(o)+1,n,r);if(i)return i}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Fn(e.node(0))}static atStart(e){return Lo(e,e,0,0,1)||new Fn(e)}static atEnd(e){return Lo(e,e,e.content.size,e.childCount,-1)||new Fn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=vd[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in vd)throw new RangeError("Duplicate use of selection JSON ID "+e);return vd[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Me.between(this.$anchor,this.$head).getBookmark()}}Be.prototype.visible=!0;class ZN{constructor(e,n){this.$from=e,this.$to=n}}let wv=!1;function Ev(t){!wv&&!t.parent.inlineContent&&(wv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Me extends Be{constructor(e,n=e){Ev(e),Ev(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Be.near(r);let s=e.resolve(n.map(this.anchor));return new Me(s.parent.inlineContent?s:r,r)}replace(e,n=ye.empty){if(super.replace(e,n),n==ye.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Me&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new vc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Me(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let s=e.resolve(n);return new this(s,r==n?s:e.resolve(r))}static between(e,n,r){let s=e.pos-n.pos;if((!r||s)&&(r=s>=0?1:-1),!n.parent.inlineContent){let o=Be.findFrom(n,r,!0)||Be.findFrom(n,-r,!0);if(o)n=o.$head;else return Be.near(n,r)}return e.parent.inlineContent||(s==0?e=n:(e=(Be.findFrom(e,-r,!0)||Be.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new Me(e,n)}}Be.jsonID("text",Me);class vc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new vc(e.map(this.anchor),e.map(this.head))}resolve(e){return Me.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ce extends Be{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:s}=n.mapResult(this.anchor),o=e.resolve(s);return r?Be.near(o):new Ce(o)}content(){return new ye(Z.from(this.node),0,0)}eq(e){return e instanceof Ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Qp(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ce(e.resolve(n.anchor))}static create(e,n){return new Ce(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ce.prototype.visible=!1;Be.jsonID("node",Ce);class Qp{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new vc(r,r):new Qp(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ce.isSelectable(r)?new Ce(n):Be.near(n)}}class Fn extends Be{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ye.empty){if(n==ye.empty){e.delete(0,e.doc.content.size);let r=Be.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Fn(e)}map(e){return new Fn(e)}eq(e){return e instanceof Fn}getBookmark(){return eR}}Be.jsonID("all",Fn);const eR={map(){return this},resolve(t){return new Fn(t)}};function Lo(t,e,n,r,s,o=!1){if(e.inlineContent)return Me.create(t,n);for(let i=r-(s>0?0:1);s>0?i<e.childCount:i>=0;i+=s){let l=e.child(i);if(l.isAtom){if(!o&&Ce.isSelectable(l))return Ce.create(t,n-(s<0?l.nodeSize:0))}else{let a=Lo(t,l,n+s,s<0?l.childCount:0,s,o);if(a)return a}n+=l.nodeSize*s}return null}function Sv(t,e,n){let r=t.steps.length-1;if(r<e)return;let s=t.steps[r];if(!(s instanceof Wt||s instanceof qt))return;let o=t.mapping.maps[r],i;o.forEach((l,a,u,c)=>{i==null&&(i=c)}),t.setSelection(Be.near(t.doc.resolve(i),n))}const Cv=1,ca=2,_v=4;class tR extends bx{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Cv)&~ca,this.storedMarks=null,this}get selectionSet(){return(this.updated&Cv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=ca,this}ensureMarks(e){return at.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&ca)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~ca,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||at.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let o=this.storedMarks;if(!o){let i=this.doc.resolve(n);o=r==n?i.marks():i.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,s.text(e,o)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Be.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=_v,this}get scrolledIntoView(){return(this.updated&_v)>0}}function Tv(t,e){return!e||!t?t:t.bind(e)}class $i{constructor(e,n,r){this.name=e,this.init=Tv(n.init,r),this.apply=Tv(n.apply,r)}}const nR=[new $i("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new $i("selection",{init(t,e){return t.selection||Be.atStart(e.doc)},apply(t){return t.selection}}),new $i("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new $i("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class yd{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=nR.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $i(r.key,r.spec.state,r))})}}class zo{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let s=this.config.plugins[r];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),s=null;for(;;){let o=!1;for(let i=0;i<this.config.plugins.length;i++){let l=this.config.plugins[i];if(l.spec.appendTransaction){let a=s?s[i].n:0,u=s?s[i].state:this,c=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,u,r);if(c&&r.filterTransaction(c,i)){if(c.setMeta("appendedTransaction",e),!s){s=[];for(let d=0;d<this.config.plugins.length;d++)s.push(d<i?{state:r,n:n.length}:{state:this,n:0})}n.push(c),r=r.applyInner(c),o=!0}s&&(s[i]={state:r,n:n.length})}}if(!o)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new zo(this.config),r=this.config.fields;for(let s=0;s<r.length;s++){let o=r[s];n[o.name]=o.apply(e,this[o.name],this,n)}return n}get tr(){return new tR(this)}static create(e){let n=new yd(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new zo(n);for(let s=0;s<n.fields.length;s++)r[n.fields[s].name]=n.fields[s].init(e,r);return r}reconfigure(e){let n=new yd(this.schema,e.plugins),r=n.fields,s=new zo(n);for(let o=0;o<r.length;o++){let i=r[o].name;s[i]=this.hasOwnProperty(i)?this[i]:r[o].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[r],o=s.spec.state;o&&o.toJSON&&(n[r]=o.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new yd(e.schema,e.plugins),o=new zo(s);return s.fields.forEach(i=>{if(i.name=="doc")o.doc=Ts.fromJSON(e.schema,n.doc);else if(i.name=="selection")o.selection=Be.fromJSON(o.doc,n.selection);else if(i.name=="storedMarks")n.storedMarks&&(o.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],u=a.spec.state;if(a.key==i.name&&u&&u.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){o[i.name]=u.fromJSON.call(a,e,n[l],o);return}}o[i.name]=i.init(e,o)}}),o}}function xx(t,e,n){for(let r in t){let s=t[r];s instanceof Function?s=s.bind(e):r=="handleDOMEvents"&&(s=xx(s,e,{})),n[r]=s}return n}class _t{constructor(e){this.spec=e,this.props={},e.props&&xx(e.props,this,this.props),this.key=e.key?e.key.key:kx("plugin")}getState(e){return e[this.key]}}const bd=Object.create(null);function kx(t){return t in bd?t+"$"+ ++bd[t]:(bd[t]=0,t+"$")}class Yt{constructor(e="key"){this.key=kx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Zp=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function wx(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const Ex=(t,e,n)=>{let r=wx(t,n);if(!r)return!1;let s=eh(r);if(!s){let i=r.blockRange(),l=i&&bi(i);return l==null?!1:(e&&e(t.tr.lift(i,l).scrollIntoView()),!0)}let o=s.nodeBefore;if(Nx(t,s,e,-1))return!0;if(r.parent.content.size==0&&(li(o,"end")||Ce.isSelectable(o)))for(let i=r.depth;;i--){let l=gc(t.doc,r.before(i),r.after(i),ye.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(li(o,"end")?Be.findFrom(a.doc.resolve(a.mapping.map(s.pos,-1)),-1):Ce.create(a.doc,s.pos-o.nodeSize)),e(a.scrollIntoView())}return!0}if(i==1||r.node(i-1).childCount>1)break}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos-o.nodeSize,s.pos).scrollIntoView()),!0):!1},rR=(t,e,n)=>{let r=wx(t,n);if(!r)return!1;let s=eh(r);return s?Sx(t,s,e):!1},sR=(t,e,n)=>{let r=_x(t,n);if(!r)return!1;let s=th(r);return s?Sx(t,s,e):!1};function Sx(t,e,n){let r=e.nodeBefore,s=r,o=e.pos-1;for(;!s.isTextblock;o--){if(s.type.spec.isolating)return!1;let c=s.lastChild;if(!c)return!1;s=c}let i=e.nodeAfter,l=i,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let c=l.firstChild;if(!c)return!1;l=c}let u=gc(t.doc,o,a,ye.empty);if(!u||u.from!=o||u instanceof Wt&&u.slice.size>=a-o)return!1;if(n){let c=t.tr.step(u);c.setSelection(Me.create(c.doc,o)),n(c.scrollIntoView())}return!0}function li(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const Cx=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;o=eh(r)}let i=o&&o.nodeBefore;return!i||!Ce.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,o.pos-i.nodeSize)).scrollIntoView()),!0)};function eh(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function _x(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const Tx=(t,e,n)=>{let r=_x(t,n);if(!r)return!1;let s=th(r);if(!s)return!1;let o=s.nodeAfter;if(Nx(t,s,e,1))return!0;if(r.parent.content.size==0&&(li(o,"start")||Ce.isSelectable(o))){let i=gc(t.doc,r.before(),r.after(),ye.empty);if(i&&i.slice.size<i.to-i.from){if(e){let l=t.tr.step(i);l.setSelection(li(o,"start")?Be.findFrom(l.doc.resolve(l.mapping.map(s.pos)),1):Ce.create(l.doc,l.mapping.map(s.pos))),e(l.scrollIntoView())}return!0}}return o.isAtom&&s.depth==r.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+o.nodeSize).scrollIntoView()),!0):!1},Ax=(t,e,n)=>{let{$head:r,empty:s}=t.selection,o=r;if(!s)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;o=th(r)}let i=o&&o.nodeAfter;return!i||!Ce.isSelectable(i)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,o.pos)).scrollIntoView()),!0)};function th(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const oR=(t,e)=>{let n=t.selection,r=n instanceof Ce,s;if(r){if(n.node.isTextblock||!Vs(t.doc,n.from))return!1;s=n.from}else if(s=mc(t.doc,n.from,-1),s==null)return!1;if(e){let o=t.tr.join(s);r&&o.setSelection(Ce.create(o.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(o.scrollIntoView())}return!0},iR=(t,e)=>{let n=t.selection,r;if(n instanceof Ce){if(n.node.isTextblock||!Vs(t.doc,n.to))return!1;r=n.to}else if(r=mc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},lR=(t,e)=>{let{$from:n,$to:r}=t.selection,s=n.blockRange(r),o=s&&bi(s);return o==null?!1:(e&&e(t.tr.lift(s,o).scrollIntoView()),!0)},Ix=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function nh(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const aR=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let s=n.node(-1),o=n.indexAfter(-1),i=nh(s.contentMatchAt(o));if(!i||!s.canReplaceWith(o,o,i))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,i.createAndFill());a.setSelection(Be.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},Ox=(t,e)=>{let n=t.selection,{$from:r,$to:s}=n;if(n instanceof Fn||r.parent.inlineContent||s.parent.inlineContent)return!1;let o=nh(s.parent.contentMatchAt(s.indexAfter()));if(!o||!o.isTextblock)return!1;if(e){let i=(!r.parentOffset&&s.index()<s.parent.childCount?r:s).pos,l=t.tr.insert(i,o.createAndFill());l.setSelection(Me.create(l.doc,i+1)),e(l.scrollIntoView())}return!0},Mx=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let o=n.before();if(Ur(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}let r=n.blockRange(),s=r&&bi(r);return s==null?!1:(e&&e(t.tr.lift(r,s).scrollIntoView()),!0)};function uR(t){return(e,n)=>{let{$from:r,$to:s}=e.selection;if(e.selection instanceof Ce&&e.selection.node.isBlock)return!r.parentOffset||!Ur(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let o=[],i,l,a=!1,u=!1;for(let p=r.depth;;p--)if(r.node(p).isBlock){a=r.end(p)==r.pos+(r.depth-p),u=r.start(p)==r.pos-(r.depth-p),l=nh(r.node(p-1).contentMatchAt(r.indexAfter(p-1))),o.unshift(a&&l?{type:l}:null),i=p;break}else{if(p==1)return!1;o.unshift(null)}let c=e.tr;(e.selection instanceof Me||e.selection instanceof Fn)&&c.deleteSelection();let d=c.mapping.map(r.pos),f=Ur(c.doc,d,o.length,o);if(f||(o[0]=l?{type:l}:null,f=Ur(c.doc,d,o.length,o)),!f)return!1;if(c.split(d,o.length,o),!a&&u&&r.node(i).type!=l){let p=c.mapping.map(r.before(i)),h=c.doc.resolve(p);l&&r.node(i-1).canReplaceWith(h.index(),h.index()+1,l)&&c.setNodeMarkup(c.mapping.map(r.before(i)),l)}return n&&n(c.scrollIntoView()),!0}}const cR=uR(),dR=(t,e)=>{let{$from:n,to:r}=t.selection,s,o=n.sharedDepth(r);return o==0?!1:(s=n.before(o),e&&e(t.tr.setSelection(Ce.create(t.doc,s))),!0)};function fR(t,e,n){let r=e.nodeBefore,s=e.nodeAfter,o=e.index();return!r||!s||!r.type.compatibleContent(s.type)?!1:!r.content.size&&e.parent.canReplace(o-1,o)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(o,o+1)||!(s.isTextblock||Vs(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function Nx(t,e,n,r){let s=e.nodeBefore,o=e.nodeAfter,i,l,a=s.type.spec.isolating||o.type.spec.isolating;if(!a&&fR(t,e,n))return!0;let u=!a&&e.parent.canReplace(e.index(),e.index()+1);if(u&&(i=(l=s.contentMatchAt(s.childCount)).findWrapping(o.type))&&l.matchType(i[0]||o.type).validEnd){if(n){let p=e.pos+o.nodeSize,h=Z.empty;for(let v=i.length-1;v>=0;v--)h=Z.from(i[v].create(null,h));h=Z.from(s.copy(h));let m=t.tr.step(new qt(e.pos-1,p,e.pos,p,new ye(h,1,0),i.length,!0)),g=m.doc.resolve(p+2*i.length);g.nodeAfter&&g.nodeAfter.type==s.type&&Vs(m.doc,g.pos)&&m.join(g.pos),n(m.scrollIntoView())}return!0}let c=o.type.spec.isolating||r>0&&a?null:Be.findFrom(e,1),d=c&&c.$from.blockRange(c.$to),f=d&&bi(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(u&&li(o,"start",!0)&&li(s,"end")){let p=s,h=[];for(;h.push(p),!p.isTextblock;)p=p.lastChild;let m=o,g=1;for(;!m.isTextblock;m=m.firstChild)g++;if(p.canReplace(p.childCount,p.childCount,m.content)){if(n){let v=Z.empty;for(let b=h.length-1;b>=0;b--)v=Z.from(h[b].copy(v));let y=t.tr.step(new qt(e.pos-h.length,e.pos+o.nodeSize,e.pos+g,e.pos+o.nodeSize-g,new ye(v,h.length,0),0,!0));n(y.scrollIntoView())}return!0}}return!1}function Rx(t){return function(e,n){let r=e.selection,s=t<0?r.$from:r.$to,o=s.depth;for(;s.node(o).isInline;){if(!o)return!1;o--}return s.node(o).isTextblock?(n&&n(e.tr.setSelection(Me.create(e.doc,t<0?s.start(o):s.end(o)))),!0):!1}}const pR=Rx(-1),hR=Rx(1);function mR(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o),l=i&&Xp(i,t,e);return l?(r&&r(n.tr.wrap(i,l).scrollIntoView()),!0):!1}}function Av(t,e=null){return function(n,r){let s=!1;for(let o=0;o<n.selection.ranges.length&&!s;o++){let{$from:{pos:i},$to:{pos:l}}=n.selection.ranges[o];n.doc.nodesBetween(i,l,(a,u)=>{if(s)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)s=!0;else{let c=n.doc.resolve(u),d=c.index();s=c.parent.canReplaceWith(d,d+1,t)}})}if(!s)return!1;if(r){let o=n.tr;for(let i=0;i<n.selection.ranges.length;i++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[i];o.setBlockType(l,a,t,e)}r(o.scrollIntoView())}return!0}}function rh(...t){return function(e,n,r){for(let s=0;s<t.length;s++)if(t[s](e,n,r))return!0;return!1}}rh(Zp,Ex,Cx);rh(Zp,Tx,Ax);rh(Ix,Ox,Mx,cR);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function gR(t,e=null){return function(n,r){let{$from:s,$to:o}=n.selection,i=s.blockRange(o);if(!i)return!1;let l=r?n.tr:null;return vR(l,i,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function vR(t,e,n,r=null){let s=!1,o=e,i=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=i.resolve(e.start-2);o=new eu(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new eu(e.$from,i.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let l=Xp(o,n,r,e);return l?(t&&yR(t,e,l,s,n),!0):!1}function yR(t,e,n,r,s){let o=Z.empty;for(let c=n.length-1;c>=0;c--)o=Z.from(n[c].type.create(n[c].attrs,o));t.step(new qt(e.start-(r?2:0),e.end,e.start,e.end,new ye(o,0,0),n.length,!0));let i=0;for(let c=0;c<n.length;c++)n[c].type==s&&(i=c+1);let l=n.length-i,a=e.start+n.length-(r?2:0),u=e.parent;for(let c=e.startIndex,d=e.endIndex,f=!0;c<d;c++,f=!1)!f&&Ur(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=u.child(c).nodeSize;return t}function bR(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,i=>i.childCount>0&&i.firstChild.type==t);return o?n?r.node(o.depth-1).type==t?xR(e,n,t,o):kR(e,n,o):!0:!1}}function xR(t,e,n,r){let s=t.tr,o=r.end,i=r.$to.end(r.depth);o<i&&(s.step(new qt(o-1,i,o,i,new ye(Z.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new eu(s.doc.resolve(r.$from.pos),s.doc.resolve(i),r.depth));const l=bi(r);if(l==null)return!1;s.lift(r,l);let a=s.doc.resolve(s.mapping.map(o,-1)-1);return Vs(s.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&s.join(a.pos),e(s.scrollIntoView()),!0}function kR(t,e,n){let r=t.tr,s=n.parent;for(let p=n.end,h=n.endIndex-1,m=n.startIndex;h>m;h--)p-=s.child(h).nodeSize,r.delete(p-1,p+1);let o=r.doc.resolve(n.start),i=o.nodeAfter;if(r.mapping.map(n.end)!=n.start+o.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==s.childCount,u=o.node(-1),c=o.index(-1);if(!u.canReplace(c+(l?0:1),c+1,i.content.append(a?Z.empty:Z.from(s))))return!1;let d=o.pos,f=d+i.nodeSize;return r.step(new qt(d-(l?1:0),f+(a?1:0),d+1,f-1,new ye((l?Z.empty:Z.from(s.copy(Z.empty))).append(a?Z.empty:Z.from(s.copy(Z.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function wR(t){return function(e,n){let{$from:r,$to:s}=e.selection,o=r.blockRange(s,u=>u.childCount>0&&u.firstChild.type==t);if(!o)return!1;let i=o.startIndex;if(i==0)return!1;let l=o.parent,a=l.child(i-1);if(a.type!=t)return!1;if(n){let u=a.lastChild&&a.lastChild.type==l.type,c=Z.from(u?t.create():null),d=new ye(Z.from(t.create(null,Z.from(l.type.create(null,c)))),u?3:1,0),f=o.start,p=o.end;n(e.tr.step(new qt(f-(u?3:1),p,f,p,d,1,!0)).scrollIntoView())}return!0}}const en=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},ai=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Rf=null;const Fr=function(t,e,n){let r=Rf||(Rf=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},ER=function(){Rf=null},bo=function(t,e,n,r){return n&&(Iv(t,e,n,r,-1)||Iv(t,e,n,r,1))},SR=/^(img|br|input|textarea|hr)$/i;function Iv(t,e,n,r,s){for(var o;;){if(t==n&&e==r)return!0;if(e==(s<0?0:qn(t))){let i=t.parentNode;if(!i||i.nodeType!=1||Wl(t)||SR.test(t.nodeName)||t.contentEditable=="false")return!1;e=en(t)+(s<0?0:1),t=i}else if(t.nodeType==1){let i=t.childNodes[e+(s<0?-1:0)];if(i.nodeType==1&&i.contentEditable=="false")if(!((o=i.pmViewDesc)===null||o===void 0)&&o.ignoreForSelection)e+=s;else return!1;else t=i,e=s<0?qn(t):0}else return!1}}function qn(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function CR(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=qn(t)}else if(t.parentNode&&!Wl(t))e=en(t),t=t.parentNode;else return null}}function _R(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Wl(t))e=en(t)+1,t=t.parentNode;else return null}}function TR(t,e,n){for(let r=e==0,s=e==qn(t);r||s;){if(t==n)return!0;let o=en(t);if(t=t.parentNode,!t)return!1;r=r&&o==0,s=s&&o==qn(t)}}function Wl(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const yc=function(t){return t.focusNode&&bo(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function ro(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function AR(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function IR(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(qn(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(qn(r.startContainer),r.startOffset)}}}const Sr=typeof navigator<"u"?navigator:null,Ov=typeof document<"u"?document:null,Hs=Sr&&Sr.userAgent||"",Pf=/Edge\/(\d+)/.exec(Hs),Px=/MSIE \d/.exec(Hs),Df=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Hs),In=!!(Px||Df||Pf),Is=Px?document.documentMode:Df?+Df[1]:Pf?+Pf[1]:0,Gn=!In&&/gecko\/(\d+)/i.test(Hs);Gn&&+(/Firefox\/(\d+)/.exec(Hs)||[0,0])[1];const Lf=!In&&/Chrome\/(\d+)/.exec(Hs),fn=!!Lf,Dx=Lf?+Lf[1]:0,En=!In&&!!Sr&&/Apple Computer/.test(Sr.vendor),ui=En&&(/Mobile\/\w+/.test(Hs)||!!Sr&&Sr.maxTouchPoints>2),Wn=ui||(Sr?/Mac/.test(Sr.platform):!1),OR=Sr?/Win/.test(Sr.platform):!1,zr=/Android \d/.test(Hs),Ul=!!Ov&&"webkitFontSmoothing"in Ov.documentElement.style,MR=Ul?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function NR(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Nr(t,e){return typeof t=="number"?t:t[e]}function RR(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function Mv(t,e,n){let r=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,o=t.dom.ownerDocument;for(let i=n||t.dom;i;){if(i.nodeType!=1){i=ai(i);continue}let l=i,a=l==o.body,u=a?NR(o):RR(l),c=0,d=0;if(e.top<u.top+Nr(r,"top")?d=-(u.top-e.top+Nr(s,"top")):e.bottom>u.bottom-Nr(r,"bottom")&&(d=e.bottom-e.top>u.bottom-u.top?e.top+Nr(s,"top")-u.top:e.bottom-u.bottom+Nr(s,"bottom")),e.left<u.left+Nr(r,"left")?c=-(u.left-e.left+Nr(s,"left")):e.right>u.right-Nr(r,"right")&&(c=e.right-u.right+Nr(s,"right")),c||d)if(a)o.defaultView.scrollBy(c,d);else{let p=l.scrollLeft,h=l.scrollTop;d&&(l.scrollTop+=d),c&&(l.scrollLeft+=c);let m=l.scrollLeft-p,g=l.scrollTop-h;e={left:e.left-m,top:e.top-g,right:e.right-m,bottom:e.bottom-g}}let f=a?"fixed":getComputedStyle(i).position;if(/^(fixed|sticky)$/.test(f))break;i=f=="absolute"?i.offsetParent:ai(i)}}function PR(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,s;for(let o=(e.left+e.right)/2,i=n+1;i<Math.min(innerHeight,e.bottom);i+=5){let l=t.root.elementFromPoint(o,i);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,s=a.top;break}}return{refDOM:r,refTop:s,stack:Lx(t.dom)}}function Lx(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=ai(r));return e}function DR({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Fx(n,r==0?0:r-e)}function Fx(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:s,left:o}=t[n];r.scrollTop!=s+e&&(r.scrollTop=s+e),r.scrollLeft!=o&&(r.scrollLeft=o)}}let Io=null;function LR(t){if(t.setActive)return t.setActive();if(Io)return t.focus(Io);let e=Lx(t);t.focus(Io==null?{get preventScroll(){return Io={preventScroll:!0},!0}}:void 0),Io||(Io=!1,Fx(e,0))}function $x(t,e){let n,r=2e8,s,o=0,i=e.top,l=e.top,a,u;for(let c=t.firstChild,d=0;c;c=c.nextSibling,d++){let f;if(c.nodeType==1)f=c.getClientRects();else if(c.nodeType==3)f=Fr(c).getClientRects();else continue;for(let p=0;p<f.length;p++){let h=f[p];if(h.top<=i&&h.bottom>=l){i=Math.max(h.bottom,i),l=Math.min(h.top,l);let m=h.left>e.left?h.left-e.left:h.right<e.left?e.left-h.right:0;if(m<r){n=c,r=m,s=m&&n.nodeType==3?{left:h.right<e.left?h.right:h.left,top:e.top}:e,c.nodeType==1&&m&&(o=d+(e.left>=(h.left+h.right)/2?1:0));continue}}else h.top>e.top&&!a&&h.left<=e.left&&h.right>=e.left&&(a=c,u={left:Math.max(h.left,Math.min(h.right,e.left)),top:h.top});!n&&(e.left>=h.right&&e.top>=h.top||e.left>=h.left&&e.top>=h.bottom)&&(o=d+1)}}return!n&&a&&(n=a,s=u,r=0),n&&n.nodeType==3?FR(n,s):!n||r&&n.nodeType==1?{node:t,offset:o}:$x(n,s)}function FR(t,e){let n=t.nodeValue.length,r=document.createRange();for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=is(r,1);if(o.top!=o.bottom&&sh(e,o))return{node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)}}return{node:t,offset:0}}function sh(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function $R(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function BR(t,e,n){let{node:r,offset:s}=$x(e,n),o=-1;if(r.nodeType==1&&!r.firstChild){let i=r.getBoundingClientRect();o=i.left!=i.right&&n.left>(i.left+i.right)/2?1:-1}return t.docView.posFromDOM(r,s,o)}function VR(t,e,n,r){let s=-1;for(let o=e,i=!1;o!=t.dom;){let l=t.docView.nearestDesc(o,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!i&&a.left>r.left||a.top>r.top?s=l.posBefore:(!i&&a.right<r.left||a.bottom<r.top)&&(s=l.posAfter),i=!0),!l.contentDOM&&s<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;o=l.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function Bx(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let s=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),o=s;;){let i=t.childNodes[o];if(i.nodeType==1){let l=i.getClientRects();for(let a=0;a<l.length;a++){let u=l[a];if(sh(e,u))return Bx(i,e,u)}}if((o=(o+1)%r)==s)break}return t}function HR(t,e){let n=t.dom.ownerDocument,r,s=0,o=IR(n,e.left,e.top);o&&({node:r,offset:s}=o);let i=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!i||!t.dom.contains(i.nodeType!=1?i.parentNode:i)){let u=t.dom.getBoundingClientRect();if(!sh(e,u)||(i=Bx(t.dom,e,u),!i))return null}if(En)for(let u=i;r&&u;u=ai(u))u.draggable&&(r=void 0);if(i=$R(i,e),r){if(Gn&&r.nodeType==1&&(s=Math.min(s,r.childNodes.length),s<r.childNodes.length)){let c=r.childNodes[s],d;c.nodeName=="IMG"&&(d=c.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&s++}let u;Ul&&s&&r.nodeType==1&&(u=r.childNodes[s-1]).nodeType==1&&u.contentEditable=="false"&&u.getBoundingClientRect().top>=e.top&&s--,r==t.dom&&s==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(s==0||r.nodeType!=1||r.childNodes[s-1].nodeName!="BR")&&(l=VR(t,r,s,e))}l==null&&(l=BR(t,i,e));let a=t.docView.nearestDesc(i,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function Nv(t){return t.top<t.bottom||t.left<t.right}function is(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(Nv(r))return r}return Array.prototype.find.call(n,Nv)||t.getBoundingClientRect()}const jR=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Vx(t,e,n){let{node:r,offset:s,atom:o}=t.docView.domFromPos(e,n<0?-1:1),i=Ul||Gn;if(r.nodeType==3)if(i&&(jR.test(r.nodeValue)||(n<0?!s:s==r.nodeValue.length))){let a=is(Fr(r,s,s),n);if(Gn&&s&&/\s/.test(r.nodeValue[s-1])&&s<r.nodeValue.length){let u=is(Fr(r,s-1,s-1),-1);if(u.top==a.top){let c=is(Fr(r,s,s+1),-1);if(c.top!=a.top)return Ii(c,c.left<u.left)}}return a}else{let a=s,u=s,c=n<0?1:-1;return n<0&&!s?(u++,c=-1):n>=0&&s==r.nodeValue.length?(a--,c=1):n<0?a--:u++,Ii(is(Fr(r,a,u),c),c<0)}if(!t.state.doc.resolve(e-(o||0)).parent.inlineContent){if(o==null&&s&&(n<0||s==qn(r))){let a=r.childNodes[s-1];if(a.nodeType==1)return xd(a.getBoundingClientRect(),!1)}if(o==null&&s<qn(r)){let a=r.childNodes[s];if(a.nodeType==1)return xd(a.getBoundingClientRect(),!0)}return xd(r.getBoundingClientRect(),n>=0)}if(o==null&&s&&(n<0||s==qn(r))){let a=r.childNodes[s-1],u=a.nodeType==3?Fr(a,qn(a)-(i?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(u)return Ii(is(u,1),!1)}if(o==null&&s<qn(r)){let a=r.childNodes[s];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let u=a?a.nodeType==3?Fr(a,0,i?0:1):a.nodeType==1?a:null:null;if(u)return Ii(is(u,-1),!0)}return Ii(is(r.nodeType==3?Fr(r):r,-n),n>=0)}function Ii(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function xd(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Hx(t,e,n){let r=t.state,s=t.root.activeElement;r!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),s!=t.dom&&s&&s.focus()}}function zR(t,e,n){let r=e.selection,s=n=="up"?r.$from:r.$to;return Hx(t,e,()=>{let{node:o}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(o,!0);if(!l)break;if(l.node.isBlock){o=l.contentDOM||l.dom;break}o=l.dom.parentNode}let i=Vx(t,s.pos,1);for(let l=o.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=Fr(l,0,l.nodeValue.length).getClientRects();else continue;for(let u=0;u<a.length;u++){let c=a[u];if(c.bottom>c.top+1&&(n=="up"?i.top-c.top>(c.bottom-i.top)*2:c.bottom-i.bottom>(i.bottom-c.top)*2))return!1}}return!0})}const WR=/[\u0590-\u08ac]/;function UR(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let s=r.parentOffset,o=!s,i=s==r.parent.content.size,l=t.domSelection();return l?!WR.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?o:i:Hx(t,e,()=>{let{focusNode:a,focusOffset:u,anchorNode:c,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let p=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:h,focusOffset:m}=t.domSelectionRange(),g=h&&!p.contains(h.nodeType==1?h:h.parentNode)||a==h&&u==m;try{l.collapse(c,d),a&&(a!=c||u!=d)&&l.extend&&l.extend(a,u)}catch{}return f!=null&&(l.caretBidiLevel=f),g}):r.pos==r.start()||r.pos==r.end()}let Rv=null,Pv=null,Dv=!1;function qR(t,e,n){return Rv==e&&Pv==n?Dv:(Rv=e,Pv=n,Dv=n=="up"||n=="down"?zR(t,e,n):UR(t,e,n))}const Yn=0,Lv=1,io=2,Cr=3;class ql{constructor(e,n,r,s){this.parent=e,this.children=n,this.dom=r,this.contentDOM=s,this.dirty=Yn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let s=this.children[n];if(s==e)return r;r+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let o,i;if(e==this.contentDOM)o=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.previousSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}else{let o,i;if(e==this.contentDOM)o=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;o=e.nextSibling}for(;o&&!((i=o.pmViewDesc)&&i.parent==this);)o=o.nextSibling;return o?this.posBeforeChild(i):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>en(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!1;break}if(o.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let o=e;;o=o.parentNode){if(o==this.dom){s=!0;break}if(o.nextSibling)break}}return s??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,s=e;s;s=s.parentNode){let o=this.getDesc(s),i;if(o&&(!n||o.node))if(r&&(i=o.nodeDOM)&&!(i.nodeType==1?i.contains(e.nodeType==1?e:e.parentNode):i==e))r=!1;else return o}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let s=e;s;s=s.parentNode){let o=this.getDesc(s);if(o)return o.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let s=this.children[n],o=r+s.size;if(r==e&&o!=r){for(;!s.border&&s.children.length;)for(let i=0;i<s.children.length;i++){let l=s.children[i];if(l.size){s=l;break}}return s}if(e<o)return s.descAt(e-r-s.border);r=o}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,s=0;for(let o=0;r<this.children.length;r++){let i=this.children[r],l=o+i.size;if(l>e||i instanceof zx){s=e-o;break}o=l}if(s)return this.children[r].domFromPos(s-this.children[r].border,n);for(let o;r&&!(o=this.children[r-1]).size&&o instanceof jx&&o.side>=0;r--);if(n<=0){let o,i=!0;for(;o=r?this.children[r-1]:null,!(!o||o.dom.parentNode==this.contentDOM);r--,i=!1);return o&&n&&i&&!o.border&&!o.domAtom?o.domFromPos(o.size,n):{node:this.contentDOM,offset:o?en(o.dom)+1:0}}else{let o,i=!0;for(;o=r<this.children.length?this.children[r]:null,!(!o||o.dom.parentNode==this.contentDOM);r++,i=!1);return o&&i&&!o.border&&!o.domAtom?o.domFromPos(0,n):{node:this.contentDOM,offset:o?en(o.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,o=-1;for(let i=r,l=0;;l++){let a=this.children[l],u=i+a.size;if(s==-1&&e<=u){let c=i+a.border;if(e>=c&&n<=u-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,c);e=i;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){s=en(f.dom)+1;break}e-=f.size}s==-1&&(s=0)}if(s>-1&&(u>n||l==this.children.length-1)){n=u;for(let c=l+1;c<this.children.length;c++){let d=this.children[c];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){o=en(d.dom);break}n+=d.size}o==-1&&(o=this.contentDOM.childNodes.length);break}i=u}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:o}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,s=!1){let o=Math.min(e,n),i=Math.max(e,n);for(let p=0,h=0;p<this.children.length;p++){let m=this.children[p],g=h+m.size;if(o>h&&i<g)return m.setSelection(e-h-m.border,n-h-m.border,r,s);h=g}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),u=r.root.getSelection(),c=r.domSelectionRange(),d=!1;if((Gn||En)&&e==n){let{node:p,offset:h}=l;if(p.nodeType==3){if(d=!!(h&&p.nodeValue[h-1]==`
`),d&&h==p.nodeValue.length)for(let m=p,g;m;m=m.parentNode){if(g=m.nextSibling){g.nodeName=="BR"&&(l=a={node:g.parentNode,offset:en(g)+1});break}let v=m.pmViewDesc;if(v&&v.node&&v.node.isBlock)break}}else{let m=p.childNodes[h-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Gn&&c.focusNode&&c.focusNode!=a.node&&c.focusNode.nodeType==1){let p=c.focusNode.childNodes[c.focusOffset];p&&p.contentEditable=="false"&&(s=!0)}if(!(s||d&&En)&&bo(l.node,l.offset,c.anchorNode,c.anchorOffset)&&bo(a.node,a.offset,c.focusNode,c.focusOffset))return;let f=!1;if((u.extend||e==n)&&!(d&&Gn)){u.collapse(l.node,l.offset);try{e!=n&&u.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let h=l;l=a,a=h}let p=document.createRange();p.setEnd(a.node,a.offset),p.setStart(l.node,l.offset),u.removeAllRanges(),u.addRange(p)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],i=r+o.size;if(r==i?e<=i&&n>=r:e<i&&n>r){let l=r+o.border,a=i-o.border;if(e>=l&&n<=a){this.dirty=e==r||n==i?io:Lv,e==l&&n==a&&(o.contentLost||o.dom.parentNode!=this.contentDOM)?o.dirty=Cr:o.markDirty(e-l,n-l);return}else o.dirty=o.dom==o.contentDOM&&o.dom.parentNode==this.contentDOM&&!o.children.length?io:Cr}r=i}this.dirty=io}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?io:Lv;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class jx extends ql{constructor(e,n,r,s){let o,i=n.type.toDOM;if(typeof i=="function"&&(i=i(r,()=>{if(!o)return s;if(o.parent)return o.parent.posBeforeChild(o)})),!n.type.spec.raw){if(i.nodeType!=1){let l=document.createElement("span");l.appendChild(i),i=l}i.contentEditable="false",i.classList.add("ProseMirror-widget")}super(e,[],i,null),this.widget=n,this.widget=n,o=this}matchesWidget(e){return this.dirty==Yn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class KR extends ql{constructor(e,n,r,s){super(e,[],n,null),this.textDOM=r,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class xo extends ql{constructor(e,n,r,s,o){super(e,[],r,s),this.mark=n,this.spec=o}static create(e,n,r,s){let o=s.nodeViews[n.type.name],i=o&&o(n,s,r);return(!i||!i.dom)&&(i=Eo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new xo(e,n,i.dom,i.contentDOM||i.dom,i)}parseRule(){return this.dirty&Cr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Cr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Yn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Yn}}slice(e,n,r){let s=xo.create(this.parent,this.mark,!0,r),o=this.children,i=this.size;n<i&&(o=$f(o,n,i,r)),e>0&&(o=$f(o,0,e,r));for(let l=0;l<o.length;l++)o[l].parent=s;return s.children=o,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Os extends ql{constructor(e,n,r,s,o,i,l,a,u){super(e,[],o,i),this.node=n,this.outerDeco=r,this.innerDeco=s,this.nodeDOM=l}static create(e,n,r,s,o,i){let l=o.nodeViews[n.type.name],a,u=l&&l(n,o,()=>{if(!a)return i;if(a.parent)return a.parent.posBeforeChild(a)},r,s),c=u&&u.dom,d=u&&u.contentDOM;if(n.isText){if(!c)c=document.createTextNode(n.text);else if(c.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else c||({dom:c,contentDOM:d}=Eo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&c.nodeName!="BR"&&(c.hasAttribute("contenteditable")||(c.contentEditable="false"),n.type.spec.draggable&&(c.draggable=!0));let f=c;return c=qx(c,r,n),u?a=new GR(e,n,r,s,c,d||null,f,u,o,i+1):n.isText?new bc(e,n,r,s,c,f,o):new Os(e,n,r,s,c,d||null,f,o,i+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>Z.empty)}return e}matchesNode(e,n,r){return this.dirty==Yn&&e.eq(this.node)&&nu(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,s=n,o=e.composing?this.localCompositionInfo(e,n):null,i=o&&o.pos>-1?o:null,l=o&&o.pos<0,a=new JR(this,i&&i.node,e);ZR(this.node,this.innerDeco,(u,c,d)=>{u.spec.marks?a.syncToMarks(u.spec.marks,r,e):u.type.side>=0&&!d&&a.syncToMarks(c==this.node.childCount?at.none:this.node.child(c).marks,r,e),a.placeWidget(u,e,s)},(u,c,d,f)=>{a.syncToMarks(u.marks,r,e);let p;a.findNodeMatch(u,c,d,f)||l&&e.state.selection.from>s&&e.state.selection.to<s+u.nodeSize&&(p=a.findIndexWithChild(o.node))>-1&&a.updateNodeAt(u,c,d,p,e)||a.updateNextNode(u,c,d,e,f,s)||a.addNode(u,c,d,e,s),s+=u.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==io)&&(i&&this.protectLocalComposition(e,i),Wx(this.contentDOM,this.children,e),ui&&eP(this.dom))}localCompositionInfo(e,n){let{from:r,to:s}=e.state.selection;if(!(e.state.selection instanceof Me)||r<n||s>n+this.node.content.size)return null;let o=e.input.compositionNode;if(!o||!this.dom.contains(o.parentNode))return null;if(this.node.inlineContent){let i=o.nodeValue,l=tP(this.node.content,i,r-n,s-n);return l<0?null:{node:o,pos:l,text:i}}else return{node:o,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:s}){if(this.getDesc(n))return;let o=n;for(;o.parentNode!=this.contentDOM;o=o.parentNode){for(;o.previousSibling;)o.parentNode.removeChild(o.previousSibling);for(;o.nextSibling;)o.parentNode.removeChild(o.nextSibling);o.pmViewDesc&&(o.pmViewDesc=void 0)}let i=new KR(this,o,n,s);e.input.compositionNodes.push(i),this.children=$f(this.children,r,r+s.length,e,i)}update(e,n,r,s){return this.dirty==Cr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,s),!0)}updateInner(e,n,r,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=Yn}updateOuterDeco(e){if(nu(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Ux(this.dom,this.nodeDOM,Ff(this.outerDeco,this.node,n),Ff(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function Fv(t,e,n,r,s){qx(r,e,t);let o=new Os(void 0,t,e,n,r,r,r,s,0);return o.contentDOM&&o.updateChildren(s,0),o}class bc extends Os{constructor(e,n,r,s,o,i,l){super(e,n,r,s,o,null,i,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,s){return this.dirty==Cr||this.dirty!=Yn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Yn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=Yn,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let s=this.node.cut(e,n),o=document.createTextNode(s.text);return new bc(this.parent,s,this.outerDeco,this.innerDeco,o,o,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Cr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class zx extends ql{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Yn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class GR extends Os{constructor(e,n,r,s,o,i,l,a,u,c){super(e,n,r,s,o,i,l,u,c),this.spec=a}update(e,n,r,s){if(this.dirty==Cr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let o=this.spec.update(e,n,r);return o&&this.updateInner(e,n,r,s),o}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,s){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Wx(t,e,n){let r=t.firstChild,s=!1;for(let o=0;o<e.length;o++){let i=e[o],l=i.dom;if(l.parentNode==t){for(;l!=r;)r=$v(r),s=!0;r=r.nextSibling}else s=!0,t.insertBefore(l,r);if(i instanceof xo){let a=r?r.previousSibling:t.lastChild;Wx(i.contentDOM,i.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=$v(r),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const tl=function(t){t&&(this.nodeName=t)};tl.prototype=Object.create(null);const lo=[new tl];function Ff(t,e,n){if(t.length==0)return lo;let r=n?lo[0]:new tl,s=[r];for(let o=0;o<t.length;o++){let i=t[o].type.attrs;if(i){i.nodeName&&s.push(r=new tl(i.nodeName));for(let l in i){let a=i[l];a!=null&&(n&&s.length==1&&s.push(r=new tl(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return s}function Ux(t,e,n,r){if(n==lo&&r==lo)return e;let s=e;for(let o=0;o<r.length;o++){let i=r[o],l=n[o];if(o){let a;l&&l.nodeName==i.nodeName&&s!=t&&(a=s.parentNode)&&a.nodeName.toLowerCase()==i.nodeName||(a=document.createElement(i.nodeName),a.pmIsDeco=!0,a.appendChild(s),l=lo[0]),s=a}YR(s,l||lo[0],i)}return s}function YR(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let o=0;o<r.length;o++)s.indexOf(r[o])==-1&&t.classList.remove(r[o]);for(let o=0;o<s.length;o++)r.indexOf(s[o])==-1&&t.classList.add(s[o]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=r.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function qx(t,e,n){return Ux(t,t,lo,Ff(e,n,t.nodeType!=1))}function nu(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function $v(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class JR{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=XR(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let s=0,o=this.stack.length>>1,i=Math.min(o,e.length);for(;s<i&&(s==o-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<o;)this.destroyRest(),this.top.dirty=Yn,this.index=this.stack.pop(),this.top=this.stack.pop(),o--;for(;o<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let u=this.top.children[a];if(u.matchesMark(e[o])&&!this.isLocked(u.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=xo.create(this.top,e[o],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,o++}}findNodeMatch(e,n,r,s){let o=-1,i;if(s>=this.preMatch.index&&(i=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&i.matchesNode(e,n,r))o=this.top.children.indexOf(i,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let u=this.top.children[l];if(u.matchesNode(e,n,r)&&!this.preMatch.matched.has(u)){o=l;break}}return o<0?!1:(this.destroyBetween(this.index,o),this.index++,!0)}updateNodeAt(e,n,r,s,o){let i=this.top.children[s];return i.dirty==Cr&&i.dom==i.contentDOM&&(i.dirty=io),i.update(e,n,r,o)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==r)return s}return-1}e=n}}updateNextNode(e,n,r,s,o,i){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Os){let u=this.preMatch.matched.get(a);if(u!=null&&u!=o)return!1;let c=a.dom,d,f=this.isLocked(c)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Cr&&nu(n,a.outerDeco));if(!f&&a.update(e,n,r,s))return this.destroyBetween(this.index,l),a.dom!=c&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,s,i)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=io,d.updateChildren(s,i+1),d.dirty=Yn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,s,o,i){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!nu(r,e.outerDeco)||!s.eq(e.innerDeco))return null;let l=Os.create(this.top,n,r,s,o,i);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,s,o){let i=Os.create(this.top,e,n,r,s,o);i.contentDOM&&i.updateChildren(s,o+1),this.top.children.splice(this.index++,0,i),this.changed=!0}placeWidget(e,n,r){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let o=new jx(this.top,e,n,r);this.top.children.splice(this.index++,0,o),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof xo;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof bc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((En||fn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let s=new zx(this.top,[],r,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function XR(t,e){let n=e,r=n.children.length,s=t.childCount,o=new Map,i=[];e:for(;s>0;){let l;for(;;)if(r){let u=n.children[r-1];if(u instanceof xo)n=u,r=u.children.length;else{l=u,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(s-1))break;--s,o.set(l,s),i.push(l)}}return{index:s,matched:o,matches:i.reverse()}}function QR(t,e){return t.type.side-e.type.side}function ZR(t,e,n,r){let s=e.locals(t),o=0;if(s.length==0){for(let u=0;u<t.childCount;u++){let c=t.child(u);r(c,s,e.forChild(o,c),u),o+=c.nodeSize}return}let i=0,l=[],a=null;for(let u=0;;){let c,d;for(;i<s.length&&s[i].to==o;){let g=s[i++];g.widget&&(c?(d||(d=[c])).push(g):c=g)}if(c)if(d){d.sort(QR);for(let g=0;g<d.length;g++)n(d[g],u,!!a)}else n(c,u,!!a);let f,p;if(a)p=-1,f=a,a=null;else if(u<t.childCount)p=u,f=t.child(u++);else break;for(let g=0;g<l.length;g++)l[g].to<=o&&l.splice(g--,1);for(;i<s.length&&s[i].from<=o&&s[i].to>o;)l.push(s[i++]);let h=o+f.nodeSize;if(f.isText){let g=h;i<s.length&&s[i].from<g&&(g=s[i].from);for(let v=0;v<l.length;v++)l[v].to<g&&(g=l[v].to);g<h&&(a=f.cut(g-o),f=f.cut(0,g-o),h=g,p=-1)}else for(;i<s.length&&s[i].to<h;)i++;let m=f.isInline&&!f.isLeaf?l.filter(g=>!g.inline):l.slice();r(f,m,e.forChild(o,f),p),o=h}}function eP(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function tP(t,e,n,r){for(let s=0,o=0;s<t.childCount&&o<=r;){let i=t.child(s++),l=o;if(o+=i.nodeSize,!i.isText)continue;let a=i.text;for(;s<t.childCount;){let u=t.child(s++);if(o+=u.nodeSize,!u.isText)break;a+=u.text}if(o>=n){if(o>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let u=l<r?a.lastIndexOf(e,r-l-1):-1;if(u>=0&&u+e.length+l>=n)return l+u;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function $f(t,e,n,r,s){let o=[];for(let i=0,l=0;i<t.length;i++){let a=t[i],u=l,c=l+=a.size;u>=n||c<=e?o.push(a):(u<e&&o.push(a.slice(0,e-u,r)),s&&(o.push(s),s=void 0),c>n&&o.push(a.slice(n-u,a.size,r)))}return o}function oh(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),o=s&&s.size==0,i=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(i<0)return null;let l=r.resolve(i),a,u;if(yc(n)){for(a=i;s&&!s.node;)s=s.parent;let d=s.node;if(s&&d.isAtom&&Ce.isSelectable(d)&&s.parent&&!(d.isInline&&TR(n.focusNode,n.focusOffset,s.dom))){let f=s.posBefore;u=new Ce(i==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=i,f=i;for(let p=0;p<n.rangeCount;p++){let h=n.getRangeAt(p);d=Math.min(d,t.docView.posFromDOM(h.startContainer,h.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(h.endContainer,h.endOffset,-1))}if(d<0)return null;[a,i]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(i)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let c=r.resolve(a);if(!u){let d=e=="pointer"||t.state.selection.head<l.pos&&!o?1:-1;u=ih(t,c,l,d)}return u}function Kx(t){return t.editable?t.hasFocus():Yx(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qr(t,e=!1){let n=t.state.selection;if(Gx(t,n),!!Kx(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&fn){let r=t.domSelectionRange(),s=t.domObserver.currentSelection;if(r.anchorNode&&s.anchorNode&&bo(r.anchorNode,r.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)rP(t);else{let{anchor:r,head:s}=n,o,i;Bv&&!(n instanceof Me)&&(n.$from.parent.inlineContent||(o=Vv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(i=Vv(t,n.to))),t.docView.setSelection(r,s,t,e),Bv&&(o&&Hv(o),i&&Hv(i)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&nP(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const Bv=En||fn&&Dx<63;function Vv(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),s=r<n.childNodes.length?n.childNodes[r]:null,o=r?n.childNodes[r-1]:null;if(En&&s&&s.contentEditable=="false")return kd(s);if((!s||s.contentEditable=="false")&&(!o||o.contentEditable=="false")){if(s)return kd(s);if(o)return kd(o)}}function kd(t){return t.contentEditable="true",En&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function Hv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function nP(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Kx(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function rP(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,en(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&In&&Is<=11&&(n.disabled=!0,n.disabled=!1)}function Gx(t,e){if(e instanceof Ce){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(jv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else jv(t)}function jv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function ih(t,e,n,r){return t.someProp("createSelectionBetween",s=>s(t,e,n))||Me.between(e,n,r)}function zv(t){return t.editable&&!t.hasFocus()?!1:Yx(t)}function Yx(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function sP(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return bo(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Bf(t,e){let{$anchor:n,$head:r}=t.selection,s=e>0?n.max(r):n.min(r),o=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return o&&Be.findFrom(o,e)}function ds(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Wv(t,e,n){let r=t.state.selection;if(r instanceof Me)if(n.indexOf("s")>-1){let{$head:s}=r,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!o||o.isText||!o.isLeaf)return!1;let i=t.state.doc.resolve(s.pos+o.nodeSize*(e<0?-1:1));return ds(t,new Me(r.$anchor,i))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Bf(t.state,e);return s&&s instanceof Ce?ds(t,s):!1}else if(!(Wn&&n.indexOf("m")>-1)){let s=r.$head,o=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,i;if(!o||o.isText)return!1;let l=e<0?s.pos-o.nodeSize:s.pos;return o.isAtom||(i=t.docView.descAt(l))&&!i.contentDOM?Ce.isSelectable(o)?ds(t,new Ce(e<0?t.state.doc.resolve(s.pos-o.nodeSize):s)):Ul?ds(t,new Me(t.state.doc.resolve(e<0?l:l+o.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ce&&r.node.isInline)return ds(t,new Me(e>0?r.$to:r.$from));{let s=Bf(t.state,e);return s?ds(t,s):!1}}}function ru(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nl(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function Oo(t,e){return e<0?oP(t):iP(t)}function oP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s,o,i=!1;for(Gn&&n.nodeType==1&&r<ru(n)&&nl(n.childNodes[r],-1)&&(i=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(nl(l,-1))s=n,o=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Jx(n))break;{let l=n.previousSibling;for(;l&&nl(l,-1);)s=n.parentNode,o=en(l),l=l.previousSibling;if(l)n=l,r=ru(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}i?Vf(t,n,r):s&&Vf(t,s,o)}function iP(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let s=ru(n),o,i;for(;;)if(r<s){if(n.nodeType!=1)break;let l=n.childNodes[r];if(nl(l,1))o=n,i=++r;else break}else{if(Jx(n))break;{let l=n.nextSibling;for(;l&&nl(l,1);)o=l.parentNode,i=en(l)+1,l=l.nextSibling;if(l)n=l,r=0,s=ru(n);else{if(n=n.parentNode,n==t.dom)break;r=s=0}}}o&&Vf(t,o,i)}function Jx(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function lP(t,e){for(;t&&e==t.childNodes.length&&!Wl(t);)e=en(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function aP(t,e){for(;t&&!e&&!Wl(t);)e=en(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Vf(t,e,n){if(e.nodeType!=3){let o,i;(i=lP(e,n))?(e=i,n=0):(o=aP(e,n))&&(e=o,n=o.nodeValue.length)}let r=t.domSelection();if(!r)return;if(yc(r)){let o=document.createRange();o.setEnd(e,n),o.setStart(e,n),r.removeAllRanges(),r.addRange(o)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&qr(t)},50)}function Uv(t,e){let n=t.state.doc.resolve(e);if(!(fn||OR)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let o=t.coordsAtPos(e-1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left<s.left?"ltr":"rtl"}if(e<n.end()){let o=t.coordsAtPos(e+1),i=(o.top+o.bottom)/2;if(i>s.top&&i<s.bottom&&Math.abs(o.left-s.left)>1)return o.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function qv(t,e,n){let r=t.state.selection;if(r instanceof Me&&!r.empty||n.indexOf("s")>-1||Wn&&n.indexOf("m")>-1)return!1;let{$from:s,$to:o}=r;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let i=Bf(t.state,e);if(i&&i instanceof Ce)return ds(t,i)}if(!s.parent.inlineContent){let i=e<0?s:o,l=r instanceof Fn?Be.near(i,e):Be.findFrom(i,e);return l?ds(t,l):!1}return!1}function Kv(t,e){if(!(t.state.selection instanceof Me))return!0;let{$head:n,$anchor:r,empty:s}=t.state.selection;if(!n.sameParent(r))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let o=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(o&&!o.isText){let i=t.state.tr;return e<0?i.delete(n.pos-o.nodeSize,n.pos):i.delete(n.pos,n.pos+o.nodeSize),t.dispatch(i),!0}return!1}function Gv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function uP(t){if(!En||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Gv(t,r,"true"),setTimeout(()=>Gv(t,r,"false"),20)}return!1}function cP(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function dP(t,e){let n=e.keyCode,r=cP(e);if(n==8||Wn&&n==72&&r=="c")return Kv(t,-1)||Oo(t,-1);if(n==46&&!e.shiftKey||Wn&&n==68&&r=="c")return Kv(t,1)||Oo(t,1);if(n==13||n==27)return!0;if(n==37||Wn&&n==66&&r=="c"){let s=n==37?Uv(t,t.state.selection.from)=="ltr"?-1:1:-1;return Wv(t,s,r)||Oo(t,s)}else if(n==39||Wn&&n==70&&r=="c"){let s=n==39?Uv(t,t.state.selection.from)=="ltr"?1:-1:1;return Wv(t,s,r)||Oo(t,s)}else{if(n==38||Wn&&n==80&&r=="c")return qv(t,-1,r)||Oo(t,-1);if(n==40||Wn&&n==78&&r=="c")return uP(t)||qv(t,1,r)||Oo(t,1);if(r==(Wn?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function lh(t,e){t.someProp("transformCopied",p=>{e=p(e,t)});let n=[],{content:r,openStart:s,openEnd:o}=e;for(;s>1&&o>1&&r.childCount==1&&r.firstChild.childCount==1;){s--,o--;let p=r.firstChild;n.push(p.type.name,p.attrs!=p.type.defaultAttrs?p.attrs:null),r=p.content}let i=t.someProp("clipboardSerializer")||Eo.fromSchema(t.state.schema),l=nk(),a=l.createElement("div");a.appendChild(i.serializeFragment(r,{document:l}));let u=a.firstChild,c,d=0;for(;u&&u.nodeType==1&&(c=tk[u.nodeName.toLowerCase()]);){for(let p=c.length-1;p>=0;p--){let h=l.createElement(c[p]);for(;a.firstChild;)h.appendChild(a.firstChild);a.appendChild(h),d++}u=a.firstChild}u&&u.nodeType==1&&u.setAttribute("data-pm-slice",`${s} ${o}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",p=>p(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Xx(t,e,n,r,s){let o=s.parent.type.spec.code,i,l;if(!n&&!e)return null;let a=!!e&&(r||o||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,o||r,t)}),o)return l=new ye(Z.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{l=f(l,t,!0)}),l;let d=t.someProp("clipboardTextParser",f=>f(e,s,r,t));if(d)l=d;else{let f=s.marks(),{schema:p}=t.state,h=Eo.fromSchema(p);i=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let g=i.appendChild(document.createElement("p"));m&&g.appendChild(h.serializeNode(p.text(m,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),i=mP(n),Ul&&gP(i);let u=i&&i.querySelector("[data-pm-slice]"),c=u&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(u.getAttribute("data-pm-slice")||"");if(c&&c[3])for(let d=+c[3];d>0;d--){let f=i.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;i=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||As.fromSchema(t.state.schema)).parseSlice(i,{preserveWhitespace:!!(a||c),context:s,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!fP.test(f.parentNode.nodeName)?{ignore:!0}:null}})),c)l=vP(Yv(l,+c[1],+c[2]),c[4]);else if(l=ye.maxOpen(pP(l.content,s),!0),l.openStart||l.openEnd){let d=0,f=0;for(let p=l.content.firstChild;d<l.openStart&&!p.type.spec.isolating;d++,p=p.firstChild);for(let p=l.content.lastChild;f<l.openEnd&&!p.type.spec.isolating;f++,p=p.lastChild);l=Yv(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t,a)}),l}const fP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function pP(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),o,i=[];if(t.forEach(l=>{if(!i)return;let a=s.findWrapping(l.type),u;if(!a)return i=null;if(u=i.length&&o.length&&Zx(a,o,l,i[i.length-1],0))i[i.length-1]=u;else{i.length&&(i[i.length-1]=ek(i[i.length-1],o.length));let c=Qx(l,a);i.push(c),s=s.matchType(c.type),o=a}}),i)return Z.from(i)}return t}function Qx(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,Z.from(t));return t}function Zx(t,e,n,r,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let o=Zx(t,e,n,r.lastChild,s+1);if(o)return r.copy(r.content.replaceChild(r.childCount-1,o));if(r.contentMatchAt(r.childCount).matchType(s==t.length-1?n.type:t[s+1]))return r.copy(r.content.append(Z.from(Qx(n,t,s+1))))}}function ek(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ek(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(Z.empty,!0);return t.copy(n.append(r))}function Hf(t,e,n,r,s,o){let i=e<0?t.firstChild:t.lastChild,l=i.content;return t.childCount>1&&(o=0),s<r-1&&(l=Hf(l,e,n,r,s+1,o)),s>=n&&(l=e<0?i.contentMatchAt(0).fillBefore(l,o<=s).append(l):l.append(i.contentMatchAt(i.childCount).fillBefore(Z.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,i.copy(l))}function Yv(t,e,n){return e<t.openStart&&(t=new ye(Hf(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ye(Hf(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const tk={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Jv=null;function nk(){return Jv||(Jv=document.implementation.createHTMLDocument("title"))}let wd=null;function hP(t){let e=window.trustedTypes;return e?(wd||(wd=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),wd.createHTML(t)):t}function mP(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=nk().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),s;if((s=r&&tk[r[1].toLowerCase()])&&(t=s.map(o=>"<"+o+">").join("")+t+s.map(o=>"</"+o+">").reverse().join("")),n.innerHTML=hP(t),s)for(let o=0;o<s.length;o++)n=n.querySelector(s[o])||n;return n}function gP(t){let e=t.querySelectorAll(fn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function vP(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:s,openStart:o,openEnd:i}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;s=Z.from(a.create(r[l+1],s)),o++,i++}return new ye(s,o,i)}const Sn={},Cn={},yP={touchstart:!0,touchmove:!0};class bP{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function xP(t){for(let e in Sn){let n=Sn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{wP(t,r)&&!ah(t,r)&&(t.editable||!(r.type in Cn))&&n(t,r)},yP[e]?{passive:!0}:void 0)}En&&t.dom.addEventListener("input",()=>null),jf(t)}function ws(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function kP(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function jf(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>ah(t,r))})}function ah(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function wP(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function EP(t,e){!ah(t,e)&&Sn[e.type]&&(t.editable||!(e.type in Cn))&&Sn[e.type](t,e)}Cn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!sk(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(zr&&fn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ui&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",s=>s(t,ro(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||dP(t,n)?n.preventDefault():ws(t,"key")};Cn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Cn.keypress=(t,e)=>{let n=e;if(sk(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Wn&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Me)||!r.$from.sameParent(r.$to)){let s=String.fromCharCode(n.charCode),o=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",i=>i(t,r.$from.pos,r.$to.pos,s,o))&&t.dispatch(o()),n.preventDefault()}};function xc(t){return{left:t.clientX,top:t.clientY}}function SP(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function uh(t,e,n,r,s){if(r==-1)return!1;let o=t.state.doc.resolve(r);for(let i=o.depth+1;i>0;i--)if(t.someProp(e,l=>i>o.depth?l(t,n,o.nodeAfter,o.before(i),s,!0):l(t,n,o.node(i),o.before(i),s,!1)))return!0;return!1}function Qo(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function CP(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ce.isSelectable(r)?(Qo(t,new Ce(n)),!0):!1}function _P(t,e){if(e==-1)return!1;let n=t.state.selection,r,s;n instanceof Ce&&(r=n.node);let o=t.state.doc.resolve(e);for(let i=o.depth+1;i>0;i--){let l=i>o.depth?o.nodeAfter:o.node(i);if(Ce.isSelectable(l)){r&&n.$from.depth>0&&i>=n.$from.depth&&o.before(n.$from.depth+1)==n.$from.pos?s=o.before(n.$from.depth):s=o.before(i);break}}return s!=null?(Qo(t,Ce.create(t.state.doc,s)),!0):!1}function TP(t,e,n,r,s){return uh(t,"handleClickOn",e,n,r)||t.someProp("handleClick",o=>o(t,e,r))||(s?_P(t,n):CP(t,n))}function AP(t,e,n,r){return uh(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",s=>s(t,e,r))}function IP(t,e,n,r){return uh(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",s=>s(t,e,r))||OP(t,n,r)}function OP(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Qo(t,Me.create(r,0,r.content.size)),!0):!1;let s=r.resolve(e);for(let o=s.depth+1;o>0;o--){let i=o>s.depth?s.nodeAfter:s.node(o),l=s.before(o);if(i.inlineContent)Qo(t,Me.create(r,l+1,l+1+i.content.size));else if(Ce.isSelectable(i))Qo(t,Ce.create(r,l));else continue;return!0}}function ch(t){return su(t)}const rk=Wn?"metaKey":"ctrlKey";Sn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=ch(t),s=Date.now(),o="singleClick";s-t.input.lastClick.time<500&&SP(n,t.input.lastClick)&&!n[rk]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?o="doubleClick":t.input.lastClick.type=="doubleClick"&&(o="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:o,button:n.button};let i=t.posAtCoords(xc(n));i&&(o=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new MP(t,i,n,!!r)):(o=="doubleClick"?AP:IP)(t,i.pos,i.inside,n)?n.preventDefault():ws(t,"pointer"))};class MP{constructor(e,n,r,s){this.view=e,this.pos=n,this.event=r,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[rk],this.allowDefault=r.shiftKey;let o,i;if(n.inside>-1)o=e.state.doc.nodeAt(n.inside),i=n.inside;else{let c=e.state.doc.resolve(n.pos);o=c.parent,i=c.depth?c.before():0}const l=s?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:u}=e.state;(r.button==0&&o.type.spec.draggable&&o.type.spec.selectable!==!1||u instanceof Ce&&u.from<=i&&u.to>i)&&(this.mightDrag={node:o,pos:i,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Gn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ws(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(xc(e))),this.updateAllowDefault(e),this.allowDefault||!n?ws(this.view,"pointer"):TP(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||En&&this.mightDrag&&!this.mightDrag.node.isAtom||fn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Qo(this.view,Be.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ws(this.view,"pointer")}move(e){this.updateAllowDefault(e),ws(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Sn.touchstart=t=>{t.input.lastTouch=Date.now(),ch(t),ws(t,"pointer")};Sn.touchmove=t=>{t.input.lastTouch=Date.now(),ws(t,"pointer")};Sn.contextmenu=t=>ch(t);function sk(t,e){return t.composing?!0:En&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const NP=zr?5e3:-1;Cn.compositionstart=Cn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Me&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))t.markCursor=t.state.storedMarks||n.marks(),su(t,!0),t.markCursor=null;else if(su(t,!e.selection.empty),Gn&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let s=r.focusNode,o=r.focusOffset;s&&s.nodeType==1&&o!=0;){let i=o<0?s.lastChild:s.childNodes[o-1];if(!i)break;if(i.nodeType==3){let l=t.domSelection();l&&l.collapse(i,i.nodeValue.length);break}else s=i,o=-1}}t.input.composing=!0}ok(t,NP)};Cn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,ok(t,20))};function ok(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>su(t),e))}function ik(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=PP());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function RP(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=CR(e.focusNode,e.focusOffset),r=_R(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let s=r.pmViewDesc,o=t.domObserver.lastChangedTextNode;if(n==o||r==o)return o;if(!s||!s.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let i=n.pmViewDesc;if(!(!i||!i.isText(n.nodeValue)))return r}}return n||r}function PP(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function su(t,e=!1){if(!(zr&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),ik(t),e||t.docView&&t.docView.dirty){let n=oh(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function DP(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Tl=In&&Is<15||ui&&MR<604;Sn.copy=Cn.cut=(t,e)=>{let n=e,r=t.state.selection,s=n.type=="cut";if(r.empty)return;let o=Tl?null:n.clipboardData,i=r.content(),{dom:l,text:a}=lh(t,i);o?(n.preventDefault(),o.clearData(),o.setData("text/html",l.innerHTML),o.setData("text/plain",a)):DP(t,l),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function LP(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function FP(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Al(t,r.value,null,s,e):Al(t,r.textContent,r.innerHTML,s,e)},50)}function Al(t,e,n,r,s){let o=Xx(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,s,o||ye.empty)))return!0;if(!o)return!1;let i=LP(o),l=i?t.state.tr.replaceSelectionWith(i,r):t.state.tr.replaceSelection(o);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function lk(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Cn.paste=(t,e)=>{let n=e;if(t.composing&&!zr)return;let r=Tl?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Al(t,lk(r),r.getData("text/html"),s,n)?n.preventDefault():FP(t,n)};class ak{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const $P=Wn?"altKey":"ctrlKey";function uk(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[$P]}Sn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let s=t.state.selection,o=s.empty?null:t.posAtCoords(xc(n)),i;if(!(o&&o.pos>=s.from&&o.pos<=(s instanceof Ce?s.to-1:s.to))){if(r&&r.mightDrag)i=Ce.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(i=Ce.create(t.state.doc,d.posBefore))}}let l=(i||t.state.selection).content(),{dom:a,text:u,slice:c}=lh(t,l);(!n.dataTransfer.files.length||!fn||Dx>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Tl?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Tl||n.dataTransfer.setData("text/plain",u),t.dragging=new ak(c,uk(t,n),i)};Sn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Cn.dragover=Cn.dragenter=(t,e)=>e.preventDefault();Cn.drop=(t,e)=>{let n=e,r=t.dragging;if(t.dragging=null,!n.dataTransfer)return;let s=t.posAtCoords(xc(n));if(!s)return;let o=t.state.doc.resolve(s.pos),i=r&&r.slice;i?t.someProp("transformPasted",h=>{i=h(i,t,!1)}):i=Xx(t,lk(n.dataTransfer),Tl?null:n.dataTransfer.getData("text/html"),!1,o);let l=!!(r&&uk(t,n));if(t.someProp("handleDrop",h=>h(t,n,i||ye.empty,l))){n.preventDefault();return}if(!i)return;n.preventDefault();let a=i?hx(t.state.doc,o.pos,i):o.pos;a==null&&(a=o.pos);let u=t.state.tr;if(l){let{node:h}=r;h?h.replace(u):u.deleteSelection()}let c=u.mapping.map(a),d=i.openStart==0&&i.openEnd==0&&i.content.childCount==1,f=u.doc;if(d?u.replaceRangeWith(c,c,i.content.firstChild):u.replaceRange(c,c,i),u.doc.eq(f))return;let p=u.doc.resolve(c);if(d&&Ce.isSelectable(i.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(i.content.firstChild))u.setSelection(new Ce(p));else{let h=u.mapping.map(a);u.mapping.maps[u.mapping.maps.length-1].forEach((m,g,v,y)=>h=y),u.setSelection(ih(t,p,u.doc.resolve(h)))}t.focus(),t.dispatch(u.setMeta("uiEvent","drop"))};Sn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qr(t)},20))};Sn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Sn.beforeinput=(t,e)=>{if(fn&&zr&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",o=>o(t,ro(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in Cn)Sn[t]=Cn[t];function Il(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class ou{constructor(e,n){this.toDOM=e,this.spec=n||ho,this.side=this.spec.side||0}map(e,n,r,s){let{pos:o,deleted:i}=e.mapResult(n.from+s,this.side<0?-1:1);return i?null:new kn(o-r,o-r,this)}valid(){return!0}eq(e){return this==e||e instanceof ou&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Il(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ms{constructor(e,n){this.attrs=e,this.spec=n||ho}map(e,n,r,s){let o=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-r,i=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-r;return o>=i?null:new kn(o,i,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ms&&Il(this.attrs,e.attrs)&&Il(this.spec,e.spec)}static is(e){return e.type instanceof Ms}destroy(){}}class dh{constructor(e,n){this.attrs=e,this.spec=n||ho}map(e,n,r,s){let o=e.mapResult(n.from+s,1);if(o.deleted)return null;let i=e.mapResult(n.to+s,-1);return i.deleted||i.pos<=o.pos?null:new kn(o.pos-r,i.pos-r,this)}valid(e,n){let{index:r,offset:s}=e.content.findIndex(n.from),o;return s==n.from&&!(o=e.child(r)).isText&&s+o.nodeSize==n.to}eq(e){return this==e||e instanceof dh&&Il(this.attrs,e.attrs)&&Il(this.spec,e.spec)}destroy(){}}class kn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new kn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new kn(e,e,new ou(n,r))}static inline(e,n,r,s){return new kn(e,n,new Ms(r,s))}static node(e,n,r,s){return new kn(e,n,new dh(r,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ms}get widget(){return this.type instanceof ou}}const Fo=[],ho={};class yt{constructor(e,n){this.local=e.length?e:Fo,this.children=n.length?n:Fo}static create(e,n){return n.length?iu(n,e,0,ho):an}find(e,n,r){let s=[];return this.findInner(e??0,n??1e9,s,0,r),s}findInner(e,n,r,s,o){for(let i=0;i<this.local.length;i++){let l=this.local[i];l.from<=n&&l.to>=e&&(!o||o(l.spec))&&r.push(l.copy(l.from+s,l.to+s))}for(let i=0;i<this.children.length;i+=3)if(this.children[i]<n&&this.children[i+1]>e){let l=this.children[i]+1;this.children[i+2].findInner(e-l,n-l,r,s+l,o)}}map(e,n,r){return this==an||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ho)}mapInner(e,n,r,s,o){let i;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,s);a&&a.type.valid(n,a)?(i||(i=[])).push(a):o.onRemove&&o.onRemove(this.local[l].spec)}return this.children.length?BP(this.children,i||[],e,n,r,s,o):i?new yt(i.sort(mo),Fo):an}add(e,n){return n.length?this==an?yt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let s,o=0;e.forEach((l,a)=>{let u=a+r,c;if(c=dk(n,l,u)){for(s||(s=this.children.slice());o<s.length&&s[o]<a;)o+=3;s[o]==a?s[o+2]=s[o+2].addInner(l,c,u+1):s.splice(o,0,a,a+l.nodeSize,iu(c,l,u+1,ho)),o+=3}});let i=ck(o?fk(n):n,-r);for(let l=0;l<i.length;l++)i[l].type.valid(e,i[l])||i.splice(l--,1);return new yt(i.length?this.local.concat(i).sort(mo):this.local,s||this.children)}remove(e){return e.length==0||this==an?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,s=this.local;for(let o=0;o<r.length;o+=3){let i,l=r[o]+n,a=r[o+1]+n;for(let c=0,d;c<e.length;c++)(d=e[c])&&d.from>l&&d.to<a&&(e[c]=null,(i||(i=[])).push(d));if(!i)continue;r==this.children&&(r=this.children.slice());let u=r[o+2].removeInner(i,l+1);u!=an?r[o+2]=u:(r.splice(o,3),o-=3)}if(s.length){for(let o=0,i;o<e.length;o++)if(i=e[o])for(let l=0;l<s.length;l++)s[l].eq(i,n)&&(s==this.local&&(s=this.local.slice()),s.splice(l--,1))}return r==this.children&&s==this.local?this:s.length||r.length?new yt(s,r):an}forChild(e,n){if(this==an)return this;if(n.isLeaf)return yt.empty;let r,s;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let o=e+1,i=o+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<i&&a.to>o&&a.type instanceof Ms){let u=Math.max(o,a.from)-o,c=Math.min(i,a.to)-o;u<c&&(s||(s=[])).push(a.copy(u,c))}}if(s){let l=new yt(s.sort(mo),Fo);return r?new gs([l,r]):l}return r||an}eq(e){if(this==e)return!0;if(!(e instanceof yt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return fh(this.localsInner(e))}localsInner(e){if(this==an)return Fo;if(e.inlineContent||!this.local.some(Ms.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Ms||n.push(this.local[r]);return n}forEachSet(e){e(this)}}yt.empty=new yt([],[]);yt.removeOverlap=fh;const an=yt.empty;class gs{constructor(e){this.members=e}map(e,n){const r=this.members.map(s=>s.map(e,n,ho));return gs.from(r)}forChild(e,n){if(n.isLeaf)return yt.empty;let r=[];for(let s=0;s<this.members.length;s++){let o=this.members[s].forChild(e,n);o!=an&&(o instanceof gs?r=r.concat(o.members):r.push(o))}return gs.from(r)}eq(e){if(!(e instanceof gs)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let s=0;s<this.members.length;s++){let o=this.members[s].localsInner(e);if(o.length)if(!n)n=o;else{r&&(n=n.slice(),r=!1);for(let i=0;i<o.length;i++)n.push(o[i])}}return n?fh(r?n:n.sort(mo)):Fo}static from(e){switch(e.length){case 0:return an;case 1:return e[0];default:return new gs(e.every(n=>n instanceof yt)?e:e.reduce((n,r)=>n.concat(r instanceof yt?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function BP(t,e,n,r,s,o,i){let l=t.slice();for(let u=0,c=o;u<n.maps.length;u++){let d=0;n.maps[u].forEach((f,p,h,m)=>{let g=m-h-(p-f);for(let v=0;v<l.length;v+=3){let y=l[v+1];if(y<0||f>y+c-d)continue;let b=l[v]+c-d;p>=b?l[v+1]=f<=b?-2:-1:f>=c&&g&&(l[v]+=g,l[v+1]+=g)}d+=g}),c=n.maps[u].map(c,-1)}let a=!1;for(let u=0;u<l.length;u+=3)if(l[u+1]<0){if(l[u+1]==-2){a=!0,l[u+1]=-1;continue}let c=n.map(t[u]+o),d=c-s;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[u+1]+o,-1),p=f-s,{index:h,offset:m}=r.content.findIndex(d),g=r.maybeChild(h);if(g&&m==d&&m+g.nodeSize==p){let v=l[u+2].mapInner(n,g,c+1,t[u]+o+1,i);v!=an?(l[u]=d,l[u+1]=p,l[u+2]=v):(l[u+1]=-2,a=!0)}else a=!0}if(a){let u=VP(l,t,e,n,s,o,i),c=iu(u,r,0,i);e=c.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<c.children.length;d+=3){let p=c.children[d];for(;f<l.length&&l[f]<p;)f+=3;l.splice(f,0,c.children[d],c.children[d+1],c.children[d+2])}}return new yt(e.sort(mo),l)}function ck(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let s=t[r];n.push(new kn(s.from+e,s.to+e,s.type))}return n}function VP(t,e,n,r,s,o,i){function l(a,u){for(let c=0;c<a.local.length;c++){let d=a.local[c].map(r,s,u);d?n.push(d):i.onRemove&&i.onRemove(a.local[c].spec)}for(let c=0;c<a.children.length;c+=3)l(a.children[c+2],a.children[c]+u+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+o+1);return n}function dk(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,s=null;for(let o=0,i;o<t.length;o++)(i=t[o])&&i.from>n&&i.to<r&&((s||(s=[])).push(i),t[o]=null);return s}function fk(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function iu(t,e,n,r){let s=[],o=!1;e.forEach((l,a)=>{let u=dk(t,l,a+n);if(u){o=!0;let c=iu(u,l,n+a+1,r);c!=an&&s.push(a,a+l.nodeSize,c)}});let i=ck(o?fk(t):t,-n).sort(mo);for(let l=0;l<i.length;l++)i[l].type.valid(e,i[l])||(r.onRemove&&r.onRemove(i[l].spec),i.splice(l--,1));return i.length||s.length?new yt(i,s):an}function mo(t,e){return t.from-e.from||t.to-e.to}function fh(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let s=n+1;s<e.length;s++){let o=e[s];if(o.from==r.from){o.to!=r.to&&(e==t&&(e=t.slice()),e[s]=o.copy(o.from,r.to),Xv(e,s+1,o.copy(r.to,o.to)));continue}else{o.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,o.from),Xv(e,s,r.copy(o.from,r.to)));break}}}return e}function Xv(t,e,n){for(;e<t.length&&mo(n,t[e])>0;)e++;t.splice(e,0,n)}function Ed(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=an&&e.push(r)}),t.cursorWrapper&&e.push(yt.create(t.state.doc,[t.cursorWrapper.deco])),gs.from(e)}const HP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},jP=In&&Is<=11;class zP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class WP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new zP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let s=0;s<r.length;s++)this.queue.push(r[s]);In&&Is<=11&&r.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():this.flush()}),jP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,HP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(zv(this.view)){if(this.suppressingSelectionUpdates)return qr(this.view);if(In&&Is<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&bo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let o=e.focusNode;o;o=ai(o))n.add(o);for(let o=e.anchorNode;o;o=ai(o))if(n.has(o)){r=o;break}let s=r&&this.view.docView.nearestDesc(r);if(s&&s.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&zv(e)&&!this.ignoreSelectionChange(r),o=-1,i=-1,l=!1,a=[];if(e.editable)for(let c=0;c<n.length;c++){let d=this.registerMutation(n[c],a);d&&(o=o<0?d.from:Math.min(d.from,o),i=i<0?d.to:Math.max(d.to,i),d.typeOver&&(l=!0))}if(Gn&&a.length){let c=a.filter(d=>d.nodeName=="BR");if(c.length==2){let[d,f]=c;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of c){let p=f.parentNode;p&&p.nodeName=="LI"&&(!d||KP(e,d)!=p)&&f.remove()}}}let u=null;o<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&yc(r)&&(u=oh(e))&&u.eq(Be.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qr(e),this.currentSelection.set(r),e.scrollToSelection()):(o>-1||s)&&(o>-1&&(e.docView.markDirty(o,i),UP(e)),this.handleDOMChange(o,i,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||qr(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let c=0;c<e.addedNodes.length;c++){let d=e.addedNodes[c];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let s=e.previousSibling,o=e.nextSibling;if(In&&Is<=11&&e.addedNodes.length)for(let c=0;c<e.addedNodes.length;c++){let{previousSibling:d,nextSibling:f}=e.addedNodes[c];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(s=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(o=f)}let i=s&&s.parentNode==e.target?en(s)+1:0,l=r.localPosFromDOM(e.target,i,-1),a=o&&o.parentNode==e.target?en(o):e.target.childNodes.length,u=r.localPosFromDOM(e.target,a,1);return{from:l,to:u}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Qv=new WeakMap,Zv=!1;function UP(t){if(!Qv.has(t)&&(Qv.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Gn,Zv)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Zv=!0}}function ey(t,e){let n=e.startContainer,r=e.startOffset,s=e.endContainer,o=e.endOffset,i=t.domAtPos(t.state.selection.anchor);return bo(i.node,i.offset,s,o)&&([n,r,s,o]=[s,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}}function qP(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return ey(t,s)}let n;function r(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?ey(t,n):null}function KP(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function GP(t,e,n){let{node:r,fromOffset:s,toOffset:o,from:i,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),u,c=a.anchorNode;if(c&&t.dom.contains(c.nodeType==1?c:c.parentNode)&&(u=[{node:c,offset:a.anchorOffset}],yc(a)||u.push({node:a.focusNode,offset:a.focusOffset})),fn&&t.input.lastKeyCode===8)for(let g=o;g>s;g--){let v=r.childNodes[g-1],y=v.pmViewDesc;if(v.nodeName=="BR"&&!y){o=g;break}if(!y||y.size)break}let d=t.state.doc,f=t.someProp("domParser")||As.fromSchema(t.state.schema),p=d.resolve(i),h=null,m=f.parse(r,{topNode:p.parent,topMatch:p.parent.contentMatchAt(p.index()),topOpen:!0,from:s,to:o,preserveWhitespace:p.parent.type.whitespace=="pre"?"full":!0,findPositions:u,ruleFromNode:YP,context:p});if(u&&u[0].pos!=null){let g=u[0].pos,v=u[1]&&u[1].pos;v==null&&(v=g),h={anchor:g+i,head:v+i}}return{doc:m,sel:h,from:i,to:l}}function YP(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(En&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||En&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const JP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function XP(t,e,n,r,s){let o=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let T=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,A=oh(t,T);if(A&&!t.state.selection.eq(A)){if(fn&&zr&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",P=>P(t,ro(13,"Enter"))))return;let M=t.state.tr.setSelection(A);T=="pointer"?M.setMeta("pointer",!0):T=="key"&&M.scrollIntoView(),o&&M.setMeta("composition",o),t.dispatch(M)}return}let i=t.state.doc.resolve(e),l=i.sharedDepth(n);e=i.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,u=GP(t,e,n),c=t.state.doc,d=c.slice(u.from,u.to),f,p;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,p="end"):(f=t.state.selection.from,p="start"),t.input.lastKeyCode=null;let h=eD(d.content,u.doc.content,u.from,f,p);if(h&&t.input.domChangeCount++,(ui&&t.input.lastIOSEnter>Date.now()-225||zr)&&s.some(T=>T.nodeType==1&&!JP.test(T.nodeName))&&(!h||h.endA>=h.endB)&&t.someProp("handleKeyDown",T=>T(t,ro(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!h)if(r&&a instanceof Me&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(u.sel&&u.sel.anchor!=u.sel.head))h={start:a.from,endA:a.to,endB:a.to};else{if(u.sel){let T=ty(t,t.state.doc,u.sel);if(T&&!T.eq(t.state.selection)){let A=t.state.tr.setSelection(T);o&&A.setMeta("composition",o),t.dispatch(A)}}return}t.state.selection.from<t.state.selection.to&&h.start==h.endB&&t.state.selection instanceof Me&&(h.start>t.state.selection.from&&h.start<=t.state.selection.from+2&&t.state.selection.from>=u.from?h.start=t.state.selection.from:h.endA<t.state.selection.to&&h.endA>=t.state.selection.to-2&&t.state.selection.to<=u.to&&(h.endB+=t.state.selection.to-h.endA,h.endA=t.state.selection.to)),In&&Is<=11&&h.endB==h.start+1&&h.endA==h.start&&h.start>u.from&&u.doc.textBetween(h.start-u.from-1,h.start-u.from+1)==" "&&(h.start--,h.endA--,h.endB--);let m=u.doc.resolveNoCache(h.start-u.from),g=u.doc.resolveNoCache(h.endB-u.from),v=c.resolve(h.start),y=m.sameParent(g)&&m.parent.inlineContent&&v.end()>=h.endA;if((ui&&t.input.lastIOSEnter>Date.now()-225&&(!y||s.some(T=>T.nodeName=="DIV"||T.nodeName=="P"))||!y&&m.pos<u.doc.content.size&&(!m.sameParent(g)||!m.parent.inlineContent)&&m.pos<g.pos&&!/\S/.test(u.doc.textBetween(m.pos,g.pos,"","")))&&t.someProp("handleKeyDown",T=>T(t,ro(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>h.start&&ZP(c,h.start,h.endA,m,g)&&t.someProp("handleKeyDown",T=>T(t,ro(8,"Backspace")))){zr&&fn&&t.domObserver.suppressSelectionUpdates();return}fn&&h.endB==h.start&&(t.input.lastChromeDelete=Date.now()),zr&&!y&&m.start()!=g.start()&&g.parentOffset==0&&m.depth==g.depth&&u.sel&&u.sel.anchor==u.sel.head&&u.sel.head==h.endA&&(h.endB-=2,g=u.doc.resolveNoCache(h.endB-u.from),setTimeout(()=>{t.someProp("handleKeyDown",function(T){return T(t,ro(13,"Enter"))})},20));let b=h.start,x=h.endA,k=T=>{let A=T||t.state.tr.replace(b,x,u.doc.slice(h.start-u.from,h.endB-u.from));if(u.sel){let M=ty(t,A.doc,u.sel);M&&!(fn&&t.composing&&M.empty&&(h.start!=h.endB||t.input.lastChromeDelete<Date.now()-100)&&(M.head==b||M.head==A.mapping.map(x)-1)||In&&M.empty&&M.head==b)&&A.setSelection(M)}return o&&A.setMeta("composition",o),A.scrollIntoView()},S;if(y)if(m.pos==g.pos){In&&Is<=11&&m.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qr(t),20));let T=k(t.state.tr.delete(b,x)),A=c.resolve(h.start).marksAcross(c.resolve(h.endA));A&&T.ensureMarks(A),t.dispatch(T)}else if(h.endA==h.endB&&(S=QP(m.parent.content.cut(m.parentOffset,g.parentOffset),v.parent.content.cut(v.parentOffset,h.endA-v.start())))){let T=k(t.state.tr);S.type=="add"?T.addMark(b,x,S.mark):T.removeMark(b,x,S.mark),t.dispatch(T)}else if(m.parent.child(m.index()).isText&&m.index()==g.index()-(g.textOffset?0:1)){let T=m.parent.textBetween(m.parentOffset,g.parentOffset),A=()=>k(t.state.tr.insertText(T,b,x));t.someProp("handleTextInput",M=>M(t,b,x,T,A))||t.dispatch(A())}else t.dispatch(k());else t.dispatch(k())}function ty(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:ih(t,e.resolve(n.anchor),e.resolve(n.head))}function QP(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,s=n,o=r,i,l,a;for(let c=0;c<r.length;c++)s=r[c].removeFromSet(s);for(let c=0;c<n.length;c++)o=n[c].removeFromSet(o);if(s.length==1&&o.length==0)l=s[0],i="add",a=c=>c.mark(l.addToSet(c.marks));else if(s.length==0&&o.length==1)l=o[0],i="remove",a=c=>c.mark(l.removeFromSet(c.marks));else return null;let u=[];for(let c=0;c<e.childCount;c++)u.push(a(e.child(c)));if(Z.from(u).eq(t))return{mark:l,type:i}}function ZP(t,e,n,r,s){if(n-e<=s.pos-r.pos||Sd(r,!0,!1)<s.pos)return!1;let o=t.resolve(e);if(!r.parent.isTextblock){let l=o.nodeAfter;return l!=null&&n==e+l.nodeSize}if(o.parentOffset<o.parent.content.size||!o.parent.isTextblock)return!1;let i=t.resolve(Sd(o,!0,!0));return!i.parent.isTextblock||i.pos>n||Sd(i,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(i.parent.content)}function Sd(t,e,n){let r=t.depth,s=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,s++,e=!1;if(n){let o=t.node(r).maybeChild(t.indexAfter(r));for(;o&&!o.isLeaf;)o=o.firstChild,s++}return s}function eD(t,e,n,r,s){let o=t.findDiffStart(e,n);if(o==null)return null;let{a:i,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let a=Math.max(0,o-Math.min(i,l));r-=i+a-o}if(i<o&&t.size<e.size){let a=r<=o&&r>=i?o-r:0;o-=a,o&&o<e.size&&ny(e.textBetween(o-1,o+1))&&(o+=a?1:-1),l=o+(l-i),i=o}else if(l<o){let a=r<=o&&r>=l?o-r:0;o-=a,o&&o<t.size&&ny(t.textBetween(o-1,o+1))&&(o+=a?1:-1),i=o+(i-l),l=o}return{start:o,endA:i,endB:l}}function ny(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class pk{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new bP,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(ly),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=oy(this),sy(this),this.nodeViews=iy(this),this.docView=Fv(this.state.doc,ry(this),Ed(this),this.dom,this),this.domObserver=new WP(this,(r,s,o,i)=>XP(this,r,s,o,i)),this.domObserver.start(),xP(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&jf(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(ly),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let s=this.state,o=!1,i=!1;e.storedMarks&&this.composing&&(ik(this),i=!0),this.state=e;let l=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let p=iy(this);nD(p,this.nodeViews)&&(this.nodeViews=p,o=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&jf(this),this.editable=oy(this),sy(this);let a=Ed(this),u=ry(this),c=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",d=o||!this.docView.matchesNode(e.doc,u,a);(d||!e.selection.eq(s.selection))&&(i=!0);let f=c=="preserve"&&i&&this.dom.style.overflowAnchor==null&&PR(this);if(i){this.domObserver.stop();let p=d&&(In||fn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&tD(s.selection,e.selection);if(d){let h=fn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=RP(this)),(o||!this.docView.update(e.doc,u,a,this))&&(this.docView.updateOuterDeco(u),this.docView.destroy(),this.docView=Fv(e.doc,u,a,this.dom,this)),h&&!this.trackWrites&&(p=!0)}p||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&sP(this))?qr(this,p):(Gx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((r=this.dragging)===null||r===void 0)&&r.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),c=="reset"?this.dom.scrollTop=0:c=="to selection"?this.scrollToSelection():f&&DR(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ce){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&Mv(this,n.getBoundingClientRect(),e)}else Mv(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,s=-1;if(this.state.doc.nodeAt(r.from)==r.node)s=r.from;else{let o=r.from+(this.state.doc.content.size-n.doc.content.size);(o>0&&this.state.doc.nodeAt(o))==r.node&&(s=o)}this.dragging=new ak(e.slice,e.move,s<0?void 0:Ce.create(this.state.doc,s))}someProp(e,n){let r=this._props&&this._props[e],s;if(r!=null&&(s=n?n(r):r))return s;for(let i=0;i<this.directPlugins.length;i++){let l=this.directPlugins[i].props[e];if(l!=null&&(s=n?n(l):l))return s}let o=this.state.plugins;if(o)for(let i=0;i<o.length;i++){let l=o[i].props[e];if(l!=null&&(s=n?n(l):l))return s}}hasFocus(){if(In){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&LR(this.dom),qr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return HR(this,e)}coordsAtPos(e,n=1){return Vx(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let s=this.docView.posFromDOM(e,n,r);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return qR(this,n||this.state,e)}pasteHTML(e,n){return Al(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Al(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return lh(this,e)}destroy(){this.docView&&(kP(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Ed(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,ER())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return EP(this,e)}domSelectionRange(){let e=this.domSelection();return e?En&&this.root.nodeType===11&&AR(this.dom.ownerDocument)==this.dom&&qP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}pk.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function ry(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[kn.node(0,t.state.doc.content.size,e)]}function sy(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:kn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function oy(t){return!t.someProp("editable",e=>e(t.state)===!1)}function tD(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function iy(t){let e=Object.create(null);function n(r){for(let s in r)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=r[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function nD(t,e){let n=0,r=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)r++;return n!=r}function ly(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ds={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},lu={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},rD=typeof navigator<"u"&&/Mac/.test(navigator.platform),sD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var tn=0;tn<10;tn++)Ds[48+tn]=Ds[96+tn]=String(tn);for(var tn=1;tn<=24;tn++)Ds[tn+111]="F"+tn;for(var tn=65;tn<=90;tn++)Ds[tn]=String.fromCharCode(tn+32),lu[tn]=String.fromCharCode(tn);for(var Cd in Ds)lu.hasOwnProperty(Cd)||(lu[Cd]=Ds[Cd]);function oD(t){var e=rD&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||sD&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?lu:Ds)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const iD=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),lD=typeof navigator<"u"&&/Win/.test(navigator.platform);function aD(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,s,o,i;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))iD?i=!0:s=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),s&&(n="Ctrl-"+n),i&&(n="Meta-"+n),o&&(n="Shift-"+n),n}function uD(t){let e=Object.create(null);for(let n in t)e[aD(n)]=t[n];return e}function _d(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function cD(t){return new _t({props:{handleKeyDown:hk(t)}})}function hk(t){let e=uD(t);return function(n,r){let s=oD(r),o,i=e[_d(s,r)];if(i&&i(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(r.shiftKey){let l=e[_d(s,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(lD&&r.ctrlKey&&r.altKey)&&(o=Ds[r.keyCode])&&o!=s){let l=e[_d(o,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}var dD=Object.defineProperty,ph=(t,e)=>{for(var n in e)dD(t,n,{get:e[n],enumerable:!0})};function kc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:s}=n,{storedMarks:o}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return o},get selection(){return r},get doc(){return s},get tr(){return r=n.selection,s=n.doc,o=n.storedMarks,n}}}var wc=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:s}=n,o=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([i,l])=>[i,(...u)=>{const c=l(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(s),c}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i=[],l=!!t,a=t||s.tr,u=()=>(!l&&e&&!a.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(a),i.every(d=>d===!0)),c={...Object.fromEntries(Object.entries(n).map(([d,f])=>[d,(...h)=>{const m=this.buildProps(a,e),g=f(...h)(m);return i.push(g),c}])),run:u};return c}createCan(t){const{rawCommands:e,state:n}=this,r=!1,s=t||n.tr,o=this.buildProps(s,r);return{...Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>a(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:s}=this,{view:o}=r,i={tr:t,editor:r,view:o,state:kc({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([l,a])=>[l,(...u)=>a(...u)(i)]))}};return i}},mk={};ph(mk,{blur:()=>fD,clearContent:()=>pD,clearNodes:()=>hD,command:()=>mD,createParagraphNear:()=>gD,cut:()=>vD,deleteCurrentNode:()=>yD,deleteNode:()=>bD,deleteRange:()=>xD,deleteSelection:()=>kD,enter:()=>wD,exitCode:()=>ED,extendMarkRange:()=>SD,first:()=>CD,focus:()=>TD,forEach:()=>AD,insertContent:()=>ID,insertContentAt:()=>ND,joinBackward:()=>DD,joinDown:()=>PD,joinForward:()=>LD,joinItemBackward:()=>FD,joinItemForward:()=>$D,joinTextblockBackward:()=>BD,joinTextblockForward:()=>VD,joinUp:()=>RD,keyboardShortcut:()=>jD,lift:()=>zD,liftEmptyBlock:()=>WD,liftListItem:()=>UD,newlineInCode:()=>qD,resetAttributes:()=>KD,scrollIntoView:()=>GD,selectAll:()=>YD,selectNodeBackward:()=>JD,selectNodeForward:()=>XD,selectParentNode:()=>QD,selectTextblockEnd:()=>ZD,selectTextblockStart:()=>eL,setContent:()=>tL,setMark:()=>bL,setMeta:()=>xL,setNode:()=>kL,setNodeSelection:()=>wL,setTextSelection:()=>EL,sinkListItem:()=>SL,splitBlock:()=>CL,splitListItem:()=>_L,toggleList:()=>TL,toggleMark:()=>AL,toggleNode:()=>IL,toggleWrap:()=>OL,undoInputRule:()=>ML,unsetAllMarks:()=>NL,unsetMark:()=>RL,updateAttributes:()=>PL,wrapIn:()=>DL,wrapInList:()=>LL});var fD=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),pD=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),hD=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:s}=r;return n&&s.forEach(({$from:o,$to:i})=>{t.doc.nodesBetween(o.pos,i.pos,(l,a)=>{if(l.type.isText)return;const{doc:u,mapping:c}=e,d=u.resolve(c.map(a)),f=u.resolve(c.map(a+l.nodeSize)),p=d.blockRange(f);if(!p)return;const h=bi(p);if(l.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(p.start,m)}(h||h===0)&&e.lift(p,h)})}),!0},mD=t=>e=>t(e),gD=()=>({state:t,dispatch:e})=>Ox(t,e),vD=(t,e)=>({editor:n,tr:r})=>{const{state:s}=n,o=s.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const i=r.mapping.map(e);return r.insert(i,o.content),r.setSelection(new Me(r.doc.resolve(Math.max(i-1,0)))),!0},yD=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===r.type){if(e){const l=s.before(o),a=s.after(o);t.delete(l,a).scrollIntoView()}return!0}return!1};function Dt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var bD=t=>({tr:e,state:n,dispatch:r})=>{const s=Dt(t,n.schema),o=e.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===s){if(r){const a=o.before(i),u=o.after(i);e.delete(a,u).scrollIntoView()}return!0}return!1},xD=t=>({tr:e,dispatch:n})=>{const{from:r,to:s}=t;return n&&e.delete(r,s),!0},kD=()=>({state:t,dispatch:e})=>Zp(t,e),wD=()=>({commands:t})=>t.keyboardShortcut("Enter"),ED=()=>({state:t,dispatch:e})=>aR(t,e);function hh(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function au(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(s=>n.strict?e[s]===t[s]:hh(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function gk(t,e,n={}){return t.find(r=>r.type===e&&au(Object.fromEntries(Object.keys(n).map(s=>[s,r.attrs[s]])),n))}function ay(t,e,n={}){return!!gk(t,e,n)}function mh(t,e,n){var r;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(c=>c.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(c=>c.type===e)||(n=n||((r=s.node.marks[0])==null?void 0:r.attrs),!gk([...s.node.marks],e,n)))return;let i=s.index,l=t.start()+s.offset,a=i+1,u=l+s.node.nodeSize;for(;i>0&&ay([...t.parent.child(i-1).marks],e,n);)i-=1,l-=t.parent.child(i).nodeSize;for(;a<t.parent.childCount&&ay([...t.parent.child(a).marks],e,n);)u+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:u}}function es(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var SD=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const o=es(t,r.schema),{doc:i,selection:l}=n,{$from:a,from:u,to:c}=l;if(s){const d=mh(a,o,e);if(d&&d.from<=u&&d.to>=c){const f=Me.create(i,d.from,d.to);n.setSelection(f)}}return!0},CD=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function vk(t){return t instanceof Me}function ao(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function yk(t,e=null){if(!e)return null;const n=Be.atStart(t),r=Be.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const s=n.from,o=r.to;return e==="all"?Me.create(t,ao(0,s,o),ao(t.content.size,s,o)):Me.create(t,ao(e,s,o),ao(e,s,o))}function _D(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function gh(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var TD=(t=null,e={})=>({editor:n,view:r,tr:s,dispatch:o})=>{e={scrollIntoView:!0,...e};const i=()=>{(gh()||_D())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(o&&t===null&&!vk(n.state.selection))return i(),!0;const l=yk(s.doc,t)||n.state.selection,a=n.state.selection.eq(l);return o&&(a||s.setSelection(l),a&&s.storedMarks&&s.setStoredMarks(s.storedMarks),i()),!0},AD=(t,e)=>n=>t.every((r,s)=>e(r,{...n,index:s})),ID=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),bk=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&bk(r)}return t};function da(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return bk(n)}function Ol(t,e,n){if(t instanceof Ts||t instanceof Z)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,s=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return Z.fromArray(t.map(l=>e.nodeFromJSON(l)));const i=e.nodeFromJSON(t);return n.errorOnInvalidContent&&i.check(),i}catch(o){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:o});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",o),Ol("",e,n)}if(s){if(n.errorOnInvalidContent){let i=!1,l="";const a=new rx({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:u=>(i=!0,l=typeof u=="string"?u:u.outerHTML,null)}]}})});if(n.slice?As.fromSchema(a).parseSlice(da(t),n.parseOptions):As.fromSchema(a).parse(da(t),n.parseOptions),n.errorOnInvalidContent&&i)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const o=As.fromSchema(e);return n.slice?o.parseSlice(da(t),n.parseOptions).content:o.parse(da(t),n.parseOptions)}return Ol("",e,n)}function OD(t,e,n){const r=t.steps.length-1;if(r<e)return;const s=t.steps[r];if(!(s instanceof Wt||s instanceof qt))return;const o=t.mapping.maps[r];let i=0;o.forEach((l,a,u,c)=>{i===0&&(i=c)}),t.setSelection(Be.near(t.doc.resolve(i),n))}var MD=t=>!("type"in t),ND=(t,e,n)=>({tr:r,dispatch:s,editor:o})=>{var i;if(s){n={parseOptions:o.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=g=>{o.emit("contentError",{editor:o,error:g,disableCollaboration:()=>{"collaboration"in o.storage&&typeof o.storage.collaboration=="object"&&o.storage.collaboration&&(o.storage.collaboration.isDisabled=!0)}})},u={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!o.options.enableContentCheck&&o.options.emitContentError)try{Ol(e,o.schema,{parseOptions:u,errorOnInvalidContent:!0})}catch(g){a(g)}try{l=Ol(e,o.schema,{parseOptions:u,errorOnInvalidContent:(i=n.errorOnInvalidContent)!=null?i:o.options.enableContentCheck})}catch(g){return a(g),!1}let{from:c,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,p=!0;if((MD(l)?l:[l]).forEach(g=>{g.check(),f=f?g.isText&&g.marks.length===0:!1,p=p?g.isBlock:!1}),c===d&&p){const{parent:g}=r.doc.resolve(c);g.isTextblock&&!g.type.spec.code&&!g.childCount&&(c-=1,d+=1)}let m;if(f){if(Array.isArray(e))m=e.map(g=>g.text||"").join("");else if(e instanceof Z){let g="";e.forEach(v=>{v.text&&(g+=v.text)}),m=g}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,c,d)}else{m=l;const g=r.doc.resolve(c),v=g.node(),y=g.parentOffset===0,b=v.isText||v.isTextblock,x=v.content.size>0;y&&b&&x&&(c=Math.max(0,c-1)),r.replaceWith(c,d,m)}n.updateSelection&&OD(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:c,text:m}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:c,text:m})}return!0},RD=()=>({state:t,dispatch:e})=>oR(t,e),PD=()=>({state:t,dispatch:e})=>iR(t,e),DD=()=>({state:t,dispatch:e})=>Ex(t,e),LD=()=>({state:t,dispatch:e})=>Tx(t,e),FD=()=>({state:t,dispatch:e,tr:n})=>{try{const r=mc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},$D=()=>({state:t,dispatch:e,tr:n})=>{try{const r=mc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},BD=()=>({state:t,dispatch:e})=>rR(t,e),VD=()=>({state:t,dispatch:e})=>sR(t,e);function xk(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function HD(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,s,o,i;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))i=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))s=!0;else if(/^s(hift)?$/i.test(a))o=!0;else if(/^mod$/i.test(a))gh()||xk()?i=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),i&&(n=`Meta-${n}`),o&&(n=`Shift-${n}`),n}var jD=t=>({editor:e,view:n,tr:r,dispatch:s})=>{const o=HD(t).split(/-(?!$)/),i=o.find(u=>!["Alt","Ctrl","Meta","Shift"].includes(u)),l=new KeyboardEvent("keydown",{key:i==="Space"?" ":i,altKey:o.includes("Alt"),ctrlKey:o.includes("Ctrl"),metaKey:o.includes("Meta"),shiftKey:o.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",u=>u(n,l))});return a?.steps.forEach(u=>{const c=u.map(r.mapping);c&&s&&r.maybeStep(c)}),!0};function Ls(t,e,n={}){const{from:r,to:s,empty:o}=t.selection,i=e?Dt(e,t.schema):null,l=[];t.doc.nodesBetween(r,s,(d,f)=>{if(d.isText)return;const p=Math.max(r,f),h=Math.min(s,f+d.nodeSize);l.push({node:d,from:p,to:h})});const a=s-r,u=l.filter(d=>i?i.name===d.node.type.name:!0).filter(d=>au(d.node.attrs,n,{strict:!1}));return o?!!u.length:u.reduce((d,f)=>d+f.to-f.from,0)>=a}var zD=(t,e={})=>({state:n,dispatch:r})=>{const s=Dt(t,n.schema);return Ls(n,s,e)?lR(n,r):!1},WD=()=>({state:t,dispatch:e})=>Mx(t,e),UD=t=>({state:e,dispatch:n})=>{const r=Dt(t,e.schema);return bR(r)(e,n)},qD=()=>({state:t,dispatch:e})=>Ix(t,e);function Ec(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function uy(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,s)=>(n.includes(s)||(r[s]=t[s]),r),{})}var KD=(t,e)=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const l=Ec(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Dt(t,r.schema)),l==="mark"&&(i=es(t,r.schema)),s&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(u,c)=>{o&&o===u.type&&n.setNodeMarkup(c,void 0,uy(u.attrs,e)),i&&u.marks.length&&u.marks.forEach(d=>{i===d.type&&n.addMark(c,c+u.nodeSize,i.create(uy(d.attrs,e)))})})}),!0):!1},GD=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),YD=()=>({tr:t,dispatch:e})=>{if(e){const n=new Fn(t.doc);t.setSelection(n)}return!0},JD=()=>({state:t,dispatch:e})=>Cx(t,e),XD=()=>({state:t,dispatch:e})=>Ax(t,e),QD=()=>({state:t,dispatch:e})=>dR(t,e),ZD=()=>({state:t,dispatch:e})=>hR(t,e),eL=()=>({state:t,dispatch:e})=>pR(t,e);function zf(t,e,n={},r={}){return Ol(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var tL=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:s,tr:o,dispatch:i,commands:l})=>{const{doc:a}=o;if(r.preserveWhitespace!=="full"){const u=zf(t,s.schema,r,{errorOnInvalidContent:e??s.options.enableContentCheck});return i&&o.replaceWith(0,a.content.size,u).setMeta("preventUpdate",!n),!0}return i&&o.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:a.content.size},t,{parseOptions:r,errorOnInvalidContent:e??s.options.enableContentCheck})};function kk(t,e){const n=es(e,t.schema),{from:r,to:s,empty:o}=t.selection,i=[];o?(t.storedMarks&&i.push(...t.storedMarks),i.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,s,a=>{i.push(...a.marks)});const l=i.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function wk(t,e){const n=new bx(t);return e.forEach(r=>{r.steps.forEach(s=>{n.step(s)})}),n}function nL(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function rL(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(s,o)=>{n(s)&&r.push({node:s,pos:o})}),r}function sL(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Sc(t){return e=>sL(e.$from,t)}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function vh(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Se(e,"addExtensions",n);return r?[e,...vh(r())]:e}).flat(10)}function yh(t,e){const n=Eo.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function Ek(t){return typeof t=="function"}function nt(t,e=void 0,...n){return Ek(t)?e?t.bind(e)(...n):t(...n):t}function oL(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ml(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),r=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function Sk(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ml(t),s=[...n,...r],o={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(i=>{const l={name:i.name,options:i.options,storage:i.storage,extensions:s},a=Se(i,"addGlobalAttributes",l);if(!a)return;a().forEach(c=>{c.types.forEach(d=>{Object.entries(c.attributes).forEach(([f,p])=>{e.push({type:d,name:f,attribute:{...o,...p}})})})})}),s.forEach(i=>{const l={name:i.name,options:i.options,storage:i.storage},a=Se(i,"addAttributes",l);if(!a)return;const u=a();Object.entries(u).forEach(([c,d])=>{const f={...o,...d};typeof f?.default=="function"&&(f.default=f.default()),f?.isRequired&&f?.default===void 0&&delete f.default,e.push({type:i.name,name:c,attribute:f})})}),e}function Lt(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([s,o])=>{if(!r[s]){r[s]=o;return}if(s==="class"){const l=o?String(o).split(" "):[],a=r[s]?r[s].split(" "):[],u=l.filter(c=>!a.includes(c));r[s]=[...a,...u].join(" ")}else if(s==="style"){const l=o?o.split(";").map(c=>c.trim()).filter(Boolean):[],a=r[s]?r[s].split(";").map(c=>c.trim()).filter(Boolean):[],u=new Map;a.forEach(c=>{const[d,f]=c.split(":").map(p=>p.trim());u.set(d,f)}),l.forEach(c=>{const[d,f]=c.split(":").map(p=>p.trim());u.set(d,f)}),r[s]=Array.from(u.entries()).map(([c,d])=>`${c}: ${d}`).join("; ")}else r[s]=o}),r},{})}function uu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Lt(n,r),{})}function iL(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function cy(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const s=e.reduce((o,i)=>{const l=i.attribute.parseHTML?i.attribute.parseHTML(n):iL(n.getAttribute(i.name));return l==null?o:{...o,[i.name]:l}},{});return{...r,...s}}}}function dy(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&oL(n)?!1:n!=null))}function fy(t){var e,n,r;const s={};return!((e=t?.attribute)!=null&&e.isRequired)&&((n=t?.attribute)==null?void 0:n.default)!==void 0&&(s.default=t.attribute.default),((r=t?.attribute)==null?void 0:r.validate)!==void 0&&(s.validate=t.attribute.validate),[t.name,s]}function lL(t,e){var n;const r=Sk(t),{nodeExtensions:s,markExtensions:o}=Ml(t),i=(n=s.find(u=>Se(u,"topNode")))==null?void 0:n.name,l=Object.fromEntries(s.map(u=>{const c=r.filter(v=>v.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((v,y)=>{const b=Se(y,"extendNodeSchema",d);return{...v,...b?b(u):{}}},{}),p=dy({...f,content:nt(Se(u,"content",d)),marks:nt(Se(u,"marks",d)),group:nt(Se(u,"group",d)),inline:nt(Se(u,"inline",d)),atom:nt(Se(u,"atom",d)),selectable:nt(Se(u,"selectable",d)),draggable:nt(Se(u,"draggable",d)),code:nt(Se(u,"code",d)),whitespace:nt(Se(u,"whitespace",d)),linebreakReplacement:nt(Se(u,"linebreakReplacement",d)),defining:nt(Se(u,"defining",d)),isolating:nt(Se(u,"isolating",d)),attrs:Object.fromEntries(c.map(fy))}),h=nt(Se(u,"parseHTML",d));h&&(p.parseDOM=h.map(v=>cy(v,c)));const m=Se(u,"renderHTML",d);m&&(p.toDOM=v=>m({node:v,HTMLAttributes:uu(v,c)}));const g=Se(u,"renderText",d);return g&&(p.toText=g),[u.name,p]})),a=Object.fromEntries(o.map(u=>{const c=r.filter(g=>g.type===u.name),d={name:u.name,options:u.options,storage:u.storage,editor:e},f=t.reduce((g,v)=>{const y=Se(v,"extendMarkSchema",d);return{...g,...y?y(u):{}}},{}),p=dy({...f,inclusive:nt(Se(u,"inclusive",d)),excludes:nt(Se(u,"excludes",d)),group:nt(Se(u,"group",d)),spanning:nt(Se(u,"spanning",d)),code:nt(Se(u,"code",d)),attrs:Object.fromEntries(c.map(fy))}),h=nt(Se(u,"parseHTML",d));h&&(p.parseDOM=h.map(g=>cy(g,c)));const m=Se(u,"renderHTML",d);return m&&(p.toDOM=g=>m({mark:g,HTMLAttributes:uu(g,c)})),[u.name,p]}));return new rx({topNode:i,nodes:l,marks:a})}function aL(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function bh(t){return t.sort((n,r)=>{const s=Se(n,"priority")||100,o=Se(r,"priority")||100;return s>o?-1:s<o?1:0})}function Ck(t){const e=bh(vh(t)),n=aL(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function _k(t,e,n){const{from:r,to:s}=e,{blockSeparator:o=`

`,textSerializers:i={}}=n||{};let l="";return t.nodesBetween(r,s,(a,u,c,d)=>{var f;a.isBlock&&u>r&&(l+=o);const p=i?.[a.type.name];if(p)return c&&(l+=p({node:a,pos:u,parent:c,index:d,range:e})),!1;a.isText&&(l+=(f=a?.text)==null?void 0:f.slice(Math.max(r,u)-u,s-u))}),l}function uL(t,e){const n={from:0,to:t.content.size};return _k(t,n,e)}function Tk(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function cL(t,e){const n=Dt(e,t.schema),{from:r,to:s}=t.selection,o=[];t.doc.nodesBetween(r,s,l=>{o.push(l)});const i=o.reverse().find(l=>l.type.name===n.name);return i?{...i.attrs}:{}}function Ak(t,e){const n=Ec(typeof e=="string"?e:e.name,t.schema);return n==="node"?cL(t,e):n==="mark"?kk(t,e):{}}function dL(t,e=JSON.stringify){const n={};return t.filter(r=>{const s=e(r);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function fL(t){const e=dL(t);return e.length===1?e:e.filter((n,r)=>!e.filter((o,i)=>i!==r).some(o=>n.oldRange.from>=o.oldRange.from&&n.oldRange.to<=o.oldRange.to&&n.newRange.from>=o.newRange.from&&n.newRange.to<=o.newRange.to))}function Ik(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((s,o)=>{const i=[];if(s.ranges.length)s.forEach((l,a)=>{i.push({from:l,to:a})});else{const{from:l,to:a}=n[o];if(l===void 0||a===void 0)return;i.push({from:l,to:a})}i.forEach(({from:l,to:a})=>{const u=e.slice(o).map(l,-1),c=e.slice(o).map(a),d=e.invert().map(u,-1),f=e.invert().map(c);r.push({oldRange:{from:d,to:f},newRange:{from:u,to:c}})})}),fL(r)}function xh(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(s=>{const o=n.resolve(t),i=mh(o,s.type);i&&r.push({mark:s,...i})}):n.nodesBetween(t,e,(s,o)=>{!s||s?.nodeSize===void 0||r.push(...s.marks.map(i=>({from:o,to:o+s.nodeSize,mark:i})))}),r}var pL=(t,e,n,r=20)=>{const s=t.doc.resolve(n);let o=r,i=null;for(;o>0&&i===null;){const l=s.node(o);l?.type.name===e?i=l:o-=1}return[i,o]};function Td(t,e){return e.nodes[t]||e.marks[t]||null}function Na(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const s=t.find(o=>o.type===e&&o.name===r);return s?s.attribute.keepOnSplit:!1}))}var hL=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(s,o,i,l)=>{var a,u;const c=((u=(a=s.type.spec).toText)==null?void 0:u.call(a,{node:s,pos:o,parent:i,index:l}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?c:c.slice(0,Math.max(0,r-o))}),n};function Wf(t,e,n={}){const{empty:r,ranges:s}=t.selection,o=e?es(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>o?o.name===d.type.name:!0).find(d=>au(d.attrs,n,{strict:!1}));let i=0;const l=[];if(s.forEach(({$from:d,$to:f})=>{const p=d.pos,h=f.pos;t.doc.nodesBetween(p,h,(m,g)=>{if(!m.isText&&!m.marks.length)return;const v=Math.max(p,g),y=Math.min(h,g+m.nodeSize),b=y-v;i+=b,l.push(...m.marks.map(x=>({mark:x,from:v,to:y})))})}),i===0)return!1;const a=l.filter(d=>o?o.name===d.mark.type.name:!0).filter(d=>au(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),u=l.filter(d=>o?d.mark.type!==o&&d.mark.type.excludes(o):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+u:a)>=i}function mL(t,e,n={}){if(!e)return Ls(t,null,n)||Wf(t,null,n);const r=Ec(e,t.schema);return r==="node"?Ls(t,e,n):r==="mark"?Wf(t,e,n):!1}var gL=(t,e)=>{const{$from:n,$to:r,$anchor:s}=t.selection;if(e){const o=Sc(l=>l.type.name===e)(t.selection);if(!o)return!1;const i=t.doc.resolve(o.pos+1);return s.pos+1===i.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},vL=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function py(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function hy(t,e){const{nodeExtensions:n}=Ml(e),r=n.find(i=>i.name===t);if(!r)return!1;const s={name:r.name,options:r.options,storage:r.storage},o=nt(Se(r,"group",s));return typeof o!="string"?!1:o.split(" ").includes("list")}function Cc(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(o=>{s!==!1&&(Cc(o,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function Ok(t){return t instanceof Ce}function yL(t,e,n){var r;const{selection:s}=e;let o=null;if(vk(s)&&(o=s.$cursor),o){const l=(r=t.storedMarks)!=null?r:o.marks();return o.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(u=>u.type.excludes(n)))}const{ranges:i}=s;return i.some(({$from:l,$to:a})=>{let u=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(c,d,f)=>{if(u)return!1;if(c.isInline){const p=!f||f.type.allowsMarkType(n),h=!!n.isInSet(c.marks)||!c.marks.some(m=>m.type.excludes(n));u=p&&h}return!u}),u})}var bL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{const{selection:o}=n,{empty:i,ranges:l}=o,a=es(t,r.schema);if(s)if(i){const u=kk(r,a);n.addStoredMark(a.create({...u,...e}))}else l.forEach(u=>{const c=u.$from.pos,d=u.$to.pos;r.doc.nodesBetween(c,d,(f,p)=>{const h=Math.max(p,c),m=Math.min(p+f.nodeSize,d);f.marks.find(v=>v.type===a)?f.marks.forEach(v=>{a===v.type&&n.addMark(h,m,a.create({...v.attrs,...e}))}):n.addMark(h,m,a.create(e))})});return yL(r,n,a)},xL=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),kL=(t,e={})=>({state:n,dispatch:r,chain:s})=>{const o=Dt(t,n.schema);let i;return n.selection.$anchor.sameParent(n.selection.$head)&&(i=n.selection.$anchor.parent.attrs),o.isTextblock?s().command(({commands:l})=>Av(o,{...i,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Av(o,{...i,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},wL=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,s=ao(t,0,r.content.size),o=Ce.create(r,s);e.setSelection(o)}return!0},EL=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:s,to:o}=typeof t=="number"?{from:t,to:t}:t,i=Me.atStart(r).from,l=Me.atEnd(r).to,a=ao(s,i,l),u=ao(o,i,l),c=Me.create(r,a,u);e.setSelection(c)}return!0},SL=t=>({state:e,dispatch:n})=>{const r=Dt(t,e.schema);return wR(r)(e,n)};function my(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(s=>e?.includes(s.type.name));t.tr.ensureMarks(r)}}var CL=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:s})=>{const{selection:o,doc:i}=e,{$from:l,$to:a}=o,u=s.extensionManager.attributes,c=Na(u,l.node().type.name,l.node().attrs);if(o instanceof Ce&&o.node.isBlock)return!l.parentOffset||!Ur(i,l.pos)?!1:(r&&(t&&my(n,s.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:nL(l.node(-1).contentMatchAt(l.indexAfter(-1)));let p=d&&f?[{type:f,attrs:c}]:void 0,h=Ur(e.doc,e.mapping.map(l.pos),1,p);if(!p&&!h&&Ur(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(h=!0,p=f?[{type:f,attrs:c}]:void 0),r){if(h&&(o instanceof Me&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,p),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const m=e.mapping.map(l.before()),g=e.doc.resolve(m);l.node(-1).canReplaceWith(g.index(),g.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&my(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return h},_L=(t,e={})=>({tr:n,state:r,dispatch:s,editor:o})=>{var i;const l=Dt(t,r.schema),{$from:a,$to:u}=r.selection,c=r.selection.node;if(c&&c.isBlock||a.depth<2||!a.sameParent(u))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=o.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(s){let v=Z.empty;const y=a.index(-1)?1:a.index(-2)?2:3;for(let A=a.depth-y;A>=a.depth-3;A-=1)v=Z.from(a.node(A).copy(v));const b=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,x={...Na(f,a.node().type.name,a.node().attrs),...e},k=((i=l.contentMatch.defaultType)==null?void 0:i.createAndFill(x))||void 0;v=v.append(Z.from(l.createAndFill(null,k)||void 0));const S=a.before(a.depth-(y-1));n.replace(S,a.after(-b),new ye(v,4-y,0));let T=-1;n.doc.nodesBetween(S,n.doc.content.size,(A,M)=>{if(T>-1)return!1;A.isTextblock&&A.content.size===0&&(T=M+1)}),T>-1&&n.setSelection(Me.near(n.doc.resolve(T))),n.scrollIntoView()}return!0}const p=u.pos===a.end()?d.contentMatchAt(0).defaultType:null,h={...Na(f,d.type.name,d.attrs),...e},m={...Na(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,u.pos);const g=p?[{type:l,attrs:h},{type:p,attrs:m}]:[{type:l,attrs:h}];if(!Ur(n.doc,a.pos,2))return!1;if(s){const{selection:v,storedMarks:y}=r,{splittableMarks:b}=o.extensionManager,x=y||v.$to.parentOffset&&v.$from.marks();if(n.split(a.pos,2,g).scrollIntoView(),!x||!s)return!0;const k=x.filter(S=>b.includes(S.type.name));n.ensureMarks(k)}return!0},Ad=(t,e)=>{const n=Sc(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&Vs(t.doc,n.pos)&&t.join(n.pos),!0},Id=(t,e)=>{const n=Sc(i=>i.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const s=t.doc.nodeAt(r);return n.node.type===s?.type&&Vs(t.doc,r)&&t.join(r),!0},TL=(t,e,n,r={})=>({editor:s,tr:o,state:i,dispatch:l,chain:a,commands:u,can:c})=>{const{extensions:d,splittableMarks:f}=s.extensionManager,p=Dt(t,i.schema),h=Dt(e,i.schema),{selection:m,storedMarks:g}=i,{$from:v,$to:y}=m,b=v.blockRange(y),x=g||m.$to.parentOffset&&m.$from.marks();if(!b)return!1;const k=Sc(S=>hy(S.type.name,d))(m);if(b.depth>=1&&k&&b.depth-k.depth<=1){if(k.node.type===p)return u.liftListItem(h);if(hy(k.node.type.name,d)&&p.validContent(k.node.content)&&l)return a().command(()=>(o.setNodeMarkup(k.pos,p),!0)).command(()=>Ad(o,p)).command(()=>Id(o,p)).run()}return!n||!x||!l?a().command(()=>c().wrapInList(p,r)?!0:u.clearNodes()).wrapInList(p,r).command(()=>Ad(o,p)).command(()=>Id(o,p)).run():a().command(()=>{const S=c().wrapInList(p,r),T=x.filter(A=>f.includes(A.type.name));return o.ensureMarks(T),S?!0:u.clearNodes()}).wrapInList(p,r).command(()=>Ad(o,p)).command(()=>Id(o,p)).run()},AL=(t,e={},n={})=>({state:r,commands:s})=>{const{extendEmptyMarkRange:o=!1}=n,i=es(t,r.schema);return Wf(r,i,e)?s.unsetMark(i,{extendEmptyMarkRange:o}):s.setMark(i,e)},IL=(t,e,n={})=>({state:r,commands:s})=>{const o=Dt(t,r.schema),i=Dt(e,r.schema),l=Ls(r,o,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?s.setNode(i,a):s.setNode(o,{...a,...n})},OL=(t,e={})=>({state:n,commands:r})=>{const s=Dt(t,n.schema);return Ls(n,s,e)?r.lift(s):r.wrapIn(s,e)},ML=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const s=n[r];let o;if(s.spec.isInputRules&&(o=s.getState(t))){if(e){const i=t.tr,l=o.transform;for(let a=l.steps.length-1;a>=0;a-=1)i.step(l.steps[a].invert(l.docs[a]));if(o.text){const a=i.doc.resolve(o.from).marks();i.replaceWith(o.from,o.to,t.schema.text(o.text,a))}else i.delete(o.from,o.to)}return!0}}return!1},NL=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:s}=n;return r||e&&s.forEach(o=>{t.removeMark(o.$from.pos,o.$to.pos)}),!0},RL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{var o;const{extendEmptyMarkRange:i=!1}=e,{selection:l}=n,a=es(t,r.schema),{$from:u,empty:c,ranges:d}=l;if(!s)return!0;if(c&&i){let{from:f,to:p}=l;const h=(o=u.marks().find(g=>g.type===a))==null?void 0:o.attrs,m=mh(u,a,h);m&&(f=m.from,p=m.to),n.removeMark(f,p,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},PL=(t,e={})=>({tr:n,state:r,dispatch:s})=>{let o=null,i=null;const l=Ec(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(o=Dt(t,r.schema)),l==="mark"&&(i=es(t,r.schema)),s&&n.selection.ranges.forEach(a=>{const u=a.$from.pos,c=a.$to.pos;let d,f,p,h;n.selection.empty?r.doc.nodesBetween(u,c,(m,g)=>{o&&o===m.type&&(p=Math.max(g,u),h=Math.min(g+m.nodeSize,c),d=g,f=m)}):r.doc.nodesBetween(u,c,(m,g)=>{g<u&&o&&o===m.type&&(p=Math.max(g,u),h=Math.min(g+m.nodeSize,c),d=g,f=m),g>=u&&g<=c&&(o&&o===m.type&&n.setNodeMarkup(g,void 0,{...m.attrs,...e}),i&&m.marks.length&&m.marks.forEach(v=>{if(i===v.type){const y=Math.max(g,u),b=Math.min(g+m.nodeSize,c);n.addMark(y,b,i.create({...v.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),i&&f.marks.length&&f.marks.forEach(m=>{i===m.type&&n.addMark(p,h,i.create({...m.attrs,...e}))}))}),!0):!1},DL=(t,e={})=>({state:n,dispatch:r})=>{const s=Dt(t,n.schema);return mR(s,e)(n,r)},LL=(t,e={})=>({state:n,dispatch:r})=>{const s=Dt(t,n.schema);return gR(s,e)(n,r)},FL=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},_c=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},$L=(t,e)=>{if(hh(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function fa(t){var e;const{editor:n,from:r,to:s,text:o,rules:i,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const u=a.state.doc.resolve(r);if(u.parent.type.spec.code||(e=u.nodeBefore||u.nodeAfter)!=null&&e.marks.find(f=>f.type.spec.code))return!1;let c=!1;const d=hL(u)+o;return i.forEach(f=>{if(c)return;const p=$L(d,f.find);if(!p)return;const h=a.state.tr,m=kc({state:a.state,transaction:h}),g={from:r-(p[0].length-o.length),to:s},{commands:v,chain:y,can:b}=new wc({editor:n,state:m});f.handler({state:m,range:g,match:p,commands:v,chain:y,can:b})===null||!h.steps.length||(f.undoable&&h.setMeta(l,{transform:h,from:r,to:s,text:o}),a.dispatch(h),c=!0)}),c}function BL(t){const{editor:e,rules:n}=t,r=new _t({state:{init(){return null},apply(s,o,i){const l=s.getMeta(r);if(l)return l;const a=s.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:c}=a;typeof c=="string"?c=c:c=yh(Z.from(c),i.schema);const{from:d}=a,f=d+c.length;fa({editor:e,from:d,to:f,text:c,rules:n,plugin:r})}),s.selectionSet||s.docChanged?null:o}},props:{handleTextInput(s,o,i,l){return fa({editor:e,from:o,to:i,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:o}=s.state.selection;o&&fa({editor:e,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(s,o){if(o.key!=="Enter")return!1;const{$cursor:i}=s.state.selection;return i?fa({editor:e,from:i.pos,to:i.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function VL(t){return Object.prototype.toString.call(t).slice(8,-1)}function pa(t){return VL(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function Mk(t,e){const n={...t};return pa(t)&&pa(e)&&Object.keys(e).forEach(r=>{pa(e[r])&&pa(t[r])?n[r]=Mk(t[r],e[r]):n[r]=e[r]}),n}var kh=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...nt(Se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...nt(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>Mk(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},So=class Nk extends kh{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new Nk(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const i=s.marks();if(!!!i.find(u=>u?.type.name===n.name))return!1;const a=i.find(u=>u?.type.name===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",s.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function HL(t){return typeof t=="number"}var jL=class{constructor(t){this.find=t.find,this.handler=t.handler}},zL=(t,e,n)=>{if(hh(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(s=>{const o=[s.text];return o.index=s.index,o.input=t,o.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),o.push(s.replaceWith)),o}):[]};function WL(t){const{editor:e,state:n,from:r,to:s,rule:o,pasteEvent:i,dropEvent:l}=t,{commands:a,chain:u,can:c}=new wc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,s,(p,h)=>{var m,g,v,y,b;if((g=(m=p.type)==null?void 0:m.spec)!=null&&g.code||!(p.isText||p.isTextblock||p.isInline))return;const x=(b=(y=(v=p.content)==null?void 0:v.size)!=null?y:p.nodeSize)!=null?b:0,k=Math.max(r,h),S=Math.min(s,h+x);if(k>=S)return;const T=p.isText?p.text||"":p.textBetween(k-h,S-h,void 0,"");zL(T,o.find,i).forEach(M=>{if(M.index===void 0)return;const P=k+M.index+1,z=P+M[0].length,D={from:n.tr.mapping.map(P),to:n.tr.mapping.map(z)},W=o.handler({state:n,range:D,match:M,commands:a,chain:u,can:c,pasteEvent:i,dropEvent:l});d.push(W)})}),d.every(p=>p!==null)}var ha=null,UL=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function qL(t){const{editor:e,rules:n}=t;let r=null,s=!1,o=!1,i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:c,from:d,to:f,rule:p,pasteEvt:h})=>{const m=c.tr,g=kc({state:c,transaction:m});if(!(!WL({editor:e,state:g,from:Math.max(d-1,0),to:f.b-1,rule:p,pasteEvent:h,dropEvent:l})||!m.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return i=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return n.map(c=>new _t({view(d){const f=h=>{var m;r=(m=d.dom.parentElement)!=null&&m.contains(h.target)?d.dom.parentElement:null,r&&(ha=e)},p=()=>{ha&&(ha=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",p),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",p)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(o=r===d.dom.parentElement,l=f,!o){const p=ha;p?.isEditable&&setTimeout(()=>{const h=p.state.selection;h&&p.commands.deleteRange({from:h.from,to:h.to})},10)}return!1},paste:(d,f)=>{var p;const h=(p=f.clipboardData)==null?void 0:p.getData("text/html");return i=f,s=!!h?.includes("data-pm-slice"),!1}}},appendTransaction:(d,f,p)=>{const h=d[0],m=h.getMeta("uiEvent")==="paste"&&!s,g=h.getMeta("uiEvent")==="drop"&&!o,v=h.getMeta("applyPasteRules"),y=!!v;if(!m&&!g&&!y)return;if(y){let{text:k}=v;typeof k=="string"?k=k:k=yh(Z.from(k),p.schema);const{from:S}=v,T=S+k.length,A=UL(k);return a({rule:c,state:p,from:S,to:{b:T},pasteEvt:A})}const b=f.doc.content.findDiffStart(p.doc.content),x=f.doc.content.findDiffEnd(p.doc.content);if(!(!HL(b)||!x||b===x.b))return a({rule:c,state:p,from:b,to:x,pasteEvt:i})}}))}var Tc=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=Ck(t),this.schema=lL(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Td(e.name,this.schema)},r=Se(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return bh([...this.extensions].reverse()).flatMap(r=>{const s={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Td(r.name,this.schema)},o=[],i=Se(r,"addKeyboardShortcuts",s);let l={};if(r.type==="mark"&&Se(r,"exitable",s)&&(l.ArrowRight=()=>So.handleExit({editor:t,mark:r})),i){const f=Object.fromEntries(Object.entries(i()).map(([p,h])=>[p,()=>h({editor:t})]));l={...l,...f}}const a=cD(l);o.push(a);const u=Se(r,"addInputRules",s);if(py(r,t.options.enableInputRules)&&u){const f=u();if(f&&f.length){const p=BL({editor:t,rules:f}),h=Array.isArray(p)?p:[p];o.push(...h)}}const c=Se(r,"addPasteRules",s);if(py(r,t.options.enablePasteRules)&&c){const f=c();if(f&&f.length){const p=qL({editor:t,rules:f});o.push(...p)}}const d=Se(r,"addProseMirrorPlugins",s);if(d){const f=d();o.push(...f)}return o})}get attributes(){return Sk(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ml(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addNodeView")).map(n=>{const r=this.attributes.filter(a=>a.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Dt(n.name,this.schema)},o=Se(n,"addNodeView",s);if(!o)return[];const i=o();if(!i)return[];const l=(a,u,c,d,f)=>{const p=uu(a,r);return i({node:a,view:u,getPos:c,decorations:d,innerDecorations:f,editor:t,extension:n,HTMLAttributes:p})};return[n.name,l]}))}get markViews(){const{editor:t}=this,{markExtensions:e}=Ml(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:es(n.name,this.schema)},o=Se(n,"addMarkView",s);if(!o)return[];const i=(l,a,u)=>{const c=uu(l,r);return o()({mark:l,view:a,inline:u,editor:t,extension:n,HTMLAttributes:c,updateAttributes:d=>{i2(l,t,d)}})};return[n.name,i]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Td(e.name,this.schema)};e.type==="mark"&&((n=nt(Se(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const s=Se(e,"onBeforeCreate",r),o=Se(e,"onCreate",r),i=Se(e,"onUpdate",r),l=Se(e,"onSelectionUpdate",r),a=Se(e,"onTransaction",r),u=Se(e,"onFocus",r),c=Se(e,"onBlur",r),d=Se(e,"onDestroy",r);s&&this.editor.on("beforeCreate",s),o&&this.editor.on("create",o),i&&this.editor.on("update",i),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),u&&this.editor.on("focus",u),c&&this.editor.on("blur",c),d&&this.editor.on("destroy",d)})}};Tc.resolve=Ck;Tc.sort=bh;Tc.flatten=vh;var KL={};ph(KL,{ClipboardTextSerializer:()=>Pk,Commands:()=>Dk,Delete:()=>Lk,Drop:()=>Fk,Editable:()=>$k,FocusEvents:()=>Vk,Keymap:()=>Hk,Paste:()=>jk,Tabindex:()=>zk,focusEventsPluginKey:()=>Bk});var Ft=class Rk extends kh{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new Rk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},Pk=Ft.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new _t({key:new Yt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:s}=e,{ranges:o}=s,i=Math.min(...o.map(c=>c.$from.pos)),l=Math.max(...o.map(c=>c.$to.pos)),a=Tk(n);return _k(r,{from:i,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),Dk=Ft.create({name:"commands",addCommands(){return{...mk}}}),Lk=Ft.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,s;const o=()=>{var i,l,a,u;if((u=(a=(l=(i=this.editor.options.coreExtensionOptions)==null?void 0:i.delete)==null?void 0:l.filterTransaction)==null?void 0:a.call(l,t))!=null?u:t.getMeta("y-sync$"))return;const c=wk(t.before,[t,...e]);Ik(c).forEach(p=>{c.mapping.mapResult(p.oldRange.from).deletedAfter&&c.mapping.mapResult(p.oldRange.to).deletedBefore&&c.before.nodesBetween(p.oldRange.from,p.oldRange.to,(h,m)=>{const g=m+h.nodeSize-2,v=p.oldRange.from<=m&&g<=p.oldRange.to;this.editor.emit("delete",{type:"node",node:h,from:m,to:g,newFrom:c.mapping.map(m),newTo:c.mapping.map(g),deletedRange:p.oldRange,newRange:p.newRange,partial:!v,editor:this.editor,transaction:t,combinedTransform:c})})});const f=c.mapping;c.steps.forEach((p,h)=>{var m,g;if(p instanceof sr){const v=f.slice(h).map(p.from,-1),y=f.slice(h).map(p.to),b=f.invert().map(v,-1),x=f.invert().map(y),k=(m=c.doc.nodeAt(v-1))==null?void 0:m.marks.some(T=>T.eq(p.mark)),S=(g=c.doc.nodeAt(y))==null?void 0:g.marks.some(T=>T.eq(p.mark));this.editor.emit("delete",{type:"mark",mark:p.mark,from:p.from,to:p.to,deletedRange:{from:b,to:x},newRange:{from:v,to:y},partial:!!(S||k),editor:this.editor,transaction:t,combinedTransform:c})}})};(s=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||s?setTimeout(o,0):o()}}),Fk=Ft.create({name:"drop",addProseMirrorPlugins(){return[new _t({key:new Yt("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),$k=Ft.create({name:"editable",addProseMirrorPlugins(){return[new _t({key:new Yt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),Bk=new Yt("focusEvents"),Vk=Ft.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new _t({key:Bk,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),Hk=Ft.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:i})=>[()=>i.undoInputRule(),()=>i.command(({tr:l})=>{const{selection:a,doc:u}=l,{empty:c,$anchor:d}=a,{pos:f,parent:p}=d,h=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,m=h.parent.type.spec.isolating,g=d.pos-d.parentOffset,v=m&&h.parent.childCount===1?g===d.pos:Be.atStart(u).from===f;return!c||!p.type.isTextblock||p.textContent.length||!v||v&&d.parent.type.name==="paragraph"?!1:i.clearNodes()}),()=>i.deleteSelection(),()=>i.joinBackward(),()=>i.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:i})=>[()=>i.deleteSelection(),()=>i.deleteCurrentNode(),()=>i.joinForward(),()=>i.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:i})=>[()=>i.newlineInCode(),()=>i.createParagraphNear(),()=>i.liftEmptyBlock(),()=>i.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...r},o={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return gh()||xk()?o:s},addProseMirrorPlugins(){return[new _t({key:new Yt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(m=>m.getMeta("composition")))return;const r=t.some(m=>m.docChanged)&&!e.doc.eq(n.doc),s=t.some(m=>m.getMeta("preventClearDocument"));if(!r||s)return;const{empty:o,from:i,to:l}=e.selection,a=Be.atStart(e.doc).from,u=Be.atEnd(e.doc).to;if(o||!(i===a&&l===u)||!Cc(n.doc))return;const f=n.tr,p=kc({state:n,transaction:f}),{commands:h}=new wc({editor:this.editor,state:p});if(h.clearNodes(),!!f.steps.length)return f}})]}}),jk=Ft.create({name:"paste",addProseMirrorPlugins(){return[new _t({key:new Yt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),zk=Ft.create({name:"tabindex",addProseMirrorPlugins(){return[new _t({key:new Yt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),GL=class $o{constructor(e,n,r=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new $o(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new $o(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new $o(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const s=n.isBlock&&!n.isTextblock,o=n.isAtom&&!n.isText,i=this.pos+r+(o?0:1);if(i<0||i>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(i);if(!s&&l.depth<=this.depth)return;const a=new $o(l,this.editor,s,s?n:null);s&&(a.actualDepth=this.depth+1),e.push(new $o(l,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,s=this.parent;for(;s&&!r;){if(s.node.type.name===e)if(Object.keys(n).length>0){const o=s.node.attrs,i=Object.keys(n);for(let l=0;l<i.length;l+=1){const a=i[l];if(o[a]!==n[a])break}}else r=s;s=s.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let s=[];if(!this.children||this.children.length===0)return s;const o=Object.keys(n);return this.children.forEach(i=>{r&&s.length>0||(i.node.type.name===e&&o.every(a=>n[a]===i.node.attrs[a])&&s.push(i),!(r&&s.length>0)&&(s=s.concat(i.querySelectorAll(e,n,r))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},YL=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function JL(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var XL=class extends FL{constructor(e={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:s})=>{throw s},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:s,slice:o,moved:i})=>this.options.onDrop(s,o,i)),this.on("paste",({event:s,slice:o})=>this.options.onPaste(s,o)),this.on("delete",this.options.onDelete);const n=this.createDoc(),r=yk(n,this.options.autofocus);this.editorState=zo.create({doc:n,schema:this.schema,selection:r||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=JL(YL,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,n)=>{if(this.editorView)return this.editorView[n];if(n==="state")return this.editorState;if(n in e)return Reflect.get(e,n);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${n}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,n){const r=Ek(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(o=>{const i=typeof o=="string"?`${o}$`:o.key;r=r.filter(l=>!l.key.startsWith(i))}),n.length===r.length)return;const s=this.state.reconfigure({plugins:r});return this.view.updateState(s),s}createExtensionManager(){var e,n;const s=[...this.options.enableCoreExtensions?[$k,Pk.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:n.blockSeparator}),Dk,Vk,Hk,zk,Fk,jk,Lk].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new Tc(s,this)}createCommandManager(){this.commandManager=new wc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=zf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(n){if(!(n instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(n.message))throw n;this.emit("contentError",{editor:this,error:n,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(r=>r.name!=="collaboration"),this.createExtensionManager()}}),e=zf(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var n;this.editorView=new pk(e,{...this.options.editorProps,attributes:{role:"textbox",...(n=this.options.editorProps)==null?void 0:n.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const r=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(r),this.prependClass(),this.injectCSS();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(c=>{var d;return(d=this.capturedTransaction)==null?void 0:d.step(c)});return}const{state:n,transactions:r}=this.state.applyTransaction(e),s=!this.state.selection.eq(n.selection),o=r.includes(e),i=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),!o)return;this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:r.slice(1)}),s&&this.emit("selectionUpdate",{editor:this,transaction:e});const l=r.findLast(c=>c.getMeta("focus")||c.getMeta("blur")),a=l?.getMeta("focus"),u=l?.getMeta("blur");a&&this.emit("focus",{editor:this,event:a.event,transaction:l}),u&&this.emit("blur",{editor:this,event:u.event,transaction:l}),!(e.getMeta("preventUpdate")||!r.some(c=>c.docChanged)||i.doc.eq(n.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:r.slice(1)})}getAttributes(e){return Ak(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,s=typeof e=="string"?n:e;return mL(this.state,r,s)}getJSON(){return this.state.doc.toJSON()}getHTML(){return yh(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return uL(this.state.doc,{blockSeparator:n,textSerializers:{...Tk(this.schema),...r}})}get isEmpty(){return Cc(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,n;return(n=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?n:!0}$node(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)==null?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new GL(n,this)}get $doc(){return this.$pos(0)}};function ci(t){return new _c({find:t.find,handler:({state:e,range:n,match:r})=>{const s=nt(t.getAttributes,void 0,r);if(s===!1||s===null)return null;const{tr:o}=e,i=r[r.length-1],l=r[0];if(i){const a=l.search(/\S/),u=n.from+l.indexOf(i),c=u+i.length;if(xh(n.from,n.to,e.doc).filter(p=>p.mark.type.excluded.find(m=>m===t.type&&m!==p.mark.type)).filter(p=>p.to>u).length)return null;c<n.to&&o.delete(c,n.to),u>n.from&&o.delete(n.from+a,u);const f=n.from+a+i.length;o.addMark(n.from+a,f,t.type.create(s||{})),o.removeStoredMark(t.type)}},undoable:t.undoable})}function QL(t){return new _c({find:t.find,handler:({state:e,range:n,match:r})=>{const s=nt(t.getAttributes,void 0,r)||{},{tr:o}=e,i=n.from;let l=n.to;const a=t.type.create(s);if(r[1]){const u=r[0].lastIndexOf(r[1]);let c=i+u;c>l?c=l:l=c+r[1].length;const d=r[0][r[0].length-1];o.insertText(d,i+r[0].length-1),o.replaceWith(c,l,a)}else if(r[0]){const u=t.type.isInline?i:i-1;o.insert(u,t.type.create(s)).delete(o.mapping.map(i),o.mapping.map(l))}o.scrollIntoView()},undoable:t.undoable})}function Uf(t){return new _c({find:t.find,handler:({state:e,range:n,match:r})=>{const s=e.doc.resolve(n.from),o=nt(t.getAttributes,void 0,r)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,o)},undoable:t.undoable})}function di(t){return new _c({find:t.find,handler:({state:e,range:n,match:r,chain:s})=>{const o=nt(t.getAttributes,void 0,r)||{},i=e.tr.delete(n.from,n.to),a=i.doc.resolve(n.from).blockRange(),u=a&&Xp(a,t.type,o);if(!u)return null;if(i.wrap(a,u),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:p}=t.editor.extensionManager,h=f||d.$to.parentOffset&&d.$from.marks();if(h){const m=h.filter(g=>p.includes(g.type.name));i.ensureMarks(m)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(d,o).run()}const c=i.doc.resolve(n.from-1).nodeBefore;c&&c.type===t.type&&Vs(i.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,c))&&i.join(n.from-1)},undoable:t.undoable})}function ZL(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Ce){const o=r.index();return r.parent.canReplaceWith(o,o+1,e)}let s=r.depth;for(;s>=0;){const o=r.index(s);if(r.node(s).contentMatchAt(o).matchType(e))return!0;s-=1}return!1}var e2={};ph(e2,{createAtomBlockMarkdownSpec:()=>t2,createBlockMarkdownSpec:()=>n2,createInlineMarkdownSpec:()=>o2,parseAttributes:()=>wh,parseIndentedBlocks:()=>qf,renderNestedMarkdownContent:()=>Sh,serializeAttributes:()=>Eh});function wh(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,u=>(n.push(u),`__QUOTED_${n.length-1}__`)),s=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const u=s.map(c=>c.trim().slice(1));e.class=u.join(" ")}const o=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);o&&(e.id=o[1]);const i=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(i)).forEach(([,u,c])=>{var d;const f=parseInt(((d=c.match(/__QUOTED_(\d+)__/))==null?void 0:d[1])||"0",10),p=n[f];p&&(e[u]=p.slice(1,-1))});const a=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return a&&a.split(/\s+/).filter(Boolean).forEach(c=>{c.match(/^[a-zA-Z][\w-]*$/)&&(e[c]=!0)}),e}function Eh(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function t2(t){const{nodeName:e,name:n,parseAttributes:r=wh,serializeAttributes:s=Eh,defaultAttributes:o={},requiredAttributes:i=[],allowedAttributes:l}=t,a=n||e,u=c=>{if(!l)return c;const d={};return l.forEach(f=>{f in c&&(d[f]=c[f])}),d};return{parseMarkdown:(c,d)=>{const f={...o,...c.attributes};return d.createNode(e,f,[])},markdownTokenizer:{name:e,level:"block",start(c){var d;const f=new RegExp(`^:::${a}(?:\\s|$)`,"m"),p=(d=c.match(f))==null?void 0:d.index;return p!==void 0?p:-1},tokenize(c,d,f){const p=new RegExp(`^:::${a}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),h=c.match(p);if(!h)return;const m=h[1]||"",g=r(m);if(!i.find(y=>!(y in g)))return{type:e,raw:h[0],attributes:g}}},renderMarkdown:c=>{const d=u(c.attrs||{}),f=s(d),p=f?` {${f}}`:"";return`:::${a}${p} :::`}}}function n2(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=wh,serializeAttributes:o=Eh,defaultAttributes:i={},content:l="block",allowedAttributes:a}=t,u=n||e,c=d=>{if(!a)return d;const f={};return a.forEach(p=>{p in d&&(f[p]=d[p])}),f};return{parseMarkdown:(d,f)=>{let p;if(r){const m=r(d);p=typeof m=="string"?[{type:"text",text:m}]:m}else l==="block"?p=f.parseChildren(d.tokens||[]):p=f.parseInline(d.tokens||[]);const h={...i,...d.attributes};return f.createNode(e,h,p)},markdownTokenizer:{name:e,level:"block",start(d){var f;const p=new RegExp(`^:::${u}`,"m"),h=(f=d.match(p))==null?void 0:f.index;return h!==void 0?h:-1},tokenize(d,f,p){var h;const m=new RegExp(`^:::${u}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),g=d.match(m);if(!g)return;const[v,y=""]=g,b=s(y);let x=1;const k=v.length;let S="";const T=/^:::([\w-]*)(\s.*)?/gm,A=d.slice(k);for(T.lastIndex=0;;){const M=T.exec(A);if(M===null)break;const P=M.index,z=M[1];if(!((h=M[2])!=null&&h.endsWith(":::"))){if(z)x+=1;else if(x-=1,x===0){const D=A.slice(0,P);S=D.trim();const W=d.slice(0,k+P+M[0].length);let ie=[];if(S)if(l==="block")for(ie=p.blockTokens(D),ie.forEach(ae=>{ae.text&&(!ae.tokens||ae.tokens.length===0)&&(ae.tokens=p.inlineTokens(ae.text))});ie.length>0;){const ae=ie[ie.length-1];if(ae.type==="paragraph"&&(!ae.text||ae.text.trim()===""))ie.pop();else break}else ie=p.inlineTokens(S);return{type:e,raw:W,attributes:b,content:S,tokens:ie}}}}}},renderMarkdown:(d,f)=>{const p=c(d.attrs||{}),h=o(p),m=h?` {${h}}`:"",g=f.renderChildren(d.content||[],`

`);return`:::${u}${m}

${g}

:::`}}}function r2(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,s,o,i]=r;e[s]=o||i,r=n.exec(t)}return e}function s2(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function o2(t){const{nodeName:e,name:n,getContent:r,parseAttributes:s=r2,serializeAttributes:o=s2,defaultAttributes:i={},selfClosing:l=!1,allowedAttributes:a}=t,u=n||e,c=f=>{if(!a)return f;const p={};return a.forEach(h=>{h in f&&(p[h]=f[h])}),p},d=u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(f,p)=>{const h={...i,...f.attributes};if(l)return p.createNode(e,h);const m=r?r(f):f.content||"";return m?p.createNode(e,h,[p.createTextNode(m)]):p.createNode(e,h,[])},markdownTokenizer:{name:e,level:"inline",start(f){const p=l?new RegExp(`\\[${d}\\s*[^\\]]*\\]`):new RegExp(`\\[${d}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${d}\\]`),h=f.match(p),m=h?.index;return m!==void 0?m:-1},tokenize(f,p,h){const m=l?new RegExp(`^\\[${d}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${d}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${d}\\]`),g=f.match(m);if(!g)return;let v="",y="";if(l){const[,x]=g;y=x}else{const[,x,k]=g;y=x,v=k||""}const b=s(y.trim());return{type:e,raw:g[0],content:v.trim(),attributes:b}}},renderMarkdown:f=>{let p="";r?p=r(f):f.content&&f.content.length>0&&(p=f.content.filter(v=>v.type==="text").map(v=>v.text).join(""));const h=c(f.attrs||{}),m=o(h),g=m?` ${m}`:"";return l?`[${u}${g}]`:`[${u}${g}]${p}[/${u}]`}}}function qf(t,e,n){var r,s,o,i;const l=t.split(`
`),a=[];let u="",c=0;const d=e.baseIndentSize||2;for(;c<l.length;){const f=l[c],p=f.match(e.itemPattern);if(!p){if(a.length>0)break;if(f.trim()===""){c+=1;continue}else return}const h=e.extractItemData(p),{indentLevel:m,mainContent:g}=h;u=`${u}${f}
`;const v=[g];for(c+=1;c<l.length;){const k=l[c];if(k.trim()===""){const T=l.slice(c+1).findIndex(P=>P.trim()!=="");if(T===-1)break;if((((s=(r=l[c+1+T].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:s.length)||0)>m){v.push(k),u=`${u}${k}
`,c+=1;continue}else break}if((((i=(o=k.match(/^(\s*)/))==null?void 0:o[1])==null?void 0:i.length)||0)>m)v.push(k),u=`${u}${k}
`,c+=1;else break}let y;const b=v.slice(1);if(b.length>0){const k=b.map(S=>S.slice(m+d)).join(`
`);k.trim()&&(e.customNestedParser?y=e.customNestedParser(k):y=n.blockTokens(k))}const x=e.createToken(h,y);a.push(x)}if(a.length!==0)return{items:a,raw:u.trim()}}function Sh(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(r):n,[o,...i]=t.content,l=e.renderChildren([o]),a=[`${s}${l}`];return i&&i.length>0&&i.forEach(u=>{const c=e.renderChildren([u]);if(c){const d=c.split(`
`).map(f=>f?e.indent(f):"").join(`
`);a.push(d)}}),a.join(`
`)}function i2(t,e,n={}){const{state:r}=e,{doc:s,tr:o}=r,i=t;s.descendants((l,a)=>{const u=o.mapping.map(a),c=o.mapping.map(a)+l.nodeSize;let d=null;if(l.marks.forEach(p=>{if(p!==i)return!1;d=p}),!d)return;let f=!1;if(Object.keys(n).forEach(p=>{n[p]!==d.attrs[p]&&(f=!0)}),f){const p=t.type.create({...t.attrs,...n});o.removeMark(u,c,t.type),o.addMark(u,c,p)}}),o.docChanged&&e.view.dispatch(o)}var Bn=class Wk extends kh{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new Wk(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function ko(t){return new jL({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:s})=>{const o=nt(t.getAttributes,void 0,r,s);if(o===!1||o===null)return null;const{tr:i}=e,l=r[r.length-1],a=r[0];let u=n.to;if(l){const c=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(xh(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(g=>g===t.type&&g!==h.mark.type)).filter(h=>h.to>d).length)return null;f<n.to&&i.delete(f,n.to),d>n.from&&i.delete(n.from+c,d),u=n.from+c+l.length,i.addMark(n.from+c,u,t.type.create(o||{})),i.removeStoredMark(t.type)}}})}function gy(t){return tE((e,n)=>({get(){return e(),t},set(r){t=r,requestAnimationFrame(()=>{requestAnimationFrame(()=>{n()})})}}))}var l2=class extends XL{constructor(t={}){return super(t),this.contentComponent=null,this.appContext=null,this.reactiveState=gy(this.view.state),this.reactiveExtensionStorage=gy(this.extensionStorage),this.on("beforeTransaction",({nextState:e})=>{this.reactiveState.value=e,this.reactiveExtensionStorage.value=this.extensionStorage}),sb(this)}get state(){return this.reactiveState?this.reactiveState.value:this.view.state}get storage(){return this.reactiveExtensionStorage?this.reactiveExtensionStorage.value:super.storage}registerPlugin(t,e){const n=super.registerPlugin(t,e);return this.reactiveState&&(this.reactiveState.value=n),n}unregisterPlugin(t){const e=super.unregisterPlugin(t);return this.reactiveState&&e&&(this.reactiveState.value=e),e}},a2=xe({name:"EditorContent",props:{editor:{default:null,type:Object}},setup(t){const e=H(),n=ar();return Pt(()=>{const r=t.editor;r&&r.options.element&&e.value&&bt(()=>{var s;if(!e.value||!((s=r.view.dom)!=null&&s.firstChild))return;const o=O(e.value);e.value.append(r.view.dom),r.contentComponent=n.ctx._,n&&(r.appContext={...n.appContext,provides:n.provides}),r.setOptions({element:o}),r.createNodeViews()})}),hi(()=>{const r=t.editor;r&&(r.contentComponent=null,r.appContext=null)}),{rootEl:e}},render(){return Ue("div",{ref:t=>{this.rootEl=t}})}}),u2=(t={})=>{const e=pi();return qe(()=>{e.value=new l2(t)}),hi(()=>{var n,r,s;const o=(n=e.value)==null?void 0:n.view.dom,i=o?.cloneNode(!0);(r=o?.parentNode)==null||r.replaceChild(i,o),(s=e.value)==null||s.destroy()}),e},cu=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},c2=/^\s*>\s$/,d2=Bn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return cu("blockquote",{...Lt(this.options.HTMLAttributes,t),children:cu("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(s=>{const l=e.renderChildren([s]).split(`
`).map(a=>a.trim()===""?n:`${n} ${a}`);r.push(l.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[di({find:c2,type:this.type})]}}),f2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,p2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,h2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,m2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,g2=So.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return cu("strong",{...Lt(this.options.HTMLAttributes,t),children:cu("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ci({find:f2,type:this.type}),ci({find:h2,type:this.type})]},addPasteRules(){return[ko({find:p2,type:this.type}),ko({find:m2,type:this.type})]}}),v2=/(^|[^`])`([^`]+)`(?!`)$/,y2=/(^|[^`])`([^`]+)`(?!`)/g,b2=So.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Lt(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ci({find:v2,type:this.type})]},addPasteRules(){return[ko({find:y2,type:this.type})]}}),Od=4,x2=/^```([a-z]+)?[\s\n]$/,k2=/^~~~([a-z]+)?[\s\n]$/,w2=Bn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:Od,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const o=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(i=>i.startsWith(n)).map(i=>i.replace(n,""))[0];return o||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Lt(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${s}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Od,{state:r}=t,{selection:s}=r,{$from:o,empty:i}=s;if(o.parent.type!==this.type)return!1;const l=" ".repeat(n);return i?t.commands.insertContent(l):t.commands.command(({tr:a})=>{const{from:u,to:c}=s,p=r.doc.textBetween(u,c,`
`,`
`).split(`
`).map(h=>l+h).join(`
`);return a.replaceWith(u,c,r.schema.text(p)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:Od,{state:r}=t,{selection:s}=r,{$from:o,empty:i}=s;return o.parent.type!==this.type?!1:i?t.commands.command(({tr:l})=>{var a;const{pos:u}=o,c=o.start(),d=o.end(),p=r.doc.textBetween(c,d,`
`,`
`).split(`
`);let h=0,m=0;const g=u-c;for(let S=0;S<p.length;S+=1){if(m+p[S].length>=g){h=S;break}m+=p[S].length+1}const y=((a=p[h].match(/^ */))==null?void 0:a[0])||"",b=Math.min(y.length,n);if(b===0)return!0;let x=c;for(let S=0;S<h;S+=1)x+=p[S].length+1;return l.delete(x,x+b),u-x<=b&&l.setSelection(Me.create(l.doc,x)),!0}):t.commands.command(({tr:l})=>{const{from:a,to:u}=s,f=r.doc.textBetween(a,u,`
`,`
`).split(`
`).map(p=>{var h;const m=((h=p.match(/^ */))==null?void 0:h[0])||"",g=Math.min(m.length,n);return p.slice(g)}).join(`
`);return l.replaceWith(a,u,r.schema.text(f)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:s}=n;if(!s||r.parent.type!==this.type)return!1;const o=r.parentOffset===r.parent.nodeSize-2,i=r.parent.textContent.endsWith(`

`);return!o||!i?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:s,empty:o}=n;if(!o||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const l=s.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:u})=>(u.setSelection(Be.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Uf({find:x2,type:this.type,getAttributes:t=>({language:t[1]})}),Uf({find:k2,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new _t({key:new Yt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),s=r?JSON.parse(r):void 0,o=s?.mode;if(!n||!o)return!1;const{tr:i,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return i.replaceSelectionWith(this.type.create({language:o},a)),i.selection.$from.parent.type!==this.type&&i.setSelection(Me.near(i.doc.resolve(Math.max(0,i.selection.from-2)))),i.setMeta("paste",!0),t.dispatch(i),!0}}})]}}),E2=Bn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),S2=Bn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Lt(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:o}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:i}=this.options,{splittableMarks:l}=r.extensionManager,a=o||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:u,dispatch:c})=>{if(c&&a&&i){const d=a.filter(f=>l.includes(f.type.name));u.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),C2=Bn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Lt(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(r);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Uf({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),_2=Bn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Lt(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!ZL(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,s=t();return Ok(n)?s.insertContentAt(r.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:o,tr:i,dispatch:l})=>{if(l){const{$to:a}=i.selection,u=a.end();if(a.nodeAfter)a.nodeAfter.isTextblock?i.setSelection(Me.create(i.doc,a.pos+1)):a.nodeAfter.isBlock?i.setSelection(Ce.create(i.doc,a.pos)):i.setSelection(Me.create(i.doc,a.pos));else{const c=o.schema.nodes[this.options.nextNodeType]||a.parent.type.contentMatch.defaultType,d=c?.create();d&&(i.insert(u,d),i.setSelection(Me.create(i.doc,u+1)))}i.scrollIntoView()}return!0}).run()}}},addInputRules(){return[QL({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),T2=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,A2=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,I2=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,O2=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,M2=So.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Lt(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ci({find:T2,type:this.type}),ci({find:I2,type:this.type})]},addPasteRules(){return[ko({find:A2,type:this.type}),ko({find:O2,type:this.type})]}});const N2="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",R2="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Kf="numeric",Gf="ascii",Yf="alpha",rl="asciinumeric",Bi="alphanumeric",Jf="domain",Uk="emoji",P2="scheme",D2="slashscheme",Md="whitespace";function L2(t,e){return t in e||(e[t]=[]),e[t]}function uo(t,e,n){e[Kf]&&(e[rl]=!0,e[Bi]=!0),e[Gf]&&(e[rl]=!0,e[Yf]=!0),e[rl]&&(e[Bi]=!0),e[Yf]&&(e[Bi]=!0),e[Bi]&&(e[Jf]=!0),e[Uk]&&(e[Jf]=!0);for(const r in e){const s=L2(r,n);s.indexOf(t)<0&&s.push(t)}}function F2(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function An(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}An.groups={};An.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const s=e.jr[r][0],o=e.jr[r][1];if(o&&s.test(t))return o}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,r)},tr(t,e,n,r){r=r||An.groups;let s;return e&&e.j?s=e:(s=new An(e),n&&r&&uo(e,n,r)),this.jr.push([t,s]),s},ts(t,e,n,r){let s=this;const o=t.length;if(!o)return s;for(let i=0;i<o-1;i++)s=s.tt(t[i]);return s.tt(t[o-1],e,n,r)},tt(t,e,n,r){r=r||An.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const o=e;let i,l=s.go(t);if(l?(i=new An,Object.assign(i.j,l.j),i.jr.push.apply(i.jr,l.jr),i.jd=l.jd,i.t=l.t):i=new An,o){if(r)if(i.t&&typeof i.t=="string"){const a=Object.assign(F2(i.t,r),n);uo(o,a,r)}else n&&uo(o,n,r);i.t=o}return s.j[t]=i,i}};const Fe=(t,e,n,r,s)=>t.ta(e,n,r,s),kt=(t,e,n,r,s)=>t.tr(e,n,r,s),vy=(t,e,n,r,s)=>t.ts(e,n,r,s),ne=(t,e,n,r,s)=>t.tt(e,n,r,s),Dr="WORD",Xf="UWORD",qk="ASCIINUMERICAL",Kk="ALPHANUMERICAL",Nl="LOCALHOST",Qf="TLD",Zf="UTLD",Ra="SCHEME",Bo="SLASH_SCHEME",Ch="NUM",ep="WS",_h="NL",sl="OPENBRACE",ol="CLOSEBRACE",du="OPENBRACKET",fu="CLOSEBRACKET",pu="OPENPAREN",hu="CLOSEPAREN",mu="OPENANGLEBRACKET",gu="CLOSEANGLEBRACKET",vu="FULLWIDTHLEFTPAREN",yu="FULLWIDTHRIGHTPAREN",bu="LEFTCORNERBRACKET",xu="RIGHTCORNERBRACKET",ku="LEFTWHITECORNERBRACKET",wu="RIGHTWHITECORNERBRACKET",Eu="FULLWIDTHLESSTHAN",Su="FULLWIDTHGREATERTHAN",Cu="AMPERSAND",_u="APOSTROPHE",Tu="ASTERISK",fs="AT",Au="BACKSLASH",Iu="BACKTICK",Ou="CARET",vs="COLON",Th="COMMA",Mu="DOLLAR",pr="DOT",Nu="EQUALS",Ah="EXCLAMATION",jn="HYPHEN",il="PERCENT",Ru="PIPE",Pu="PLUS",Du="POUND",ll="QUERY",Ih="QUOTE",Gk="FULLWIDTHMIDDLEDOT",Oh="SEMI",hr="SLASH",al="TILDE",Lu="UNDERSCORE",Yk="EMOJI",Fu="SYM";var Jk=Object.freeze({__proto__:null,ALPHANUMERICAL:Kk,AMPERSAND:Cu,APOSTROPHE:_u,ASCIINUMERICAL:qk,ASTERISK:Tu,AT:fs,BACKSLASH:Au,BACKTICK:Iu,CARET:Ou,CLOSEANGLEBRACKET:gu,CLOSEBRACE:ol,CLOSEBRACKET:fu,CLOSEPAREN:hu,COLON:vs,COMMA:Th,DOLLAR:Mu,DOT:pr,EMOJI:Yk,EQUALS:Nu,EXCLAMATION:Ah,FULLWIDTHGREATERTHAN:Su,FULLWIDTHLEFTPAREN:vu,FULLWIDTHLESSTHAN:Eu,FULLWIDTHMIDDLEDOT:Gk,FULLWIDTHRIGHTPAREN:yu,HYPHEN:jn,LEFTCORNERBRACKET:bu,LEFTWHITECORNERBRACKET:ku,LOCALHOST:Nl,NL:_h,NUM:Ch,OPENANGLEBRACKET:mu,OPENBRACE:sl,OPENBRACKET:du,OPENPAREN:pu,PERCENT:il,PIPE:Ru,PLUS:Pu,POUND:Du,QUERY:ll,QUOTE:Ih,RIGHTCORNERBRACKET:xu,RIGHTWHITECORNERBRACKET:wu,SCHEME:Ra,SEMI:Oh,SLASH:hr,SLASH_SCHEME:Bo,SYM:Fu,TILDE:al,TLD:Qf,UNDERSCORE:Lu,UTLD:Zf,UWORD:Xf,WORD:Dr,WS:ep});const Rr=/[a-z]/,Oi=new RegExp("\\p{L}","u"),Nd=new RegExp("\\p{Emoji}","u"),Pr=/\d/,Rd=/\s/,yy="\r",Pd=`
`,$2="",B2="",Dd="";let ma=null,ga=null;function V2(t=[]){const e={};An.groups=e;const n=new An;ma==null&&(ma=by(N2)),ga==null&&(ga=by(R2)),ne(n,"'",_u),ne(n,"{",sl),ne(n,"}",ol),ne(n,"[",du),ne(n,"]",fu),ne(n,"(",pu),ne(n,")",hu),ne(n,"<",mu),ne(n,">",gu),ne(n,"",vu),ne(n,"",yu),ne(n,"",bu),ne(n,"",xu),ne(n,"",ku),ne(n,"",wu),ne(n,"",Eu),ne(n,"",Su),ne(n,"&",Cu),ne(n,"*",Tu),ne(n,"@",fs),ne(n,"`",Iu),ne(n,"^",Ou),ne(n,":",vs),ne(n,",",Th),ne(n,"$",Mu),ne(n,".",pr),ne(n,"=",Nu),ne(n,"!",Ah),ne(n,"-",jn),ne(n,"%",il),ne(n,"|",Ru),ne(n,"+",Pu),ne(n,"#",Du),ne(n,"?",ll),ne(n,'"',Ih),ne(n,"/",hr),ne(n,";",Oh),ne(n,"~",al),ne(n,"_",Lu),ne(n,"\\",Au),ne(n,"",Gk);const r=kt(n,Pr,Ch,{[Kf]:!0});kt(r,Pr,r);const s=kt(r,Rr,qk,{[rl]:!0}),o=kt(r,Oi,Kk,{[Bi]:!0}),i=kt(n,Rr,Dr,{[Gf]:!0});kt(i,Pr,s),kt(i,Rr,i),kt(s,Pr,s),kt(s,Rr,s);const l=kt(n,Oi,Xf,{[Yf]:!0});kt(l,Rr),kt(l,Pr,o),kt(l,Oi,l),kt(o,Pr,o),kt(o,Rr),kt(o,Oi,o);const a=ne(n,Pd,_h,{[Md]:!0}),u=ne(n,yy,ep,{[Md]:!0}),c=kt(n,Rd,ep,{[Md]:!0});ne(n,Dd,c),ne(u,Pd,a),ne(u,Dd,c),kt(u,Rd,c),ne(c,yy),ne(c,Pd),kt(c,Rd,c),ne(c,Dd,c);const d=kt(n,Nd,Yk,{[Uk]:!0});ne(d,"#"),kt(d,Nd,d),ne(d,$2,d);const f=ne(d,B2);ne(f,"#"),kt(f,Nd,d);const p=[[Rr,i],[Pr,s]],h=[[Rr,null],[Oi,l],[Pr,o]];for(let m=0;m<ma.length;m++)ss(n,ma[m],Qf,Dr,p);for(let m=0;m<ga.length;m++)ss(n,ga[m],Zf,Xf,h);uo(Qf,{tld:!0,ascii:!0},e),uo(Zf,{utld:!0,alpha:!0},e),ss(n,"file",Ra,Dr,p),ss(n,"mailto",Ra,Dr,p),ss(n,"http",Bo,Dr,p),ss(n,"https",Bo,Dr,p),ss(n,"ftp",Bo,Dr,p),ss(n,"ftps",Bo,Dr,p),uo(Ra,{scheme:!0,ascii:!0},e),uo(Bo,{slashscheme:!0,ascii:!0},e),t=t.sort((m,g)=>m[0]>g[0]?1:-1);for(let m=0;m<t.length;m++){const g=t[m][0],y=t[m][1]?{[P2]:!0}:{[D2]:!0};g.indexOf("-")>=0?y[Jf]=!0:Rr.test(g)?Pr.test(g)?y[rl]=!0:y[Gf]=!0:y[Kf]=!0,vy(n,g,g,y)}return vy(n,"localhost",Nl,{ascii:!0}),n.jd=new An(Fu),{start:n,tokens:Object.assign({groups:e},Jk)}}function Xk(t,e){const n=H2(e.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,s=[];let o=0,i=0;for(;i<r;){let l=t,a=null,u=0,c=null,d=-1,f=-1;for(;i<r&&(a=l.go(n[i]));)l=a,l.accepts()?(d=0,f=0,c=l):d>=0&&(d+=n[i].length,f++),u+=n[i].length,o+=n[i].length,i++;o-=d,i-=f,u-=d,s.push({t:c.t,v:e.slice(o-u,o),s:o-u,e:o})}return s}function H2(t){const e=[],n=t.length;let r=0;for(;r<n;){let s=t.charCodeAt(r),o,i=s<55296||s>56319||r+1===n||(o=t.charCodeAt(r+1))<56320||o>57343?t[r]:t.slice(r,r+2);e.push(i),r+=i.length}return e}function ss(t,e,n,r,s){let o;const i=e.length;for(let l=0;l<i-1;l++){const a=e[l];t.j[a]?o=t.j[a]:(o=new An(r),o.jr=s.slice(),t.j[a]=o),t=o}return o=new An(n),o.jr=s.slice(),t.j[e[i-1]]=o,o}function by(t){const e=[],n=[];let r=0,s="0123456789";for(;r<t.length;){let o=0;for(;s.indexOf(t[r+o])>=0;)o++;if(o>0){e.push(n.join(""));for(let i=parseInt(t.substring(r,r+o),10);i>0;i--)n.pop();r+=o}else n.push(t[r]),r++}return e}const Rl={defaultProtocol:"http",events:null,format:xy,formatHref:xy,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Mh(t,e=null){let n=Object.assign({},Rl);t&&(n=Object.assign(n,t instanceof Mh?t.o:t));const r=n.ignoreTags,s=[];for(let o=0;o<r.length;o++)s.push(r[o].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Mh.prototype={o:Rl,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:Rl[t],typeof s=="function"&&r&&(s=s(e,n))):typeof s=="function"&&r&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function xy(t){return t}function Qk(t,e){this.t="token",this.v=t,this.tk=e}Qk.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Rl.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),s=t.get("tagName",n,e),o=this.toFormattedString(t),i={},l=t.get("className",n,e),a=t.get("target",n,e),u=t.get("rel",n,e),c=t.getObj("attributes",n,e),d=t.getObj("events",n,e);return i.href=r,l&&(i.class=l),a&&(i.target=a),u&&(i.rel=u),c&&Object.assign(i,c),{tagName:s,attributes:i,content:o,eventListeners:d}}};function Ac(t,e){class n extends Qk{constructor(s,o){super(s,o),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const ky=Ac("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),wy=Ac("text"),j2=Ac("nl"),va=Ac("url",{isLink:!0,toHref(t=Rl.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Nl&&t[1].t===vs}}),Hn=t=>new An(t);function z2({groups:t}){const e=t.domain.concat([Cu,Tu,fs,Au,Iu,Ou,Mu,Nu,jn,Ch,il,Ru,Pu,Du,hr,Fu,al,Lu]),n=[_u,vs,Th,pr,Ah,il,ll,Ih,Oh,mu,gu,sl,ol,fu,du,pu,hu,vu,yu,bu,xu,ku,wu,Eu,Su],r=[Cu,_u,Tu,Au,Iu,Ou,Mu,Nu,jn,sl,ol,il,Ru,Pu,Du,ll,hr,Fu,al,Lu],s=Hn(),o=ne(s,al);Fe(o,r,o),Fe(o,t.domain,o);const i=Hn(),l=Hn(),a=Hn();Fe(s,t.domain,i),Fe(s,t.scheme,l),Fe(s,t.slashscheme,a),Fe(i,r,o),Fe(i,t.domain,i);const u=ne(i,fs);ne(o,fs,u),ne(l,fs,u),ne(a,fs,u);const c=ne(o,pr);Fe(c,r,o),Fe(c,t.domain,o);const d=Hn();Fe(u,t.domain,d),Fe(d,t.domain,d);const f=ne(d,pr);Fe(f,t.domain,d);const p=Hn(ky);Fe(f,t.tld,p),Fe(f,t.utld,p),ne(u,Nl,p);const h=ne(d,jn);ne(h,jn,h),Fe(h,t.domain,d),Fe(p,t.domain,d),ne(p,pr,f),ne(p,jn,h);const m=ne(p,vs);Fe(m,t.numeric,ky);const g=ne(i,jn),v=ne(i,pr);ne(g,jn,g),Fe(g,t.domain,i),Fe(v,r,o),Fe(v,t.domain,i);const y=Hn(va);Fe(v,t.tld,y),Fe(v,t.utld,y),Fe(y,t.domain,i),Fe(y,r,o),ne(y,pr,v),ne(y,jn,g),ne(y,fs,u);const b=ne(y,vs),x=Hn(va);Fe(b,t.numeric,x);const k=Hn(va),S=Hn();Fe(k,e,k),Fe(k,n,S),Fe(S,e,k),Fe(S,n,S),ne(y,hr,k),ne(x,hr,k);const T=ne(l,vs),A=ne(a,vs),M=ne(A,hr),P=ne(M,hr);Fe(l,t.domain,i),ne(l,pr,v),ne(l,jn,g),Fe(a,t.domain,i),ne(a,pr,v),ne(a,jn,g),Fe(T,t.domain,k),ne(T,hr,k),ne(T,ll,k),Fe(P,t.domain,k),Fe(P,e,k),ne(P,hr,k);const z=[[sl,ol],[du,fu],[pu,hu],[mu,gu],[vu,yu],[bu,xu],[ku,wu],[Eu,Su]];for(let D=0;D<z.length;D++){const[W,ie]=z[D],ae=ne(k,W);ne(S,W,ae),ne(ae,ie,k);const de=Hn(va);Fe(ae,e,de);const ve=Hn();Fe(ae,n),Fe(de,e,de),Fe(de,n,ve),Fe(ve,e,de),Fe(ve,n,ve),ne(de,ie,k),ne(ve,ie,k)}return ne(s,Nl,y),ne(s,_h,j2),{start:s,tokens:Jk}}function W2(t,e,n){let r=n.length,s=0,o=[],i=[];for(;s<r;){let l=t,a=null,u=null,c=0,d=null,f=-1;for(;s<r&&!(a=l.go(n[s].t));)i.push(n[s++]);for(;s<r&&(u=a||l.go(n[s].t));)a=null,l=u,l.accepts()?(f=0,d=l):f>=0&&f++,s++,c++;if(f<0)s-=c,s<r&&(i.push(n[s]),s++);else{i.length>0&&(o.push(Ld(wy,e,i)),i=[]),s-=f,c-=f;const p=d.t,h=n.slice(s-c,s);o.push(Ld(p,e,h))}}return i.length>0&&o.push(Ld(wy,e,i)),o}function Ld(t,e,n){const r=n[0].s,s=n[n.length-1].e,o=e.slice(r,s);return new t(o,n)}const U2=typeof console<"u"&&console&&console.warn||(()=>{}),q2="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function K2(){return An.groups={},pt.scanner=null,pt.parser=null,pt.tokenQueue=[],pt.pluginQueue=[],pt.customSchemes=[],pt.initialized=!1,pt}function Ey(t,e=!1){if(pt.initialized&&U2(`linkifyjs: already initialized - will not register custom scheme "${t}" ${q2}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);pt.customSchemes.push([t,e])}function G2(){pt.scanner=V2(pt.customSchemes);for(let t=0;t<pt.tokenQueue.length;t++)pt.tokenQueue[t][1]({scanner:pt.scanner});pt.parser=z2(pt.scanner.tokens);for(let t=0;t<pt.pluginQueue.length;t++)pt.pluginQueue[t][1]({scanner:pt.scanner,parser:pt.parser});return pt.initialized=!0,pt}function Nh(t){return pt.initialized||G2(),W2(pt.parser.start,t,Xk(pt.scanner.start,t))}Nh.scan=Xk;function Zk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new Mh(n),s=Nh(t),o=[];for(let i=0;i<s.length;i++){const l=s[i];l.isLink&&(!e||l.t===e)&&r.check(l)&&o.push(l.toFormattedObject(r))}return o}var Rh="[\0- -\u2029]",Y2=new RegExp(Rh),J2=new RegExp(`${Rh}$`),X2=new RegExp(Rh,"g");function Q2(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function Z2(t){return new _t({key:new Yt("autolink"),appendTransaction:(e,n,r)=>{const s=e.some(u=>u.docChanged)&&!n.doc.eq(r.doc),o=e.some(u=>u.getMeta("preventAutolink"));if(!s||o)return;const{tr:i}=r,l=wk(n.doc,[...e]);if(Ik(l).forEach(({newRange:u})=>{const c=rL(r.doc,u,p=>p.isTextblock);let d,f;if(c.length>1)d=c[0],f=r.doc.textBetween(d.pos,d.pos+d.node.nodeSize,void 0," ");else if(c.length){const p=r.doc.textBetween(u.from,u.to," "," ");if(!J2.test(p))return;d=c[0],f=r.doc.textBetween(d.pos,u.to,void 0," ")}if(d&&f){const p=f.split(Y2).filter(Boolean);if(p.length<=0)return!1;const h=p[p.length-1],m=d.pos+f.lastIndexOf(h);if(!h)return!1;const g=Nh(h).map(v=>v.toObject(t.defaultProtocol));if(!Q2(g))return!1;g.filter(v=>v.isLink).map(v=>({...v,from:m+v.start+1,to:m+v.end+1})).filter(v=>r.schema.marks.code?!r.doc.rangeHasMark(v.from,v.to,r.schema.marks.code):!0).filter(v=>t.validate(v.value)).filter(v=>t.shouldAutoLink(v.value)).forEach(v=>{xh(v.from,v.to,r.doc).some(y=>y.mark.type===t.type)||i.addMark(v.from,v.to,t.type.create({href:v.href}))})}}),!!i.steps.length)return i}})}function eF(t){return new _t({key:new Yt("handleClickLink"),props:{handleClick:(e,n,r)=>{var s,o;if(r.button!==0||!e.editable)return!1;let i=null;if(r.target instanceof HTMLAnchorElement)i=r.target;else{let c=r.target;const d=[];for(;c.nodeName!=="DIV";)d.push(c),c=c.parentNode;i=d.find(f=>f.nodeName==="A")}if(!i)return!1;const l=Ak(e.state,t.type.name),a=(s=i?.href)!=null?s:l.href,u=(o=i?.target)!=null?o:l.target;return t.enableClickSelection&&t.editor.commands.extendMarkRange(t.type.name),i&&a?(window.open(a,u),!0):!1}}})}function tF(t){return new _t({key:new Yt("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:s}=t,{state:o}=e,{selection:i}=o,{empty:l}=i;if(l)return!1;let a="";r.content.forEach(c=>{a+=c.textContent});const u=Zk(a,{defaultProtocol:t.defaultProtocol}).find(c=>c.isLink&&c.value===a);return!a||!u||s!==void 0&&!s(u.href)?!1:t.editor.commands.setMark(t.type,{href:u.href})}}})}function Zs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const s=typeof r=="string"?r:r.scheme;s&&n.push(s)}),!t||t.replace(X2,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var ew=So.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Ey(t);return}Ey(t.scheme,t.optionalSlashes)})},onDestroy(){K2()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Zs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>!!t}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Zs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Zs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Lt(this.options.HTMLAttributes,t),0]:["a",Lt(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Zs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Zs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ko({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,s=Zk(t).filter(o=>o.isLink&&this.options.isAllowedUri(o.value,{defaultValidate:i=>!!Zs(i,n),protocols:n,defaultProtocol:r}));s.length&&s.forEach(o=>{this.options.shouldAutoLink(o.value)&&e.push({text:o.value,data:{href:o.href},index:o.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(Z2({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:s=>!!Zs(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&t.push(eF({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(tF({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),nF=ew,rF=Object.defineProperty,sF=(t,e)=>{for(var n in e)rF(t,n,{get:e[n],enumerable:!0})},oF="listItem",Sy="textStyle",Cy=/^\s*([-+*])\s$/,tw=Bn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Lt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(oF,this.editor.getAttributes(Sy)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=di({find:Cy,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=di({find:Cy,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Sy),editor:this.editor})),[t]}}),nw=Bn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Lt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const i=t.tokens.slice(1),l=e.parseChildren(i);n.push(...l)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Sh(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),iF={};sF(iF,{findListItemPos:()=>Kl,getNextListDepth:()=>Ph,handleBackspace:()=>tp,handleDelete:()=>np,hasListBefore:()=>rw,hasListItemAfter:()=>lF,hasListItemBefore:()=>sw,listItemHasSubList:()=>ow,nextListIsDeeper:()=>iw,nextListIsHigher:()=>lw});var Kl=(t,e)=>{const{$from:n}=e.selection,r=Dt(t,e.schema);let s=null,o=n.depth,i=n.pos,l=null;for(;o>0&&l===null;)s=n.node(o),s.type===r?l=o:(o-=1,i-=1);return l===null?null:{$pos:e.doc.resolve(i),depth:l}},Ph=(t,e)=>{const n=Kl(t,e);if(!n)return!1;const[,r]=pL(e,t,n.$pos.pos+4);return r},rw=(t,e,n)=>{const{$anchor:r}=t.selection,s=Math.max(0,r.pos-2),o=t.doc.resolve(s).node();return!(!o||!n.includes(o.type.name))},sw=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},ow=(t,e,n)=>{if(!n)return!1;const r=Dt(t,e.schema);let s=!1;return n.descendants(o=>{o.type===r&&(s=!0)}),s},tp=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!Ls(t.state,e)&&rw(t.state,e,n)){const{$anchor:l}=t.state.selection,a=t.state.doc.resolve(l.before()-1),u=[];a.node().descendants((f,p)=>{f.type.name===e&&u.push({node:f,pos:p})});const c=u.at(-1);if(!c)return!1;const d=t.state.doc.resolve(a.start()+c.pos+1);return t.chain().cut({from:l.start()-1,to:l.end()+1},d.end()).joinForward().run()}if(!Ls(t.state,e)||!vL(t.state))return!1;const r=Kl(e,t.state);if(!r)return!1;const o=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),i=ow(e,t.state,o);return sw(e,t.state)&&!i?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},iw=(t,e)=>{const n=Ph(t,e),r=Kl(t,e);return!r||!n?!1:n>r.depth},lw=(t,e)=>{const n=Ph(t,e),r=Kl(t,e);return!r||!n?!1:n<r.depth},np=(t,e)=>{if(!Ls(t.state,e)||!gL(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:s}=n;return!n.empty&&r.sameParent(s)?!1:iw(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():lw(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},lF=(t,e)=>{var n;const{$anchor:r}=e.selection,s=e.doc.resolve(r.pos-r.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},aw=Ft.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&np(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&np(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&tp(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&tp(t,n,r)&&(e=!0)}),e}}}}),_y=/^(\s*)(\d+)\.\s+(.*)$/,aF=/^\s/;function uF(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n],o=s.match(_y);if(!o)break;const[,i,l,a]=o,u=i.length;let c=a,d=n+1;const f=[s];for(;d<t.length;){const p=t[d];if(p.match(_y))break;if(p.trim()==="")f.push(p),c+=`
`,d+=1;else if(p.match(aF))f.push(p),c+=`
${p.slice(u+2)}`,d+=1;else break}e.push({indent:u,number:parseInt(l,10),content:c.trim(),raw:f.join(`
`)}),r=d,n=d}return[e,r]}function uw(t,e,n){var r;const s=[];let o=0;for(;o<t.length;){const i=t[o];if(i.indent===e){const l=i.content.split(`
`),a=((r=l[0])==null?void 0:r.trim())||"",u=[];a&&u.push({type:"paragraph",raw:a,tokens:n.inlineTokens(a)});const c=l.slice(1).join(`
`).trim();if(c){const p=n.blockTokens(c);u.push(...p)}let d=o+1;const f=[];for(;d<t.length&&t[d].indent>e;)f.push(t[d]),d+=1;if(f.length>0){const p=Math.min(...f.map(m=>m.indent)),h=uw(f,p,n);u.push({type:"list",ordered:!0,start:f[0].number,items:h,raw:f.map(m=>m.raw).join(`
`)})}s.push({type:"list_item",raw:i.raw,tokens:u}),o=d}else o+=1}return s}function cF(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")r.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const o=e.parseChildren([s]);r.push({type:"paragraph",content:o})}else{const o=e.parseChildren([s]);o.length>0&&r.push(...o)}}),{type:"listItem",content:r}})}var dF="listItem",Ty="textStyle",Ay=/^(\d+)\.\s$/,cw=Bn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Lt(this.options.HTMLAttributes,n),0]:["ol",Lt(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?cF(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const s=t.split(`
`),[o,i]=uF(s);if(o.length===0)return;const l=uw(o,0,n);return l.length===0?void 0:{type:"list",ordered:!0,start:((r=o[0])==null?void 0:r.number)||1,items:l,raw:s.slice(0,i).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dF,this.editor.getAttributes(Ty)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=di({find:Ay,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=di({find:Ay,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Ty)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),fF=/^\s*(\[([( |x])?\])\s$/,pF=Bn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",Lt(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Sh(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const s=document.createElement("li"),o=document.createElement("label"),i=document.createElement("span"),l=document.createElement("input"),a=document.createElement("div"),u=c=>{var d,f;l.ariaLabel=((f=(d=this.options.a11y)==null?void 0:d.checkboxLabel)==null?void 0:f.call(d,c,l.checked))||`Task item checkbox for ${c.textContent||"empty task item"}`};return u(t),o.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",c=>c.preventDefault()),l.addEventListener("change",c=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:d}=c.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const p=n();if(typeof p!="number")return!1;const h=f.doc.nodeAt(p);return f.setNodeMarkup(p,void 0,{...h?.attrs,checked:d}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,d)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([c,d])=>{s.setAttribute(c,d)}),s.dataset.checked=t.attrs.checked,l.checked=t.attrs.checked,o.append(l,i),s.append(o,a),Object.entries(e).forEach(([c,d])=>{s.setAttribute(c,d)}),{dom:s,contentDOM:a,update:c=>c.type!==this.type?!1:(s.dataset.checked=c.attrs.checked,l.checked=c.attrs.checked,u(c),!0)}}},addInputRules(){return[di({find:fF,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),hF=Bn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",Lt(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=o=>{const i=qf(o,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,a)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:a}),customNestedParser:r},n);return i?[{type:"taskList",raw:i.raw,items:i.items}]:n.blockTokens(o)},s=qf(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:o=>({indentLevel:o[1].length,mainContent:o[4],checked:o[3].toLowerCase()==="x"}),createToken:(o,i)=>({type:"taskItem",raw:"",mainContent:o.mainContent,indentLevel:o.indentLevel,checked:o.checked,text:o.mainContent,tokens:n.inlineTokens(o.mainContent),nestedTokens:i}),customNestedParser:r},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ft.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(tw.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(nw.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(aw.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(cw.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(pF.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(hF.configure(this.options.taskList)),t}});var mF=Bn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Lt(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),gF=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,vF=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,yF=So.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Lt(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ci({find:gF,type:this.type})]},addPasteRules(){return[ko({find:vF,type:this.type})]}}),bF=Bn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),dw=So.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Lt(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const o=s[2].trim();return{type:"underline",raw:s[0],text:o,tokens:n.inlineTokens(o)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),xF=dw;function kF(t={}){return new _t({view(e){return new wF(e,t)}})}class wF{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let o=i=>{this[s](i)};return e.dom.addEventListener(s,o),{name:s,handler:o}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,s=this.editorView.dom,o=s.getBoundingClientRect(),i=o.width/s.offsetWidth,l=o.height/s.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let p=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(p){let h=p.getBoundingClientRect(),m=d?h.bottom:h.top;d&&f&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let g=this.width/2*l;r={left:h.left,right:h.right,top:m-g,bottom:m+g}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*i;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let u,c;if(!a||a==document.body&&getComputedStyle(a).position=="static")u=-pageXOffset,c=-pageYOffset;else{let d=a.getBoundingClientRect(),f=d.width/a.offsetWidth,p=d.height/a.offsetHeight;u=d.left-a.scrollLeft*f,c=d.top-a.scrollTop*p}this.element.style.left=(r.left-u)/i+"px",this.element.style.top=(r.top-c)/l+"px",this.element.style.width=(r.right-r.left)/i+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=r&&r.type.spec.disableDropCursor,o=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!o){let i=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=hx(this.editorView.state.doc,i,this.editorView.dragging.slice);l!=null&&(i=l)}this.setCursor(i),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class Ct extends Be{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ct.valid(r)?new Ct(r):Be.near(r)}content(){return ye.empty}eq(e){return e instanceof Ct&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ct(e.resolve(n.pos))}getBookmark(){return new Dh(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!EF(e)||!SF(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ct.valid(e))return e;let s=e.pos,o=null;for(let i=e.depth;;i--){let l=e.node(i);if(n>0?e.indexAfter(i)<l.childCount:e.index(i)>0){o=l.child(n>0?e.indexAfter(i):e.index(i)-1);break}else if(i==0)return null;s+=n;let a=e.doc.resolve(s);if(Ct.valid(a))return a}for(;;){let i=n>0?o.firstChild:o.lastChild;if(!i){if(o.isAtom&&!o.isText&&!Ce.isSelectable(o)){e=e.doc.resolve(s+o.nodeSize*n),r=!1;continue e}break}o=i,s+=n;let l=e.doc.resolve(s);if(Ct.valid(l))return l}return null}}}Ct.prototype.visible=!1;Ct.findFrom=Ct.findGapCursorFrom;Be.jsonID("gapcursor",Ct);class Dh{constructor(e){this.pos=e}map(e){return new Dh(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ct.valid(n)?new Ct(n):Be.near(n)}}function fw(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function EF(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||fw(s.type))return!0;if(s.inlineContent)return!1}}return!0}function SF(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let s=r.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||fw(s.type))return!0;if(s.inlineContent)return!1}}return!0}function CF(){return new _t({props:{decorations:IF,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ct.valid(n)?new Ct(n):null},handleClick:TF,handleKeyDown:_F,handleDOMEvents:{beforeinput:AF}}})}const _F=hk({ArrowLeft:ya("horiz",-1),ArrowRight:ya("horiz",1),ArrowUp:ya("vert",-1),ArrowDown:ya("vert",1)});function ya(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,s,o){let i=r.selection,l=e>0?i.$to:i.$from,a=i.empty;if(i instanceof Me){if(!o.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let u=Ct.findGapCursorFrom(l,e,a);return u?(s&&s(r.tr.setSelection(new Ct(u))),!0):!1}}function TF(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ct.valid(r))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ce.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ct(r))),!0)}function AF(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ct))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let s=Z.empty;for(let i=r.length-1;i>=0;i--)s=Z.from(r[i].createAndFill(null,s));let o=t.state.tr.replace(n.pos,n.pos,new ye(s,0,0));return o.setSelection(Me.near(o.doc.resolve(n.pos+1))),t.dispatch(o),!1}function IF(t){if(!(t.selection instanceof Ct))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",yt.create(t.doc,[kn.widget(t.selection.head,e,{key:"gapcursor"})])}var $u=200,Kt=function(){};Kt.prototype.append=function(e){return e.length?(e=Kt.from(e),!this.length&&e||e.length<$u&&this.leafAppend(e)||this.length<$u&&e.leafPrepend(this)||this.appendInner(e)):this};Kt.prototype.prepend=function(e){return e.length?Kt.from(e).append(this):this};Kt.prototype.appendInner=function(e){return new OF(this,e)};Kt.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Kt.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Kt.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Kt.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Kt.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var s=[];return this.forEach(function(o,i){return s.push(e(o,i))},n,r),s};Kt.from=function(e){return e instanceof Kt?e:e&&e.length?new pw(e):Kt.empty};var pw=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,o){return s==0&&o==this.length?this:new e(this.values.slice(s,o))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,o,i,l){for(var a=o;a<i;a++)if(s(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(s,o,i,l){for(var a=o-1;a>=i;a--)if(s(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=$u)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=$u)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Kt);Kt.empty=new pw([]);var OF=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,s,o,i){var l=this.left.length;if(s<l&&this.left.forEachInner(r,s,Math.min(o,l),i)===!1||o>l&&this.right.forEachInner(r,Math.max(s-l,0),Math.min(this.length,o)-l,i+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,s,o,i){var l=this.left.length;if(s>l&&this.right.forEachInvertedInner(r,s-l,Math.max(o,l)-l,i+l)===!1||o<l&&this.left.forEachInvertedInner(r,Math.min(s,l),o,i)===!1)return!1},e.prototype.sliceInner=function(r,s){if(r==0&&s==this.length)return this;var o=this.left.length;return s<=o?this.left.slice(r,s):r>=o?this.right.slice(r-o,s-o):this.left.slice(r,o).append(this.right.slice(0,s-o))},e.prototype.leafAppend=function(r){var s=this.right.leafAppend(r);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(r){var s=this.left.leafPrepend(r);if(s)return new e(s,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Kt);const MF=500;class tr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let s,o;n&&(s=this.remapping(r,this.items.length),o=s.maps.length);let i=e.tr,l,a,u=[],c=[];return this.items.forEach((d,f)=>{if(!d.step){s||(s=this.remapping(r,f+1),o=s.maps.length),o--,c.push(d);return}if(s){c.push(new mr(d.map));let p=d.step.map(s.slice(o)),h;p&&i.maybeStep(p).doc&&(h=i.mapping.maps[i.mapping.maps.length-1],u.push(new mr(h,void 0,void 0,u.length+c.length))),o--,h&&s.appendMap(h,o)}else i.maybeStep(d.step);if(d.selection)return l=s?d.selection.map(s.slice(o)):d.selection,a=new tr(this.items.slice(0,r).append(c.reverse().concat(u)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:i,selection:l}}addTransform(e,n,r,s){let o=[],i=this.eventCount,l=this.items,a=!s&&l.length?l.get(l.length-1):null;for(let c=0;c<e.steps.length;c++){let d=e.steps[c].invert(e.docs[c]),f=new mr(e.mapping.maps[c],d,n),p;(p=a&&a.merge(f))&&(f=p,c?o.pop():l=l.slice(0,l.length-1)),o.push(f),n&&(i++,n=void 0),s||(a=f)}let u=i-r.depth;return u>RF&&(l=NF(l,u),i-=u),new tr(l.append(o),i)}remapping(e,n){let r=new Cl;return this.items.forEach((s,o)=>{let i=s.mirrorOffset!=null&&o-s.mirrorOffset>=e?r.maps.length-s.mirrorOffset:void 0;r.appendMap(s.map,i)},e,n),r}addMaps(e){return this.eventCount==0?this:new tr(this.items.append(e.map(n=>new mr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],s=Math.max(0,this.items.length-n),o=e.mapping,i=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},s);let a=n;this.items.forEach(f=>{let p=o.getMirror(--a);if(p==null)return;i=Math.min(i,p);let h=o.maps[p];if(f.step){let m=e.steps[p].invert(e.docs[p]),g=f.selection&&f.selection.map(o.slice(a+1,p));g&&l++,r.push(new mr(h,m,g))}else r.push(new mr(h))},s);let u=[];for(let f=n;f<i;f++)u.push(new mr(o.maps[f]));let c=this.items.slice(0,s).append(u).append(r),d=new tr(c,l);return d.emptyItemCount()>MF&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,s=[],o=0;return this.items.forEach((i,l)=>{if(l>=e)s.push(i),i.selection&&o++;else if(i.step){let a=i.step.map(n.slice(r)),u=a&&a.getMap();if(r--,u&&n.appendMap(u,r),a){let c=i.selection&&i.selection.map(n.slice(r));c&&o++;let d=new mr(u.invert(),a,c),f,p=s.length-1;(f=s.length&&s[p].merge(d))?s[p]=f:s.push(d)}}else i.map&&r--},this.items.length,0),new tr(Kt.from(s.reverse()),o)}}tr.empty=new tr(Kt.empty,0);function NF(t,e){let n;return t.forEach((r,s)=>{if(r.selection&&e--==0)return n=s,!1}),t.slice(n)}class mr{constructor(e,n,r,s){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new mr(n.getMap().invert(),n,this.selection)}}}class ps{constructor(e,n,r,s,o){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=s,this.prevComposition=o}}const RF=20;function PF(t,e,n,r){let s=n.getMeta(go),o;if(s)return s.historyState;n.getMeta(FF)&&(t=new ps(t.done,t.undone,null,0,-1));let i=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(i&&i.getMeta(go))return i.getMeta(go).redo?new ps(t.done.addTransform(n,void 0,r,Pa(e)),t.undone,Iy(n.mapping.maps),t.prevTime,t.prevComposition):new ps(t.done,t.undone.addTransform(n,void 0,r,Pa(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(i&&i.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!i&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!DF(n,t.prevRanges)),u=i?Fd(t.prevRanges,n.mapping):Iy(n.mapping.maps);return new ps(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Pa(e)),tr.empty,u,n.time,l??t.prevComposition)}else return(o=n.getMeta("rebased"))?new ps(t.done.rebased(n,o),t.undone.rebased(n,o),Fd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new ps(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),Fd(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function DF(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,s)=>{for(let o=0;o<e.length;o+=2)r<=e[o+1]&&s>=e[o]&&(n=!0)}),n}function Iy(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,s,o,i)=>e.push(o,i));return e}function Fd(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let s=e.map(t[r],1),o=e.map(t[r+1],-1);s<=o&&n.push(s,o)}return n}function LF(t,e,n){let r=Pa(e),s=go.get(e).spec.config,o=(n?t.undone:t.done).popEvent(e,r);if(!o)return null;let i=o.selection.resolve(o.transform.doc),l=(n?t.done:t.undone).addTransform(o.transform,e.selection.getBookmark(),s,r),a=new ps(n?l:o.remaining,n?o.remaining:l,null,0,-1);return o.transform.setSelection(i).setMeta(go,{redo:n,historyState:a})}let $d=!1,Oy=null;function Pa(t){let e=t.plugins;if(Oy!=e){$d=!1,Oy=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){$d=!0;break}}return $d}const go=new Yt("history"),FF=new Yt("closeHistory");function $F(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new _t({key:go,state:{init(){return new ps(tr.empty,tr.empty,null,0,-1)},apply(e,n,r){return PF(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,s=r=="historyUndo"?mw:r=="historyRedo"?gw:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function hw(t,e){return(n,r)=>{let s=go.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(r){let o=LF(s,n,t);o&&r(e?o.scrollIntoView():o)}return!0}}const mw=hw(!1,!0),gw=hw(!0,!0);Ft.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new _t({key:new Yt("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const o=this.storage.characters({node:r.doc});if(o>s){const i=o-s,l=0,a=i;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const u=r.tr.deleteRange(l,a);return t=!0,u}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const s=this.storage.characters({node:n.doc}),o=this.storage.characters({node:e.doc});if(o<=r||s>r&&o>r&&o<=s)return!0;if(s>r&&o>r&&o>s||!e.getMeta("paste"))return!1;const l=e.selection.$head.pos,a=o-r,u=l-a,c=l;return e.deleteRange(u,c),!(this.storage.characters({node:e.doc})>r)}})]}});var BF=Ft.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[kF(this.options)]}});Ft.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new _t({key:new Yt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:s}=e,o=[];if(!n||!r)return yt.create(t,[]);let i=0;this.options.mode==="deepest"&&t.descendants((a,u)=>{if(a.isText)return;if(!(s>=u&&s<=u+a.nodeSize-1))return!1;i+=1});let l=0;return t.descendants((a,u)=>{if(a.isText||!(s>=u&&s<=u+a.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&i-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";o.push(kn.node(u,u+a.nodeSize,{class:this.options.className}))}),yt.create(t,o)}}})]}});var VF=Ft.create({name:"gapCursor",addProseMirrorPlugins(){return[CF()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=nt(Se(t,"allowGapCursor",n)))!=null?e:null}}});Ft.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new _t({key:new Yt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,s=[];if(!n)return null;const o=this.editor.isEmpty;return t.descendants((i,l)=>{const a=r>=l&&r<=l+i.nodeSize,u=!i.isLeaf&&Cc(i);if((a||!this.options.showOnlyCurrent)&&u){const c=[this.options.emptyNodeClass];o&&c.push(this.options.emptyEditorClass);const d=kn.node(l,l+i.nodeSize,{class:c.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:i,pos:l,hasAnchor:a}):this.options.placeholder});s.push(d)}return this.options.includeChildren}),yt.create(t,s)}}})]}});Ft.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new _t({key:new Yt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||Ok(n.selection)||t.view.dragging?null:yt.create(n.doc,[kn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function My({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var HF=Ft.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Yt(this.name),n=((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||this.options.node||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new _t({key:e,appendTransaction:(s,o,i)=>{const{doc:l,tr:a,schema:u}=i,c=e.getState(i),d=l.content.size,f=u.nodes[n];if(c)return a.insert(d,f.create())},state:{init:(s,o)=>{const i=o.tr.doc.lastChild;return!My({node:i,types:r})},apply:(s,o)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return o;const i=s.doc.lastChild;return!My({node:i,types:r})}}})]}}),jF=Ft.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>mw(t,e),redo:()=>({state:t,dispatch:e})=>gw(t,e)}},addProseMirrorPlugins(){return[$F(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),zF=Ft.create({name:"starterKit",addExtensions(){var t,e,n,r;const s=[];return this.options.bold!==!1&&s.push(g2.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(d2.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(tw.configure(this.options.bulletList)),this.options.code!==!1&&s.push(b2.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(w2.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(E2.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(BF.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(VF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(S2.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(C2.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(jF.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(_2.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(M2.configure(this.options.italic)),this.options.listItem!==!1&&s.push(nw.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(aw.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(ew.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(cw.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(mF.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(yF.configure(this.options.strike)),this.options.text!==!1&&s.push(bF.configure(this.options.text)),this.options.underline!==!1&&s.push(dw.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(HF.configure((r=this.options)==null?void 0:r.trailingNode)),s}}),WF=zF;const UF={key:0,class:"flex flex-wrap items-center gap-1 p-2 border-b border-gray-200 bg-gray-50 rounded-t-md"},qF=["title"],KF=["title"],GF=["title"],YF=["title"],JF=["title"],XF=["title"],QF=["title"],ZF=["title"],e$=["title"],t$=["title"],n$=["title"],r$=["title"],s$=["title","disabled"],o$=["title","disabled"],i$=xe({__name:"RichTextEditor",props:{modelValue:{},placeholder:{},readonly:{type:Boolean}},emits:["update:modelValue"],setup(t,{emit:e}){const n=t,r=e,{t:s}=Ot(),o=u2({extensions:[WF.configure({heading:{levels:[1,2,3]},link:!1,underline:!1}),xF,nF.configure({openOnClick:!1,HTMLAttributes:{class:"text-blue-600 underline"}})],content:n.modelValue,editable:!n.readonly,onUpdate:({editor:l})=>{n.readonly||r("update:modelValue",l.getHTML())},editorProps:{attributes:{class:"rich-text-content px-3 py-2 border-0 focus:outline-none focus:ring-0","data-placeholder":n.placeholder||""}}}),i=()=>{if(!o.value)return;const l=o.value.getAttributes("link").href,a=window.prompt(s("richTextEditor.link"),l);if(a!==null){if(a===""){o.value.chain().focus().extendMarkRange("link").unsetLink().run();return}o.value.chain().focus().extendMarkRange("link").setLink({href:a}).run()}};return je(()=>n.modelValue,l=>{o.value?.getHTML()!==l&&o.value?.commands.setContent(l)}),je(()=>n.readonly,l=>{o.value&&o.value.setEditable(!l)},{immediate:!0}),hi(()=>{o.value?.destroy()}),(l,a)=>(J(),le("div",{class:Pe(["rich-text-editor",{"readonly-mode":n.readonly}])},[O(o)&&!n.readonly?(J(),le("div",UF,[N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("bold")?"bg-gray-300":""]),title:O(s)("richTextEditor.bold"),onClick:a[0]||(a[0]=u=>O(o).chain().focus().toggleBold().run())},[se(O(JI),{size:16,class:"text-gray-700"})],10,qF),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("italic")?"bg-gray-300":""]),title:O(s)("richTextEditor.italic"),onClick:a[1]||(a[1]=u=>O(o).chain().focus().toggleItalic().run())},[se(O(rO),{size:16,class:"text-gray-700"})],10,KF),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("underline")?"bg-gray-300":""]),title:O(s)("richTextEditor.underline"),onClick:a[2]||(a[2]=u=>O(o).chain().focus().toggleUnderline().run())},[se(O(dO),{size:16,class:"text-gray-700"})],10,GF),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("strike")?"bg-gray-300":""]),title:O(s)("richTextEditor.strike"),onClick:a[3]||(a[3]=u=>O(o).chain().focus().toggleStrike().run())},[se(O(cO),{size:16,class:"text-gray-700"})],10,YF),a[13]||(a[13]=N("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),N("button",{type:"button",class:Pe(["px-2 py-1 rounded text-sm hover:bg-gray-200 transition-colors",O(o).isActive("heading",{level:1})?"bg-gray-300 font-semibold":""]),title:O(s)("richTextEditor.heading1"),onClick:a[4]||(a[4]=u=>O(o).chain().focus().toggleHeading({level:1}).run())}," H1 ",10,JF),N("button",{type:"button",class:Pe(["px-2 py-1 rounded text-sm hover:bg-gray-200 transition-colors",O(o).isActive("heading",{level:2})?"bg-gray-300 font-semibold":""]),title:O(s)("richTextEditor.heading2"),onClick:a[5]||(a[5]=u=>O(o).chain().focus().toggleHeading({level:2}).run())}," H2 ",10,XF),N("button",{type:"button",class:Pe(["px-2 py-1 rounded text-sm hover:bg-gray-200 transition-colors",O(o).isActive("heading",{level:3})?"bg-gray-300 font-semibold":""]),title:O(s)("richTextEditor.heading3"),onClick:a[6]||(a[6]=u=>O(o).chain().focus().toggleHeading({level:3}).run())}," H3 ",10,QF),a[14]||(a[14]=N("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("bulletList")?"bg-gray-300":""]),title:O(s)("richTextEditor.bulletList"),onClick:a[7]||(a[7]=u=>O(o).chain().focus().toggleBulletList().run())},[se(O(iO),{size:16,class:"text-gray-700"})],10,ZF),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("orderedList")?"bg-gray-300":""]),title:O(s)("richTextEditor.orderedList"),onClick:a[8]||(a[8]=u=>O(o).chain().focus().toggleOrderedList().run())},[se(O(oO),{size:16,class:"text-gray-700"})],10,e$),a[15]||(a[15]=N("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("blockquote")?"bg-gray-300":""]),title:O(s)("richTextEditor.blockquote"),onClick:a[9]||(a[9]=u=>O(o).chain().focus().toggleBlockquote().run())},[se(O(aO),{size:16,class:"text-gray-700"})],10,t$),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("codeBlock")?"bg-gray-300":""]),title:O(s)("richTextEditor.codeBlock"),onClick:a[10]||(a[10]=u=>O(o).chain().focus().toggleCodeBlock().run())},[se(O(tO),{size:16,class:"text-gray-700"})],10,n$),a[16]||(a[16]=N("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),N("button",{type:"button",class:Pe(["p-1.5 rounded hover:bg-gray-200 transition-colors",O(o).isActive("link")?"bg-gray-300":""]),title:O(o).isActive("link")?O(s)("richTextEditor.unlink"):O(s)("richTextEditor.link"),onClick:i},[se(O(sO),{size:16,class:"text-gray-700"})],10,r$),a[17]||(a[17]=N("div",{class:"w-px h-6 bg-gray-300 mx-1"},null,-1)),N("button",{type:"button",class:"p-1.5 rounded hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:O(s)("richTextEditor.undo"),disabled:!O(o).can().undo(),onClick:a[11]||(a[11]=u=>O(o).chain().focus().undo().run())},[se(O(fO),{size:16,class:"text-gray-700"})],8,s$),N("button",{type:"button",class:"p-1.5 rounded hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",title:O(s)("richTextEditor.redo"),disabled:!O(o).can().redo(),onClick:a[12]||(a[12]=u=>O(o).chain().focus().redo().run())},[se(O(uO),{size:16,class:"text-gray-700"})],8,o$)])):Ve("",!0),se(O(a2),{editor:O(o),class:"rich-text-content-wrapper"},null,8,["editor"])],2))}}),Lh=zl(i$,[["__scopeId","data-v-09e099cc"]]),l$=xe({__name:"Collapsible",props:{value:{type:Boolean,default:!0},duration:{default:200},transition:{default:"linear"}},setup(t){const e=t,n=H(null),r=H(e.value?"0":"unset"),s=H(e.value?"hidden":"unset"),o=L(()=>({transition:`max-height ${e.transition} ${e.duration}ms`,maxHeight:r.value,overflow:s.value})),i=l=>{n.value&&l.target===n.value&&(e.value||(r.value="unset",s.value="unset"))};return qe(()=>{n.value&&n.value.addEventListener("transitionend",i)}),hi(()=>{n.value&&n.value.removeEventListener("transitionend",i)}),je(()=>e.value,(l,a)=>{a!==l&&n.value&&(r.value==="unset"&&(r.value=`${n.value.scrollHeight}px`,s.value="hidden"),bt(()=>{setTimeout(()=>{n.value&&(r.value=l?"0":`${n.value.scrollHeight}px`)},0)}))}),(l,a)=>(J(),le("div",{style:Wu(o.value),ref_key:"rootEl",ref:n},[Yr(l.$slots,"default")],4))}}),a$=["aria-expanded"],u$=xe({__name:"Accordion",props:{label:{default:""},open:{type:Boolean,default:!1},duration:{default:200},transition:{default:"linear"},caretPosition:{default:"right"},indicatorType:{default:"chevron"},headerHover:{type:Boolean,default:!1},headerGroup:{type:Boolean,default:!1}},emits:["update:open","toggle"],setup(t,{emit:e}){const n=t,r=e,s=H(n.open);je(()=>n.open,c=>{s.value=c});const o=()=>{const c=!s.value;s.value=c,r("update:open",c),r("toggle",c)},i=L(()=>n.duration),l=L(()=>n.transition),a=L(()=>n.label),u=L(()=>n.caretPosition);return(c,d)=>(J(),le("div",null,[N("button",{type:"button",class:Pe(["flex w-full items-center justify-between gap-2 py-2",u.value==="left"?"pl-2":"",n.headerHover?"hover:bg-gray-50":"",n.headerGroup?"group":""]),"aria-expanded":s.value,onClick:o},[N("div",{class:Pe(["min-w-0 flex-1 text-left",u.value==="left"?"flex items-center gap-2":""])},[u.value==="left"&&t.indicatorType==="chevron"?(J(),Ke(O(zg),{key:0,class:Pe(["shrink-0 transition-transform",s.value?"rotate-90":"rotate-0"]),size:18,"aria-hidden":"true"},null,8,["class"])):u.value==="left"&&t.indicatorType==="folder"?(J(),Ke(Xh(s.value?O(Wg):O(Ua)),{key:1,class:"shrink-0 transition-all",size:18,"aria-hidden":"true"})):Ve("",!0),Yr(c.$slots,"header",{},()=>[lr(re(a.value),1)])],2),u.value==="right"&&t.indicatorType==="chevron"?(J(),Ke(O(zg),{key:0,class:Pe(["shrink-0 transition-transform",s.value?"rotate-90":"rotate-0"]),size:18,"aria-hidden":"true"},null,8,["class"])):u.value==="right"&&t.indicatorType==="folder"?(J(),Ke(Xh(s.value?O(Wg):O(Ua)),{key:1,class:"shrink-0 transition-all",size:18,"aria-hidden":"true"})):Ve("",!0)],10,a$),se(l$,{value:!s.value,duration:i.value,transition:l.value},{default:De(()=>[Yr(c.$slots,"default")]),_:3},8,["value","duration","transition"])]))}}),c$={class:"flex items-center justify-between px-2 py-1 text-sm rounded transition hover:bg-gray-50 group"},d$={class:"inline-flex items-center gap-2 flex-1 min-w-0"},f$=["title"],p$={class:"truncate"},h$={key:0,class:"inline-flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"},m$=["aria-label"],g$=["aria-label"],v$=xe({__name:"StepListItem",props:{step:{},index:{},readonly:{type:Boolean}},emits:["edit","delete"],setup(t,{emit:e}){const{t:n}=Ot(),r=e,s=()=>{r("edit")},o=()=>{r("delete")};return(i,l)=>(J(),le("div",c$,[N("span",d$,[t.readonly?Ve("",!0):(J(),le("button",{key:0,type:"button",class:"drag-handle shrink-0 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 cursor-move",title:O(n)("common.drag")},[se(O(ac),{size:16})],8,f$)),t.step.type==="slide"?(J(),Ke(O(k1),{key:1,size:16,class:"text-gray-500 shrink-0","aria-hidden":"true"})):(J(),Ke(O(x1),{key:2,size:16,class:"text-gray-500 shrink-0","aria-hidden":"true"})),N("span",p$,re(t.step.name||O(n)("stepList.unnamedStep")),1)]),t.readonly?Ve("",!0):(J(),le("span",h$,[N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.edit"),onClick:Bt(s,["stop"])},[se(O(Hp),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,m$),N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.delete"),onClick:Bt(o,["stop"])},[se(O(uc),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,g$)]))]))}}),y$={class:"space-y-2"},b$={key:0,class:"text-center py-8 text-gray-500 text-sm"},x$={key:2,class:"flex gap-2 pt-2"},k$=xe({__name:"StepList",props:{steps:{},sectionId:{},editable:{type:Boolean,default:!0},readonly:{type:Boolean,default:!1}},emits:["add-slide","add-question","edit-slide","edit-question","delete-step","reorder-steps"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H([]);je(()=>r.steps,d=>{o.value=[...d]},{immediate:!0});const i=d=>{if(!d.moved){o.value=[...r.steps];return}const f=o.value.map(p=>p.id);s("reorder-steps",{newOrder:f}),o.value=[...r.steps]},l=()=>{s("add-slide")},a=()=>{s("add-question")},u=d=>{d.type==="slide"?s("edit-slide",{stepId:d.id}):s("edit-question",{stepId:d.id})},c=d=>{s("delete-step",{stepId:d.id})};return(d,f)=>(J(),le("div",y$,[t.steps.length===0?(J(),le("div",b$,re(O(n)("stepList.noSteps")),1)):(J(),Ke(O(pc),{key:1,modelValue:o.value,"onUpdate:modelValue":f[0]||(f[0]=p=>o.value=p),"item-key":"id",tag:"div",class:"space-y-1",animation:200,disabled:t.readonly,handle:".drag-handle",onChange:i},{default:De(()=>[(J(!0),le(Ye,null,Dn(o.value,(p,h)=>(J(),Ke(v$,{key:p.id,step:p,index:h,readonly:t.readonly,onEdit:m=>u(p),onDelete:m=>c(p)},null,8,["step","index","readonly","onEdit","onDelete"]))),128))]),_:1},8,["modelValue","disabled"])),t.editable&&!t.readonly?(J(),le("div",x$,[N("button",{type:"button",class:"flex-1 px-3 py-2 text-sm text-gray-600 border border-gray-300 border-dashed rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors inline-flex items-center justify-center gap-2",onClick:l},[se(O(k1),{size:16,class:"text-gray-500"}),N("span",null,re(O(n)("stepList.addSlide")),1)]),N("button",{type:"button",class:"flex-1 px-3 py-2 text-sm text-gray-600 border border-gray-300 border-dashed rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors inline-flex items-center justify-center gap-2",onClick:a},[se(O(x1),{size:16,class:"text-gray-500"}),N("span",null,re(O(n)("stepList.addQuestion")),1)])])):Ve("",!0)]))}}),w$=zl(k$,[["__scopeId","data-v-a4dc60af"]]),E$={class:"border border-gray-200 rounded-md"},S$={class:"flex items-center justify-between w-full pr-2"},C$={class:"flex items-center gap-3 flex-1 min-w-0"},_$=["title"],T$={class:"font-medium text-gray-900 truncate"},A$={class:"text-xs font-semibold text-white bg-blue-600 px-2 py-0.5 rounded-full shrink-0"},I$={key:0,class:"inline-flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity shrink-0"},O$=["aria-label"],M$=["aria-label"],N$={class:"px-4 pb-4 pt-2"},R$=xe({__name:"SectionAccordion",props:{section:{},sectionIndex:{},readonly:{type:Boolean}},emits:["edit-name","delete","update:section","add-slide","add-question","edit-slide","edit-question","delete-step","reorder-steps"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H(!1),i=()=>{s("edit-name")},l=()=>{s("delete")},a=()=>{s("add-slide")},u=()=>{s("add-question")},c=h=>{s("edit-slide",h)},d=h=>{s("edit-question",h)},f=h=>{s("delete-step",h)},p=h=>{const m=new Map(r.section.steps.map(y=>[y.id,y])),g=h.newOrder.map(y=>m.get(y)).filter(Boolean),v={...r.section,steps:g};s("update:section",v)};return(h,m)=>(J(),le("div",E$,[se(u$,{open:o.value,"onUpdate:open":m[0]||(m[0]=g=>o.value=g),"caret-position":"left","header-hover":!0,"header-group":""},{header:De(()=>[N("div",S$,[N("div",C$,[t.readonly?Ve("",!0):(J(),le("button",{key:0,type:"button",class:"drag-handle shrink-0 opacity-0 group-hover:opacity-100 transition-opacity text-gray-400 hover:text-gray-600 cursor-move",title:O(n)("common.drag")},[se(O(ac),{size:16})],8,_$)),N("span",T$,re(t.section.name),1),N("span",A$,re(t.section.steps.length),1)]),t.readonly?Ve("",!0):(J(),le("div",I$,[N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.edit"),onClick:Bt(i,["stop"])},[se(O(Hp),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,O$),N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100","aria-label":O(n)("common.delete"),onClick:Bt(l,["stop"])},[se(O(uc),{size:14,class:"text-gray-500","aria-hidden":"true"})],8,M$)]))])]),default:De(()=>[N("div",N$,[se(w$,{steps:t.section.steps,"section-id":t.section.id,readonly:t.readonly,onAddSlide:a,onAddQuestion:u,onEditSlide:c,onEditQuestion:d,onDeleteStep:f,onReorderSteps:p},null,8,["steps","section-id","readonly"])])]),_:1},8,["open"])]))}}),P$={class:"space-y-2"},D$={key:0,class:"text-center py-8 text-gray-500 text-sm"},L$=xe({__name:"CourseStructureView",props:{structure:{},readonly:{type:Boolean}},emits:["update:structure","add-section","edit-section-name","delete-section","add-slide","add-question","edit-slide","edit-question","delete-step"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H([]);je(()=>r.structure,v=>{o.value=[...v]},{immediate:!0});const i=()=>{s("update:structure",[...o.value]),o.value=[...r.structure]},l=()=>{s("add-section")},a=v=>{s("edit-section-name",{sectionId:v.id})},u=v=>{s("delete-section",{sectionId:v.id})},c=v=>{s("add-slide",{sectionId:v.id})},d=v=>{s("add-question",{sectionId:v.id})},f=(v,y)=>{s("edit-slide",{sectionId:v.id,stepId:y.stepId})},p=(v,y)=>{s("edit-question",{sectionId:v.id,stepId:y.stepId})},h=(v,y)=>{s("delete-step",{sectionId:v.id,stepId:y.stepId})},m=(v,y)=>{const b=new Map(v.steps.map(T=>[T.id,T])),x=y.newOrder.map(T=>b.get(T)).filter(Boolean),k={...v,steps:x},S=o.value.map(T=>T.id===v.id?k:T);o.value=S,s("update:structure",S)},g=v=>{const y=o.value.map(b=>b.id===v.id?v:b);o.value=y,s("update:structure",y)};return(v,y)=>(J(),le("div",P$,[o.value.length===0?(J(),le("div",D$,re(O(n)("courseStructureView.noSections")),1)):(J(),Ke(O(pc),{key:1,modelValue:o.value,"onUpdate:modelValue":y[0]||(y[0]=b=>o.value=b),"item-key":"id",tag:"div",class:"space-y-2",animation:200,disabled:t.readonly,handle:".drag-handle",onChange:i},{default:De(()=>[(J(!0),le(Ye,null,Dn(o.value,(b,x)=>(J(),Ke(R$,{key:b.id,section:b,"section-index":x,readonly:t.readonly,onEditName:k=>a(b),onDelete:k=>u(b),onAddSlide:k=>c(b),onAddQuestion:k=>d(b),onEditSlide:k=>f(b,k),onEditQuestion:k=>p(b,k),onDeleteStep:k=>h(b,k),onReorderSteps:k=>m(b,k),"onUpdate:section":g},null,8,["section","section-index","readonly","onEditName","onDelete","onAddSlide","onAddQuestion","onEditSlide","onEditQuestion","onDeleteStep","onReorderSteps"]))),128))]),_:1},8,["modelValue","disabled"])),t.readonly?Ve("",!0):(J(),le("button",{key:2,type:"button",class:"w-full px-3 py-2 text-sm text-gray-600 border border-gray-300 border-dashed rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors inline-flex items-center justify-center gap-2",onClick:l},[se(O(lO),{size:16,class:"text-gray-500"}),N("span",null,re(O(n)("courseStructureView.addSection")),1)]))]))}}),F$=zl(L$,[["__scopeId","data-v-08de7304"]]),$$={class:"fixed inset-0 flex items-center justify-center p-4"},B$={class:"flex items-center justify-between p-6 border-b"},V$={class:"p-6"},H$={class:"block text-sm font-medium text-gray-700 mb-1"},j$=["placeholder"],z$={key:0,class:"mt-1 text-xs text-red-500"},W$={class:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50"},U$=["disabled"],q$=xe({__name:"SectionEditorModal",props:{section:{},open:{type:Boolean}},emits:["update:open","save"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H(""),i=H(null),l=L(()=>r.section===null),a=L(()=>o.value.trim().length>0);je(()=>r.open,f=>{f&&(o.value=r.section?.name||"",i.value=null)});const u=()=>{o.value.trim()?i.value=null:i.value=n("sectionEditorModal.validation.nameRequired")},c=()=>{s("update:open",!1)},d=()=>{if(!a.value){u();return}const f=r.section?{...r.section,name:o.value.trim()}:{id:`section-${Math.random().toString(36).substr(2,9)}`,name:o.value.trim(),steps:[]};s("save",f),s("update:open",!1)};return(f,p)=>(J(),Ke(O(Vp),{show:t.open,as:"template"},{default:De(()=>[se(O(f1),{open:t.open,onClose:c,class:"relative z-50"},{default:De(()=>[se(O(kl),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:De(()=>[...p[1]||(p[1]=[N("div",{class:"fixed inset-0 bg-black/30"},null,-1)])]),_:1}),N("div",$$,[se(O(kl),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:De(()=>[se(O(p1),{class:"w-full max-w-md bg-white rounded-lg shadow-xl"},{default:De(()=>[N("div",B$,[se(O(h1),{class:"text-lg font-semibold"},{default:De(()=>[lr(re(l.value?O(n)("sectionEditorModal.createTitle"):O(n)("sectionEditorModal.editTitle")),1)]),_:1}),N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100",onClick:c},[se(O(w1),{size:20,class:"text-gray-500"})])]),N("div",V$,[N("div",null,[N("label",H$,[lr(re(O(n)("sectionEditorModal.nameLabel"))+" ",1),p[2]||(p[2]=N("span",{class:"text-red-500"},"*",-1))]),Ss(N("input",{"onUpdate:modelValue":p[0]||(p[0]=h=>o.value=h),type:"text",class:Pe(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",i.value?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500"]),placeholder:O(n)("sectionEditorModal.namePlaceholder"),onInput:u},null,42,j$),[[Cs,o.value]]),i.value?(J(),le("p",z$,re(i.value),1)):Ve("",!0)])]),N("div",W$,[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:c},re(O(n)("common.cancel")),1),N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!a.value,onClick:d},re(O(n)("common.save")),9,U$)])]),_:1})]),_:1})])]),_:1},8,["open"])]),_:1},8,["show"]))}}),K$={class:"flex flex-col h-full space-y-4 min-h-0"},G$={class:"flex-shrink-0"},Y$={class:"block text-sm font-medium text-gray-700 mb-1"},J$=["value","readonly","disabled","placeholder"],X$={key:0,class:"mt-1 text-xs text-red-500"},Q$={class:"flex flex-col flex-1 min-h-0"},Z$={class:"block text-sm font-medium text-gray-700 mb-1 flex-shrink-0"},eB={key:0,class:"mt-1 text-xs text-red-500 flex-shrink-0"},tB=xe({__name:"SlideEditor",props:{modelValue:{},readonly:{type:Boolean}},emits:["update:modelValue","update:valid"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=L({get(){return r.modelValue},set(c){s("update:modelValue",c)}}),i=L(()=>{const c={};return o.value.name.trim()||(c.name=n("slideEditor.validation.nameRequired")),o.value.content.replace(/<[^>]*>/g,"").trim()||(c.content=n("slideEditor.validation.contentRequired")),c}),l=L(()=>Object.keys(i.value).length===0);je(()=>l.value,c=>{s("update:valid",c)},{immediate:!0});const a=c=>{o.value={...o.value,name:c}},u=c=>{o.value={...o.value,content:c}};return(c,d)=>(J(),le("div",K$,[N("div",G$,[N("label",Y$,[lr(re(O(n)("slideEditor.name"))+" ",1),d[1]||(d[1]=N("span",{class:"text-red-500"},"*",-1))]),(J(),le("input",{key:`slide-name-${r.modelValue.id}`,value:o.value.name,type:"text",readonly:r.readonly,disabled:r.readonly,class:Pe(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",i.value.name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500",r.readonly?"bg-gray-50 cursor-not-allowed":""]),placeholder:O(n)("slideEditor.namePlaceholder"),onInput:d[0]||(d[0]=f=>a(f.target.value))},null,42,J$)),i.value.name?(J(),le("p",X$,re(i.value.name),1)):Ve("",!0)]),N("div",Q$,[N("label",Z$,[lr(re(O(n)("slideEditor.content"))+" ",1),d[2]||(d[2]=N("span",{class:"text-red-500"},"*",-1))]),N("div",{class:Pe(["border rounded-md flex flex-col flex-1 min-h-0",i.value.content?"border-red-500":"border-gray-300"])},[se(Lh,{"model-value":o.value.content,placeholder:O(n)("slideEditor.contentPlaceholder"),readonly:r.readonly,"onUpdate:modelValue":u},null,8,["model-value","placeholder","readonly"])],2),i.value.content?(J(),le("p",eB,re(i.value.content),1)):Ve("",!0)])]))}}),nB={class:"flex flex-col h-full space-y-4 min-h-0"},rB={class:"shrink-0"},sB={class:"block text-sm font-medium text-gray-700 mb-1"},oB=["value","readonly","disabled","placeholder"],iB={key:0,class:"mt-1 text-xs text-red-500"},lB={class:"flex flex-col flex-1 min-h-0"},aB={class:"block text-sm font-medium text-gray-700 mb-1 shrink-0"},uB={class:"flex flex-col flex-1 min-h-0 border rounded-md border-gray-300"},cB={class:"shrink-0"},dB={class:"block text-sm font-medium text-gray-700 mb-2"},fB={class:"flex gap-4"},pB=["checked","disabled"],hB={class:"text-sm text-gray-700"},mB=["checked","disabled"],gB={class:"text-sm text-gray-700"},vB={class:"shrink-0"},yB={class:"block text-sm font-medium text-gray-700 mb-2"},bB=["title"],xB={class:"shrink-0 flex items-center"},kB=["checked","disabled","name","onChange"],wB=["checked","disabled","onChange"],EB={class:"flex-1 flex items-center"},SB=["onUpdate:modelValue","readonly","disabled","placeholder","onInput"],CB={key:1,class:"absolute -bottom-5 left-0 right-0"},_B={class:"text-xs text-red-500"},TB=["disabled","title","onClick"],AB={key:1,class:"text-xs text-red-500"},IB=xe({__name:"QuestionEditor",props:{modelValue:{},readonly:{type:Boolean}},emits:["update:modelValue","update:valid"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=L({get(){return r.modelValue},set(v){s("update:modelValue",v)}}),i=H([]);je(()=>r.modelValue.options,v=>{i.value=v.map((y,b)=>({id:b,text:y}))},{immediate:!0});const l=L(()=>{const v={};o.value.name.trim()||(v.name=n("questionEditor.validation.nameRequired")),o.value.options.length<2&&(v.options=n("questionEditor.validation.minOptionsRequired"));const y={};return o.value.options.forEach((b,x)=>{b.trim()||(y[x]=n("questionEditor.validation.optionRequired"))}),Object.keys(y).length>0&&(v.optionTexts=y),v}),a=L(()=>Object.keys(l.value).length===0);je(()=>a.value,v=>{s("update:valid",v)},{immediate:!0});const u=v=>{if(!v.moved){i.value=r.modelValue.options.map((A,M)=>({id:M,text:A}));return}const{oldIndex:y,newIndex:b}=v.moved,x=[...r.modelValue.options],k=x[y];if(k===void 0)return;x.splice(y,1),x.splice(b,0,k);const S=new Map;r.modelValue.options.forEach((A,M)=>{const P=x.indexOf(A);P!==-1&&S.set(M,P)});const T=r.modelValue.inputRule.correctOptions.map(A=>S.get(A)).filter(A=>typeof A=="number").sort((A,M)=>A-M);o.value={...o.value,options:x,inputRule:{...o.value.inputRule,correctOptions:T}},i.value=x.map((A,M)=>({id:M,text:A}))},c=v=>{o.value={...o.value,name:v}},d=v=>{o.value={...o.value,slide:v}},f=v=>{const y=o.value.inputRule.correctOptions;let b=y;if(v==="single"){const x=y[0];b=x!==void 0?[x]:[]}o.value={...o.value,inputRule:{type:v,correctOptions:b}}},p=()=>{const v=[...o.value.options,""];o.value={...o.value,options:v},i.value=v.map((y,b)=>({id:b,text:y}))},h=v=>{const y=i.value[v];if(!y)return;const b=y.text,x=[...o.value.options];x[v]=b,o.value={...o.value,options:x}},m=v=>{if(o.value.options.length<=2)return;const y=o.value.options.filter((x,k)=>k!==v),b=o.value.inputRule.correctOptions.filter(x=>x!==v).map(x=>x>v?x-1:x).sort((x,k)=>x-k);o.value={...o.value,options:y,inputRule:{...o.value.inputRule,correctOptions:b}},i.value=y.map((x,k)=>({id:k,text:x}))},g=v=>{const y=o.value.inputRule.correctOptions,b=y.includes(v);let x;o.value.inputRule.type==="single"?x=b?[]:[v]:b?x=y.filter(k=>k!==v):x=[...y,v].sort((k,S)=>k-S),o.value={...o.value,inputRule:{...o.value.inputRule,correctOptions:x}}};return(v,y)=>(J(),le("div",nB,[N("div",rB,[N("label",sB,[lr(re(O(n)("questionEditor.name"))+" ",1),y[4]||(y[4]=N("span",{class:"text-red-500"},"*",-1))]),(J(),le("input",{key:`question-name-${r.modelValue.id}`,value:o.value.name,type:"text",readonly:r.readonly,disabled:r.readonly,class:Pe(["w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2",l.value.name?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500",r.readonly?"bg-gray-50 cursor-not-allowed":""]),placeholder:O(n)("questionEditor.namePlaceholder"),onInput:y[0]||(y[0]=b=>c(b.target.value))},null,42,oB)),l.value.name?(J(),le("p",iB,re(l.value.name),1)):Ve("",!0)]),N("div",lB,[N("label",aB,re(O(n)("questionEditor.questionText")),1),N("div",uB,[se(Lh,{"model-value":o.value.slide,placeholder:O(n)("questionEditor.questionTextPlaceholder"),readonly:r.readonly,"onUpdate:modelValue":d},null,8,["model-value","placeholder","readonly"])])]),N("div",cB,[N("label",dB,re(O(n)("questionEditor.inputRule")),1),N("div",fB,[N("label",{class:Pe(["flex items-center gap-2",r.readonly?"":"cursor-pointer"])},[N("input",{type:"radio",checked:o.value.inputRule.type==="single",disabled:r.readonly,class:"w-4 h-4 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed",onChange:y[1]||(y[1]=b=>f("single"))},null,40,pB),N("span",hB,re(O(n)("questionEditor.singleChoice")),1)],2),N("label",{class:Pe(["flex items-center gap-2",r.readonly?"":"cursor-pointer"])},[N("input",{type:"radio",checked:o.value.inputRule.type==="multiple",disabled:r.readonly,class:"w-4 h-4 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed",onChange:y[2]||(y[2]=b=>f("multiple"))},null,40,mB),N("span",gB,re(O(n)("questionEditor.multipleChoice")),1)],2)])]),N("div",vB,[N("label",yB,[lr(re(O(n)("questionEditor.options"))+" ",1),y[5]||(y[5]=N("span",{class:"text-red-500"},"*",-1))]),N("div",{class:Pe(["border rounded-md p-3 space-y-2",l.value.options?"border-red-500":"border-gray-300"])},[se(O(pc),{modelValue:i.value,"onUpdate:modelValue":y[3]||(y[3]=b=>i.value=b),"item-key":"id",tag:"div",class:"space-y-2",animation:200,disabled:r.readonly,handle:r.readonly?"":".drag-handle",onChange:u},{default:De(()=>[(J(!0),le(Ye,null,Dn(i.value,(b,x)=>(J(),le("div",{key:b.id,class:"relative flex items-center gap-2 px-2 py-1 border border-gray-200 rounded-md hover:bg-gray-50"},[r.readonly?Ve("",!0):(J(),le("button",{key:0,type:"button",class:"drag-handle text-gray-400 cursor-move hover:text-gray-600 shrink-0 flex items-center",title:O(n)("common.drag")},[se(O(ac),{size:18})],8,bB)),N("div",xB,[o.value.inputRule.type==="single"?(J(),le("input",{key:0,type:"radio",checked:o.value.inputRule.correctOptions.includes(x),disabled:r.readonly||!b.text.trim(),class:"w-4 h-4 text-blue-600 focus:ring-blue-500 disabled:cursor-not-allowed",name:`correct-${o.value.id}`,onChange:k=>g(x)},null,40,kB)):(J(),le("input",{key:1,type:"checkbox",checked:o.value.inputRule.correctOptions.includes(x),disabled:r.readonly||!b.text.trim(),class:"w-4 h-4 text-blue-600 rounded focus:ring-blue-500 disabled:cursor-not-allowed",onChange:k=>g(x)},null,40,wB))]),N("div",EB,[Ss(N("input",{"onUpdate:modelValue":k=>b.text=k,type:"text",readonly:r.readonly,disabled:r.readonly,class:Pe(["w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1",l.value.optionTexts?.[x]?"border-red-500 focus:ring-red-500":"border-gray-300 focus:ring-blue-500",r.readonly?"bg-gray-50 cursor-not-allowed":""]),placeholder:O(n)("questionEditor.optionPlaceholder"),onInput:k=>h(x)},null,42,SB),[[Cs,b.text]])]),l.value.optionTexts?.[x]?(J(),le("div",CB,[N("p",_B,re(l.value.optionTexts[x]),1)])):Ve("",!0),N("button",{type:"button",disabled:r.readonly||o.value.options.length<=2,class:Pe(["shrink-0 p-1 text-gray-400 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",r.readonly?"":"hover:text-red-600"]),title:r.readonly?"":O(n)("common.delete"),onClick:k=>m(x)},[se(O(uc),{size:16})],10,TB)]))),128))]),_:1},8,["modelValue","disabled","handle"]),r.readonly?Ve("",!0):(J(),le("button",{key:0,type:"button",class:"w-full px-3 py-2 text-sm text-gray-600 border border-gray-300 border-dashed rounded-md hover:bg-gray-50 hover:border-gray-400 transition-colors",onClick:p}," + "+re(O(n)("questionEditor.addOption")),1)),l.value.options?(J(),le("p",AB,re(l.value.options),1)):Ve("",!0)],2)])]))}}),OB={class:"fixed inset-0 flex items-center justify-center p-4"},MB={class:"flex items-center justify-between p-6 border-b"},NB={class:"p-6 overflow-y-auto flex-1"},RB={class:"flex items-center justify-end gap-3 p-6 border-t bg-gray-50"},PB=["disabled"],DB=["disabled"],LB=xe({__name:"StepEditorModal",props:{step:{},open:{type:Boolean},stepType:{}},emits:["update:open","save"],setup(t,{emit:e}){const{t:n}=Ot(),r=t,s=e,o=H(null),i=H(null),l=H(!1),a=H(!1),u=L(()=>r.step===null),c=L(()=>r.step?.type==="slide"||!r.step&&r.stepType==="slide"),d=L(()=>r.step?.type==="question"||!r.step&&r.stepType==="question"),f=L(()=>o.value?`slide-${o.value.id}-${r.open}`:"new-slide"),p=L(()=>i.value?`question-${i.value.id}-${r.open}`:"new-question");je(()=>r.open,b=>{b&&(r.step?(r.step.type==="slide"?(o.value={id:r.step.id,type:r.step.type,name:r.step.name,content:r.step.content},i.value=null):(i.value={id:r.step.id,type:r.step.type,name:r.step.name,slide:r.step.slide,options:[...r.step.options],inputRule:{type:r.step.inputRule.type,correctOptions:[...r.step.inputRule.correctOptions]}},o.value=null),l.value=!0,a.value=!0):(r.stepType==="slide"?(o.value={id:`slide-${Math.random().toString(36).substr(2,9)}`,type:"slide",name:"",content:""},i.value=null):(i.value={id:`question-${Math.random().toString(36).substr(2,9)}`,type:"question",name:"",slide:"",options:["",""],inputRule:{type:"single",correctOptions:[]}},o.value=null,a.value=!1),l.value=!1))});const h=b=>{o.value=b},m=b=>{i.value=b},g=()=>{s("update:open",!1)},v=()=>{!o.value||!l.value||(s("save",o.value),s("update:open",!1))},y=()=>{!i.value||!a.value||(s("save",i.value),s("update:open",!1))};return(b,x)=>(J(),Ke(O(Vp),{show:t.open,as:"template"},{default:De(()=>[se(O(f1),{open:t.open,onClose:g,class:"relative z-60"},{default:De(()=>[se(O(kl),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0","enter-to":"opacity-100",leave:"ease-in duration-200","leave-from":"opacity-100","leave-to":"opacity-0"},{default:De(()=>[...x[2]||(x[2]=[N("div",{class:"fixed inset-0 bg-black/30"},null,-1)])]),_:1}),N("div",OB,[se(O(kl),{as:"template",enter:"ease-out duration-300","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"ease-in duration-200","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:De(()=>[se(O(p1),{class:"w-full max-w-3xl h-full max-h-[90vh] bg-white rounded-lg shadow-xl flex flex-col"},{default:De(()=>[N("div",MB,[se(O(h1),{class:"text-lg font-semibold"},{default:De(()=>[lr(re(u.value?O(n)("stepEditorModal.createTitle"):O(n)("stepEditorModal.editTitle"))+" "+re(t.stepType==="slide"?O(n)("stepEditorModal.slide"):O(n)("stepEditorModal.question")),1)]),_:1}),N("button",{type:"button",class:"rounded p-1 hover:bg-gray-100",onClick:g},[se(O(w1),{size:20,class:"text-gray-500"})])]),N("div",NB,[c.value&&o.value?(J(),Ke(tB,{key:f.value,"model-value":o.value,"onUpdate:modelValue":h,"onUpdate:valid":x[0]||(x[0]=k=>l.value=k)},null,8,["model-value"])):Ve("",!0),d.value&&i.value?(J(),Ke(IB,{key:p.value,"model-value":i.value,"onUpdate:modelValue":m,"onUpdate:valid":x[1]||(x[1]=k=>a.value=k)},null,8,["model-value"])):Ve("",!0)]),N("div",RB,[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:g},re(O(n)("common.cancel")),1),c.value?(J(),le("button",{key:0,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!l.value,onClick:v},re(O(n)("common.save")),9,PB)):Ve("",!0),d.value?(J(),le("button",{key:1,type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!a.value,onClick:y},re(O(n)("common.save")),9,DB)):Ve("",!0)])]),_:1})]),_:1})])]),_:1},8,["open"])]),_:1},8,["show"]))}}),FB={class:"mx-auto max-w-2xl"},$B={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},BB={class:"p-4 border-b border-gray-100"},VB={class:"text-lg font-semibold"},HB={class:"block text-sm font-medium text-gray-700 mb-1"},jB=["placeholder"],zB={class:"grid grid-cols-1 gap-4"},WB={class:"block text-sm font-medium text-gray-700 mb-1"},UB=["placeholder"],qB={class:"block text-sm font-medium text-gray-700 mb-1"},KB=["placeholder"],GB={class:"block text-sm font-medium text-gray-700 mb-1"},YB={key:0,class:"mt-1 text-xs text-red-500"},JB={class:"block text-sm font-medium text-gray-700 mb-1"},XB={class:"p-4 border-t border-gray-200 flex gap-2 justify-end"},QB=["disabled"],Ny=xe({__name:"CourseEditorPage",setup(t){const{t:e}=Ot(),n=H(0),r=L(()=>[{label:e("courseEditor.tabGeneral")},{label:e("courseEditor.tabDescription")},{label:e("courseEditor.tabStructure")}]),s=mi(),o=ec(),i=rt,l=H(null),a=H(""),u=H(null),c=H(""),d=H(""),f=H(""),p=H([]),h=H([]),m=L(()=>y.value?.objectId&&typeof y.value.objectId=="string"?y.value.objectId:null),g=async()=>{h.value=await wn(i)},v=L(()=>o.path==="/course/new"),y=L(()=>l.value!=null?h.value.find(j=>j.id===l.value&&j.deletedAt===null)??null:null),b=L(()=>!!(a.value.trim()&&u.value!=null)),x=j=>{const X=j.split("/").filter(Boolean).map(R=>Number(R)).filter(R=>Number.isFinite(R)),ee=X.length>0?X[X.length-1]:void 0;return ee??null};qe(async()=>{if(await g(),v.value){const j=o.query.parentId;if(j){const X=Number(j);Number.isFinite(X)&&(u.value=X)}l.value=null}else{const X=(o.params.path||"").replace(/\/edit$/,""),ee=X.endsWith("/")?X:`${X}/`;if(l.value=x(ee),y.value&&y.value.type==="leaf"){a.value=y.value.name,u.value=y.value.parentId??null;const R=y.value.objectId;if(typeof R=="string"&&R){const V=Up(R);V&&V.deletedAt===null&&(c.value=V.author,d.value=V.fullName,f.value=V.description,p.value=V.structure||[])}else d.value=a.value,p.value=[]}else s.push({path:"/"})}});const k=async()=>{if(!(!a.value.trim()||u.value==null))if(v.value){const j=await Kg({author:c.value,fullName:d.value||a.value.trim(),description:f.value,structure:[]});await C1(i,u.value,{name:a.value.trim(),type:"leaf"}),await g();const X=h.value.filter(R=>R.deletedAt===null).filter(R=>R.parentId===u.value).filter(R=>R.name===a.value.trim()).filter(R=>R.type==="leaf").sort((R,V)=>V.id-R.id)[0];X&&await qg(i,X.id,j.id);const ee=u.value?h.value.find(R=>R.id===u.value)?.path??"/":"/";s.push({path:ee})}else{if(!l.value)return;const j=y.value?.objectId;if(typeof j=="string"&&j)await Gg(j,{author:c.value,fullName:d.value,description:f.value,structure:p.value});else{const ee=await Kg({author:c.value,fullName:d.value||a.value.trim(),description:f.value,structure:[]});await qg(i,l.value,ee.id)}await _1(i,l.value,a.value.trim(),u.value);const X=u.value?h.value.find(ee=>ee.id===u.value)?.path??"/":"/";s.push({path:X})}},S=()=>{if(v.value){const j=u.value?h.value.find(X=>X.id===u.value)?.path??"/":"/";s.push({path:j})}else{const j=y.value;if(j){const X=j.parentId?h.value.find(ee=>ee.id===j.parentId&&ee.deletedAt===null)?.path??"/":"/";s.push({path:X})}else s.push({path:"/"})}},T=async j=>{p.value=j,m.value&&await Gg(m.value,{structure:j})},A=H(!1),M=H(null),P=()=>{M.value=null,A.value=!0},z=j=>{const X=p.value.find(ee=>ee.id===j.sectionId);X&&(M.value={...X},A.value=!0)},D=j=>{const X=p.value.find(V=>V.id===j.sectionId);if(!X||!window.confirm(`${e("common.delete")} "${X.name}"?`))return;const R=p.value.filter(V=>V.id!==j.sectionId);T(R)},W=j=>{if(M.value===null)T([...p.value,j]);else{const X=p.value.map(ee=>ee.id===j.id?j:ee);T(X)}A.value=!1,M.value=null},ie=H(!1),ae=H(null),de=H("slide"),ve=H(null),we=j=>{ve.value=j.sectionId,de.value="slide",ae.value=null,ie.value=!0},Qe=j=>{ve.value=j.sectionId,de.value="question",ae.value=null,ie.value=!0},ut=j=>{const X=p.value.find(R=>R.id===j.sectionId);if(!X)return;const ee=X.steps.find(R=>R.id===j.stepId);!ee||ee.type!=="slide"||(ve.value=j.sectionId,de.value="slide",ae.value={...ee},ie.value=!0)},ke=j=>{const X=p.value.find(R=>R.id===j.sectionId);if(!X)return;const ee=X.steps.find(R=>R.id===j.stepId);!ee||ee.type!=="question"||(ve.value=j.sectionId,de.value="question",ae.value={...ee,options:[...ee.options],inputRule:{...ee.inputRule,correctOptions:[...ee.inputRule.correctOptions]}},ie.value=!0)},_e=j=>{const X=p.value.find(K=>K.id===j.sectionId);if(!X)return;const ee=X.steps.find(K=>K.id===j.stepId);if(!ee||!window.confirm(`${e("common.delete")} "${ee.name||e("stepList.unnamedStep")}"?`))return;const V=p.value.map(K=>K.id===j.sectionId?{...K,steps:K.steps.filter(Q=>Q.id!==j.stepId)}:K);T(V)},te=j=>{if(!ve.value||!p.value.find(R=>R.id===ve.value))return;const ee=p.value.map(R=>{if(R.id===ve.value){const V=R.steps.findIndex(Q=>Q.id===j.id),K=V>=0?R.steps.map((Q,be)=>be===V?j:Q):[...R.steps,j];return{...R,steps:K}}return R});T(ee),ie.value=!1,ae.value=null,ve.value=null};return(j,X)=>(J(),le("div",FB,[N("div",$B,[N("div",BB,[N("h1",VB,re(v.value?O(e)("courseEditor.newTitle"):O(e)("courseEditor.title")),1)]),se(O(DI),{"selected-index":n.value,onChange:X[5]||(X[5]=ee=>n.value=ee)},{default:De(()=>[se(O(LI),{class:"flex border-b border-gray-200"},{default:De(()=>[(J(!0),le(Ye,null,Dn(r.value,(ee,R)=>(J(),Ke(O(FI),{key:R,as:"button",type:"button",class:Pe(["px-4 py-2 text-sm font-medium focus:outline-none transition-colors",n.value===R?"border-b-2 border-blue-500 text-blue-600":"text-gray-500 hover:text-gray-700"])},{default:De(()=>[lr(re(ee.label),1)]),_:2},1032,["class"]))),128))]),_:1}),se(O($I),{class:"p-4"},{default:De(()=>[se(O(Zc),{class:"space-y-4"},{default:De(()=>[N("div",null,[N("label",HB,re(O(e)("courseEditor.nameLabel")),1),Ss(N("input",{"onUpdate:modelValue":X[0]||(X[0]=ee=>a.value=ee),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:O(e)("courseEditor.namePlaceholder")},null,8,jB),[[Cs,a.value]])]),N("div",zB,[N("div",null,[N("label",WB,re(O(e)("courseEditor.fullName")),1),Ss(N("input",{"onUpdate:modelValue":X[1]||(X[1]=ee=>d.value=ee),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:O(e)("courseEditor.fullNamePlaceholder")},null,8,UB),[[Cs,d.value]])]),N("div",null,[N("label",qB,re(O(e)("courseEditor.author")),1),Ss(N("input",{"onUpdate:modelValue":X[2]||(X[2]=ee=>c.value=ee),type:"text",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:O(e)("courseEditor.authorPlaceholder")},null,8,KB),[[Cs,c.value]])])]),N("div",null,[N("label",GB,re(O(e)("common.folder")),1),se(H1,{"forest-id":O(i),"current-folder-id":l.value,value:u.value,"allow-root":!1,"onUpdate:value":X[3]||(X[3]=ee=>u.value=ee)},null,8,["forest-id","current-folder-id","value"]),u.value?Ve("",!0):(J(),le("p",YB,re(O(e)("courseEditor.folderRequired")),1))])]),_:1}),se(O(Zc),null,{default:De(()=>[N("div",null,[N("label",JB,re(O(e)("courseEditor.description")),1),se(Lh,{class:"min-h-[180px]",key:"description-editor",modelValue:f.value,"onUpdate:modelValue":X[4]||(X[4]=ee=>f.value=ee),placeholder:O(e)("courseEditor.descriptionPlaceholder")},null,8,["modelValue","placeholder"])])]),_:1}),!v.value&&m.value?(J(),Ke(O(Zc),{key:0},{default:De(()=>[se(F$,{structure:p.value,class:"min-h-full","onUpdate:structure":T,onAddSection:P,onEditSectionName:z,onDeleteSection:D,onAddSlide:we,onAddQuestion:Qe,onEditSlide:ut,onEditQuestion:ke,onDeleteStep:_e},null,8,["structure"])]),_:1})):Ve("",!0)]),_:1})]),_:1},8,["selected-index"]),N("div",XB,[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:S},re(O(e)("common.cancel")),1),N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!b.value,onClick:k},re(v.value?O(e)("common.create"):O(e)("common.save")),9,QB)])]),se(q$,{section:M.value,open:A.value,"onUpdate:open":X[6]||(X[6]=ee=>A.value=ee),onSave:W},null,8,["section","open"]),se(LB,{step:ae.value,open:ie.value,"step-type":de.value,"onUpdate:open":X[7]||(X[7]=ee=>ie.value=ee),onSave:te},null,8,["step","open","step-type"])]))}}),ZB=["innerHTML"],rp=xe({__name:"RichTextView",props:{content:{}},setup(t){return(e,n)=>(J(),le("article",{class:"rich-text-content",innerHTML:t.content},null,8,ZB))}}),e3={class:"rounded-lg border border-gray-200 bg-white shadow-sm"},t3={class:"px-4 py-2 border-b border-gray-200"},n3=["onClick"],r3={key:1,class:"truncate max-w-40 inline-block align-middle"},s3={class:"p-4 mx-auto max-w-5xl"},o3={class:"text-lg font-semibold mb-3"},i3={key:1,class:"mt-4 space-y-2"},l3={class:"space-y-1"},a3={class:"text-sm text-gray-900"},u3={class:"text-xs font-semibold text-white bg-blue-600 px-2 py-0.5 rounded-full shrink-0"},c3=xe({__name:"CoursePage",setup(t){const e=mi(),n=ec(),r=rt,s=H([]),o=L(()=>n.params.path||""),i=L(()=>{const g=o.value;return g.endsWith("/")?`/${g}`:`/${g}/`}),l=L(()=>i.value.split("/").filter(Boolean).length),a=H(""),u=H(""),c=H(""),d=H([]),f=g=>{const v=g.split("/").filter(Boolean).map(b=>Number(b)).filter(Number.isFinite),y=v.length>0?v[v.length-1]:void 0;return y??null},p=g=>{const v=g.endsWith("/")?g:`${g}/`;e.push({path:v})},h=()=>{e.push({path:`/course-editor${c.value}`})},m=()=>{e.push({path:`/course-preview${c.value}`})};return qe(async()=>{s.value=await wn(r);const g=f(i.value),v=g!=null?s.value.find(b=>b.id===g&&b.deletedAt===null):null;if(!v||v.type!=="leaf"){e.push({path:"/"});return}c.value=v.path,a.value=v.name;const y=typeof v.objectId=="string"?v.objectId:null;if(y){const b=Up(y);b&&b.deletedAt===null&&(a.value=b.fullName||v.name,u.value=b.description||"",d.value=b.structure||[])}}),(g,v)=>(J(),le("div",e3,[N("div",t3,[se(A1,{"forest-id":O(r),path:i.value,onRootClick:v[0]||(v[0]=y=>p("/"))},{item:De(({item:y,index:b})=>[b<l.value-1?(J(),le("button",{key:0,class:"truncate max-w-40 inline-block align-middle hover:underline",onClick:x=>p(y.path)},re(y.name),9,n3)):(J(),le("span",r3,re(y.name),1))]),_:1},8,["forest-id","path"])]),N("div",s3,[N("h1",o3,re(a.value),1),u.value?(J(),Ke(rp,{key:0,content:u.value},null,8,["content"])):Ve("",!0),d.value.length>0?(J(),le("div",i3,[N("ul",l3,[(J(!0),le(Ye,null,Dn(d.value,y=>(J(),le("li",{key:y.id,class:"flex items-center justify-between px-0 py-2 rounded-md"},[N("span",a3,re(y.name),1),N("span",u3,re(y.steps.length),1)]))),128))])])):Ve("",!0),N("div",{class:"flex gap-2 justify-end mt-4"},[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50",onClick:h}," Edit "),N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",onClick:m}," Preview ")])])]))}}),d3=()=>new Date().toISOString(),Fh=t=>`preview-state:${t}`,$h=()=>typeof window<"u"&&window.localStorage?window.localStorage:null,js=t=>t.type==="question",f3=t=>{const e=[];return t.forEach((n,r)=>{n.steps.forEach((s,o)=>{e.push({section:n,step:s,sectionIndex:r,stepIndex:o,globalIndex:e.length})})}),e},p3=(t,e)=>t.length===e.length&&t.every(n=>e.includes(n)),h3=(t,e)=>{if(t.inputRule.type==="single"){const n=t.inputRule.correctOptions[0];return e.length===1&&e[0]===n?1:0}return p3([...e].sort(),[...t.inputRule.correctOptions].sort())?1:0},Ic=(t,e,n)=>({steps:t.steps.map((s,o)=>o===e?n(s):s),position:t.position}),vw=t=>({steps:f3(t.structure),position:0}),xi=t=>t.steps[t.position]??null,ki=t=>!!t.answer?.submittedAt,m3=t=>{const e=xi(t);return!e||!js(e.step)||ki(e)?!1:(e.answer?.selected??[]).length>0},g3=t=>{const e=xi(t);if(!e||!js(e.step)||ki(e))return t;const n=e.answer?.selected??[],r=h3(e.step,n),s={selected:[...n],score:r,submittedAt:d3()};return Ic(t,t.position,o=>({...o,answer:s}))},v3=(t,e)=>{const n=xi(t);if(!n||!js(n.step)||ki(n))return t;const r={selected:[e],score:0,submittedAt:""};return Ic(t,t.position,s=>({...s,answer:r}))},y3=(t,e)=>{const n=xi(t);if(!n||!js(n.step)||ki(n)||n.step.inputRule.type!=="multiple")return t;const s={selected:Array.from(new Set((e??[]).filter(o=>Number.isFinite(o)).map(o=>Number(o)))).sort((o,i)=>o-i),score:0,submittedAt:""};return Ic(t,t.position,o=>({...o,answer:s}))},yw=t=>t.position>0,bw=t=>{if(t.position>=t.steps.length-1)return!1;const e=xi(t);return e?js(e.step)?ki(e):!0:!1},b3=t=>yw(t)?{...t,position:t.position-1}:t,x3=t=>bw(t)?{...t,position:t.position+1}:t,k3=(t,e)=>{const n=Math.max(0,Math.min(e,t.steps.length-1));return{...t,position:n}},w3=t=>{const e=new Map;t.steps.forEach(i=>{if(e.has(i.section.id)||e.set(i.section.id,{section:i.section,questions:0,correct:0}),js(i.step)){const l=e.get(i.section.id);l.questions+=1,l.correct+=i.answer?.score===1?1:0}});const n=[...e.values()].map(i=>({...i,accuracy:i.questions===0?0:i.correct/i.questions})),r=n.reduce((i,l)=>i+l.questions,0),s=n.reduce((i,l)=>i+l.correct,0),o=r===0?0:s/r;return{totalQuestions:r,totalCorrect:s,totalAccuracy:o,bySection:n}},E3=(t,e)=>{if(!e)return t;const n=new Map(t.steps.map((s,o)=>[s.step.id,o]));e.answers.forEach(s=>{const o=n.get(s.stepId);if(o==null)return;const i=t.steps[o];if(!i||!js(i.step))return;const l=Array.isArray(s.selected)?s.selected.filter(c=>Number.isFinite(c)).map(c=>Number(c)):[],u={selected:i.step.inputRule.type==="multiple"?Array.from(new Set(l)).sort((c,d)=>c-d):l.slice(0,1),score:Number.isFinite(s.score)?s.score:0,submittedAt:typeof s.submittedAt=="string"?s.submittedAt:""};t=Ic(t,o,c=>({...c,answer:u}))});const r=Math.max(0,Math.min(e.position??0,t.steps.length-1));return{...t,position:r}},S3=t=>{const e=vw(t),n=$h();if(!n)return e;const r=n.getItem(Fh(t.id));if(!r)return e;try{const s=JSON.parse(r);return E3(e,s)}catch{return e}},C3=(t,e)=>{const n=$h();if(!n)return;const r=e.steps.filter(o=>js(o.step)&&o.answer).map(o=>({stepId:o.step.id,selected:[...o.answer?.selected??[]],score:o.answer?.score??0,submittedAt:o.answer?.submittedAt??""})),s={position:e.position,answers:r};n.setItem(Fh(t),JSON.stringify(s))},_3=t=>{const e=$h();e&&e.removeItem(Fh(t))},T3={class:"flex flex-col bg-white"},A3={class:"border-b border-gray-200 px-4 py-2 flex items-center justify-between shrink-0"},I3={class:"text-sm font-medium truncate"},O3={class:"text-xs text-gray-600 shrink-0 ml-4"},M3={class:"flex flex-1 overflow-hidden"},N3={class:"w-60 border-r border-gray-200 overflow-y-auto shrink-0"},R3={class:"p-2 space-y-3"},P3={class:"px-2 text-xs font-semibold text-gray-700 flex items-center justify-between"},D3={class:"truncate"},L3={class:"text-[10px] text-gray-500 shrink-0 ml-2"},F3={class:"space-y-0.5"},$3=["onClick"],B3={class:"truncate block"},V3={class:"pt-3 mt-3 border-t border-gray-100"},H3={class:"flex-1 overflow-y-auto p-6"},j3={key:0,class:"max-w-3xl mx-auto"},z3={class:"border border-gray-200 rounded-lg bg-gray-50 p-5"},W3={class:"flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"},U3={class:"text-base font-semibold text-gray-900"},q3={class:"text-sm text-gray-600"},K3={class:"text-sm font-semibold text-gray-900"},G3={class:"mt-4 grid gap-3 md:grid-cols-2"},Y3={class:"text-sm font-medium text-gray-900"},J3={class:"text-xs text-gray-500"},X3={class:"text-sm font-semibold text-gray-900"},Q3={class:"mt-6 flex justify-end"},Z3={key:1,class:"max-w-3xl mx-auto"},eV={key:0,class:"space-y-4"},tV={key:0,class:"text-lg font-semibold text-gray-900"},nV={key:1,class:"space-y-4"},rV={key:0,class:"text-lg font-semibold text-gray-900"},sV={class:"text-xs font-semibold text-gray-600"},oV={class:"mt-4 space-y-2"},iV=["disabled","onClick"],lV={class:"flex items-center gap-3"},aV={class:"text-sm text-gray-900 flex-1"},uV={key:0,class:"text-green-600 shrink-0","aria-label":"Correct answer"},cV={key:1,class:"mt-4 flex justify-end"},dV=["disabled"],fV={class:"text-sm font-medium"},pV={class:"border-t border-gray-200 px-4 py-3 flex items-center justify-between shrink-0 bg-gray-50"},hV={class:"flex items-center gap-3"},mV=["disabled"],gV={class:"text-xs text-gray-600"},vV=["disabled"],yV=xe({__name:"CoursePreviewPage",setup(t){const e=mi(),n=ec(),{t:r}=Ot(),s=rt,o=H(""),i=H(null),l=H([]),a=H(null),u=H(0),c=H(!1),d=()=>{!i.value||!a.value||C3(i.value.id,a.value)},f=V=>{if(!V)return 0;const K=V.steps.reduce((Q,be)=>be.answer?Math.max(Q,be.globalIndex):Q,-1);return Math.max(0,K,V.position)},p=L(()=>a.value?xi(a.value):null),h=L(()=>a.value?.position??0),m=L(()=>a.value?.steps.length??0),g=L(()=>p.value?.step.type==="slide"),v=L(()=>p.value?ki(p.value):!1),y=L(()=>a.value?yw(a.value):!1),b=L(()=>a.value?bw(a.value):!1),x=L(()=>a.value?m3(a.value):!1),k=L(()=>!a.value||a.value.steps.length===0?!1:a.value.position===a.value.steps.length-1),S=L(()=>!a.value||!a.value.steps.some(K=>K.step.type==="question")?!1:a.value.steps.every(K=>K.step.type!=="question"||!!K.answer?.submittedAt)),T=L(()=>S.value&&k.value&&!c.value),A=L(()=>!S.value||!a.value?null:w3(a.value)),M=L(()=>c.value?r("coursePreview.finalReportLabel"):r("coursePreview.progress",{current:(h.value??0)+1,total:m.value??0})),P=V=>`${Math.round((V??0)*100)}%`;je(h,V=>{u.value=Math.max(u.value,V)});const z=V=>V<=u.value,D=(V,K)=>a.value?a.value.steps.findIndex(Q=>Q.section.id===V&&Q.stepIndex===K):-1,W=()=>!p.value||p.value.step.type!=="question"?r("coursePreview.instructionDefault"):p.value.step.inputRule.type==="single"?r("coursePreview.instructionSingle"):r("coursePreview.instructionMultiple"),ie=(V,K,Q)=>{if(!p.value)return"text-gray-600 hover:bg-gray-50";const be=p.value.section.id===V&&p.value.step.id===K,C=z(Q);return c.value?C?"text-gray-700 hover:bg-gray-50":"text-gray-400 opacity-60 cursor-not-allowed":be?"bg-blue-50 text-blue-700 font-medium":C?"text-gray-700 hover:bg-gray-50":"text-gray-400 opacity-60 cursor-not-allowed"},ae=(V,K)=>{if(!a.value)return;c.value=!1;const Q=D(V,K);Q<0||!z(Q)||(a.value=k3(a.value,Q),d())},de=V=>{if(!a.value||!p.value||v.value||p.value.step.type!=="question")return;let K=null;if(p.value.step.inputRule.type==="single")K=v3(a.value,V);else{const Q=new Set(p.value.answer?.selected??[]);Q.has(V)?Q.delete(V):Q.add(V),K=y3(a.value,[...Q])}K&&(a.value=K,d())},ve=V=>{if(!p.value||p.value.step.type!=="question")return"border-gray-200 hover:border-gray-300";const Q=(p.value.answer?.selected??[]).includes(V),be=v.value,C=Qe(V);return be?Q&&C?"border-green-500 bg-green-50":Q&&!C?"border-red-500 bg-red-50":!Q&&C?"border-green-200 bg-green-50/30":"border-gray-200 bg-gray-50":Q?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"},we=V=>{if(!p.value||p.value.step.type!=="question")return"w-6 h-6 rounded-full border bg-gray-100 text-gray-600 border-transparent";const{step:K}=p.value,be=K.inputRule.type==="multiple"?"w-6 h-6 rounded-md border":"w-6 h-6 rounded-full border",C=(U,ce,ue)=>`${be} ${U} ${ce} ${ue}`,_=(p.value.answer?.selected??[]).includes(V),F=v.value,Y=Qe(V);return F?_&&Y?C("bg-green-600","text-white","border-green-600"):_&&!Y?C("bg-red-600","text-white","border-red-600"):!_&&Y?C("bg-green-50","text-green-800","border-green-200"):C("bg-gray-200","text-gray-600","border-gray-200"):_?C("bg-blue-600","text-white","border-blue-600"):C("bg-gray-100","text-gray-600","border-transparent")},Qe=V=>!p.value||p.value.step.type!=="question"?!1:p.value.step.inputRule.correctOptions.includes(V),ut=()=>p.value?.answer?p.value.answer.score===1?"bg-green-50 text-green-800":"bg-red-50 text-red-800":"bg-gray-100",ke=()=>{!a.value||!y.value||(c.value=!1,a.value=b3(a.value),d())},_e=()=>{if(a.value){if(T.value){c.value=!0;return}b.value&&(c.value=!1,a.value=x3(a.value),d())}},te=()=>{!a.value||!x.value||(c.value=!1,a.value=g3(a.value),d())},j=()=>{S.value&&(c.value=!0)},X=()=>S.value?c.value?"px-2 py-1 text-xs rounded bg-blue-50 text-blue-700 font-medium":"px-2 py-1 text-xs rounded text-gray-700 hover:bg-gray-50 cursor-pointer":"px-2 py-1 text-xs rounded text-gray-400 opacity-60 cursor-not-allowed",ee=()=>{i.value&&(_3(i.value.id),a.value=vw(i.value),u.value=0,c.value=!1,d())},R=V=>{if(c.value||!p.value)return;if(V.key==="Enter"){V.preventDefault(),!g.value&&!v.value?te():_e();return}if(V.key==="Escape"){V.preventDefault(),ke();return}const K=Number(V.key);if(K>=1&&K<=9&&p.value.step.type==="question"){const Q=K-1;Q<p.value.step.options.length&&de(Q)}};return qe(async()=>{const V=await wn(s),K=n.params.path||"",Q=K.endsWith("/")?`/${K}`:`/${K}/`,C=(F=>{const Y=F.split("/").filter(Boolean).map(ce=>Number(ce)).filter(Number.isFinite),U=Y.length>0?Y[Y.length-1]:void 0;return U??null})(Q),I=C!=null?V.find(F=>F.id===C&&F.deletedAt===null):null;if(!I||I.type!=="leaf"){e.push({path:"/"});return}o.value=I.name;const _=typeof I.objectId=="string"?I.objectId:null;if(_){const F=Up(_);if(F&&F.deletedAt===null)i.value=F,o.value=F.fullName||I.name,l.value=F.structure||[],a.value=S3(F),u.value=f(a.value),c.value=S.value,d();else{e.push({path:`/course${Q}`});return}}else{e.push({path:`/course${Q}`});return}window.addEventListener("keydown",R)}),zt(()=>{window.removeEventListener("keydown",R)}),(V,K)=>(J(),le("div",T3,[N("header",A3,[N("h1",I3,re(o.value),1),N("span",O3,re(M.value),1)]),N("div",M3,[N("aside",N3,[N("nav",R3,[(J(!0),le(Ye,null,Dn(l.value,Q=>(J(),le("div",{key:Q.id,class:"space-y-1"},[N("div",P3,[N("span",D3,re(Q.name),1),N("span",L3,re(Q.steps.length),1)]),N("ul",F3,[(J(!0),le(Ye,null,Dn(Q.steps,(be,C)=>(J(),le("li",{key:be.id,class:Pe(["px-2 py-1 text-xs rounded cursor-pointer transition-colors",ie(Q.id,be.id,D(Q.id,C))]),onClick:I=>ae(Q.id,C)},[N("span",B3,re(be.name||O(r)(be.type==="slide"?"coursePreview.slideFallback":"coursePreview.questionFallback")),1)],10,$3))),128))])]))),128)),N("div",V3,[N("div",{class:Pe(["transition-colors",X()]),onClick:j},re(O(r)("coursePreview.finalReportNav")),3)])])]),N("main",H3,[c.value&&A.value?(J(),le("div",j3,[N("div",z3,[N("div",W3,[N("div",null,[N("h2",U3,re(O(r)("coursePreview.finalReportHeading")),1),N("p",q3,re(O(r)("coursePreview.finalReportSummary",{correct:A.value.totalCorrect,total:A.value.totalQuestions,accuracy:P(A.value.totalAccuracy)})),1)]),N("span",K3,re(P(A.value.totalAccuracy)),1)]),N("div",G3,[(J(!0),le(Ye,null,Dn(A.value.bySection,Q=>(J(),le("div",{key:Q.section.id,class:"rounded-lg border border-gray-200 bg-white p-4 flex items-center justify-between"},[N("div",null,[N("p",Y3,re(Q.section.name),1),N("p",J3,re(O(r)("coursePreview.sectionCorrectSummary",{correct:Q.correct,total:Q.questions})),1)]),N("span",X3,re(P(Q.accuracy)),1)]))),128))]),N("div",Q3,[N("button",{type:"button",class:"px-4 py-2 text-sm font-medium text-blue-600 border border-blue-200 rounded-md hover:bg-blue-50",onClick:ee},re(O(r)("coursePreview.tryAgainButton")),1)])])])):p.value?(J(),le("div",Z3,[p.value.step.type==="slide"?(J(),le("div",eV,[p.value.step.name?(J(),le("h2",tV,re(p.value.step.name),1)):Ve("",!0),se(rp,{content:p.value.step.content},null,8,["content"])])):(J(),le("div",nV,[p.value.step.name?(J(),le("h2",rV,re(p.value.step.name),1)):Ve("",!0),se(rp,{content:p.value.step.slide},null,8,["content"]),N("p",sV,re(W()),1),N("ul",oV,[(J(!0),le(Ye,null,Dn(p.value.step.options,(Q,be)=>(J(),le("li",{key:be},[N("button",{type:"button",class:Pe(["w-full text-left px-4 py-3 rounded-lg border-2 transition-all",ve(be)]),disabled:v.value,onClick:C=>de(be)},[N("div",lV,[N("span",{class:Pe(["inline-flex items-center justify-center text-xs font-semibold shrink-0 transition-colors",we(be)])},re(be+1),3),N("span",aV,re(Q),1),v.value&&Qe(be)?(J(),le("span",uV,"  ")):Ve("",!0)])],10,iV)]))),128))]),v.value?Ve("",!0):(J(),le("div",cV,[N("button",{type:"button",class:"px-6 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!x.value,onClick:te},re(O(r)("coursePreview.submitButton")),9,dV)])),v.value?(J(),le("div",{key:2,class:Pe(["mt-4 p-3 rounded-lg",ut()])},[N("span",fV,re(p.value.answer?.score===1?O(r)("coursePreview.feedbackCorrect"):O(r)("coursePreview.feedbackIncorrect")),1)],2)):Ve("",!0)]))])):Ve("",!0)])]),N("footer",pV,[N("div",hV,[N("button",{type:"button",class:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",disabled:!y.value,onClick:ke},re(O(r)("coursePreview.backButton")),9,mV),N("span",gV,re(M.value),1)]),N("div",null,[N("button",{type:"button",class:"px-6 py-2 text-sm font-semibold text-white bg-blue-600 rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",disabled:c.value||!b.value&&!T.value,onClick:_e},re(O(r)("coursePreview.nextButton")),9,vV)])])]))}}),bV=XC({history:IC("/"),routes:[{path:"/",name:"home",component:lv,props:()=>({path:"/"})},{path:"/folder/new",name:"folder-editor-new",component:av},{path:"/folder/:path(.*)",name:"folder-editor",component:av},{path:"/course/new",name:"course-editor-new",component:Ny},{path:"/course-editor/:path(.*)",name:"course-editor",component:Ny},{path:"/course-preview/:path(.*)",name:"course-preview",component:yV},{path:"/course/:path(.*)/",name:"course",component:c3},{path:"/:path(.*)/",name:"node",component:lv,props:t=>({path:`/${t.params.path||""}/`})}]}),xV={common:{cancel:"Cancel",save:"Save",create:"Create",delete:"Delete",edit:"Edit",name:"Name",parent:"Parent",folder:"Folder",course:"Course",root:"Root",drag:"Drag to reorder"},mainPage:{title:"Content",addFolder:"Add folder",addCourse:"Add course",resetTree:"Reset tree",deleteConfirm:"Delete this item?",deleteFolderConfirm:"Delete this folder and all its descendants?",resetConfirm:"Reset tree to the initial sample?",selectFolderFirst:"Please select a folder first",addSubFolderTitle:"Add sub-folder to selected parent",addCourseTitle:"Add course to selected parent",loading:"Loading..."},folderEditor:{title:"Folder Editor",newTitle:"New Folder",namePlaceholder:"Folder name"},courseEditor:{title:"Course Editor",newTitle:"New Course",nameLabel:"Short name",namePlaceholder:"Short name",fullName:"Full name",fullNamePlaceholder:"Human-friendly full name",author:"Author",authorPlaceholder:"Author",description:"Description",descriptionPlaceholder:"Course description",folderRequired:"Parent folder is required.",tabGeneral:"General",tabDescription:"Description",tabStructure:"Structure"},folderPicker:{selectFolder:"Select Folder",root:"Root",searchPlaceholder:"Search folders...",noFoldersFound:"No folders found",selectFolderButton:"Select folder"},localePicker:{label:"Language:"},richTextEditor:{bold:"Bold",italic:"Italic",underline:"Underline",strike:"Strikethrough",bulletList:"Bullet list",orderedList:"Ordered list",link:"Link",unlink:"Remove link",heading1:"Heading 1",heading2:"Heading 2",heading3:"Heading 3",paragraph:"Paragraph",blockquote:"Quote",codeBlock:"Code block",undo:"Undo",redo:"Redo"},slideEditor:{name:"Slide name",namePlaceholder:"Enter slide name",content:"Content",contentPlaceholder:"Enter slide content",validation:{nameRequired:"Slide name is required",contentRequired:"Slide content is required"}},questionEditor:{name:"Question name",namePlaceholder:"Enter question name",questionText:"Question text",questionTextPlaceholder:"Enter question text",options:"Answer options",addOption:"Add option",optionPlaceholder:"Enter option text",inputRule:"Answer type",singleChoice:"Single choice (1 correct answer)",multipleChoice:"Multiple choice (multiple correct answers)",correctAnswers:"Correct answers",selectCorrect:"Select correct answer(s)",validation:{nameRequired:"Question name is required",minOptionsRequired:"At least 2 options are required",optionRequired:"Option text cannot be empty"}},stepList:{noSteps:"No steps yet. Add your first step.",addSlide:"Add Slide",addQuestion:"Add Question",unnamedStep:"Unnamed step"},sectionAccordion:{oneStep:"1 step",multipleSteps:"{count} steps"},courseStructureView:{noSections:"No sections yet. Add your first section.",addSection:"Add Section"},sectionEditorModal:{createTitle:"Create Section",editTitle:"Edit Section",nameLabel:"Section name",namePlaceholder:"Enter section name",validation:{nameRequired:"Section name is required"}},stepEditorModal:{createTitle:"Create",editTitle:"Edit",slide:"Slide",question:"Question"},coursePreview:{finalReportLabel:"Final report",finalReportNav:"Final report",finalReportHeading:"Final report",finalReportSummary:"{correct} / {total} correct  {accuracy} accuracy",sectionCorrectSummary:"{correct} / {total} correct",tryAgainButton:"Try again",slideFallback:"Slide",questionFallback:"Question",instructionDefault:"Select an option to continue",instructionSingle:"Select exactly one correct option",instructionMultiple:"Select all correct options",submitButton:"Submit",backButton:"Back",nextButton:"Next",feedbackCorrect:"Correct!",feedbackIncorrect:"Incorrect",progress:"{current} / {total}"}},kV={common:{cancel:"",save:"",create:"",delete:"",edit:"",name:"",parent:"",folder:"",course:"",root:"",drag:"   "},mainPage:{title:"",addFolder:" ",addCourse:" ",resetTree:" ",deleteConfirm:"  ?",deleteFolderConfirm:"       ?",resetConfirm:"    ?",selectFolderFirst:",   ",addSubFolderTitle:"    ",addCourseTitle:"    ",loading:"..."},folderEditor:{title:" ",newTitle:" ",namePlaceholder:" "},courseEditor:{title:" ",newTitle:" ",nameLabel:" ",namePlaceholder:" ",fullName:" ",fullNamePlaceholder:"  ",author:"",authorPlaceholder:"",description:"",descriptionPlaceholder:" ",folderRequired:"  .",tabGeneral:"",tabDescription:"",tabStructure:""},folderPicker:{selectFolder:" ",root:"",searchPlaceholder:" ...",noFoldersFound:"  ",selectFolderButton:" "},localePicker:{label:":"},richTextEditor:{bold:"",italic:"",underline:"",strike:"",bulletList:" ",orderedList:" ",link:"",unlink:" ",heading1:" 1",heading2:" 2",heading3:" 3",paragraph:"",blockquote:"",codeBlock:" ",undo:"",redo:""},slideEditor:{name:" ",namePlaceholder:"  ",content:"",contentPlaceholder:"  ",validation:{nameRequired:"  ",contentRequired:"  "}},questionEditor:{name:" ",namePlaceholder:"  ",questionText:" ",questionTextPlaceholder:"  ",options:" ",addOption:" ",optionPlaceholder:"  ",inputRule:" ",singleChoice:"  ",multipleChoice:"  ",correctAnswers:" ",selectCorrect:" () ()",validation:{nameRequired:"  ",minOptionsRequired:"  2  ",optionRequired:"     "}},stepList:{noSteps:"  .   .",addSlide:" ",addQuestion:" ",unnamedStep:" "},sectionAccordion:{oneStep:"1 ",multipleSteps:"{count} "},courseStructureView:{noSections:"  .   .",addSection:" "},sectionEditorModal:{createTitle:" ",editTitle:" ",nameLabel:" ",namePlaceholder:"  ",validation:{nameRequired:"  "}},stepEditorModal:{createTitle:"",editTitle:"",slide:"",question:""},coursePreview:{finalReportLabel:" ",finalReportNav:" ",finalReportHeading:" ",finalReportSummary:"{correct} / {total}    {accuracy}",sectionCorrectSummary:"{correct} / {total} ",tryAgainButton:" ",slideFallback:"",questionFallback:"",instructionDefault:" ,  ",instructionSingle:"    ",instructionMultiple:"   ",submitButton:"",backButton:"",nextButton:"",feedbackCorrect:"!",feedbackIncorrect:"",progress:"{current} / {total}"}},sp={en:xV,ru:kV},wV=()=>{if(typeof window>"u")return"en";const t=window.localStorage.getItem("locale");if(t&&t in sp)return t;const e=window.navigator.language?.split("-")[0]?.toLowerCase();return e&&e in sp?e:"en"},EV=wV(),SV=YT({legacy:!1,locale:EV,fallbackLocale:"en",messages:sp});zS(OO).use(bV).use(SV).mount("#app");
